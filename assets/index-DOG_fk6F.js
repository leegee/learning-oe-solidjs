(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const ba=!0,_a=(e,t)=>e===t,Ve=Symbol("solid-proxy"),wa=typeof Proxy=="function",_r=Symbol("solid-track"),Sa=Symbol("solid-dev-component"),Nn={equals:_a};let Ro=To;const Be=1,In=2,Ca={},er={};var oe=null;let tr=null,Ea=null,he=null,Ee=null,We=null,zn=0;const Pa={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function pt(e,t){const n=he,r=oe,o=e.length===0,s=t===void 0?r:t,a=o?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=o?()=>e(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>e(()=>be(()=>Ot(a)));oe=a,he=null;try{return Fe(i,!0)}finally{he=n,oe=r}}function G(e,t){t=t?Object.assign({},Nn,t):Nn;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0};t.name&&(n.name=t.name),t.internal?n.internal=!0:Ao(n);const r=o=>(typeof o=="function"&&(o=o(n.value)),Ir(n,o));return[jo.bind(n),r]}function ka(e,t,n){const r=jt(e,t,!0,Be,n);it(r)}function Z(e,t,n){const r=jt(e,t,!1,Be,n);it(r)}function ge(e,t,n){Ro=Ta;const r=jt(e,t,!1,Be,n);r.user=!0,We?We.push(r):it(r)}function W(e,t,n){n=n?Object.assign({},Nn,n):Nn;const r=jt(e,t,!0,0,n);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,it(r),jo.bind(r)}function Oa(e){return e&&typeof e=="object"&&"then"in e}function pe(e,t,n){let r,o,s;r=!0,o=e,s={};let a=null,i=er,c=!1,d="initialValue"in s,u=typeof r=="function"&&W(r);const m=new Set,[p,y]=(s.storage||G)(s.initialValue),[_,v]=G(void 0),[f,h]=G(void 0,{equals:!1}),[l,g]=G(d?"ready":"unresolved");function b(P,T,R,N){return a===P&&(a=null,N!==void 0&&(d=!0),(P===i||T===i)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(N,{value:T})),i=er,$(T,R)),T}function $(P,T){Fe(()=>{T===void 0&&y(()=>P),g(T!==void 0?"errored":d?"ready":"unresolved"),v(T);for(const R of m.keys())R.decrement();m.clear()},!1)}function w(){const P=La,T=p(),R=_();if(R!==void 0&&!a)throw R;return he&&he.user,T}function C(P=!0){if(P!==!1&&c)return;c=!1;const T=u?u():r;if(T==null||T===!1){b(a,be(p));return}const R=i!==er?i:be(()=>o(T,{value:p(),refetching:P}));return Oa(R)?(a=R,"value"in R?(R.status==="success"?b(a,R.value,void 0,T):b(a,void 0,Sr(R.value),T),R):(c=!0,queueMicrotask(()=>c=!1),Fe(()=>{g(d?"refreshing":"pending"),h()},!1),R.then(N=>b(R,N,void 0,T),N=>b(R,void 0,Sr(N),T)))):(b(a,R,void 0,T),R)}return Object.defineProperties(w,{state:{get:()=>l()},error:{get:()=>_()},loading:{get(){const P=l();return P==="pending"||P==="refreshing"}},latest:{get(){if(!d)return w();const P=_();if(P&&!a)throw P;return p()}}}),u?ka(()=>C(!1)):C(!1),[w,{refetch:C,mutate:y}]}function No(e){return Fe(e,!1)}function be(e){if(he===null)return e();const t=he;he=null;try{return e()}finally{he=t}}function Nr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return a=>{let i;if(r){i=Array(e.length);for(let d=0;d<e.length;d++)i[d]=e[d]()}else i=e();if(s)return s=!1,a;const c=be(()=>t(i,o,a));return o=i,c}}function Ra(e){ge(()=>be(e))}function Ge(e){return oe===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):oe.cleanups===null?oe.cleanups=[e]:oe.cleanups.push(e),e}function wr(){return he}function Io(){return oe}function Lo(e,t){const n=oe,r=he;oe=e,he=null;try{return Fe(t,!0)}catch(o){Lr(o)}finally{oe=n,he=r}}function Na(e){const t=he,n=oe;return Promise.resolve().then(()=>{he=t,oe=n;let r;return Fe(e,!1),he=oe=null,r?r.done:void 0})}const[gf,pf]=G(!1);function Ia(e,t){const n=jt(()=>be(()=>(Object.assign(e,{[Sa]:!0}),e(t))),void 0,!0,0);return n.props=t,n.observers=null,n.observerSlots=null,n.name=e.name,n.component=e,it(n),n.tValue!==void 0?n.tValue:n.value}function Ao(e){oe&&(oe.sourceMap?oe.sourceMap.push(e):oe.sourceMap=[e],e.graph=oe)}function Lt(e,t){const n=Symbol("context");return{id:n,Provider:xa(n,t),defaultValue:e}}function At(e){let t;return oe&&oe.context&&(t=oe.context[e.id])!==void 0?t:e.defaultValue}function $t(e){const t=W(e),n=W(()=>Cr(t()),void 0,{name:"children"});return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let La;function jo(){if(this.sources&&this.state)if(this.state===Be)it(this);else{const e=Ee;Ee=null,Fe(()=>An(this),!1),Ee=e}if(he){const e=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(e)):(he.sources=[this],he.sourceSlots=[e]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function Ir(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],a=tr&&tr.running;a&&tr.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Ee.push(s):We.push(s),s.observers&&xo(s)),a||(s.state=Be)}if(Ee.length>1e6)throw Ee=[],ba?new Error("Potential Infinite Loop Detected."):new Error},!1)),t}function it(e){if(!e.fn)return;Ot(e);const t=zn;Aa(e,e.value,t)}function Aa(e,t,n){let r;const o=oe,s=he;he=oe=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=Be,e.owned&&e.owned.forEach(Ot),e.owned=null),e.updatedAt=n+1,Lr(a)}finally{he=s,oe=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ir(e,r):e.value=r,e.updatedAt=n)}function jt(e,t,n,r=Be,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:oe,context:oe?oe.context:null,pure:n};return oe===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):oe!==Ca&&(oe.owned?oe.owned.push(s):oe.owned=[s]),o&&o.name&&(s.name=o.name),s}function Ln(e){if(e.state===0)return;if(e.state===In)return An(e);if(e.suspense&&be(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<zn);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Be)it(e);else if(e.state===In){const r=Ee;Ee=null,Fe(()=>An(e,t[0]),!1),Ee=r}}function Fe(e,t){if(Ee)return e();let n=!1;t||(Ee=[]),We?n=!0:We=[],zn++;try{const r=e();return ja(n),r}catch(r){n||(We=null),Ee=null,Lr(r)}}function ja(e){if(Ee&&(To(Ee),Ee=null),e)return;const t=We;We=null,t.length&&Fe(()=>Ro(t),!1)}function To(e){for(let t=0;t<e.length;t++)Ln(e[t])}function Ta(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ln(r)}for(t=0;t<n;t++)Ln(e[t])}function An(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===Be?r!==t&&(!r.updatedAt||r.updatedAt<zn)&&Ln(r):o===In&&An(r,t)}}}function xo(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=In,n.pure?Ee.push(n):We.push(n),n.observers&&xo(n))}}function Ot(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),a=n.observerSlots.pop();r<o.length&&(s.sourceSlots[a]=r,o[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ot(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ot(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,delete e.sourceMap}function Sr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Lr(e,t=oe){throw Sr(e)}function Cr(e){if(typeof e=="function"&&!e.length)return Cr(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Cr(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function xa(e,t){return function(r){let o;return Z(()=>o=be(()=>(oe.context={...oe.context,[e]:r.value},$t(()=>r.children))),void 0,t),o}}const qa=Symbol("fallback");function Fr(e){for(let t=0;t<e.length;t++)e[t]()}function Da(e,t,n={}){let r=[],o=[],s=[],a=0,i=t.length>1?[]:null;return Ge(()=>Fr(s)),()=>{let c=e()||[],d=c.length,u,m;return c[_r],be(()=>{let y,_,v,f,h,l,g,b,$;if(d===0)a!==0&&(Fr(s),s=[],r=[],o=[],a=0,i&&(i=[])),n.fallback&&(r=[qa],o[0]=pt(w=>(s[0]=w,n.fallback())),a=1);else if(a===0){for(o=new Array(d),m=0;m<d;m++)r[m]=c[m],o[m]=pt(p);a=d}else{for(v=new Array(d),f=new Array(d),i&&(h=new Array(d)),l=0,g=Math.min(a,d);l<g&&r[l]===c[l];l++);for(g=a-1,b=d-1;g>=l&&b>=l&&r[g]===c[b];g--,b--)v[b]=o[g],f[b]=s[g],i&&(h[b]=i[g]);for(y=new Map,_=new Array(b+1),m=b;m>=l;m--)$=c[m],u=y.get($),_[m]=u===void 0?-1:u,y.set($,m);for(u=l;u<=g;u++)$=r[u],m=y.get($),m!==void 0&&m!==-1?(v[m]=o[u],f[m]=s[u],i&&(h[m]=i[u]),m=_[m],y.set($,m)):s[u]();for(m=l;m<d;m++)m in v?(o[m]=v[m],s[m]=f[m],i&&(i[m]=h[m],i[m](m))):o[m]=pt(p);o=o.slice(0,a=d),r=c.slice(0)}return o});function p(y){if(s[m]=y,i){const[_,v]=G(m,{name:"index"});return i[m]=v,t(c[m],_)}return t(c[m])}}}function A(e,t){return Ia(e,t||{})}function Dt(){return!0}const Ma={get(e,t,n){return t===Ve?n:e.get(t)},has(e,t){return t===Ve?!0:e.has(t)},set:Dt,deleteProperty:Dt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Dt,deleteProperty:Dt}},ownKeys(e){return e.keys()}};function nr(e){return(e=typeof e=="function"?e():e)?e:{}}function Va(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Fa(...e){let t=!1;for(let a=0;a<e.length;a++){const i=e[a];t=t||!!i&&Ve in i,e[a]=typeof i=="function"?(t=!0,W(i)):i}if(wa&&t)return new Proxy({get(a){for(let i=e.length-1;i>=0;i--){const c=nr(e[i])[a];if(c!==void 0)return c}},has(a){for(let i=e.length-1;i>=0;i--)if(a in nr(e[i]))return!0;return!1},keys(){const a=[];for(let i=0;i<e.length;i++)a.push(...Object.keys(nr(e[i])));return[...new Set(a)]}},Ma);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const i=e[a];if(!i)continue;const c=Object.getOwnPropertyNames(i);for(let d=c.length-1;d>=0;d--){const u=c[d];if(u==="__proto__"||u==="constructor")continue;const m=Object.getOwnPropertyDescriptor(i,u);if(!r[u])r[u]=m.get?{enumerable:!0,configurable:!0,get:Va.bind(n[u]=[m.get.bind(i)])}:m.value!==void 0?m:void 0;else{const p=n[u];p&&(m.get?p.push(m.get.bind(i)):m.value!==void 0&&p.push(()=>m.value))}}}const o={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){const i=s[a],c=r[i];c&&c.get?Object.defineProperty(o,i,c):o[i]=c?c.value:void 0}return o}let Ua=0;function Ka(){return`cl-${Ua++}`}const qo=e=>`Attempting to access a stale value from <${e}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function at(e){const t="fallback"in e&&{fallback:()=>e.fallback};return W(Da(()=>e.each,e.children,t||void 0),void 0,{name:"value"})}function ae(e){const t=e.keyed,n=W(()=>e.when,void 0,{name:"condition value"}),r=t?n:W(n,void 0,{equals:(o,s)=>!o==!s,name:"condition"});return W(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?be(()=>s(t?o:()=>{if(!be(r))throw qo("Show");return n()})):s}return e.fallback},void 0,{name:"value"})}function za(e){const t=$t(()=>e.children),n=W(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let a=0;a<o.length;a++){const i=a,c=o[a],d=s,u=W(()=>d()?void 0:c.when,void 0,{name:"condition value"}),m=c.keyed?u:W(u,void 0,{equals:(p,y)=>!p==!y,name:"condition"});s=()=>d()||(m()?[i,u,c]:void 0)}return s});return W(()=>{const r=n()();if(!r)return e.fallback;const[o,s,a]=r,i=a.children;return typeof i=="function"&&i.length>0?be(()=>i(a.keyed?s():()=>{if(be(n)()?.[0]!==o)throw qo("Match");return s()})):i},void 0,{name:"eval conditions"})}function Ze(e){return e}const Ha={hooks:Pa,writeSignal:Ir,registerGraph:Ao};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);function Wa(e,t,n){let r=n.length,o=t.length,s=r,a=0,i=0,c=t[o-1].nextSibling,d=null;for(;a<o||i<s;){if(t[a]===n[i]){a++,i++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===a){const u=s<r?i?n[i-1].nextSibling:n[s-i]:c;for(;i<s;)e.insertBefore(n[i++],u)}else if(s===i)for(;a<o;)(!d||!d.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[i]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[i++],t[a++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!d){d=new Map;let m=i;for(;m<s;)d.set(n[m],m++)}const u=d.get(t[a]);if(u!=null)if(i<u&&u<s){let m=a,p=1,y;for(;++m<o&&m<s&&!((y=d.get(t[m]))==null||y!==u+p);)p++;if(p>u-i){const _=t[a];for(;i<u;)e.insertBefore(n[i++],_)}else e.replaceChild(n[i++],t[a++])}else a++;else t[a++].remove()}}}const Ur="_$DX_DELEGATE";function Ba(e,t,n,r={}){if(!t)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let o;return pt(s=>{o=s,t===document?e():j(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function M(e,t,n,r){let o;const s=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},a=()=>(o||(o=s())).cloneNode(!0);return a.cloneNode=a,a}function le(e,t=window.document){const n=t[Ur]||(t[Ur]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Ga))}}function Y(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ke(e,t){t==null?e.removeAttribute("class"):e.className=t}function Rt(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function ot(e,t,n){return be(()=>e(t,n))}function j(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return jn(e,t,r,n);Z(o=>jn(e,t(),o,n),r)}function Ga(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),a=()=>{const c=t[n];if(c&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?c.call(t,d,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},i=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();s(c[0]);for(let d=0;d<c.length-2&&(t=c[d],!!a());d++){if(t._$host){t=t._$host,i();break}if(t.parentNode===o)break}}else i();s(r)}function jn(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(a){let i=n[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),n=ct(e,n,r,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=ct(e,n,r);else{if(s==="function")return Z(()=>{let i=t();for(;typeof i=="function";)i=i();n=jn(e,i,n,r)}),()=>n;if(Array.isArray(t)){const i=[],c=n&&Array.isArray(n);if(Er(i,t,n,o))return Z(()=>n=jn(e,i,n,r,!0)),()=>n;if(i.length===0){if(n=ct(e,n,r),a)return n}else c?n.length===0?Kr(e,i,r):Wa(e,n,i):(n&&ct(e),Kr(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=ct(e,n,r,t);ct(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Er(e,t,n,r){let o=!1;for(let s=0,a=t.length;s<a;s++){let i=t[s],c=n&&n[e.length],d;if(!(i==null||i===!0||i===!1))if((d=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))o=Er(e,i,c)||o;else if(d==="function")if(r){for(;typeof i=="function";)i=i();o=Er(e,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||o}else e.push(i),o=!0;else{const u=String(i);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function Kr(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ct(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const i=t[a];if(o!==i){const c=i.parentNode===e;!s&&!a?c?e.replaceChild(o,i):e.insertBefore(o,n):c&&i.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Ja=!1,Qa="modulepreload",Xa=function(e){return"/learning-oe-solidjs/"+e},zr={},rt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");o=Promise.allSettled(n.map(c=>{if(c=Xa(c),c in zr)return;zr[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Qa,d||(m.as="script"),m.crossOrigin="",m.href=c,i&&m.setAttribute("nonce",i),document.head.appendChild(m),d)return new Promise((p,y)=>{m.addEventListener("load",p),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},Ya=["targetLanguage","defaultLanguage","appTitle","i18n"];let Mt;const Do=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;for(const n in t)t[n]&&typeof t[n]=="object"&&!Array.isArray(t[n])?((!e[n]||typeof e[n]!="object")&&(e[n]={}),Do(e[n],t[n])):e[n]=t[n];return e},Mo=async()=>Mt||(Mt=(async()=>{let e,t;try{e=(await rt(async()=>{const{default:o}=await import("./default.config-C-p_k8Fb.js");return{default:o}},[])).default}catch{throw new Error("Default config file did not properly load")}try{t=(await rt(async()=>{const{default:o}=await import("./app.config-BgdfBHtv.js");return{default:o}},[])).default}catch{throw new Error('Config file "app.config.json" did not properly load')}const n=Do(e,t);let r=!0;if(Ya.forEach(o=>{n[o]||(console.warn(`app.config.json should contain the "${o}" key`),r=!1)}),!r)throw new Error("Invalid configuration file JSON.");return n})(),Mt),X=e=>typeof e=="string",_t=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},Hr=e=>e==null?"":""+e,Za=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},ei=/###/g,Wr=e=>e&&e.indexOf("###")>-1?e.replace(ei,"."):e,Br=e=>!e||X(e),Pt=(e,t,n)=>{const r=X(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(Br(e))return{};const s=Wr(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return Br(e)?{}:{obj:e,k:Wr(r[o])}},Gr=(e,t,n)=>{const{obj:r,k:o}=Pt(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],a=t.slice(0,t.length-1),i=Pt(e,a,Object);for(;i.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),i=Pt(e,a,Object),i?.obj&&typeof i.obj[`${i.k}.${s}`]<"u"&&(i.obj=void 0);i.obj[`${i.k}.${s}`]=n},ti=(e,t,n,r)=>{const{obj:o,k:s}=Pt(e,t,Object);o[s]=o[s]||[],o[s].push(n)},Tn=(e,t)=>{const{obj:n,k:r}=Pt(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ni=(e,t,n)=>{const r=Tn(e,n);return r!==void 0?r:Tn(t,n)},Vo=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?X(e[r])||e[r]instanceof String||X(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Vo(e[r],t[r],n):e[r]=t[r]);return e},ut=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ri={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const si=e=>X(e)?e.replace(/[&<>"'\/]/g,t=>ri[t]):e;class oi{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const ai=[" ",",","?","!",";"],ii=new oi(20),li=(e,t,n)=>{t=t||"",n=n||"";const r=ai.filter(a=>t.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const o=ii.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!o.test(e);if(!s){const a=e.indexOf(n);a>0&&!o.test(e.substring(0,a))&&(s=!0)}return s},Pr=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let a,i="";for(let c=s;c<r.length;++c)if(c!==s&&(i+=n),i+=r[c],a=o[i],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<r.length-1)continue;s+=c-s+1;break}o=a}return o},xn=e=>e?.replace("_","-"),ci={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class qn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||ci,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(X(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new qn(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new qn(this.logger,t)}}var De=new qn;class Hn{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[i,c]=a;for(let d=0;d<c;d++)i(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[i,c]=a;for(let d=0;d<c;d++)i.apply(i,[t,...r])})}}class Jr extends Hn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let i;t.indexOf(".")>-1?i=t.split("."):(i=[t,n],r&&(Array.isArray(r)?i.push(...r):X(r)&&s?i.push(...r.split(s)):i.push(r)));const c=Tn(this.data,i);return!c&&!n&&!r&&t.indexOf(".")>-1&&(t=i[0],n=i[1],r=i.slice(2).join(".")),c||!a||!X(r)?c:Pr(this.data?.[t]?.[n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=[t,n];r&&(i=i.concat(a?r.split(a):r)),t.indexOf(".")>-1&&(i=t.split("."),o=n,n=i[1]),this.addNamespaces(n),Gr(this.data,i,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},i=[t,n];t.indexOf(".")>-1&&(i=t.split("."),o=r,r=n,n=i[1]),this.addNamespaces(n);let c=Tn(this.data,i)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Vo(c,r,s):c={...c,...r},Gr(this.data,i,c),a.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var Fo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{t=this.processors[s]?.process(t,n,r,o)??t}),t}};const Qr={},Xr=e=>!X(e)&&typeof e!="boolean"&&typeof e!="number";class Dn extends Hn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Za(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=De.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=r&&t.indexOf(r)>-1,i=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!li(t,r,o);if(a&&!i){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:X(s)?[s]:s};const d=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),t=d.join(o)}return{key:t,namespaces:X(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:i}=this.extractFromKey(t[t.length-1],n),c=i[i.length-1],d=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(u){const N=n.nsSeparator||this.options.nsSeparator;return o?{res:`${c}${N}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${N}${a}`}return o?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:a}const m=this.resolve(t,n);let p=m?.res;const y=m?.usedKey||a,_=m?.exactUsedKey||a,v=["[object Number]","[object Function]","[object RegExp]"],f=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,h=!this.i18nFormat||this.i18nFormat.handleAsObject,l=n.count!==void 0&&!X(n.count),g=Dn.hasDefaultValue(n),b=l?this.pluralResolver.getSuffix(d,n.count,n):"",$=n.ordinal&&l?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",w=l&&!n.ordinal&&n.count===0,C=w&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${b}`]||n[`defaultValue${$}`]||n.defaultValue;let P=p;h&&!p&&g&&(P=C);const T=Xr(P),R=Object.prototype.toString.apply(P);if(h&&P&&T&&v.indexOf(R)<0&&!(X(f)&&Array.isArray(P))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,P,{...n,ns:i}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(m.res=N,m.usedParams=this.getUsedParamsDetails(n),m):N}if(s){const N=Array.isArray(P),D=N?[]:{},z=N?_:y;for(const U in P)if(Object.prototype.hasOwnProperty.call(P,U)){const H=`${z}${s}${U}`;g&&!p?D[U]=this.translate(H,{...n,defaultValue:Xr(C)?C[U]:void 0,joinArrays:!1,ns:i}):D[U]=this.translate(H,{...n,joinArrays:!1,ns:i}),D[U]===H&&(D[U]=P[U])}p=D}}else if(h&&X(f)&&Array.isArray(p))p=p.join(f),p&&(p=this.extendTranslation(p,t,n,r));else{let N=!1,D=!1;!this.isValidLookup(p)&&g&&(N=!0,p=C),this.isValidLookup(p)||(D=!0,p=a);const U=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&D?void 0:p,H=g&&C!==p&&this.options.updateMissing;if(D||N||H){if(this.logger.log(H?"updateKey":"missingKey",d,c,a,H?C:p),s){const ce=this.resolve(a,{...n,keySeparator:!1});ce&&ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ne=[];const me=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&me&&me[0])for(let ce=0;ce<me.length;ce++)ne.push(me[ce]);else this.options.saveMissingTo==="all"?ne=this.languageUtils.toResolveHierarchy(n.lng||this.language):ne.push(n.lng||this.language);const se=(ce,F,O)=>{const q=g&&O!==p?O:U;this.options.missingKeyHandler?this.options.missingKeyHandler(ce,c,F,q,H,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ce,c,F,q,H,n),this.emit("missingKey",ce,c,F,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&l?ne.forEach(ce=>{const F=this.pluralResolver.getSuffixes(ce,n);w&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(O=>{se([ce],a+O,n[`defaultValue${O}`]||C)})}):se(ne,a,C))}p=this.extendTranslation(p,t,n,m,r),D&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${a}`),(D||N)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,N?p:void 0))}return o?(m.res=p,m.usedParams=this.getUsedParamsDetails(n),m):p}extendTranslation(t,n,r,o,s){var a=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=X(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const p=t.match(this.interpolator.nestingRegexp);u=p&&p.length}let m=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,r.lng||this.language||o.usedLng,r),d){const p=t.match(this.interpolator.nestingRegexp),y=p&&p.length;u<y&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var p=arguments.length,y=new Array(p),_=0;_<p;_++)y[_]=arguments[_];return s?.[0]===y[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${n[0]}`),null):a.translate(...y,n)},r)),r.interpolation&&this.interpolator.reset()}const i=r.postProcess||this.options.postProcess,c=X(i)?[i]:i;return t!=null&&c?.length&&r.applyPostProcessor!==!1&&(t=Fo.handle(c,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,a,i;return X(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,n),u=d.key;o=u;let m=d.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const p=n.count!==void 0&&!X(n.count),y=p&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);m.forEach(f=>{this.isValidLookup(r)||(i=f,!Qr[`${v[0]}-${f}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(i)&&(Qr[`${v[0]}-${f}`]=!0,this.logger.warn(`key "${o}" for languages "${v.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(h=>{if(this.isValidLookup(r))return;a=h;const l=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(l,u,h,f,n);else{let b;p&&(b=this.pluralResolver.getSuffix(h,n.count,n));const $=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(l.push(u+b),n.ordinal&&b.indexOf(w)===0&&l.push(u+b.replace(w,this.options.pluralSeparator)),y&&l.push(u+$)),_){const C=`${u}${this.options.contextSeparator}${n.context}`;l.push(C),p&&(l.push(C+b),n.ordinal&&b.indexOf(w)===0&&l.push(C+b.replace(w,this.options.pluralSeparator)),y&&l.push(C+$))}}let g;for(;g=l.pop();)this.isValidLookup(r)||(s=g,r=this.getResource(h,f,g,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:a,usedNS:i}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!X(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Yr{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=De.create("languageUtils")}getScriptPartFromCode(t){if(t=xn(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=xn(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(X(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),X(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return X(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):X(t)&&s(this.formatLanguageCode(t)),r.forEach(a=>{o.indexOf(a)<0&&s(this.formatLanguageCode(a))}),o}}const Zr={zero:0,one:1,two:2,few:3,many:4,other:5},es={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ui{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=De.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=xn(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),es;if(!t.match(/-|_/))return es;const c=this.languageUtils.getLanguagePartFromCode(t);a=this.getRule(c,n)}return this.pluralRulesCache[s]=a,a}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>Zr[o]-Zr[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const ts=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=ni(e,t,n);return!s&&o&&X(n)&&(s=Pr(e,n,r),s===void 0&&(s=Pr(t,n,r))),s},rr=e=>e.replace(/\$/g,"$$$$");class di{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:a,suffix:i,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:m,nestingPrefix:p,nestingPrefixEscaped:y,nestingSuffix:_,nestingSuffixEscaped:v,nestingOptionsSeparator:f,maxReplaces:h,alwaysFormat:l}=t.interpolation;this.escape=n!==void 0?n:si,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ut(s):a||"{{",this.suffix=i?ut(i):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=p?ut(p):y||ut("$t("),this.nestingSuffix=_?ut(_):v||ut(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=h||1e3,this.alwaysFormat=l!==void 0?l:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,a,i;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=y=>{if(y.indexOf(this.formatSeparator)<0){const h=ts(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(h,void 0,r,{...o,...n,interpolationkey:y}):h}const _=y.split(this.formatSeparator),v=_.shift().trim(),f=_.join(this.formatSeparator).trim();return this.format(ts(n,c,v,this.options.keySeparator,this.options.ignoreJSONStructure),f,r,{...o,...n,interpolationkey:v})};this.resetRegExp();const u=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,m=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>rr(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?rr(this.escape(y)):rr(y)}].forEach(y=>{for(i=0;s=y.regex.exec(t);){const _=s[1].trim();if(a=d(_),a===void 0)if(typeof u=="function"){const f=u(t,s,o);a=X(f)?f:""}else if(o&&Object.prototype.hasOwnProperty.call(o,_))a="";else if(m){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${t}`),a="";else!X(a)&&!this.useRawValueToEscape&&(a=Hr(a));const v=y.safeValue(a);if(t=t.replace(s[0],v),m?(y.regex.lastIndex+=a.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,i++,i>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,a;const i=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const m=c.split(new RegExp(`${u}[ ]*{`));let p=`{${m[1]}`;c=m[0],p=this.interpolate(p,a);const y=p.match(/'/g),_=p.match(/"/g);((y?.length??0)%2===0&&!_||_.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),d&&(a={...d,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,v),`${c}${u}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;o=this.nestingRegexp.exec(t);){let c=[];a={...r},a=a.replace&&!X(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const u=o[1].split(this.formatSeparator).map(m=>m.trim());o[1]=u.shift(),c=u,d=!0}if(s=n(i.call(this,o[1].trim(),a),a),s&&o[0]===t&&!X(s))return s;X(s)||(s=Hr(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),d&&(s=c.reduce((u,m)=>this.format(u,m,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const fi=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(a=>{if(a){const[i,...c]=a.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=i.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},dt=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const a=r+JSON.stringify(s);let i=t[a];return i||(i=e(xn(r),o),t[a]=i),i(n)}};class hi{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("formatter"),this.options=t,this.formats={number:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:dt((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:dt((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:dt((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=dt(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(i=>i.indexOf(")")>-1)){const i=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,i)].join(this.formatSeparator)}return s.reduce((i,c)=>{const{formatName:d,formatOptions:u}=fi(c);if(this.formats[d]){let m=i;try{const p=o?.formatParams?.[o.interpolationkey]||{},y=p.locale||p.lng||o.locale||o.lng||r;m=this.formats[d](i,y,{...u,...o,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${d}`);return i},t)}}const mi=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class gi extends Hn{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=De.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(t,n,r,o){const s={},a={},i={},c={};return t.forEach(d=>{let u=!0;n.forEach(m=>{const p=`${d}|${m}`;!r.reload&&this.store.hasResourceBundle(d,m)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,u=!1,a[p]===void 0&&(a[p]=!0),s[p]===void 0&&(s[p]=!0),c[m]===void 0&&(c[m]=!0)))}),u||(i[d]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(c)}}loaded(t,n,r){const o=t.split("|"),s=o[0],a=o[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const i={};this.queue.forEach(c=>{ti(c.loaded,[s],a),mi(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{i[d]||(i[d]={});const u=c.loaded[d];u.length&&u.forEach(m=>{i[d][m]===void 0&&(i[d][m]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(c=>!c.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:a});return}this.readingCalls++;const i=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(d&&u&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,a)},s);return}a(d,u)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(t,n);d&&typeof d.then=="function"?d.then(u=>i(null,u)).catch(i):i(null,d)}catch(d){i(d)}return}return c(t,n,i)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();X(t)&&(t=this.languageUtils.toResolveHierarchy(t)),X(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(a,i)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,a),!a&&i&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,i),this.loaded(t,a,i)})}saveMissing(t,n,r,o,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...a,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(t,n,r,o,c):u=d(t,n,r,o),u&&typeof u.then=="function"?u.then(m=>i(null,m)).catch(i):i(null,u)}catch(u){i(u)}else d(t,n,r,o,i,c)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const ns=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),X(e[1])&&(t.defaultValue=e[1]),X(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),rs=e=>(X(e.ns)&&(e.ns=[e.ns]),X(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),X(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Vt=()=>{},pi=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Nt extends Hn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=rs(t),this.services={},this.logger=De,this.modules={external:[]},pi(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(X(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=ns();this.options={...o,...this.options,...rs(n)},this.options.interpolation={...o.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?De.init(s(this.modules.logger),this.options):De.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=hi;const m=new Yr(this.options);this.store=new Jr(this.options.resources,this.options);const p=this.services;p.logger=De,p.resourceStore=this.store,p.languageUtils=m,p.pluralResolver=new ui(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=s(u),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new di(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new gi(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(y){for(var _=arguments.length,v=new Array(_>1?_-1:0),f=1;f<_;f++)v[f-1]=arguments[f];t.emit(y,...v)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Dn(this.services,this.options),this.translator.on("*",function(y){for(var _=arguments.length,v=new Array(_>1?_-1:0),f=1;f<_;f++)v[f-1]=arguments[f];t.emit(y,...v)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Vt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const c=_t(),d=()=>{const u=(m,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),r(m,p)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const o=X(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],a=i=>{if(!i||i==="cimode")return;this.services.languageUtils.toResolveHierarchy(i).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(i=>a(i)),this.services.backendConnector.load(s,this.options.ns,i=>{!i&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(i)})}else r(null)}reloadResources(t,n,r){const o=_t();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Vt),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Fo.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=_t();this.emit("languageChanging",t);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},i=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=X(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,u=>{a(u,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(t),o}getFixedT(t,n,r){var o=this;const s=function(a,i){let c;if(typeof i!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),m=2;m<d;m++)u[m-2]=arguments[m];c=o.options.overloadTranslationOptionHandler([a,i].concat(u))}else c={...i};c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||s.keyPrefix);const p=o.options.keySeparator||".";let y;return c.keyPrefix&&Array.isArray(a)?y=a.map(_=>`${c.keyPrefix}${p}${_}`):y=c.keyPrefix?`${c.keyPrefix}${p}${a}`:a,o.t(y,c)};return X(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(i,c)=>{const d=this.services.backendConnector.state[`${i}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const i=n.precheck(this,a);if(i!==void 0)return i}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,t)&&(!o||a(s,t)))}loadNamespaces(t,n){const r=_t();return this.options.ns?(X(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=_t();X(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=o.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Yr(ns());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Nt(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new Nt(o);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(i=>{s[i]=this[i]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const i=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},Object.keys(c[d]).reduce((u,m)=>(u[m]={...c[d][m]},u),{})),{});s.store=new Jr(i,o),s.services.resourceStore=s.store}return s.translator=new Dn(s.services,o),s.translator.on("*",function(i){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];s.emit(i,...d)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=Nt.createInstance();ye.createInstance=Nt.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;var yi=M("<div>Loading i18n...");const vi={t:(...e)=>ye.t(...e),language:()=>ye.language,setLanguage:e=>ye.changeLanguage(e)},Uo=Lt(vi),$i=async e=>{const t=Object.fromEntries(Object.entries(e.i18n.availableLanguages).map(([n,r])=>[n,{translation:r}]));await ye.init({resources:t,lng:e.uiLanguage||e.targetLanguage||e.defaultLanguage,fallbackLng:e.defaultLanguage,interpolation:{escapeValue:!1}})},bi=e=>{const t=$t(()=>e.children),[n,r]=G(ye.language),[o,s]=G(!1),a=ye.t;return ge(()=>{r(ye.language),ye.on("languageChanged",r),s(!0)}),o()?A(Uo.Provider,{value:{t:a,language:n,setLanguage:r},get children(){return t()}}):yi()},$e=()=>{const e=At(Uo);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},kr=Symbol("store-raw"),yt=Symbol("store-node"),He=Symbol("store-has"),Ko=Symbol("store-self");function zo(e){let t=e[Ve];if(!t&&(Object.defineProperty(e,Ve,{value:t=new Proxy(e,Si)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const a=n[o];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Xe(e){let t;return e!=null&&typeof e=="object"&&(e[Ve]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function vt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[kr])return n;if(!Xe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,i=e.length;a<i;a++)o=e[a],(r=vt(o,t))!==o&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let c=0,d=a.length;c<d;c++)s=a[c],!i[s].get&&(o=e[s],(r=vt(o,t))!==o&&(e[s]=r))}return e}function Mn(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function It(e,t,n){if(e[t])return e[t];const[r,o]=G(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function _i(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ve||t===yt||(delete n.value,delete n.writable,n.get=()=>e[Ve][t]),n}function Ho(e){wr()&&It(Mn(e,yt),Ko)()}function wi(e){return Ho(e),Reflect.ownKeys(e)}const Si={get(e,t,n){if(t===kr)return e;if(t===Ve)return n;if(t===_r)return Ho(e),n;const r=Mn(e,yt),o=r[t];let s=o?o():e[t];if(t===yt||t===He||t==="__proto__")return s;if(!o){const a=Object.getOwnPropertyDescriptor(e,t);wr()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=It(r,t,s)())}return Xe(s)?zo(s):s},has(e,t){return t===kr||t===Ve||t===_r||t===yt||t===He||t==="__proto__"?!0:(wr()&&It(Mn(e,He),t)(),t in e)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:wi,getOwnPropertyDescriptor:_i};function Ae(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[He]&&e[He][t]&&o!==void 0&&e[He][t].$()):(e[t]=n,e[He]&&e[He][t]&&o===void 0&&e[He][t].$());let a=Mn(e,yt),i;if((i=It(a,t,o))&&i.$(()=>n),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(i=a[c])&&i.$();(i=It(a,"length",s))&&i.$(e.length)}(i=a[Ko])&&i.$()}function Wo(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ae(e,o,t[o])}}function Ci(e,t){if(typeof t=="function"&&(t=t(e)),t=vt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Ae(e,n,o)}Ae(e,"length",r)}else Wo(e,t)}function Et(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const a=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Et(e,[r[c]].concat(t),n);return}else if(i&&a==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&Et(e,[c].concat(t),n);return}else if(i&&a==="object"){const{from:c=0,to:d=e.length-1,by:u=1}=r;for(let m=c;m<=d;m+=u)Et(e,[m].concat(t),n);return}else if(t.length>1){Et(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=vt(s),r===void 0||Xe(o)&&Xe(s)&&!Array.isArray(s)?Wo(o,s):Ae(e,r,s))}function Bo(...[e,t]){const n=vt(e||{}),r=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const o=zo(n);Ha.registerGraph({value:n,name:t&&t.name});function s(...a){No(()=>{r&&a.length===1?Ci(n,a[0]):Et(n,a)})}return[o,s]}const Or=Symbol("store-root");function gt(e,t,n,r,o){const s=t[n];if(e===s)return;const a=Array.isArray(e);if(n!==Or&&(!Xe(e)||!Xe(s)||a!==Array.isArray(s)||o&&e[o]!==s[o])){Ae(t,n,e);return}if(a){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,u,m,p,y,_,v,f;for(m=0,p=Math.min(s.length,e.length);m<p&&(s[m]===e[m]||o&&s[m]&&e[m]&&s[m][o]===e[m][o]);m++)gt(e[m],s,m,r,o);const h=new Array(e.length),l=new Map;for(p=s.length-1,y=e.length-1;p>=m&&y>=m&&(s[p]===e[y]||o&&s[p]&&e[y]&&s[p][o]===e[y][o]);p--,y--)h[y]=s[p];if(m>y||m>p){for(u=m;u<=y;u++)Ae(s,u,e[u]);for(;u<e.length;u++)Ae(s,u,h[u]),gt(e[u],s,u,r,o);s.length>e.length&&Ae(s,"length",e.length);return}for(v=new Array(y+1),u=y;u>=m;u--)_=e[u],f=o&&_?_[o]:_,d=l.get(f),v[u]=d===void 0?-1:d,l.set(f,u);for(d=m;d<=p;d++)_=s[d],f=o&&_?_[o]:_,u=l.get(f),u!==void 0&&u!==-1&&(h[u]=s[d],u=v[u],l.set(f,u));for(u=m;u<e.length;u++)u in h?(Ae(s,u,h[u]),gt(e[u],s,u,r,o)):Ae(s,u,e[u])}else for(let d=0,u=e.length;d<u;d++)gt(e[d],s,d,r,o);s.length>e.length&&Ae(s,"length",e.length);return}const i=Object.keys(e);for(let d=0,u=i.length;d<u;d++)gt(e[i[d]],s,i[d],r,o);const c=Object.keys(s);for(let d=0,u=c.length;d<u;d++)e[c[d]]===void 0&&Ae(s,c[d],void 0)}function Ei(e,t={}){const{merge:n,key:r="id"}=t,o=vt(e);return s=>{if(!Xe(s)||!Xe(o))return o;const a=gt(o,{[Or]:s},Or,n,r);return a===void 0?s:a}}function Go(e,t={}){const n=t.storage||globalThis.localStorage,r=t.name||`storage-${Ka()}`;if(!n)return[e[0],e[1],null];const o=t.storageOptions,s=t.serialize||JSON.stringify.bind(JSON),a=t.deserialize||JSON.parse.bind(JSON),i=n.getItem(r,o),c=typeof e[0]=="function"?u=>{try{const m=a(u);e[1](()=>m)}catch(m){console.warn(m)}}:u=>{try{const m=a(u);e[1](Ei(m))}catch(m){console.warn(m)}};let d=!0;if(i instanceof Promise?i.then(u=>d&&u&&c(u)):i&&c(i),typeof t.sync?.[0]=="function"){const u=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](m=>{m.key!==r||(m.url||globalThis.location.href)!==globalThis.location.href||m.newValue===s(be(u))||c(m.newValue)})}return[e[0],typeof e[0]=="function"?u=>{const m=e[1](u),p=u!=null?s(m):u;return t.sync?.[1](r,p),p!=null?n.setItem(r,p,o):n.removeItem(r,o),d=!1,m}:(...u)=>{e[1](...u);const m=s(be(()=>e[0]));t.sync?.[1](r,m),n.setItem(r,m,o),d=!1},i]}function Pi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ft={exports:{}},sr={},Ue={},et={},or={},ar={},ir={},ss;function Vn(){return ss||(ss=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(l){if(super(),!e.IDENTIFIER.test(l))throw new Error("CodeGen: name must be a valid identifier");this.str=l}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(l){super(),this._items=typeof l=="string"?[l]:l}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const l=this._items[0];return l===""||l==='""'}get str(){var l;return(l=this._str)!==null&&l!==void 0?l:this._str=this._items.reduce((g,b)=>`${g}${b}`,"")}get names(){var l;return(l=this._names)!==null&&l!==void 0?l:this._names=this._items.reduce((g,b)=>(b instanceof n&&(g[b.str]=(g[b.str]||0)+1),g),{})}}e._Code=r,e.nil=new r("");function o(h,...l){const g=[h[0]];let b=0;for(;b<l.length;)i(g,l[b]),g.push(h[++b]);return new r(g)}e._=o;const s=new r("+");function a(h,...l){const g=[y(h[0])];let b=0;for(;b<l.length;)g.push(s),i(g,l[b]),g.push(s,y(h[++b]));return c(g),new r(g)}e.str=a;function i(h,l){l instanceof r?h.push(...l._items):l instanceof n?h.push(l):h.push(m(l))}e.addCodeArg=i;function c(h){let l=1;for(;l<h.length-1;){if(h[l]===s){const g=d(h[l-1],h[l+1]);if(g!==void 0){h.splice(l-1,3,g);continue}h[l++]="+"}l++}}function d(h,l){if(l==='""')return h;if(h==='""')return l;if(typeof h=="string")return l instanceof n||h[h.length-1]!=='"'?void 0:typeof l!="string"?`${h.slice(0,-1)}${l}"`:l[0]==='"'?h.slice(0,-1)+l.slice(1):void 0;if(typeof l=="string"&&l[0]==='"'&&!(h instanceof n))return`"${h}${l.slice(1)}`}function u(h,l){return l.emptyStr()?h:h.emptyStr()?l:a`${h}${l}`}e.strConcat=u;function m(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:y(Array.isArray(h)?h.join(","):h)}function p(h){return new r(y(h))}e.stringify=p;function y(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=y;function _(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new r(`.${h}`):o`[${h}]`}e.getProperty=_;function v(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new r(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=v;function f(h){return new r(h.toString())}e.regexpCode=f}(ir)),ir}var lr={},os;function as(){return os||(os=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Vn();class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:d,parent:u}={}){this._names={},this._prefixes=d,this._parent=u}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const u=this._names[d]||this._nameGroup(d);return`${d}${u.index++}`}_nameGroup(d){var u,m;if(!((m=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=o;class s extends t.Name{constructor(d,u){super(u),this.prefix=d}setValue(d,{property:u,itemIndex:m}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(u)}[${m}]`}}e.ValueScopeName=s;const a=(0,t._)`\n`;class i extends o{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?a:t.nil}}get(){return this._scope}name(d){return new s(d,this._newName(d))}value(d,u){var m;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const p=this.toName(d),{prefix:y}=p,_=(m=u.key)!==null&&m!==void 0?m:u.ref;let v=this._values[y];if(v){const l=v.get(_);if(l)return l}else v=this._values[y]=new Map;v.set(_,p);const f=this._scope[y]||(this._scope[y]=[]),h=f.length;return f[h]=u.ref,p.setValue(u,{property:y,itemIndex:h}),p}getValue(d,u){const m=this._values[d];if(m)return m.get(u)}scopeRefs(d,u=this._values){return this._reduceValues(u,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,t._)`${d}${m.scopePath}`})}scopeCode(d=this._values,u,m){return this._reduceValues(d,p=>{if(p.value===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return p.value.code},u,m)}_reduceValues(d,u,m={},p){let y=t.nil;for(const _ in d){const v=d[_];if(!v)continue;const f=m[_]=m[_]||new Map;v.forEach(h=>{if(f.has(h))return;f.set(h,r.Started);let l=u(h);if(l){const g=this.opts.es5?e.varKinds.var:e.varKinds.const;y=(0,t._)`${y}${g} ${h} = ${l};${this.opts._n}`}else if(l=p?.(h))y=(0,t._)`${y}${l}${this.opts._n}`;else throw new n(h);f.set(h,r.Completed)})}return y}}e.ValueScope=i}(lr)),lr}var is;function re(){return is||(is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Vn(),n=as();var r=Vn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=as();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,E){return this}}class a extends s{constructor(S,E,x){super(),this.varKind=S,this.name=E,this.rhs=x}render({es5:S,_n:E}){const x=S?n.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${B};`+E}optimizeNames(S,E){if(S[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,S,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends s{constructor(S,E,x){super(),this.lhs=S,this.rhs=E,this.sideEffects=x}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,E){if(!(this.lhs instanceof t.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,S,E),this}get names(){const S=this.lhs instanceof t.Name?{}:{...this.lhs.names};return z(S,this.rhs)}}class c extends i{constructor(S,E,x,B){super(S,x,B),this.op=E}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class d extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class u extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class m extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class p extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,E){return this.code=U(this.code,S,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class y extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((E,x)=>E+x.render(S),"")}optimizeNodes(){const{nodes:S}=this;let E=S.length;for(;E--;){const x=S[E].optimizeNodes();Array.isArray(x)?S.splice(E,1,...x):x?S[E]=x:S.splice(E,1)}return S.length>0?this:void 0}optimizeNames(S,E){const{nodes:x}=this;let B=x.length;for(;B--;){const Q=x[B];Q.optimizeNames(S,E)||(H(S,Q.names),x.splice(B,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((S,E)=>D(S,E.names),{})}}class _ extends y{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class v extends y{}class f extends _{}f.kind="else";class h extends _{constructor(S,E){super(E),this.condition=S}render(S){let E=`if(${this.condition})`+super.render(S);return this.else&&(E+="else "+this.else.render(S)),E}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let E=this.else;if(E){const x=E.optimizeNodes();E=this.else=Array.isArray(x)?new f(x):x}if(E)return S===!1?E instanceof h?E:E.nodes:this.nodes.length?this:new h(ne(S),E instanceof h?[E]:E.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,E){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(S,E),!!(super.optimizeNames(S,E)||this.else))return this.condition=U(this.condition,S,E),this}get names(){const S=super.names;return z(S,this.condition),this.else&&D(S,this.else.names),S}}h.kind="if";class l extends _{}l.kind="for";class g extends l{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iteration=U(this.iteration,S,E),this}get names(){return D(super.names,this.iteration.names)}}class b extends l{constructor(S,E,x,B){super(),this.varKind=S,this.name=E,this.from=x,this.to=B}render(S){const E=S.es5?n.varKinds.var:this.varKind,{name:x,from:B,to:Q}=this;return`for(${E} ${x}=${B}; ${x}<${Q}; ${x}++)`+super.render(S)}get names(){const S=z(super.names,this.from);return z(S,this.to)}}class $ extends l{constructor(S,E,x,B){super(),this.loop=S,this.varKind=E,this.name=x,this.iterable=B}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iterable=U(this.iterable,S,E),this}get names(){return D(super.names,this.iterable.names)}}class w extends _{constructor(S,E,x){super(),this.name=S,this.args=E,this.async=x}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}w.kind="func";class C extends y{render(S){return"return "+super.render(S)}}C.kind="return";class P extends _{render(S){let E="try"+super.render(S);return this.catch&&(E+=this.catch.render(S)),this.finally&&(E+=this.finally.render(S)),E}optimizeNodes(){var S,E;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(S,E){var x,B;return super.optimizeNames(S,E),(x=this.catch)===null||x===void 0||x.optimizeNames(S,E),(B=this.finally)===null||B===void 0||B.optimizeNames(S,E),this}get names(){const S=super.names;return this.catch&&D(S,this.catch.names),this.finally&&D(S,this.finally.names),S}}class T extends _{constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}T.kind="catch";class R extends _{render(S){return"finally"+super.render(S)}}R.kind="finally";class N{constructor(S,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=S,this._scope=new n.Scope({parent:S}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,E){const x=this._extScope.value(S,E);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(S,E){return this._extScope.getValue(S,E)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,E,x,B){const Q=this._scope.toName(E);return x!==void 0&&B&&(this._constants[Q.str]=x),this._leafNode(new a(S,Q,x)),Q}const(S,E,x){return this._def(n.varKinds.const,S,E,x)}let(S,E,x){return this._def(n.varKinds.let,S,E,x)}var(S,E,x){return this._def(n.varKinds.var,S,E,x)}assign(S,E,x){return this._leafNode(new i(S,E,x))}add(S,E){return this._leafNode(new c(S,e.operators.ADD,E))}code(S){return typeof S=="function"?S():S!==t.nil&&this._leafNode(new p(S)),this}object(...S){const E=["{"];for(const[x,B]of S)E.length>1&&E.push(","),E.push(x),(x!==B||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,B));return E.push("}"),new t._Code(E)}if(S,E,x){if(this._blockNode(new h(S)),E&&x)this.code(E).else().code(x).endIf();else if(E)this.code(E).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new h(S))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(h,f)}_for(S,E){return this._blockNode(S),E&&this.code(E).endFor(),this}for(S,E){return this._for(new g(S),E)}forRange(S,E,x,B,Q=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(S);return this._for(new b(Q,de,E,x),()=>B(de))}forOf(S,E,x,B=n.varKinds.const){const Q=this._scope.toName(S);if(this.opts.es5){const de=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${de}.length`,ie=>{this.var(Q,(0,t._)`${de}[${ie}]`),x(Q)})}return this._for(new $("of",B,Q,E),()=>x(Q))}forIn(S,E,x,B=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,t._)`Object.keys(${E})`,x);const Q=this._scope.toName(S);return this._for(new $("in",B,Q,E),()=>x(Q))}endFor(){return this._endBlockNode(l)}label(S){return this._leafNode(new d(S))}break(S){return this._leafNode(new u(S))}return(S){const E=new C;if(this._blockNode(E),this.code(S),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,E,x){if(!E&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new P;if(this._blockNode(B),this.code(S),E){const Q=this.name("e");this._currNode=B.catch=new T(Q),E(Q)}return x&&(this._currNode=B.finally=new R,this.code(x)),this._endBlockNode(T,R)}throw(S){return this._leafNode(new m(S))}block(S,E){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(E),this}endBlock(S){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-E;if(x<0||S!==void 0&&x!==S)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${S} expected`);return this._nodes.length=E,this}func(S,E=t.nil,x,B){return this._blockNode(new w(S,E,x)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,E){const x=this._currNode;if(x instanceof S||E&&x instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${S.kind}/${E.kind}`:S.kind}"`)}_elseNode(S){const E=this._currNode;if(!(E instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const E=this._nodes;E[E.length-1]=S}}e.CodeGen=N;function D(L,S){for(const E in S)L[E]=(L[E]||0)+(S[E]||0);return L}function z(L,S){return S instanceof t._CodeOrName?D(L,S.names):L}function U(L,S,E){if(L instanceof t.Name)return x(L);if(!B(L))return L;return new t._Code(L._items.reduce((Q,de)=>(de instanceof t.Name&&(de=x(de)),de instanceof t._Code?Q.push(...de._items):Q.push(de),Q),[]));function x(Q){const de=E[Q.str];return de===void 0||S[Q.str]!==1?Q:(delete S[Q.str],de)}function B(Q){return Q instanceof t._Code&&Q._items.some(de=>de instanceof t.Name&&S[de.str]===1&&E[de.str]!==void 0)}}function H(L,S){for(const E in S)L[E]=(L[E]||0)-(S[E]||0)}function ne(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${q(L)}`}e.not=ne;const me=O(e.operators.AND);function se(...L){return L.reduce(me)}e.and=se;const ce=O(e.operators.OR);function F(...L){return L.reduce(ce)}e.or=F;function O(L){return(S,E)=>S===t.nil?E:E===t.nil?S:(0,t._)`${q(S)} ${L} ${q(E)}`}function q(L){return L instanceof t.Name?L:(0,t._)`(${L})`}}(ar)),ar}var ee={},ls;function ue(){if(ls)return ee;ls=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.checkStrictMode=ee.getErrorPath=ee.Type=ee.useFunc=ee.setEvaluated=ee.evaluatedPropsToName=ee.mergeEvaluated=ee.eachItem=ee.unescapeJsonPointer=ee.escapeJsonPointer=ee.escapeFragment=ee.unescapeFragment=ee.schemaRefOrVal=ee.schemaHasRulesButRef=ee.schemaHasRules=ee.checkUnknownRules=ee.alwaysValidSchema=ee.toHash=void 0;const e=re(),t=Vn();function n($){const w={};for(const C of $)w[C]=!0;return w}ee.toHash=n;function r($,w){return typeof w=="boolean"?w:Object.keys(w).length===0?!0:(o($,w),!s(w,$.self.RULES.all))}ee.alwaysValidSchema=r;function o($,w=$.schema){const{opts:C,self:P}=$;if(!C.strictSchema||typeof w=="boolean")return;const T=P.RULES.keywords;for(const R in w)T[R]||b($,`unknown keyword: "${R}"`)}ee.checkUnknownRules=o;function s($,w){if(typeof $=="boolean")return!$;for(const C in $)if(w[C])return!0;return!1}ee.schemaHasRules=s;function a($,w){if(typeof $=="boolean")return!$;for(const C in $)if(C!=="$ref"&&w.all[C])return!0;return!1}ee.schemaHasRulesButRef=a;function i({topSchemaRef:$,schemaPath:w},C,P,T){if(!T){if(typeof C=="number"||typeof C=="boolean")return C;if(typeof C=="string")return(0,e._)`${C}`}return(0,e._)`${$}${w}${(0,e.getProperty)(P)}`}ee.schemaRefOrVal=i;function c($){return m(decodeURIComponent($))}ee.unescapeFragment=c;function d($){return encodeURIComponent(u($))}ee.escapeFragment=d;function u($){return typeof $=="number"?`${$}`:$.replace(/~/g,"~0").replace(/\//g,"~1")}ee.escapeJsonPointer=u;function m($){return $.replace(/~1/g,"/").replace(/~0/g,"~")}ee.unescapeJsonPointer=m;function p($,w){if(Array.isArray($))for(const C of $)w(C);else w($)}ee.eachItem=p;function y({mergeNames:$,mergeToName:w,mergeValues:C,resultToName:P}){return(T,R,N,D)=>{const z=N===void 0?R:N instanceof e.Name?(R instanceof e.Name?$(T,R,N):w(T,R,N),N):R instanceof e.Name?(w(T,N,R),R):C(R,N);return D===e.Name&&!(z instanceof e.Name)?P(T,z):z}}ee.mergeEvaluated={props:y({mergeNames:($,w,C)=>$.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>{$.if((0,e._)`${w} === true`,()=>$.assign(C,!0),()=>$.assign(C,(0,e._)`${C} || {}`).code((0,e._)`Object.assign(${C}, ${w})`))}),mergeToName:($,w,C)=>$.if((0,e._)`${C} !== true`,()=>{w===!0?$.assign(C,!0):($.assign(C,(0,e._)`${C} || {}`),v($,C,w))}),mergeValues:($,w)=>$===!0?!0:{...$,...w},resultToName:_}),items:y({mergeNames:($,w,C)=>$.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>$.assign(C,(0,e._)`${w} === true ? true : ${C} > ${w} ? ${C} : ${w}`)),mergeToName:($,w,C)=>$.if((0,e._)`${C} !== true`,()=>$.assign(C,w===!0?!0:(0,e._)`${C} > ${w} ? ${C} : ${w}`)),mergeValues:($,w)=>$===!0?!0:Math.max($,w),resultToName:($,w)=>$.var("items",w)})};function _($,w){if(w===!0)return $.var("props",!0);const C=$.var("props",(0,e._)`{}`);return w!==void 0&&v($,C,w),C}ee.evaluatedPropsToName=_;function v($,w,C){Object.keys(C).forEach(P=>$.assign((0,e._)`${w}${(0,e.getProperty)(P)}`,!0))}ee.setEvaluated=v;const f={};function h($,w){return $.scopeValue("func",{ref:w,code:f[w.code]||(f[w.code]=new t._Code(w.code))})}ee.useFunc=h;var l;(function($){$[$.Num=0]="Num",$[$.Str=1]="Str"})(l||(ee.Type=l={}));function g($,w,C){if($ instanceof e.Name){const P=w===l.Num;return C?P?(0,e._)`"[" + ${$} + "]"`:(0,e._)`"['" + ${$} + "']"`:P?(0,e._)`"/" + ${$}`:(0,e._)`"/" + ${$}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return C?(0,e.getProperty)($).toString():"/"+u($)}ee.getErrorPath=g;function b($,w,C=$.opts.strictSchema){if(C){if(w=`strict mode: ${w}`,C===!0)throw new Error(w);$.self.logger.warn(w)}}return ee.checkStrictMode=b,ee}var Ut={},cs;function Ye(){if(cs)return Ut;cs=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e=re(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Ut.default=t,Ut}var us;function Wn(){return us||(us=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=re(),n=ue(),r=Ye();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:h})=>h?(0,t.str)`"${f}" keyword must be ${h} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function o(f,h=e.keywordError,l,g){const{it:b}=f,{gen:$,compositeRule:w,allErrors:C}=b,P=m(f,h,l);g??(w||C)?c($,P):d(b,(0,t._)`[${P}]`)}e.reportError=o;function s(f,h=e.keywordError,l){const{it:g}=f,{gen:b,compositeRule:$,allErrors:w}=g,C=m(f,h,l);c(b,C),$||w||d(g,r.default.vErrors)}e.reportExtraError=s;function a(f,h){f.assign(r.default.errors,h),f.if((0,t._)`${r.default.vErrors} !== null`,()=>f.if(h,()=>f.assign((0,t._)`${r.default.vErrors}.length`,h),()=>f.assign(r.default.vErrors,null)))}e.resetErrorsCount=a;function i({gen:f,keyword:h,schemaValue:l,data:g,errsCount:b,it:$}){if(b===void 0)throw new Error("ajv implementation error");const w=f.name("err");f.forRange("i",b,r.default.errors,C=>{f.const(w,(0,t._)`${r.default.vErrors}[${C}]`),f.if((0,t._)`${w}.instancePath === undefined`,()=>f.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,$.errorPath))),f.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${$.errSchemaPath}/${h}`),$.opts.verbose&&(f.assign((0,t._)`${w}.schema`,l),f.assign((0,t._)`${w}.data`,g))})}e.extendErrors=i;function c(f,h){const l=f.const("err",h);f.if((0,t._)`${r.default.vErrors} === null`,()=>f.assign(r.default.vErrors,(0,t._)`[${l}]`),(0,t._)`${r.default.vErrors}.push(${l})`),f.code((0,t._)`${r.default.errors}++`)}function d(f,h){const{gen:l,validateName:g,schemaEnv:b}=f;b.$async?l.throw((0,t._)`new ${f.ValidationError}(${h})`):(l.assign((0,t._)`${g}.errors`,h),l.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function m(f,h,l){const{createErrors:g}=f.it;return g===!1?(0,t._)`{}`:p(f,h,l)}function p(f,h,l={}){const{gen:g,it:b}=f,$=[y(b,l),_(f,l)];return v(f,h,$),g.object(...$)}function y({errorPath:f},{instancePath:h}){const l=h?(0,t.str)`${f}${(0,n.getErrorPath)(h,n.Type.Str)}`:f;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,l)]}function _({keyword:f,it:{errSchemaPath:h}},{schemaPath:l,parentSchema:g}){let b=g?h:(0,t.str)`${h}/${f}`;return l&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(l,n.Type.Str)}`),[u.schemaPath,b]}function v(f,{params:h,message:l},g){const{keyword:b,data:$,schemaValue:w,it:C}=f,{opts:P,propertyName:T,topSchemaRef:R,schemaPath:N}=C;g.push([u.keyword,b],[u.params,typeof h=="function"?h(f):h||(0,t._)`{}`]),P.messages&&g.push([u.message,typeof l=="function"?l(f):l]),P.verbose&&g.push([u.schema,w],[u.parentSchema,(0,t._)`${R}${N}`],[r.default.data,$]),T&&g.push([u.propertyName,T])}}(or)),or}var ds;function ki(){if(ds)return et;ds=1,Object.defineProperty(et,"__esModule",{value:!0}),et.boolOrEmptySchema=et.topBoolOrEmptySchema=void 0;const e=Wn(),t=re(),n=Ye(),r={message:"boolean schema is false"};function o(i){const{gen:c,schema:d,validateName:u}=i;d===!1?a(i,!1):typeof d=="object"&&d.$async===!0?c.return(n.default.data):(c.assign((0,t._)`${u}.errors`,null),c.return(!0))}et.topBoolOrEmptySchema=o;function s(i,c){const{gen:d,schema:u}=i;u===!1?(d.var(c,!1),a(i)):d.var(c,!0)}et.boolOrEmptySchema=s;function a(i,c){const{gen:d,data:u}=i,m={gen:d,keyword:"false schema",data:u,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:i};(0,e.reportError)(m,r,void 0,c)}return et}var Se={},tt={},fs;function Jo(){if(fs)return tt;fs=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.getRules=tt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(o){return typeof o=="string"&&t.has(o)}tt.isJSONType=n;function r(){const o={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...o,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},o.number,o.string,o.array,o.object],post:{rules:[]},all:{},keywords:{}}}return tt.getRules=r,tt}var Ke={},hs;function Qo(){if(hs)return Ke;hs=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.shouldUseRule=Ke.shouldUseGroup=Ke.schemaHasRulesForType=void 0;function e({schema:r,self:o},s){const a=o.RULES.types[s];return a&&a!==!0&&t(r,a)}Ke.schemaHasRulesForType=e;function t(r,o){return o.rules.some(s=>n(r,s))}Ke.shouldUseGroup=t;function n(r,o){var s;return r[o.keyword]!==void 0||((s=o.definition.implements)===null||s===void 0?void 0:s.some(a=>r[a]!==void 0))}return Ke.shouldUseRule=n,Ke}var ms;function Fn(){if(ms)return Se;ms=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.reportTypeError=Se.checkDataTypes=Se.checkDataType=Se.coerceAndCheckDataType=Se.getJSONTypes=Se.getSchemaTypes=Se.DataType=void 0;const e=Jo(),t=Qo(),n=Wn(),r=re(),o=ue();var s;(function(l){l[l.Correct=0]="Correct",l[l.Wrong=1]="Wrong"})(s||(Se.DataType=s={}));function a(l){const g=i(l.type);if(g.includes("null")){if(l.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!g.length&&l.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');l.nullable===!0&&g.push("null")}return g}Se.getSchemaTypes=a;function i(l){const g=Array.isArray(l)?l:l?[l]:[];if(g.every(e.isJSONType))return g;throw new Error("type must be JSONType or JSONType[]: "+g.join(","))}Se.getJSONTypes=i;function c(l,g){const{gen:b,data:$,opts:w}=l,C=u(g,w.coerceTypes),P=g.length>0&&!(C.length===0&&g.length===1&&(0,t.schemaHasRulesForType)(l,g[0]));if(P){const T=_(g,$,w.strictNumbers,s.Wrong);b.if(T,()=>{C.length?m(l,g,C):f(l)})}return P}Se.coerceAndCheckDataType=c;const d=new Set(["string","number","integer","boolean","null"]);function u(l,g){return g?l.filter(b=>d.has(b)||g==="array"&&b==="array"):[]}function m(l,g,b){const{gen:$,data:w,opts:C}=l,P=$.let("dataType",(0,r._)`typeof ${w}`),T=$.let("coerced",(0,r._)`undefined`);C.coerceTypes==="array"&&$.if((0,r._)`${P} == 'object' && Array.isArray(${w}) && ${w}.length == 1`,()=>$.assign(w,(0,r._)`${w}[0]`).assign(P,(0,r._)`typeof ${w}`).if(_(g,w,C.strictNumbers),()=>$.assign(T,w))),$.if((0,r._)`${T} !== undefined`);for(const N of b)(d.has(N)||N==="array"&&C.coerceTypes==="array")&&R(N);$.else(),f(l),$.endIf(),$.if((0,r._)`${T} !== undefined`,()=>{$.assign(w,T),p(l,T)});function R(N){switch(N){case"string":$.elseIf((0,r._)`${P} == "number" || ${P} == "boolean"`).assign(T,(0,r._)`"" + ${w}`).elseIf((0,r._)`${w} === null`).assign(T,(0,r._)`""`);return;case"number":$.elseIf((0,r._)`${P} == "boolean" || ${w} === null
              || (${P} == "string" && ${w} && ${w} == +${w})`).assign(T,(0,r._)`+${w}`);return;case"integer":$.elseIf((0,r._)`${P} === "boolean" || ${w} === null
              || (${P} === "string" && ${w} && ${w} == +${w} && !(${w} % 1))`).assign(T,(0,r._)`+${w}`);return;case"boolean":$.elseIf((0,r._)`${w} === "false" || ${w} === 0 || ${w} === null`).assign(T,!1).elseIf((0,r._)`${w} === "true" || ${w} === 1`).assign(T,!0);return;case"null":$.elseIf((0,r._)`${w} === "" || ${w} === 0 || ${w} === false`),$.assign(T,null);return;case"array":$.elseIf((0,r._)`${P} === "string" || ${P} === "number"
              || ${P} === "boolean" || ${w} === null`).assign(T,(0,r._)`[${w}]`)}}}function p({gen:l,parentData:g,parentDataProperty:b},$){l.if((0,r._)`${g} !== undefined`,()=>l.assign((0,r._)`${g}[${b}]`,$))}function y(l,g,b,$=s.Correct){const w=$===s.Correct?r.operators.EQ:r.operators.NEQ;let C;switch(l){case"null":return(0,r._)`${g} ${w} null`;case"array":C=(0,r._)`Array.isArray(${g})`;break;case"object":C=(0,r._)`${g} && typeof ${g} == "object" && !Array.isArray(${g})`;break;case"integer":C=P((0,r._)`!(${g} % 1) && !isNaN(${g})`);break;case"number":C=P();break;default:return(0,r._)`typeof ${g} ${w} ${l}`}return $===s.Correct?C:(0,r.not)(C);function P(T=r.nil){return(0,r.and)((0,r._)`typeof ${g} == "number"`,T,b?(0,r._)`isFinite(${g})`:r.nil)}}Se.checkDataType=y;function _(l,g,b,$){if(l.length===1)return y(l[0],g,b,$);let w;const C=(0,o.toHash)(l);if(C.array&&C.object){const P=(0,r._)`typeof ${g} != "object"`;w=C.null?P:(0,r._)`!${g} || ${P}`,delete C.null,delete C.array,delete C.object}else w=r.nil;C.number&&delete C.integer;for(const P in C)w=(0,r.and)(w,y(P,g,b,$));return w}Se.checkDataTypes=_;const v={message:({schema:l})=>`must be ${l}`,params:({schema:l,schemaValue:g})=>typeof l=="string"?(0,r._)`{type: ${l}}`:(0,r._)`{type: ${g}}`};function f(l){const g=h(l);(0,n.reportError)(g,v)}Se.reportTypeError=f;function h(l){const{gen:g,data:b,schema:$}=l,w=(0,o.schemaRefOrVal)(l,$,"type");return{gen:g,keyword:"type",data:b,schema:$.type,schemaCode:w,schemaValue:w,parentSchema:$,params:{},it:l}}return Se}var wt={},gs;function Oi(){if(gs)return wt;gs=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.assignDefaults=void 0;const e=re(),t=ue();function n(o,s){const{properties:a,items:i}=o.schema;if(s==="object"&&a)for(const c in a)r(o,c,a[c].default);else s==="array"&&Array.isArray(i)&&i.forEach((c,d)=>r(o,d,c.default))}wt.assignDefaults=n;function r(o,s,a){const{gen:i,compositeRule:c,data:d,opts:u}=o;if(a===void 0)return;const m=(0,e._)`${d}${(0,e.getProperty)(s)}`;if(c){(0,t.checkStrictMode)(o,`default is ignored for: ${m}`);return}let p=(0,e._)`${m} === undefined`;u.useDefaults==="empty"&&(p=(0,e._)`${p} || ${m} === null || ${m} === ""`),i.if(p,(0,e._)`${m} = ${(0,e.stringify)(a)}`)}return wt}var xe={},fe={},ps;function qe(){if(ps)return fe;ps=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.validateUnion=fe.validateArray=fe.usePattern=fe.callValidateCode=fe.schemaProperties=fe.allSchemaProperties=fe.noPropertyInData=fe.propertyInData=fe.isOwnProperty=fe.hasPropFunc=fe.reportMissingProp=fe.checkMissingProp=fe.checkReportMissingProp=void 0;const e=re(),t=ue(),n=Ye(),r=ue();function o(l,g){const{gen:b,data:$,it:w}=l;b.if(u(b,$,g,w.opts.ownProperties),()=>{l.setParams({missingProperty:(0,e._)`${g}`},!0),l.error()})}fe.checkReportMissingProp=o;function s({gen:l,data:g,it:{opts:b}},$,w){return(0,e.or)(...$.map(C=>(0,e.and)(u(l,g,C,b.ownProperties),(0,e._)`${w} = ${C}`)))}fe.checkMissingProp=s;function a(l,g){l.setParams({missingProperty:g},!0),l.error()}fe.reportMissingProp=a;function i(l){return l.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}fe.hasPropFunc=i;function c(l,g,b){return(0,e._)`${i(l)}.call(${g}, ${b})`}fe.isOwnProperty=c;function d(l,g,b,$){const w=(0,e._)`${g}${(0,e.getProperty)(b)} !== undefined`;return $?(0,e._)`${w} && ${c(l,g,b)}`:w}fe.propertyInData=d;function u(l,g,b,$){const w=(0,e._)`${g}${(0,e.getProperty)(b)} === undefined`;return $?(0,e.or)(w,(0,e.not)(c(l,g,b))):w}fe.noPropertyInData=u;function m(l){return l?Object.keys(l).filter(g=>g!=="__proto__"):[]}fe.allSchemaProperties=m;function p(l,g){return m(g).filter(b=>!(0,t.alwaysValidSchema)(l,g[b]))}fe.schemaProperties=p;function y({schemaCode:l,data:g,it:{gen:b,topSchemaRef:$,schemaPath:w,errorPath:C},it:P},T,R,N){const D=N?(0,e._)`${l}, ${g}, ${$}${w}`:g,z=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,C)],[n.default.parentData,P.parentData],[n.default.parentDataProperty,P.parentDataProperty],[n.default.rootData,n.default.rootData]];P.opts.dynamicRef&&z.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const U=(0,e._)`${D}, ${b.object(...z)}`;return R!==e.nil?(0,e._)`${T}.call(${R}, ${U})`:(0,e._)`${T}(${U})`}fe.callValidateCode=y;const _=(0,e._)`new RegExp`;function v({gen:l,it:{opts:g}},b){const $=g.unicodeRegExp?"u":"",{regExp:w}=g.code,C=w(b,$);return l.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,e._)`${w.code==="new RegExp"?_:(0,r.useFunc)(l,w)}(${b}, ${$})`})}fe.usePattern=v;function f(l){const{gen:g,data:b,keyword:$,it:w}=l,C=g.name("valid");if(w.allErrors){const T=g.let("valid",!0);return P(()=>g.assign(T,!1)),T}return g.var(C,!0),P(()=>g.break()),C;function P(T){const R=g.const("len",(0,e._)`${b}.length`);g.forRange("i",0,R,N=>{l.subschema({keyword:$,dataProp:N,dataPropType:t.Type.Num},C),g.if((0,e.not)(C),T)})}}fe.validateArray=f;function h(l){const{gen:g,schema:b,keyword:$,it:w}=l;if(!Array.isArray(b))throw new Error("ajv implementation error");if(b.some(R=>(0,t.alwaysValidSchema)(w,R))&&!w.opts.unevaluated)return;const P=g.let("valid",!1),T=g.name("_valid");g.block(()=>b.forEach((R,N)=>{const D=l.subschema({keyword:$,schemaProp:N,compositeRule:!0},T);g.assign(P,(0,e._)`${P} || ${T}`),l.mergeValidEvaluated(D,T)||g.if((0,e.not)(P))})),l.result(P,()=>l.reset(),()=>l.error(!0))}return fe.validateUnion=h,fe}var ys;function Ri(){if(ys)return xe;ys=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.validateKeywordUsage=xe.validSchemaType=xe.funcKeywordCode=xe.macroKeywordCode=void 0;const e=re(),t=Ye(),n=qe(),r=Wn();function o(p,y){const{gen:_,keyword:v,schema:f,parentSchema:h,it:l}=p,g=y.macro.call(l.self,f,h,l),b=d(_,v,g);l.opts.validateSchema!==!1&&l.self.validateSchema(g,!0);const $=_.name("valid");p.subschema({schema:g,schemaPath:e.nil,errSchemaPath:`${l.errSchemaPath}/${v}`,topSchemaRef:b,compositeRule:!0},$),p.pass($,()=>p.error(!0))}xe.macroKeywordCode=o;function s(p,y){var _;const{gen:v,keyword:f,schema:h,parentSchema:l,$data:g,it:b}=p;c(b,y);const $=!g&&y.compile?y.compile.call(b.self,h,l,b):y.validate,w=d(v,f,$),C=v.let("valid");p.block$data(C,P),p.ok((_=y.valid)!==null&&_!==void 0?_:C);function P(){if(y.errors===!1)N(),y.modifying&&a(p),D(()=>p.error());else{const z=y.async?T():R();y.modifying&&a(p),D(()=>i(p,z))}}function T(){const z=v.let("ruleErrs",null);return v.try(()=>N((0,e._)`await `),U=>v.assign(C,!1).if((0,e._)`${U} instanceof ${b.ValidationError}`,()=>v.assign(z,(0,e._)`${U}.errors`),()=>v.throw(U))),z}function R(){const z=(0,e._)`${w}.errors`;return v.assign(z,null),N(e.nil),z}function N(z=y.async?(0,e._)`await `:e.nil){const U=b.opts.passContext?t.default.this:t.default.self,H=!("compile"in y&&!g||y.schema===!1);v.assign(C,(0,e._)`${z}${(0,n.callValidateCode)(p,w,U,H)}`,y.modifying)}function D(z){var U;v.if((0,e.not)((U=y.valid)!==null&&U!==void 0?U:C),z)}}xe.funcKeywordCode=s;function a(p){const{gen:y,data:_,it:v}=p;y.if(v.parentData,()=>y.assign(_,(0,e._)`${v.parentData}[${v.parentDataProperty}]`))}function i(p,y){const{gen:_}=p;_.if((0,e._)`Array.isArray(${y})`,()=>{_.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${y} : ${t.default.vErrors}.concat(${y})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(p)},()=>p.error())}function c({schemaEnv:p},y){if(y.async&&!p.$async)throw new Error("async keyword in sync schema")}function d(p,y,_){if(_===void 0)throw new Error(`keyword "${y}" failed to compile`);return p.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,e.stringify)(_)})}function u(p,y,_=!1){return!y.length||y.some(v=>v==="array"?Array.isArray(p):v==="object"?p&&typeof p=="object"&&!Array.isArray(p):typeof p==v||_&&typeof p>"u")}xe.validSchemaType=u;function m({schema:p,opts:y,self:_,errSchemaPath:v},f,h){if(Array.isArray(f.keyword)?!f.keyword.includes(h):f.keyword!==h)throw new Error("ajv implementation error");const l=f.dependencies;if(l?.some(g=>!Object.prototype.hasOwnProperty.call(p,g)))throw new Error(`parent schema must have dependencies of ${h}: ${l.join(",")}`);if(f.validateSchema&&!f.validateSchema(p[h])){const b=`keyword "${h}" value is invalid at path "${v}": `+_.errorsText(f.validateSchema.errors);if(y.validateSchema==="log")_.logger.error(b);else throw new Error(b)}}return xe.validateKeywordUsage=m,xe}var ze={},vs;function Ni(){if(vs)return ze;vs=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.extendSubschemaMode=ze.extendSubschemaData=ze.getSubschema=void 0;const e=re(),t=ue();function n(s,{keyword:a,schemaProp:i,schema:c,schemaPath:d,errSchemaPath:u,topSchemaRef:m}){if(a!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(a!==void 0){const p=s.schema[a];return i===void 0?{schema:p,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${a}`}:{schema:p[i],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(a)}${(0,e.getProperty)(i)}`,errSchemaPath:`${s.errSchemaPath}/${a}/${(0,t.escapeFragment)(i)}`}}if(c!==void 0){if(d===void 0||u===void 0||m===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:d,topSchemaRef:m,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}ze.getSubschema=n;function r(s,a,{dataProp:i,dataPropType:c,data:d,dataTypes:u,propertyName:m}){if(d!==void 0&&i!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:p}=a;if(i!==void 0){const{errorPath:_,dataPathArr:v,opts:f}=a,h=p.let("data",(0,e._)`${a.data}${(0,e.getProperty)(i)}`,!0);y(h),s.errorPath=(0,e.str)`${_}${(0,t.getErrorPath)(i,c,f.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${i}`,s.dataPathArr=[...v,s.parentDataProperty]}if(d!==void 0){const _=d instanceof e.Name?d:p.let("data",d,!0);y(_),m!==void 0&&(s.propertyName=m)}u&&(s.dataTypes=u);function y(_){s.data=_,s.dataLevel=a.dataLevel+1,s.dataTypes=[],a.definedProperties=new Set,s.parentData=a.data,s.dataNames=[...a.dataNames,_]}}ze.extendSubschemaData=r;function o(s,{jtdDiscriminator:a,jtdMetadata:i,compositeRule:c,createErrors:d,allErrors:u}){c!==void 0&&(s.compositeRule=c),d!==void 0&&(s.createErrors=d),u!==void 0&&(s.allErrors=u),s.jtdDiscriminator=a,s.jtdMetadata=i}return ze.extendSubschemaMode=o,ze}var Pe={},cr,$s;function Xo(){return $s||($s=1,cr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var a=s[o];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),cr}var ur={exports:{}},bs;function Ii(){if(bs)return ur.exports;bs=1;var e=ur.exports=function(r,o,s){typeof o=="function"&&(s=o,o={}),s=o.cb||s;var a=typeof s=="function"?s:s.pre||function(){},i=s.post||function(){};t(o,a,i,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,o,s,a,i,c,d,u,m,p){if(a&&typeof a=="object"&&!Array.isArray(a)){o(a,i,c,d,u,m,p);for(var y in a){var _=a[y];if(Array.isArray(_)){if(y in e.arrayKeywords)for(var v=0;v<_.length;v++)t(r,o,s,_[v],i+"/"+y+"/"+v,c,i,y,a,v)}else if(y in e.propsKeywords){if(_&&typeof _=="object")for(var f in _)t(r,o,s,_[f],i+"/"+y+"/"+n(f),c,i,y,a,f)}else(y in e.keywords||r.allKeys&&!(y in e.skipKeywords))&&t(r,o,s,_,i+"/"+y,c,i,y,a)}s(a,i,c,d,u,m,p)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return ur.exports}var _s;function Bn(){if(_s)return Pe;_s=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getSchemaRefs=Pe.resolveUrl=Pe.normalizeId=Pe._getFullPath=Pe.getFullPath=Pe.inlineRef=void 0;const e=ue(),t=Xo(),n=Ii(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(v,f=!0){return typeof v=="boolean"?!0:f===!0?!a(v):f?i(v)<=f:!1}Pe.inlineRef=o;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function a(v){for(const f in v){if(s.has(f))return!0;const h=v[f];if(Array.isArray(h)&&h.some(a)||typeof h=="object"&&a(h))return!0}return!1}function i(v){let f=0;for(const h in v){if(h==="$ref")return 1/0;if(f++,!r.has(h)&&(typeof v[h]=="object"&&(0,e.eachItem)(v[h],l=>f+=i(l)),f===1/0))return 1/0}return f}function c(v,f="",h){h!==!1&&(f=m(f));const l=v.parse(f);return d(v,l)}Pe.getFullPath=c;function d(v,f){return v.serialize(f).split("#")[0]+"#"}Pe._getFullPath=d;const u=/#\/?$/;function m(v){return v?v.replace(u,""):""}Pe.normalizeId=m;function p(v,f,h){return h=m(h),v.resolve(f,h)}Pe.resolveUrl=p;const y=/^[a-z_][-a-z0-9._]*$/i;function _(v,f){if(typeof v=="boolean")return{};const{schemaId:h,uriResolver:l}=this.opts,g=m(v[h]||f),b={"":g},$=c(l,g,!1),w={},C=new Set;return n(v,{allKeys:!0},(R,N,D,z)=>{if(z===void 0)return;const U=$+N;let H=b[z];typeof R[h]=="string"&&(H=ne.call(this,R[h])),me.call(this,R.$anchor),me.call(this,R.$dynamicAnchor),b[N]=H;function ne(se){const ce=this.opts.uriResolver.resolve;if(se=m(H?ce(H,se):se),C.has(se))throw T(se);C.add(se);let F=this.refs[se];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?P(R,F.schema,se):se!==m(U)&&(se[0]==="#"?(P(R,w[se],se),w[se]=R):this.refs[se]=U),se}function me(se){if(typeof se=="string"){if(!y.test(se))throw new Error(`invalid anchor "${se}"`);ne.call(this,`#${se}`)}}}),w;function P(R,N,D){if(N!==void 0&&!t(R,N))throw T(D)}function T(R){return new Error(`reference "${R}" resolves to more than one schema`)}}return Pe.getSchemaRefs=_,Pe}var ws;function Gn(){if(ws)return Ue;ws=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;const e=ki(),t=Fn(),n=Qo(),r=Fn(),o=Oi(),s=Ri(),a=Ni(),i=re(),c=Ye(),d=Bn(),u=ue(),m=Wn();function p(k){if($(k)&&(C(k),b(k))){f(k);return}y(k,()=>(0,e.topBoolOrEmptySchema)(k))}Ue.validateFunctionCode=p;function y({gen:k,validateName:I,schema:V,schemaEnv:K,opts:J},te){J.code.es5?k.func(I,(0,i._)`${c.default.data}, ${c.default.valCxt}`,K.$async,()=>{k.code((0,i._)`"use strict"; ${l(V,J)}`),v(k,J),k.code(te)}):k.func(I,(0,i._)`${c.default.data}, ${_(J)}`,K.$async,()=>k.code(l(V,J)).code(te))}function _(k){return(0,i._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${k.dynamicRef?(0,i._)`, ${c.default.dynamicAnchors}={}`:i.nil}}={}`}function v(k,I){k.if(c.default.valCxt,()=>{k.var(c.default.instancePath,(0,i._)`${c.default.valCxt}.${c.default.instancePath}`),k.var(c.default.parentData,(0,i._)`${c.default.valCxt}.${c.default.parentData}`),k.var(c.default.parentDataProperty,(0,i._)`${c.default.valCxt}.${c.default.parentDataProperty}`),k.var(c.default.rootData,(0,i._)`${c.default.valCxt}.${c.default.rootData}`),I.dynamicRef&&k.var(c.default.dynamicAnchors,(0,i._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{k.var(c.default.instancePath,(0,i._)`""`),k.var(c.default.parentData,(0,i._)`undefined`),k.var(c.default.parentDataProperty,(0,i._)`undefined`),k.var(c.default.rootData,c.default.data),I.dynamicRef&&k.var(c.default.dynamicAnchors,(0,i._)`{}`)})}function f(k){const{schema:I,opts:V,gen:K}=k;y(k,()=>{V.$comment&&I.$comment&&z(k),R(k),K.let(c.default.vErrors,null),K.let(c.default.errors,0),V.unevaluated&&h(k),P(k),U(k)})}function h(k){const{gen:I,validateName:V}=k;k.evaluated=I.const("evaluated",(0,i._)`${V}.evaluated`),I.if((0,i._)`${k.evaluated}.dynamicProps`,()=>I.assign((0,i._)`${k.evaluated}.props`,(0,i._)`undefined`)),I.if((0,i._)`${k.evaluated}.dynamicItems`,()=>I.assign((0,i._)`${k.evaluated}.items`,(0,i._)`undefined`))}function l(k,I){const V=typeof k=="object"&&k[I.schemaId];return V&&(I.code.source||I.code.process)?(0,i._)`/*# sourceURL=${V} */`:i.nil}function g(k,I){if($(k)&&(C(k),b(k))){w(k,I);return}(0,e.boolOrEmptySchema)(k,I)}function b({schema:k,self:I}){if(typeof k=="boolean")return!k;for(const V in k)if(I.RULES.all[V])return!0;return!1}function $(k){return typeof k.schema!="boolean"}function w(k,I){const{schema:V,gen:K,opts:J}=k;J.$comment&&V.$comment&&z(k),N(k),D(k);const te=K.const("_errs",c.default.errors);P(k,te),K.var(I,(0,i._)`${te} === ${c.default.errors}`)}function C(k){(0,u.checkUnknownRules)(k),T(k)}function P(k,I){if(k.opts.jtd)return ne(k,[],!1,I);const V=(0,t.getSchemaTypes)(k.schema),K=(0,t.coerceAndCheckDataType)(k,V);ne(k,V,!K,I)}function T(k){const{schema:I,errSchemaPath:V,opts:K,self:J}=k;I.$ref&&K.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(I,J.RULES)&&J.logger.warn(`$ref: keywords ignored in schema at path "${V}"`)}function R(k){const{schema:I,opts:V}=k;I.default!==void 0&&V.useDefaults&&V.strictSchema&&(0,u.checkStrictMode)(k,"default is ignored in the schema root")}function N(k){const I=k.schema[k.opts.schemaId];I&&(k.baseId=(0,d.resolveUrl)(k.opts.uriResolver,k.baseId,I))}function D(k){if(k.schema.$async&&!k.schemaEnv.$async)throw new Error("async schema in sync schema")}function z({gen:k,schemaEnv:I,schema:V,errSchemaPath:K,opts:J}){const te=V.$comment;if(J.$comment===!0)k.code((0,i._)`${c.default.self}.logger.log(${te})`);else if(typeof J.$comment=="function"){const _e=(0,i.str)`${K}/$comment`,Te=k.scopeValue("root",{ref:I.root});k.code((0,i._)`${c.default.self}.opts.$comment(${te}, ${_e}, ${Te}.schema)`)}}function U(k){const{gen:I,schemaEnv:V,validateName:K,ValidationError:J,opts:te}=k;V.$async?I.if((0,i._)`${c.default.errors} === 0`,()=>I.return(c.default.data),()=>I.throw((0,i._)`new ${J}(${c.default.vErrors})`)):(I.assign((0,i._)`${K}.errors`,c.default.vErrors),te.unevaluated&&H(k),I.return((0,i._)`${c.default.errors} === 0`))}function H({gen:k,evaluated:I,props:V,items:K}){V instanceof i.Name&&k.assign((0,i._)`${I}.props`,V),K instanceof i.Name&&k.assign((0,i._)`${I}.items`,K)}function ne(k,I,V,K){const{gen:J,schema:te,data:_e,allErrors:Te,opts:Oe,self:Re}=k,{RULES:we}=Re;if(te.$ref&&(Oe.ignoreKeywordsWithRef||!(0,u.schemaHasRulesButRef)(te,we))){J.block(()=>B(k,"$ref",we.all.$ref.definition));return}Oe.jtd||se(k,I),J.block(()=>{for(const Le of we.rules)lt(Le);lt(we.post)});function lt(Le){(0,n.shouldUseGroup)(te,Le)&&(Le.type?(J.if((0,r.checkDataType)(Le.type,_e,Oe.strictNumbers)),me(k,Le),I.length===1&&I[0]===Le.type&&V&&(J.else(),(0,r.reportTypeError)(k)),J.endIf()):me(k,Le),Te||J.if((0,i._)`${c.default.errors} === ${K||0}`))}}function me(k,I){const{gen:V,schema:K,opts:{useDefaults:J}}=k;J&&(0,o.assignDefaults)(k,I.type),V.block(()=>{for(const te of I.rules)(0,n.shouldUseRule)(K,te)&&B(k,te.keyword,te.definition,I.type)})}function se(k,I){k.schemaEnv.meta||!k.opts.strictTypes||(ce(k,I),k.opts.allowUnionTypes||F(k,I),O(k,k.dataTypes))}function ce(k,I){if(I.length){if(!k.dataTypes.length){k.dataTypes=I;return}I.forEach(V=>{L(k.dataTypes,V)||E(k,`type "${V}" not allowed by context "${k.dataTypes.join(",")}"`)}),S(k,I)}}function F(k,I){I.length>1&&!(I.length===2&&I.includes("null"))&&E(k,"use allowUnionTypes to allow union type keyword")}function O(k,I){const V=k.self.RULES.all;for(const K in V){const J=V[K];if(typeof J=="object"&&(0,n.shouldUseRule)(k.schema,J)){const{type:te}=J.definition;te.length&&!te.some(_e=>q(I,_e))&&E(k,`missing type "${te.join(",")}" for keyword "${K}"`)}}}function q(k,I){return k.includes(I)||I==="number"&&k.includes("integer")}function L(k,I){return k.includes(I)||I==="integer"&&k.includes("number")}function S(k,I){const V=[];for(const K of k.dataTypes)L(I,K)?V.push(K):I.includes("integer")&&K==="number"&&V.push("integer");k.dataTypes=V}function E(k,I){const V=k.schemaEnv.baseId+k.errSchemaPath;I+=` at "${V}" (strictTypes)`,(0,u.checkStrictMode)(k,I,k.opts.strictTypes)}class x{constructor(I,V,K){if((0,s.validateKeywordUsage)(I,V,K),this.gen=I.gen,this.allErrors=I.allErrors,this.keyword=K,this.data=I.data,this.schema=I.schema[K],this.$data=V.$data&&I.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(I,this.schema,K,this.$data),this.schemaType=V.schemaType,this.parentSchema=I.schema,this.params={},this.it=I,this.def=V,this.$data)this.schemaCode=I.gen.const("vSchema",ie(this.$data,I));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,V.schemaType,V.allowUndefined))throw new Error(`${K} value must be ${JSON.stringify(V.schemaType)}`);("code"in V?V.trackErrors:V.errors!==!1)&&(this.errsCount=I.gen.const("_errs",c.default.errors))}result(I,V,K){this.failResult((0,i.not)(I),V,K)}failResult(I,V,K){this.gen.if(I),K?K():this.error(),V?(this.gen.else(),V(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(I,V){this.failResult((0,i.not)(I),void 0,V)}fail(I){if(I===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(I),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(I){if(!this.$data)return this.fail(I);const{schemaCode:V}=this;this.fail((0,i._)`${V} !== undefined && (${(0,i.or)(this.invalid$data(),I)})`)}error(I,V,K){if(V){this.setParams(V),this._error(I,K),this.setParams({});return}this._error(I,K)}_error(I,V){(I?m.reportExtraError:m.reportError)(this,this.def.error,V)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(I){this.allErrors||this.gen.if(I)}setParams(I,V){V?Object.assign(this.params,I):this.params=I}block$data(I,V,K=i.nil){this.gen.block(()=>{this.check$data(I,K),V()})}check$data(I=i.nil,V=i.nil){if(!this.$data)return;const{gen:K,schemaCode:J,schemaType:te,def:_e}=this;K.if((0,i.or)((0,i._)`${J} === undefined`,V)),I!==i.nil&&K.assign(I,!0),(te.length||_e.validateSchema)&&(K.elseIf(this.invalid$data()),this.$dataError(),I!==i.nil&&K.assign(I,!1)),K.else()}invalid$data(){const{gen:I,schemaCode:V,schemaType:K,def:J,it:te}=this;return(0,i.or)(_e(),Te());function _e(){if(K.length){if(!(V instanceof i.Name))throw new Error("ajv implementation error");const Oe=Array.isArray(K)?K:[K];return(0,i._)`${(0,r.checkDataTypes)(Oe,V,te.opts.strictNumbers,r.DataType.Wrong)}`}return i.nil}function Te(){if(J.validateSchema){const Oe=I.scopeValue("validate$data",{ref:J.validateSchema});return(0,i._)`!${Oe}(${V})`}return i.nil}}subschema(I,V){const K=(0,a.getSubschema)(this.it,I);(0,a.extendSubschemaData)(K,this.it,I),(0,a.extendSubschemaMode)(K,I);const J={...this.it,...K,items:void 0,props:void 0};return g(J,V),J}mergeEvaluated(I,V){const{it:K,gen:J}=this;K.opts.unevaluated&&(K.props!==!0&&I.props!==void 0&&(K.props=u.mergeEvaluated.props(J,I.props,K.props,V)),K.items!==!0&&I.items!==void 0&&(K.items=u.mergeEvaluated.items(J,I.items,K.items,V)))}mergeValidEvaluated(I,V){const{it:K,gen:J}=this;if(K.opts.unevaluated&&(K.props!==!0||K.items!==!0))return J.if(V,()=>this.mergeEvaluated(I,i.Name)),!0}}Ue.KeywordCxt=x;function B(k,I,V,K){const J=new x(k,V,I);"code"in V?V.code(J,K):J.$data&&V.validate?(0,s.funcKeywordCode)(J,V):"macro"in V?(0,s.macroKeywordCode)(J,V):(V.compile||V.validate)&&(0,s.funcKeywordCode)(J,V)}const Q=/^\/(?:[^~]|~0|~1)*$/,de=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ie(k,{dataLevel:I,dataNames:V,dataPathArr:K}){let J,te;if(k==="")return c.default.rootData;if(k[0]==="/"){if(!Q.test(k))throw new Error(`Invalid JSON-pointer: ${k}`);J=k,te=c.default.rootData}else{const Re=de.exec(k);if(!Re)throw new Error(`Invalid JSON-pointer: ${k}`);const we=+Re[1];if(J=Re[2],J==="#"){if(we>=I)throw new Error(Oe("property/index",we));return K[I-we]}if(we>I)throw new Error(Oe("data",we));if(te=V[I-we],!J)return te}let _e=te;const Te=J.split("/");for(const Re of Te)Re&&(te=(0,i._)`${te}${(0,i.getProperty)((0,u.unescapeJsonPointer)(Re))}`,_e=(0,i._)`${_e} && ${te}`);return _e;function Oe(Re,we){return`Cannot access ${Re} ${we} levels up, current level is ${I}`}}return Ue.getData=ie,Ue}var Kt={},Ss;function Ar(){if(Ss)return Kt;Ss=1,Object.defineProperty(Kt,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return Kt.default=e,Kt}var zt={},Cs;function Jn(){if(Cs)return zt;Cs=1,Object.defineProperty(zt,"__esModule",{value:!0});const e=Bn();class t extends Error{constructor(r,o,s,a){super(a||`can't resolve reference ${s} from id ${o}`),this.missingRef=(0,e.resolveUrl)(r,o,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return zt.default=t,zt}var Ie={},Es;function jr(){if(Es)return Ie;Es=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;const e=re(),t=Ar(),n=Ye(),r=Bn(),o=ue(),s=Gn();class a{constructor(h){var l;this.refs={},this.dynamicAnchors={};let g;typeof h.schema=="object"&&(g=h.schema),this.schema=h.schema,this.schemaId=h.schemaId,this.root=h.root||this,this.baseId=(l=h.baseId)!==null&&l!==void 0?l:(0,r.normalizeId)(g?.[h.schemaId||"$id"]),this.schemaPath=h.schemaPath,this.localRefs=h.localRefs,this.meta=h.meta,this.$async=g?.$async,this.refs={}}}Ie.SchemaEnv=a;function i(f){const h=u.call(this,f);if(h)return h;const l=(0,r.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:g,lines:b}=this.opts.code,{ownProperties:$}=this.opts,w=new e.CodeGen(this.scope,{es5:g,lines:b,ownProperties:$});let C;f.$async&&(C=w.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const P=w.scopeName("validate");f.validateName=P;const T={gen:w,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:w.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,e.stringify)(f.schema)}:{ref:f.schema}),validateName:P,ValidationError:C,schema:f.schema,schemaEnv:f,rootId:l,baseId:f.baseId||l,schemaPath:e.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let R;try{this._compilations.add(f),(0,s.validateFunctionCode)(T),w.optimize(this.opts.code.optimize);const N=w.toString();R=`${w.scopeRefs(n.default.scope)}return ${N}`,this.opts.code.process&&(R=this.opts.code.process(R,f));const z=new Function(`${n.default.self}`,`${n.default.scope}`,R)(this,this.scope.get());if(this.scope.value(P,{ref:z}),z.errors=null,z.schema=f.schema,z.schemaEnv=f,f.$async&&(z.$async=!0),this.opts.code.source===!0&&(z.source={validateName:P,validateCode:N,scopeValues:w._values}),this.opts.unevaluated){const{props:U,items:H}=T;z.evaluated={props:U instanceof e.Name?void 0:U,items:H instanceof e.Name?void 0:H,dynamicProps:U instanceof e.Name,dynamicItems:H instanceof e.Name},z.source&&(z.source.evaluated=(0,e.stringify)(z.evaluated))}return f.validate=z,f}catch(N){throw delete f.validate,delete f.validateName,R&&this.logger.error("Error compiling schema, function code:",R),N}finally{this._compilations.delete(f)}}Ie.compileSchema=i;function c(f,h,l){var g;l=(0,r.resolveUrl)(this.opts.uriResolver,h,l);const b=f.refs[l];if(b)return b;let $=p.call(this,f,l);if($===void 0){const w=(g=f.localRefs)===null||g===void 0?void 0:g[l],{schemaId:C}=this.opts;w&&($=new a({schema:w,schemaId:C,root:f,baseId:h}))}if($!==void 0)return f.refs[l]=d.call(this,$)}Ie.resolveRef=c;function d(f){return(0,r.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:i.call(this,f)}function u(f){for(const h of this._compilations)if(m(h,f))return h}Ie.getCompilingSchema=u;function m(f,h){return f.schema===h.schema&&f.root===h.root&&f.baseId===h.baseId}function p(f,h){let l;for(;typeof(l=this.refs[h])=="string";)h=l;return l||this.schemas[h]||y.call(this,f,h)}function y(f,h){const l=this.opts.uriResolver.parse(h),g=(0,r._getFullPath)(this.opts.uriResolver,l);let b=(0,r.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&g===b)return v.call(this,l,f);const $=(0,r.normalizeId)(g),w=this.refs[$]||this.schemas[$];if(typeof w=="string"){const C=y.call(this,f,w);return typeof C?.schema!="object"?void 0:v.call(this,l,C)}if(typeof w?.schema=="object"){if(w.validate||i.call(this,w),$===(0,r.normalizeId)(h)){const{schema:C}=w,{schemaId:P}=this.opts,T=C[P];return T&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,T)),new a({schema:C,schemaId:P,root:f,baseId:b})}return v.call(this,l,w)}}Ie.resolveSchema=y;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(f,{baseId:h,schema:l,root:g}){var b;if(((b=f.fragment)===null||b===void 0?void 0:b[0])!=="/")return;for(const C of f.fragment.slice(1).split("/")){if(typeof l=="boolean")return;const P=l[(0,o.unescapeFragment)(C)];if(P===void 0)return;l=P;const T=typeof l=="object"&&l[this.opts.schemaId];!_.has(C)&&T&&(h=(0,r.resolveUrl)(this.opts.uriResolver,h,T))}let $;if(typeof l!="boolean"&&l.$ref&&!(0,o.schemaHasRulesButRef)(l,this.RULES)){const C=(0,r.resolveUrl)(this.opts.uriResolver,h,l.$ref);$=y.call(this,g,C)}const{schemaId:w}=this.opts;if($=$||new a({schema:l,schemaId:w,root:g,baseId:h}),$.schema!==$.root.schema)return $}return Ie}const Li="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Ai="Meta-schema for $data reference (JSON AnySchema extension proposal)",ji="object",Ti=["$data"],xi={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},qi=!1,Di={$id:Li,description:Ai,type:ji,required:Ti,properties:xi,additionalProperties:qi};var Ht={},St={exports:{}},dr,Ps;function Mi(){return Ps||(Ps=1,dr={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),dr}var fr,ks;function Vi(){if(ks)return fr;ks=1;const{HEX:e}=Mi(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(v){if(i(v,".")<3)return{host:v,isIPV4:!1};const f=v.match(t)||[],[h]=f;return h?{host:a(h,"."),isIPV4:!0}:{host:v,isIPV4:!1}}function r(v,f=!1){let h="",l=!0;for(const g of v){if(e[g]===void 0)return;g!=="0"&&l===!0&&(l=!1),l||(h+=g)}return f&&h.length===0&&(h="0"),h}function o(v){let f=0;const h={error:!1,address:"",zone:""},l=[],g=[];let b=!1,$=!1,w=!1;function C(){if(g.length){if(b===!1){const P=r(g);if(P!==void 0)l.push(P);else return h.error=!0,!1}g.length=0}return!0}for(let P=0;P<v.length;P++){const T=v[P];if(!(T==="["||T==="]"))if(T===":"){if($===!0&&(w=!0),!C())break;if(f++,l.push(":"),f>7){h.error=!0;break}P-1>=0&&v[P-1]===":"&&($=!0);continue}else if(T==="%"){if(!C())break;b=!0}else{g.push(T);continue}}return g.length&&(b?h.zone=g.join(""):w?l.push(g.join("")):l.push(r(g))),h.address=l.join(""),h}function s(v){if(i(v,":")<2)return{host:v,isIPV6:!1};const f=o(v);if(f.error)return{host:v,isIPV6:!1};{let h=f.address,l=f.address;return f.zone&&(h+="%"+f.zone,l+="%25"+f.zone),{host:h,escapedHost:l,isIPV6:!0}}}function a(v,f){let h="",l=!0;const g=v.length;for(let b=0;b<g;b++){const $=v[b];$==="0"&&l?(b+1<=g&&v[b+1]===f||b+1===g)&&(h+=$,l=!1):($===f?l=!0:l=!1,h+=$)}return h}function i(v,f){let h=0;for(let l=0;l<v.length;l++)v[l]===f&&h++;return h}const c=/^\.\.?\//u,d=/^\/\.(?:\/|$)/u,u=/^\/\.\.(?:\/|$)/u,m=/^\/?(?:.|\n)*?(?=\/|$)/u;function p(v){const f=[];for(;v.length;)if(v.match(c))v=v.replace(c,"");else if(v.match(d))v=v.replace(d,"/");else if(v.match(u))v=v.replace(u,"/"),f.pop();else if(v==="."||v==="..")v="";else{const h=v.match(m);if(h){const l=h[0];v=v.slice(l.length),f.push(l)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function y(v,f){const h=f!==!0?escape:unescape;return v.scheme!==void 0&&(v.scheme=h(v.scheme)),v.userinfo!==void 0&&(v.userinfo=h(v.userinfo)),v.host!==void 0&&(v.host=h(v.host)),v.path!==void 0&&(v.path=h(v.path)),v.query!==void 0&&(v.query=h(v.query)),v.fragment!==void 0&&(v.fragment=h(v.fragment)),v}function _(v){const f=[];if(v.userinfo!==void 0&&(f.push(v.userinfo),f.push("@")),v.host!==void 0){let h=unescape(v.host);const l=n(h);if(l.isIPV4)h=l.host;else{const g=s(l.host);g.isIPV6===!0?h=`[${g.escapedHost}]`:h=v.host}f.push(h)}return(typeof v.port=="number"||typeof v.port=="string")&&(f.push(":"),f.push(String(v.port))),f.length?f.join(""):void 0}return fr={recomposeAuthority:_,normalizeComponentEncoding:y,removeDotSegments:p,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},fr}var hr,Os;function Fi(){if(Os)return hr;Os=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(l){return typeof l.secure=="boolean"?l.secure:String(l.scheme).toLowerCase()==="wss"}function r(l){return l.host||(l.error=l.error||"HTTP URIs must have a host."),l}function o(l){const g=String(l.scheme).toLowerCase()==="https";return(l.port===(g?443:80)||l.port==="")&&(l.port=void 0),l.path||(l.path="/"),l}function s(l){return l.secure=n(l),l.resourceName=(l.path||"/")+(l.query?"?"+l.query:""),l.path=void 0,l.query=void 0,l}function a(l){if((l.port===(n(l)?443:80)||l.port==="")&&(l.port=void 0),typeof l.secure=="boolean"&&(l.scheme=l.secure?"wss":"ws",l.secure=void 0),l.resourceName){const[g,b]=l.resourceName.split("?");l.path=g&&g!=="/"?g:void 0,l.query=b,l.resourceName=void 0}return l.fragment=void 0,l}function i(l,g){if(!l.path)return l.error="URN can not be parsed",l;const b=l.path.match(t);if(b){const $=g.scheme||l.scheme||"urn";l.nid=b[1].toLowerCase(),l.nss=b[2];const w=`${$}:${g.nid||l.nid}`,C=h[w];l.path=void 0,C&&(l=C.parse(l,g))}else l.error=l.error||"URN can not be parsed.";return l}function c(l,g){const b=g.scheme||l.scheme||"urn",$=l.nid.toLowerCase(),w=`${b}:${g.nid||$}`,C=h[w];C&&(l=C.serialize(l,g));const P=l,T=l.nss;return P.path=`${$||g.nid}:${T}`,g.skipEscape=!0,P}function d(l,g){const b=l;return b.uuid=b.nss,b.nss=void 0,!g.tolerant&&(!b.uuid||!e.test(b.uuid))&&(b.error=b.error||"UUID is not valid."),b}function u(l){const g=l;return g.nss=(l.uuid||"").toLowerCase(),g}const m={scheme:"http",domainHost:!0,parse:r,serialize:o},p={scheme:"https",domainHost:m.domainHost,parse:r,serialize:o},y={scheme:"ws",domainHost:!0,parse:s,serialize:a},_={scheme:"wss",domainHost:y.domainHost,parse:y.parse,serialize:y.serialize},h={http:m,https:p,ws:y,wss:_,urn:{scheme:"urn",parse:i,serialize:c,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:d,serialize:u,skipNormalize:!0}};return hr=h,hr}var Rs;function Ui(){if(Rs)return St.exports;Rs=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:o}=Vi(),s=Fi();function a(f,h){return typeof f=="string"?f=u(_(f,h),h):typeof f=="object"&&(f=_(u(f,h),h)),f}function i(f,h,l){const g=Object.assign({scheme:"null"},l),b=c(_(f,g),_(h,g),g,!0);return u(b,{...g,skipEscape:!0})}function c(f,h,l,g){const b={};return g||(f=_(u(f,l),l),h=_(u(h,l),l)),l=l||{},!l.tolerant&&h.scheme?(b.scheme=h.scheme,b.userinfo=h.userinfo,b.host=h.host,b.port=h.port,b.path=n(h.path||""),b.query=h.query):(h.userinfo!==void 0||h.host!==void 0||h.port!==void 0?(b.userinfo=h.userinfo,b.host=h.host,b.port=h.port,b.path=n(h.path||""),b.query=h.query):(h.path?(h.path.charAt(0)==="/"?b.path=n(h.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?b.path="/"+h.path:f.path?b.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+h.path:b.path=h.path,b.path=n(b.path)),b.query=h.query):(b.path=f.path,h.query!==void 0?b.query=h.query:b.query=f.query),b.userinfo=f.userinfo,b.host=f.host,b.port=f.port),b.scheme=f.scheme),b.fragment=h.fragment,b}function d(f,h,l){return typeof f=="string"?(f=unescape(f),f=u(o(_(f,l),!0),{...l,skipEscape:!0})):typeof f=="object"&&(f=u(o(f,!0),{...l,skipEscape:!0})),typeof h=="string"?(h=unescape(h),h=u(o(_(h,l),!0),{...l,skipEscape:!0})):typeof h=="object"&&(h=u(o(h,!0),{...l,skipEscape:!0})),f.toLowerCase()===h.toLowerCase()}function u(f,h){const l={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},g=Object.assign({},h),b=[],$=s[(g.scheme||l.scheme||"").toLowerCase()];$&&$.serialize&&$.serialize(l,g),l.path!==void 0&&(g.skipEscape?l.path=unescape(l.path):(l.path=escape(l.path),l.scheme!==void 0&&(l.path=l.path.split("%3A").join(":")))),g.reference!=="suffix"&&l.scheme&&b.push(l.scheme,":");const w=r(l);if(w!==void 0&&(g.reference!=="suffix"&&b.push("//"),b.push(w),l.path&&l.path.charAt(0)!=="/"&&b.push("/")),l.path!==void 0){let C=l.path;!g.absolutePath&&(!$||!$.absolutePath)&&(C=n(C)),w===void 0&&(C=C.replace(/^\/\//u,"/%2F")),b.push(C)}return l.query!==void 0&&b.push("?",l.query),l.fragment!==void 0&&b.push("#",l.fragment),b.join("")}const m=Array.from({length:127},(f,h)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(h)));function p(f){let h=0;for(let l=0,g=f.length;l<g;++l)if(h=f.charCodeAt(l),h>126||m[h])return!0;return!1}const y=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(f,h){const l=Object.assign({},h),g={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},b=f.indexOf("%")!==-1;let $=!1;l.reference==="suffix"&&(f=(l.scheme?l.scheme+":":"")+"//"+f);const w=f.match(y);if(w){if(g.scheme=w[1],g.userinfo=w[3],g.host=w[4],g.port=parseInt(w[5],10),g.path=w[6]||"",g.query=w[7],g.fragment=w[8],isNaN(g.port)&&(g.port=w[5]),g.host){const P=t(g.host);if(P.isIPV4===!1){const T=e(P.host);g.host=T.host.toLowerCase(),$=T.isIPV6}else g.host=P.host,$=!0}g.scheme===void 0&&g.userinfo===void 0&&g.host===void 0&&g.port===void 0&&g.query===void 0&&!g.path?g.reference="same-document":g.scheme===void 0?g.reference="relative":g.fragment===void 0?g.reference="absolute":g.reference="uri",l.reference&&l.reference!=="suffix"&&l.reference!==g.reference&&(g.error=g.error||"URI is not a "+l.reference+" reference.");const C=s[(l.scheme||g.scheme||"").toLowerCase()];if(!l.unicodeSupport&&(!C||!C.unicodeSupport)&&g.host&&(l.domainHost||C&&C.domainHost)&&$===!1&&p(g.host))try{g.host=URL.domainToASCII(g.host.toLowerCase())}catch(P){g.error=g.error||"Host's domain name can not be converted to ASCII: "+P}(!C||C&&!C.skipNormalize)&&(b&&g.scheme!==void 0&&(g.scheme=unescape(g.scheme)),b&&g.host!==void 0&&(g.host=unescape(g.host)),g.path&&(g.path=escape(unescape(g.path))),g.fragment&&(g.fragment=encodeURI(decodeURIComponent(g.fragment)))),C&&C.parse&&C.parse(g,l)}else g.error=g.error||"URI can not be parsed.";return g}const v={SCHEMES:s,normalize:a,resolve:i,resolveComponents:c,equal:d,serialize:u,parse:_};return St.exports=v,St.exports.default=v,St.exports.fastUri=v,St.exports}var Ns;function Ki(){if(Ns)return Ht;Ns=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=Ui();return e.code='require("ajv/dist/runtime/uri").default',Ht.default=e,Ht}var Is;function zi(){return Is||(Is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Gn();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=re();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Ar(),o=Jn(),s=Jo(),a=jr(),i=re(),c=Bn(),d=Fn(),u=ue(),m=Di,p=Ki(),y=(F,O)=>new RegExp(F,O);y.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},l=200;function g(F){var O,q,L,S,E,x,B,Q,de,ie,k,I,V,K,J,te,_e,Te,Oe,Re,we,lt,Le,Xn,Yn;const bt=F.strict,Zn=(O=F.code)===null||O===void 0?void 0:O.optimize,Mr=Zn===!0||Zn===void 0?1:Zn||0,Vr=(L=(q=F.code)===null||q===void 0?void 0:q.regExp)!==null&&L!==void 0?L:y,$a=(S=F.uriResolver)!==null&&S!==void 0?S:p.default;return{strictSchema:(x=(E=F.strictSchema)!==null&&E!==void 0?E:bt)!==null&&x!==void 0?x:!0,strictNumbers:(Q=(B=F.strictNumbers)!==null&&B!==void 0?B:bt)!==null&&Q!==void 0?Q:!0,strictTypes:(ie=(de=F.strictTypes)!==null&&de!==void 0?de:bt)!==null&&ie!==void 0?ie:"log",strictTuples:(I=(k=F.strictTuples)!==null&&k!==void 0?k:bt)!==null&&I!==void 0?I:"log",strictRequired:(K=(V=F.strictRequired)!==null&&V!==void 0?V:bt)!==null&&K!==void 0?K:!1,code:F.code?{...F.code,optimize:Mr,regExp:Vr}:{optimize:Mr,regExp:Vr},loopRequired:(J=F.loopRequired)!==null&&J!==void 0?J:l,loopEnum:(te=F.loopEnum)!==null&&te!==void 0?te:l,meta:(_e=F.meta)!==null&&_e!==void 0?_e:!0,messages:(Te=F.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(Oe=F.inlineRefs)!==null&&Oe!==void 0?Oe:!0,schemaId:(Re=F.schemaId)!==null&&Re!==void 0?Re:"$id",addUsedSchema:(we=F.addUsedSchema)!==null&&we!==void 0?we:!0,validateSchema:(lt=F.validateSchema)!==null&&lt!==void 0?lt:!0,validateFormats:(Le=F.validateFormats)!==null&&Le!==void 0?Le:!0,unicodeRegExp:(Xn=F.unicodeRegExp)!==null&&Xn!==void 0?Xn:!0,int32range:(Yn=F.int32range)!==null&&Yn!==void 0?Yn:!0,uriResolver:$a}}class b{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...g(O)};const{es5:q,lines:L}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:v,es5:q,lines:L}),this.logger=D(O.logger);const S=O.validateFormats;O.validateFormats=!1,this.RULES=(0,s.getRules)(),$.call(this,f,O,"NOT SUPPORTED"),$.call(this,h,O,"DEPRECATED","warn"),this._metaOpts=R.call(this),O.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&T.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),C.call(this),O.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:q,schemaId:L}=this.opts;let S=m;L==="id"&&(S={...m},S.id=S.$id,delete S.$id),q&&O&&this.addMetaSchema(S,S[L],!1)}defaultMeta(){const{meta:O,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[q]||O:void 0}validate(O,q){let L;if(typeof O=="string"){if(L=this.getSchema(O),!L)throw new Error(`no schema with key or ref "${O}"`)}else L=this.compile(O);const S=L(q);return"$async"in L||(this.errors=L.errors),S}compile(O,q){const L=this._addSchema(O,q);return L.validate||this._compileSchemaEnv(L)}compileAsync(O,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return S.call(this,O,q);async function S(ie,k){await E.call(this,ie.$schema);const I=this._addSchema(ie,k);return I.validate||x.call(this,I)}async function E(ie){ie&&!this.getSchema(ie)&&await S.call(this,{$ref:ie},!0)}async function x(ie){try{return this._compileSchemaEnv(ie)}catch(k){if(!(k instanceof o.default))throw k;return B.call(this,k),await Q.call(this,k.missingSchema),x.call(this,ie)}}function B({missingSchema:ie,missingRef:k}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${k} cannot be resolved`)}async function Q(ie){const k=await de.call(this,ie);this.refs[ie]||await E.call(this,k.$schema),this.refs[ie]||this.addSchema(k,ie,q)}async function de(ie){const k=this._loading[ie];if(k)return k;try{return await(this._loading[ie]=L(ie))}finally{delete this._loading[ie]}}}addSchema(O,q,L,S=this.opts.validateSchema){if(Array.isArray(O)){for(const x of O)this.addSchema(x,void 0,L,S);return this}let E;if(typeof O=="object"){const{schemaId:x}=this.opts;if(E=O[x],E!==void 0&&typeof E!="string")throw new Error(`schema ${x} must be string`)}return q=(0,c.normalizeId)(q||E),this._checkUnique(q),this.schemas[q]=this._addSchema(O,L,q,S,!0),this}addMetaSchema(O,q,L=this.opts.validateSchema){return this.addSchema(O,q,!0,L),this}validateSchema(O,q){if(typeof O=="boolean")return!0;let L;if(L=O.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(L,O);if(!S&&q){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return S}getSchema(O){let q;for(;typeof(q=w.call(this,O))=="string";)O=q;if(q===void 0){const{schemaId:L}=this.opts,S=new a.SchemaEnv({schema:{},schemaId:L});if(q=a.resolveSchema.call(this,S,O),!q)return;this.refs[O]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=w.call(this,O);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const q=O;this._cache.delete(q);let L=O[this.opts.schemaId];return L&&(L=(0,c.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const q of O)this.addKeyword(q);return this}addKeyword(O,q){let L;if(typeof O=="string")L=O,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=L);else if(typeof O=="object"&&q===void 0){if(q=O,L=q.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,L,q),!q)return(0,u.eachItem)(L,E=>H.call(this,E)),this;me.call(this,q);const S={...q,type:(0,d.getJSONTypes)(q.type),schemaType:(0,d.getJSONTypes)(q.schemaType)};return(0,u.eachItem)(L,S.type.length===0?E=>H.call(this,E,S):E=>S.type.forEach(x=>H.call(this,E,S,x))),this}getKeyword(O){const q=this.RULES.all[O];return typeof q=="object"?q.definition:!!q}removeKeyword(O){const{RULES:q}=this;delete q.keywords[O],delete q.all[O];for(const L of q.rules){const S=L.rules.findIndex(E=>E.keyword===O);S>=0&&L.rules.splice(S,1)}return this}addFormat(O,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[O]=q,this}errorsText(O=this.errors,{separator:q=", ",dataVar:L="data"}={}){return!O||O.length===0?"No errors":O.map(S=>`${L}${S.instancePath} ${S.message}`).reduce((S,E)=>S+q+E)}$dataMetaSchema(O,q){const L=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const S of q){const E=S.split("/").slice(1);let x=O;for(const B of E)x=x[B];for(const B in L){const Q=L[B];if(typeof Q!="object")continue;const{$data:de}=Q.definition,ie=x[B];de&&ie&&(x[B]=ce(ie))}}return O}_removeAllSchemas(O,q){for(const L in O){const S=O[L];(!q||q.test(L))&&(typeof S=="string"?delete O[L]:S&&!S.meta&&(this._cache.delete(S.schema),delete O[L]))}}_addSchema(O,q,L,S=this.opts.validateSchema,E=this.opts.addUsedSchema){let x;const{schemaId:B}=this.opts;if(typeof O=="object")x=O[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let Q=this._cache.get(O);if(Q!==void 0)return Q;L=(0,c.normalizeId)(x||L);const de=c.getSchemaRefs.call(this,O,L);return Q=new a.SchemaEnv({schema:O,schemaId:B,meta:q,baseId:L,localRefs:de}),this._cache.set(Q.schema,Q),E&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=Q),S&&this.validateSchema(O,!0),Q}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):a.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const q=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,O)}finally{this.opts=q}}}b.ValidationError=r.default,b.MissingRefError=o.default,e.default=b;function $(F,O,q,L="error"){for(const S in F){const E=S;E in O&&this.logger[L](`${q}: option ${S}. ${F[E]}`)}}function w(F){return F=(0,c.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const O in F)this.addSchema(F[O],O)}function P(){for(const F in this.opts.formats){const O=this.opts.formats[F];O&&this.addFormat(F,O)}}function T(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in F){const q=F[O];q.keyword||(q.keyword=O),this.addKeyword(q)}}function R(){const F={...this.opts};for(const O of _)delete F[O];return F}const N={log(){},warn(){},error(){}};function D(F){if(F===!1)return N;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function U(F,O){const{RULES:q}=this;if((0,u.eachItem)(F,L=>{if(q.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!z.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function H(F,O,q){var L;const S=O?.post;if(q&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let x=S?E.post:E.rules.find(({type:Q})=>Q===q);if(x||(x={type:q,rules:[]},E.rules.push(x)),E.keywords[F]=!0,!O)return;const B={keyword:F,definition:{...O,type:(0,d.getJSONTypes)(O.type),schemaType:(0,d.getJSONTypes)(O.schemaType)}};O.before?ne.call(this,x,B,O.before):x.rules.push(B),E.all[F]=B,(L=O.implements)===null||L===void 0||L.forEach(Q=>this.addKeyword(Q))}function ne(F,O,q){const L=F.rules.findIndex(S=>S.keyword===q);L>=0?F.rules.splice(L,0,O):(F.rules.push(O),this.logger.warn(`rule ${q} is not defined`))}function me(F){let{metaSchema:O}=F;O!==void 0&&(F.$data&&this.opts.$data&&(O=ce(O)),F.validateSchema=this.compile(O,!0))}const se={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ce(F){return{anyOf:[F,se]}}}(sr)),sr}var Wt={},Bt={},Gt={},Ls;function Hi(){if(Ls)return Gt;Ls=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Gt.default=e,Gt}var Qe={},As;function Wi(){if(As)return Qe;As=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.callRef=Qe.getValidate=void 0;const e=Jn(),t=qe(),n=re(),r=Ye(),o=jr(),s=ue(),a={keyword:"$ref",schemaType:"string",code(d){const{gen:u,schema:m,it:p}=d,{baseId:y,schemaEnv:_,validateName:v,opts:f,self:h}=p,{root:l}=_;if((m==="#"||m==="#/")&&y===l.baseId)return b();const g=o.resolveRef.call(h,l,y,m);if(g===void 0)throw new e.default(p.opts.uriResolver,y,m);if(g instanceof o.SchemaEnv)return $(g);return w(g);function b(){if(_===l)return c(d,v,_,_.$async);const C=u.scopeValue("root",{ref:l});return c(d,(0,n._)`${C}.validate`,l,l.$async)}function $(C){const P=i(d,C);c(d,P,C,C.$async)}function w(C){const P=u.scopeValue("schema",f.code.source===!0?{ref:C,code:(0,n.stringify)(C)}:{ref:C}),T=u.name("valid"),R=d.subschema({schema:C,dataTypes:[],schemaPath:n.nil,topSchemaRef:P,errSchemaPath:m},T);d.mergeEvaluated(R),d.ok(T)}}};function i(d,u){const{gen:m}=d;return u.validate?m.scopeValue("validate",{ref:u.validate}):(0,n._)`${m.scopeValue("wrapper",{ref:u})}.validate`}Qe.getValidate=i;function c(d,u,m,p){const{gen:y,it:_}=d,{allErrors:v,schemaEnv:f,opts:h}=_,l=h.passContext?r.default.this:n.nil;p?g():b();function g(){if(!f.$async)throw new Error("async schema referenced by sync schema");const C=y.let("valid");y.try(()=>{y.code((0,n._)`await ${(0,t.callValidateCode)(d,u,l)}`),w(u),v||y.assign(C,!0)},P=>{y.if((0,n._)`!(${P} instanceof ${_.ValidationError})`,()=>y.throw(P)),$(P),v||y.assign(C,!1)}),d.ok(C)}function b(){d.result((0,t.callValidateCode)(d,u,l),()=>w(u),()=>$(u))}function $(C){const P=(0,n._)`${C}.errors`;y.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${P} : ${r.default.vErrors}.concat(${P})`),y.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function w(C){var P;if(!_.opts.unevaluated)return;const T=(P=m?.validate)===null||P===void 0?void 0:P.evaluated;if(_.props!==!0)if(T&&!T.dynamicProps)T.props!==void 0&&(_.props=s.mergeEvaluated.props(y,T.props,_.props));else{const R=y.var("props",(0,n._)`${C}.evaluated.props`);_.props=s.mergeEvaluated.props(y,R,_.props,n.Name)}if(_.items!==!0)if(T&&!T.dynamicItems)T.items!==void 0&&(_.items=s.mergeEvaluated.items(y,T.items,_.items));else{const R=y.var("items",(0,n._)`${C}.evaluated.items`);_.items=s.mergeEvaluated.items(y,R,_.items,n.Name)}}}return Qe.callRef=c,Qe.default=a,Qe}var js;function Bi(){if(js)return Bt;js=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=Hi(),t=Wi(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Bt.default=n,Bt}var Jt={},Qt={},Ts;function Gi(){if(Ts)return Qt;Ts=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=re(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:a})=>(0,e.str)`must be ${n[s].okStr} ${a}`,params:({keyword:s,schemaCode:a})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${a}}`},o={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:a,data:i,schemaCode:c}=s;s.fail$data((0,e._)`${i} ${n[a].fail} ${c} || isNaN(${i})`)}};return Qt.default=o,Qt}var Xt={},xs;function Ji(){if(xs)return Xt;xs=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=re(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:o,data:s,schemaCode:a,it:i}=r,c=i.opts.multipleOfPrecision,d=o.let("res"),u=c?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${c}`:(0,e._)`${d} !== parseInt(${d})`;r.fail$data((0,e._)`(${a} === 0 || (${d} = ${s}/${a}, ${u}))`)}};return Xt.default=n,Xt}var Yt={},Zt={},qs;function Qi(){if(qs)return Zt;qs=1,Object.defineProperty(Zt,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,o=0,s;for(;o<n;)r++,s=t.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=t.charCodeAt(o),(s&64512)===56320&&o++);return r}return Zt.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Zt}var Ds;function Xi(){if(Ds)return Yt;Ds=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=re(),t=ue(),n=Qi(),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:a}){const i=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${a} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:a,data:i,schemaCode:c,it:d}=s,u=a==="maxLength"?e.operators.GT:e.operators.LT,m=d.opts.unicode===!1?(0,e._)`${i}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${i})`;s.fail$data((0,e._)`${m} ${u} ${c}`)}};return Yt.default=o,Yt}var en={},Ms;function Yi(){if(Ms)return en;Ms=1,Object.defineProperty(en,"__esModule",{value:!0});const e=qe(),t=re(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,t.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,t._)`{pattern: ${o}}`},code(o){const{data:s,$data:a,schema:i,schemaCode:c,it:d}=o,u=d.opts.unicodeRegExp?"u":"",m=a?(0,t._)`(new RegExp(${c}, ${u}))`:(0,e.usePattern)(o,i);o.fail$data((0,t._)`!${m}.test(${s})`)}};return en.default=r,en}var tn={},Vs;function Zi(){if(Vs)return tn;Vs=1,Object.defineProperty(tn,"__esModule",{value:!0});const e=re(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:a}=r,i=o==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${i} ${a}`)}};return tn.default=n,tn}var nn={},Fs;function el(){if(Fs)return nn;Fs=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=qe(),t=re(),n=ue(),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:a,schema:i,schemaCode:c,data:d,$data:u,it:m}=s,{opts:p}=m;if(!u&&i.length===0)return;const y=i.length>=p.loopRequired;if(m.allErrors?_():v(),p.strictRequired){const l=s.parentSchema.properties,{definedProperties:g}=s.it;for(const b of i)if(l?.[b]===void 0&&!g.has(b)){const $=m.schemaEnv.baseId+m.errSchemaPath,w=`required property "${b}" is not defined at "${$}" (strictRequired)`;(0,n.checkStrictMode)(m,w,m.opts.strictRequired)}}function _(){if(y||u)s.block$data(t.nil,f);else for(const l of i)(0,e.checkReportMissingProp)(s,l)}function v(){const l=a.let("missing");if(y||u){const g=a.let("valid",!0);s.block$data(g,()=>h(l,g)),s.ok(g)}else a.if((0,e.checkMissingProp)(s,i,l)),(0,e.reportMissingProp)(s,l),a.else()}function f(){a.forOf("prop",c,l=>{s.setParams({missingProperty:l}),a.if((0,e.noPropertyInData)(a,d,l,p.ownProperties),()=>s.error())})}function h(l,g){s.setParams({missingProperty:l}),a.forOf(l,c,()=>{a.assign(g,(0,e.propertyInData)(a,d,l,p.ownProperties)),a.if((0,t.not)(g),()=>{s.error(),a.break()})},t.nil)}}};return nn.default=o,nn}var rn={},Us;function tl(){if(Us)return rn;Us=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=re(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:a}=r,i=o==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${i} ${a}`)}};return rn.default=n,rn}var sn={},on={},Ks;function Tr(){if(Ks)return on;Ks=1,Object.defineProperty(on,"__esModule",{value:!0});const e=Xo();return e.code='require("ajv/dist/runtime/equal").default',on.default=e,on}var zs;function nl(){if(zs)return sn;zs=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=Fn(),t=re(),n=ue(),r=Tr(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:i}})=>(0,t.str)`must NOT have duplicate items (items ## ${i} and ${a} are identical)`,params:({params:{i:a,j:i}})=>(0,t._)`{i: ${a}, j: ${i}}`},code(a){const{gen:i,data:c,$data:d,schema:u,parentSchema:m,schemaCode:p,it:y}=a;if(!d&&!u)return;const _=i.let("valid"),v=m.items?(0,e.getSchemaTypes)(m.items):[];a.block$data(_,f,(0,t._)`${p} === false`),a.ok(_);function f(){const b=i.let("i",(0,t._)`${c}.length`),$=i.let("j");a.setParams({i:b,j:$}),i.assign(_,!0),i.if((0,t._)`${b} > 1`,()=>(h()?l:g)(b,$))}function h(){return v.length>0&&!v.some(b=>b==="object"||b==="array")}function l(b,$){const w=i.name("item"),C=(0,e.checkDataTypes)(v,w,y.opts.strictNumbers,e.DataType.Wrong),P=i.const("indices",(0,t._)`{}`);i.for((0,t._)`;${b}--;`,()=>{i.let(w,(0,t._)`${c}[${b}]`),i.if(C,(0,t._)`continue`),v.length>1&&i.if((0,t._)`typeof ${w} == "string"`,(0,t._)`${w} += "_"`),i.if((0,t._)`typeof ${P}[${w}] == "number"`,()=>{i.assign($,(0,t._)`${P}[${w}]`),a.error(),i.assign(_,!1).break()}).code((0,t._)`${P}[${w}] = ${b}`)})}function g(b,$){const w=(0,n.useFunc)(i,r.default),C=i.name("outer");i.label(C).for((0,t._)`;${b}--;`,()=>i.for((0,t._)`${$} = ${b}; ${$}--;`,()=>i.if((0,t._)`${w}(${c}[${b}], ${c}[${$}])`,()=>{a.error(),i.assign(_,!1).break(C)})))}}};return sn.default=s,sn}var an={},Hs;function rl(){if(Hs)return an;Hs=1,Object.defineProperty(an,"__esModule",{value:!0});const e=re(),t=ue(),n=Tr(),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:a,data:i,$data:c,schemaCode:d,schema:u}=s;c||u&&typeof u=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(a,n.default)}(${i}, ${d})`):s.fail((0,e._)`${u} !== ${i}`)}};return an.default=o,an}var ln={},Ws;function sl(){if(Ws)return ln;Ws=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=re(),t=ue(),n=Tr(),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:a,data:i,$data:c,schema:d,schemaCode:u,it:m}=s;if(!c&&d.length===0)throw new Error("enum must have non-empty array");const p=d.length>=m.opts.loopEnum;let y;const _=()=>y??(y=(0,t.useFunc)(a,n.default));let v;if(p||c)v=a.let("valid"),s.block$data(v,f);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const l=a.const("vSchema",u);v=(0,e.or)(...d.map((g,b)=>h(l,b)))}s.pass(v);function f(){a.assign(v,!1),a.forOf("v",u,l=>a.if((0,e._)`${_()}(${i}, ${l})`,()=>a.assign(v,!0).break()))}function h(l,g){const b=d[g];return typeof b=="object"&&b!==null?(0,e._)`${_()}(${i}, ${l}[${g}])`:(0,e._)`${i} === ${b}`}}};return ln.default=o,ln}var Bs;function ol(){if(Bs)return Jt;Bs=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e=Gi(),t=Ji(),n=Xi(),r=Yi(),o=Zi(),s=el(),a=tl(),i=nl(),c=rl(),d=sl(),u=[e.default,t.default,n.default,r.default,o.default,s.default,a.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,d.default];return Jt.default=u,Jt}var cn={},ft={},Gs;function Yo(){if(Gs)return ft;Gs=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.validateAdditionalItems=void 0;const e=re(),t=ue(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:a,it:i}=s,{items:c}=a;if(!Array.isArray(c)){(0,t.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(s,c)}};function o(s,a){const{gen:i,schema:c,data:d,keyword:u,it:m}=s;m.items=!0;const p=i.const("len",(0,e._)`${d}.length`);if(c===!1)s.setParams({len:a.length}),s.pass((0,e._)`${p} <= ${a.length}`);else if(typeof c=="object"&&!(0,t.alwaysValidSchema)(m,c)){const _=i.var("valid",(0,e._)`${p} <= ${a.length}`);i.if((0,e.not)(_),()=>y(_)),s.ok(_)}function y(_){i.forRange("i",a.length,p,v=>{s.subschema({keyword:u,dataProp:v,dataPropType:t.Type.Num},_),m.allErrors||i.if((0,e.not)(_),()=>i.break())})}}return ft.validateAdditionalItems=o,ft.default=r,ft}var un={},ht={},Js;function Zo(){if(Js)return ht;Js=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.validateTuple=void 0;const e=re(),t=ue(),n=qe(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:a,it:i}=s;if(Array.isArray(a))return o(s,"additionalItems",a);i.items=!0,!(0,t.alwaysValidSchema)(i,a)&&s.ok((0,n.validateArray)(s))}};function o(s,a,i=s.schema){const{gen:c,parentSchema:d,data:u,keyword:m,it:p}=s;v(d),p.opts.unevaluated&&i.length&&p.items!==!0&&(p.items=t.mergeEvaluated.items(c,i.length,p.items));const y=c.name("valid"),_=c.const("len",(0,e._)`${u}.length`);i.forEach((f,h)=>{(0,t.alwaysValidSchema)(p,f)||(c.if((0,e._)`${_} > ${h}`,()=>s.subschema({keyword:m,schemaProp:h,dataProp:h},y)),s.ok(y))});function v(f){const{opts:h,errSchemaPath:l}=p,g=i.length,b=g===f.minItems&&(g===f.maxItems||f[a]===!1);if(h.strictTuples&&!b){const $=`"${m}" is ${g}-tuple, but minItems or maxItems/${a} are not specified or different at path "${l}"`;(0,t.checkStrictMode)(p,$,h.strictTuples)}}}return ht.validateTuple=o,ht.default=r,ht}var Qs;function al(){if(Qs)return un;Qs=1,Object.defineProperty(un,"__esModule",{value:!0});const e=Zo(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return un.default=t,un}var dn={},Xs;function il(){if(Xs)return dn;Xs=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=re(),t=ue(),n=qe(),r=Yo(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{schema:i,parentSchema:c,it:d}=a,{prefixItems:u}=c;d.items=!0,!(0,t.alwaysValidSchema)(d,i)&&(u?(0,r.validateAdditionalItems)(a,u):a.ok((0,n.validateArray)(a)))}};return dn.default=s,dn}var fn={},Ys;function ll(){if(Ys)return fn;Ys=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:s}})=>s===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${s} valid item(s)`,params:({params:{min:o,max:s}})=>s===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${s}}`},code(o){const{gen:s,schema:a,parentSchema:i,data:c,it:d}=o;let u,m;const{minContains:p,maxContains:y}=i;d.opts.next?(u=p===void 0?1:p,m=y):u=1;const _=s.const("len",(0,e._)`${c}.length`);if(o.setParams({min:u,max:m}),m===void 0&&u===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&u>m){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,t.alwaysValidSchema)(d,a)){let g=(0,e._)`${_} >= ${u}`;m!==void 0&&(g=(0,e._)`${g} && ${_} <= ${m}`),o.pass(g);return}d.items=!0;const v=s.name("valid");m===void 0&&u===1?h(v,()=>s.if(v,()=>s.break())):u===0?(s.let(v,!0),m!==void 0&&s.if((0,e._)`${c}.length > 0`,f)):(s.let(v,!1),f()),o.result(v,()=>o.reset());function f(){const g=s.name("_valid"),b=s.let("count",0);h(g,()=>s.if(g,()=>l(b)))}function h(g,b){s.forRange("i",0,_,$=>{o.subschema({keyword:"contains",dataProp:$,dataPropType:t.Type.Num,compositeRule:!0},g),b()})}function l(g){s.code((0,e._)`${g}++`),m===void 0?s.if((0,e._)`${g} >= ${u}`,()=>s.assign(v,!0).break()):(s.if((0,e._)`${g} > ${m}`,()=>s.assign(v,!1).break()),u===1?s.assign(v,!0):s.if((0,e._)`${g} >= ${u}`,()=>s.assign(v,!0)))}}};return fn.default=r,fn}var mr={},Zs;function cl(){return Zs||(Zs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=re(),n=ue(),r=qe();e.error={message:({params:{property:c,depsCount:d,deps:u}})=>{const m=d===1?"property":"properties";return(0,t.str)`must have ${m} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:u,missingProperty:m}})=>(0,t._)`{property: ${c},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${u}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,u]=s(c);a(c,d),i(c,u)}};function s({schema:c}){const d={},u={};for(const m in c){if(m==="__proto__")continue;const p=Array.isArray(c[m])?d:u;p[m]=c[m]}return[d,u]}function a(c,d=c.schema){const{gen:u,data:m,it:p}=c;if(Object.keys(d).length===0)return;const y=u.let("missing");for(const _ in d){const v=d[_];if(v.length===0)continue;const f=(0,r.propertyInData)(u,m,_,p.opts.ownProperties);c.setParams({property:_,depsCount:v.length,deps:v.join(", ")}),p.allErrors?u.if(f,()=>{for(const h of v)(0,r.checkReportMissingProp)(c,h)}):(u.if((0,t._)`${f} && (${(0,r.checkMissingProp)(c,v,y)})`),(0,r.reportMissingProp)(c,y),u.else())}}e.validatePropertyDeps=a;function i(c,d=c.schema){const{gen:u,data:m,keyword:p,it:y}=c,_=u.name("valid");for(const v in d)(0,n.alwaysValidSchema)(y,d[v])||(u.if((0,r.propertyInData)(u,m,v,y.opts.ownProperties),()=>{const f=c.subschema({keyword:p,schemaProp:v},_);c.mergeValidEvaluated(f,_)},()=>u.var(_,!0)),c.ok(_))}e.validateSchemaDeps=i,e.default=o}(mr)),mr}var hn={},eo;function ul(){if(eo)return hn;eo=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:s,schema:a,data:i,it:c}=o;if((0,t.alwaysValidSchema)(c,a))return;const d=s.name("valid");s.forIn("key",i,u=>{o.setParams({propertyName:u}),o.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},d),s.if((0,e.not)(d),()=>{o.error(!0),c.allErrors||s.break()})}),o.ok(d)}};return hn.default=r,hn}var mn={},to;function ea(){if(to)return mn;to=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=qe(),t=re(),n=Ye(),r=ue(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,t._)`{additionalProperty: ${a.additionalProperty}}`},code(a){const{gen:i,schema:c,parentSchema:d,data:u,errsCount:m,it:p}=a;if(!m)throw new Error("ajv implementation error");const{allErrors:y,opts:_}=p;if(p.props=!0,_.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(p,c))return;const v=(0,e.allSchemaProperties)(d.properties),f=(0,e.allSchemaProperties)(d.patternProperties);h(),a.ok((0,t._)`${m} === ${n.default.errors}`);function h(){i.forIn("key",u,w=>{!v.length&&!f.length?b(w):i.if(l(w),()=>b(w))})}function l(w){let C;if(v.length>8){const P=(0,r.schemaRefOrVal)(p,d.properties,"properties");C=(0,e.isOwnProperty)(i,P,w)}else v.length?C=(0,t.or)(...v.map(P=>(0,t._)`${w} === ${P}`)):C=t.nil;return f.length&&(C=(0,t.or)(C,...f.map(P=>(0,t._)`${(0,e.usePattern)(a,P)}.test(${w})`))),(0,t.not)(C)}function g(w){i.code((0,t._)`delete ${u}[${w}]`)}function b(w){if(_.removeAdditional==="all"||_.removeAdditional&&c===!1){g(w);return}if(c===!1){a.setParams({additionalProperty:w}),a.error(),y||i.break();return}if(typeof c=="object"&&!(0,r.alwaysValidSchema)(p,c)){const C=i.name("valid");_.removeAdditional==="failing"?($(w,C,!1),i.if((0,t.not)(C),()=>{a.reset(),g(w)})):($(w,C),y||i.if((0,t.not)(C),()=>i.break()))}}function $(w,C,P){const T={keyword:"additionalProperties",dataProp:w,dataPropType:r.Type.Str};P===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(T,C)}}};return mn.default=s,mn}var gn={},no;function dl(){if(no)return gn;no=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=Gn(),t=qe(),n=ue(),r=ea(),o={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:a,schema:i,parentSchema:c,data:d,it:u}=s;u.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(u,r.default,"additionalProperties"));const m=(0,t.allSchemaProperties)(i);for(const f of m)u.definedProperties.add(f);u.opts.unevaluated&&m.length&&u.props!==!0&&(u.props=n.mergeEvaluated.props(a,(0,n.toHash)(m),u.props));const p=m.filter(f=>!(0,n.alwaysValidSchema)(u,i[f]));if(p.length===0)return;const y=a.name("valid");for(const f of p)_(f)?v(f):(a.if((0,t.propertyInData)(a,d,f,u.opts.ownProperties)),v(f),u.allErrors||a.else().var(y,!0),a.endIf()),s.it.definedProperties.add(f),s.ok(y);function _(f){return u.opts.useDefaults&&!u.compositeRule&&i[f].default!==void 0}function v(f){s.subschema({keyword:"properties",schemaProp:f,dataProp:f},y)}}};return gn.default=o,gn}var pn={},ro;function fl(){if(ro)return pn;ro=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=qe(),t=re(),n=ue(),r=ue(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:a,schema:i,data:c,parentSchema:d,it:u}=s,{opts:m}=u,p=(0,e.allSchemaProperties)(i),y=p.filter(b=>(0,n.alwaysValidSchema)(u,i[b]));if(p.length===0||y.length===p.length&&(!u.opts.unevaluated||u.props===!0))return;const _=m.strictSchema&&!m.allowMatchingProperties&&d.properties,v=a.name("valid");u.props!==!0&&!(u.props instanceof t.Name)&&(u.props=(0,r.evaluatedPropsToName)(a,u.props));const{props:f}=u;h();function h(){for(const b of p)_&&l(b),u.allErrors?g(b):(a.var(v,!0),g(b),a.if(v))}function l(b){for(const $ in _)new RegExp(b).test($)&&(0,n.checkStrictMode)(u,`property ${$} matches pattern ${b} (use allowMatchingProperties)`)}function g(b){a.forIn("key",c,$=>{a.if((0,t._)`${(0,e.usePattern)(s,b)}.test(${$})`,()=>{const w=y.includes(b);w||s.subschema({keyword:"patternProperties",schemaProp:b,dataProp:$,dataPropType:r.Type.Str},v),u.opts.unevaluated&&f!==!0?a.assign((0,t._)`${f}[${$}]`,!0):!w&&!u.allErrors&&a.if((0,t.not)(v),()=>a.break())})})}}};return pn.default=o,pn}var yn={},so;function hl(){if(so)return yn;so=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=ue(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:o,it:s}=n;if((0,e.alwaysValidSchema)(s,o)){n.fail();return}const a=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),n.failResult(a,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return yn.default=t,yn}var vn={},oo;function ml(){if(oo)return vn;oo=1,Object.defineProperty(vn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qe().validateUnion,error:{message:"must match a schema in anyOf"}};return vn.default=t,vn}var $n={},ao;function gl(){if(ao)return $n;ao=1,Object.defineProperty($n,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:s,schema:a,parentSchema:i,it:c}=o;if(!Array.isArray(a))throw new Error("ajv implementation error");if(c.opts.discriminator&&i.discriminator)return;const d=a,u=s.let("valid",!1),m=s.let("passing",null),p=s.name("_valid");o.setParams({passing:m}),s.block(y),o.result(u,()=>o.reset(),()=>o.error(!0));function y(){d.forEach((_,v)=>{let f;(0,t.alwaysValidSchema)(c,_)?s.var(p,!0):f=o.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},p),v>0&&s.if((0,e._)`${p} && ${u}`).assign(u,!1).assign(m,(0,e._)`[${m}, ${v}]`).else(),s.if(p,()=>{s.assign(u,!0),s.assign(m,v),f&&o.mergeEvaluated(f,e.Name)})})}}};return $n.default=r,$n}var bn={},io;function pl(){if(io)return bn;io=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=ue(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:o,it:s}=n;if(!Array.isArray(o))throw new Error("ajv implementation error");const a=r.name("valid");o.forEach((i,c)=>{if((0,e.alwaysValidSchema)(s,i))return;const d=n.subschema({keyword:"allOf",schemaProp:c},a);n.ok(a),n.mergeEvaluated(d)})}};return bn.default=t,bn}var _n={},lo;function yl(){if(lo)return _n;lo=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:a,parentSchema:i,it:c}=s;i.then===void 0&&i.else===void 0&&(0,t.checkStrictMode)(c,'"if" without "then" and "else" is ignored');const d=o(c,"then"),u=o(c,"else");if(!d&&!u)return;const m=a.let("valid",!0),p=a.name("_valid");if(y(),s.reset(),d&&u){const v=a.let("ifClause");s.setParams({ifClause:v}),a.if(p,_("then",v),_("else",v))}else d?a.if(p,_("then")):a.if((0,e.not)(p),_("else"));s.pass(m,()=>s.error(!0));function y(){const v=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},p);s.mergeEvaluated(v)}function _(v,f){return()=>{const h=s.subschema({keyword:v},p);a.assign(m,p),s.mergeValidEvaluated(h,m),f?a.assign(f,(0,e._)`${v}`):s.setParams({ifClause:v})}}}};function o(s,a){const i=s.schema[a];return i!==void 0&&!(0,t.alwaysValidSchema)(s,i)}return _n.default=r,_n}var wn={},co;function vl(){if(co)return wn;co=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=ue(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:o}){r.if===void 0&&(0,e.checkStrictMode)(o,`"${n}" without "if" is ignored`)}};return wn.default=t,wn}var uo;function $l(){if(uo)return cn;uo=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=Yo(),t=al(),n=Zo(),r=il(),o=ll(),s=cl(),a=ul(),i=ea(),c=dl(),d=fl(),u=hl(),m=ml(),p=gl(),y=pl(),_=yl(),v=vl();function f(h=!1){const l=[u.default,m.default,p.default,y.default,_.default,v.default,a.default,i.default,s.default,c.default,d.default];return h?l.push(t.default,r.default):l.push(e.default,n.default),l.push(o.default),l}return cn.default=f,cn}var Sn={},Cn={},fo;function bl(){if(fo)return Cn;fo=1,Object.defineProperty(Cn,"__esModule",{value:!0});const e=re(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,o){const{gen:s,data:a,$data:i,schema:c,schemaCode:d,it:u}=r,{opts:m,errSchemaPath:p,schemaEnv:y,self:_}=u;if(!m.validateFormats)return;i?v():f();function v(){const h=s.scopeValue("formats",{ref:_.formats,code:m.code.formats}),l=s.const("fDef",(0,e._)`${h}[${d}]`),g=s.let("fType"),b=s.let("format");s.if((0,e._)`typeof ${l} == "object" && !(${l} instanceof RegExp)`,()=>s.assign(g,(0,e._)`${l}.type || "string"`).assign(b,(0,e._)`${l}.validate`),()=>s.assign(g,(0,e._)`"string"`).assign(b,l)),r.fail$data((0,e.or)($(),w()));function $(){return m.strictSchema===!1?e.nil:(0,e._)`${d} && !${b}`}function w(){const C=y.$async?(0,e._)`(${l}.async ? await ${b}(${a}) : ${b}(${a}))`:(0,e._)`${b}(${a})`,P=(0,e._)`(typeof ${b} == "function" ? ${C} : ${b}.test(${a}))`;return(0,e._)`${b} && ${b} !== true && ${g} === ${o} && !${P}`}}function f(){const h=_.formats[c];if(!h){$();return}if(h===!0)return;const[l,g,b]=w(h);l===o&&r.pass(C());function $(){if(m.strictSchema===!1){_.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${c}" ignored in schema at path "${p}"`}}function w(P){const T=P instanceof RegExp?(0,e.regexpCode)(P):m.code.formats?(0,e._)`${m.code.formats}${(0,e.getProperty)(c)}`:void 0,R=s.scopeValue("formats",{key:c,ref:P,code:T});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,e._)`${R}.validate`]:["string",P,R]}function C(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!y.$async)throw new Error("async format in sync schema");return(0,e._)`await ${b}(${a})`}return typeof g=="function"?(0,e._)`${b}(${a})`:(0,e._)`${b}.test(${a})`}}}};return Cn.default=n,Cn}var ho;function _l(){if(ho)return Sn;ho=1,Object.defineProperty(Sn,"__esModule",{value:!0});const t=[bl().default];return Sn.default=t,Sn}var nt={},mo;function wl(){return mo||(mo=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.contentVocabulary=nt.metadataVocabulary=void 0,nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),nt}var go;function Sl(){if(go)return Wt;go=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=Bi(),t=ol(),n=$l(),r=_l(),o=wl(),s=[e.default,t.default,(0,n.default)(),r.default,o.metadataVocabulary,o.contentVocabulary];return Wt.default=s,Wt}var En={},Ct={},po;function Cl(){if(po)return Ct;po=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(Ct.DiscrError=e={})),Ct}var yo;function El(){if(yo)return En;yo=1,Object.defineProperty(En,"__esModule",{value:!0});const e=re(),t=Cl(),n=jr(),r=Jn(),o=ue(),a={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:i,tagName:c}})=>i===t.DiscrError.Tag?`tag "${c}" must be string`:`value of tag "${c}" must be in oneOf`,params:({params:{discrError:i,tag:c,tagName:d}})=>(0,e._)`{error: ${i}, tag: ${d}, tagValue: ${c}}`},code(i){const{gen:c,data:d,schema:u,parentSchema:m,it:p}=i,{oneOf:y}=m;if(!p.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=u.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(u.mapping)throw new Error("discriminator: mapping is not supported");if(!y)throw new Error("discriminator: requires oneOf keyword");const v=c.let("valid",!1),f=c.const("tag",(0,e._)`${d}${(0,e.getProperty)(_)}`);c.if((0,e._)`typeof ${f} == "string"`,()=>h(),()=>i.error(!1,{discrError:t.DiscrError.Tag,tag:f,tagName:_})),i.ok(v);function h(){const b=g();c.if(!1);for(const $ in b)c.elseIf((0,e._)`${f} === ${$}`),c.assign(v,l(b[$]));c.else(),i.error(!1,{discrError:t.DiscrError.Mapping,tag:f,tagName:_}),c.endIf()}function l(b){const $=c.name("valid"),w=i.subschema({keyword:"oneOf",schemaProp:b},$);return i.mergeEvaluated(w,e.Name),$}function g(){var b;const $={},w=P(m);let C=!0;for(let N=0;N<y.length;N++){let D=y[N];if(D?.$ref&&!(0,o.schemaHasRulesButRef)(D,p.self.RULES)){const U=D.$ref;if(D=n.resolveRef.call(p.self,p.schemaEnv.root,p.baseId,U),D instanceof n.SchemaEnv&&(D=D.schema),D===void 0)throw new r.default(p.opts.uriResolver,p.baseId,U)}const z=(b=D?.properties)===null||b===void 0?void 0:b[_];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);C=C&&(w||P(D)),T(z,N)}if(!C)throw new Error(`discriminator: "${_}" must be required`);return $;function P({required:N}){return Array.isArray(N)&&N.includes(_)}function T(N,D){if(N.const)R(N.const,D);else if(N.enum)for(const z of N.enum)R(z,D);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function R(N,D){if(typeof N!="string"||N in $)throw new Error(`discriminator: "${_}" values must be unique strings`);$[N]=D}}}};return En.default=a,En}const Pl="http://json-schema.org/draft-07/schema#",kl="http://json-schema.org/draft-07/schema#",Ol="Core schema meta-schema",Rl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Nl=["object","boolean"],Il={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ll={$schema:Pl,$id:kl,title:Ol,definitions:Rl,type:Nl,properties:Il,default:!0};var vo;function Al(){return vo||(vo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=zi(),r=Sl(),o=El(),s=Ll,a=["/properties"],i="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(_,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=Gn();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=re();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var m=Ar();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return m.default}});var p=Jn();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})}(Ft,Ft.exports)),Ft.exports}var jl=Al();const Tl=Pi(jl),xl="http://json-schema.org/draft-07/schema#",ql="object",Dl={title:{type:"string",description:"The title of the course."},description:{type:"string",description:"A short description of the course."},language:{type:"string",description:"The primary language of the course."},targetLanguage:{type:"string",description:"The language being taught in the course."},author:{type:"string",description:"The name of the course creator."},version:{type:"string",description:"Versioning for tracking updates to the course."},createdAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp when the course was created."},updatedAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp of the last course update."},tags:{type:"array",items:{type:"string"},description:"Keywords related to the course for searching and categorization."},lessons:{type:"array",items:{type:"object",properties:{title:{type:"string"},description:{type:"string"},cards:{type:"array",items:{oneOf:[{type:"object",properties:{class:{type:"string",enum:["vocab"]},qlang:{type:"string",enum:["default","target"]},vocab:{type:"object",additionalProperties:{type:"string"}}},required:["class","qlang","vocab"]},{type:"object",properties:{class:{type:"string",enum:["dynamic-vocab"]},qlang:{type:"string",enum:["default","target"]}},required:["class","qlang"]},{type:"object",properties:{class:{type:"string",enum:["multiple-choice"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answers:{type:"array",items:{type:"string"}},answer:{type:"string"}},required:["class","qlang","question","answers","answer"]},{type:"object",properties:{class:{type:"string",enum:["writing"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["writing-blocks"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"},options:{type:"array",items:{type:"string"}}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["blanks"]},qlang:{type:"string",enum:["default","target"]},alang:{type:"string",enum:["default","target"]},question:{type:"string"},words:{type:"array",items:{type:"object",minProperties:1,maxProperties:1,additionalProperties:{type:"boolean"}}}},required:["class","qlang","question","words"]}]}}},required:["title","cards"]}}},Ml={$schema:xl,type:ql,properties:Dl};var Vl=M('<div class=modal-bg><dialog class=confirm-dialog><h3></h3><footer><button class="cancel-button utf8-icon-close"></button><button class="next-button utf8-icon-tick">');const ta=Lt(),Fl=e=>{const[t,n]=G(!1),[r,o]=G(()=>{}),[s,a]=G(""),i=(u,m)=>{a(u),o(()=>m),n(!0)},c=()=>{r()(),n(!1)},d=()=>{n(!1)};return A(ta.Provider,{value:{showConfirm:i},get children(){return[W(()=>e.children),A(ae,{get when(){return t()},get children(){var u=Vl(),m=u.firstChild,p=m.firstChild,y=p.nextSibling,_=y.firstChild,v=_.nextSibling;return j(p,s),_.$$click=d,v.$$click=c,Z(f=>{var h=t()?"flex":"none",l=t();return h!==f.e&&((f.e=h)!=null?u.style.setProperty("display",h):u.style.removeProperty("display")),l!==f.t&&(m.open=f.t=l),f},{e:void 0,t:void 0}),u}})]}})},Qn=()=>{const e=At(ta);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e};le(["click"]);function Ul(){const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}function na(){document.exitFullscreen&&document.exitFullscreen()}const Un=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},Tt=async e=>{const t=await ve(),n=t.getSourceLang(),r=t.getTargetLang();return e.alang&&e.alang===e.qlang?{q:n,a:r}:{q:e.qlang==="default"?n:r,a:e.alang??(e.qlang==="default"?r:n)}};var Kl=M("<button id=action-button aria-label=action-button>");const xt=e=>{const{t}=$e(),[n,r]=G(!1);ge(()=>{e.isCorrect===null&&r(!1)});const o=()=>{console.log("Action button click, props.isCorrect =",e.isCorrect),n()?e.isCorrect===!1&&e.onReset?(console.log("AB click: reset"),r(!1),e.onReset()):(console.log("AB other click: has checked, calling complete"),e.onComplete()):(console.log("AB first click: not yet checked, checking now"),e.onCheckAnswer(),r(!0))},s=a=>{e.isInputPresent&&e.isCorrect!==null&&(a.key==="Enter"||a.key===" "||a.key==="Spacebar")&&o()};return Ra(()=>document.addEventListener("keydown",s)),Ge(()=>document.removeEventListener("keydown",s)),(()=>{var a=Kl();return a.$$click=o,j(a,(()=>{var i=W(()=>e.isCorrect===null);return()=>i()?t("check"):W(()=>e.isCorrect===!0)()?t("correct_next"):t("incorrect_next")})()),Z(i=>{var c=e.isCorrect===null?"next-button":e.isCorrect===!0?"correct-next-button":"incorrect-next-button",d=!e.isInputPresent;return c!==i.e&&ke(a,i.e=c),d!==i.t&&(a.disabled=i.t=d),i},{e:void 0,t:void 0}),a})()};le(["click"]);let kn;window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices(),kn=speechSynthesis.getVoices().find(e=>e.lang.startsWith("en")&&e.localService)});const zl={heb:{langTag:"en-GB",letters:{א:"aleph",ב:"bet",ג:"gimmel",ד:"dalet",ה:"he",ו:"vav",ז:"zayin",ח:"chet",ט:"tet",י:"yod",כ:"kaf",ך:"kaf",ל:"lamed",מ:"mem",ם:"mem",נ:"nun",ן:"nun",ס:"samekh",ע:"ayin",פ:"pe",ף:"pe",צ:"tsadi",ץ:"tsadi",ק:"qof",ר:"resh",ש:"shin",ת:"tav"}},ang:{langTag:"en-GB",letters:{æ:"ash",þ:"thorn",ð:"eth",ƿ:"wynn",Ƿ:"wynn",ȝ:"yogh"}}};function ra(e,t){if(!kn)return;if(!e||!t){console.warn("Missing letter or language code");return}const n=zl[t];if(!n){console.warn("Unsupported language code:",t);return}const r=e.toLowerCase(),o=n.letters[r];if(!o){console.warn(`Letter name not found for '${e}' in language '${t}'`);return}const s=new SpeechSynthesisUtterance(o);s.lang=n.langTag,s.rate=.75,kn&&(s.voice=kn),speechSynthesis.cancel(),speechSynthesis.speak(s),console.log(s)}var Hl=M('<section class="card multiple-choice"><h3 class=question></h3><div class=options>'),Wl=M("<p>Loading..."),Bl=M("<h4>"),Gl=M("<button>");const Jl={class:"multiple-choice",question:"A Question",qlang:"default",answers:["An answer","Another answer"],answer:"An answer"},Ql=e=>{const{t}=$e(),[n]=pe(()=>Tt(e.card)),[r,o]=G(null),[s,a]=G(!1),[i,c]=G(null),[d,u]=G(Un(e.card.answers)),[m,p]=G(!1);ge(()=>{u(Un(e.card.answers)),a(!1),o(null),c(null),p(!1)});const y=f=>{m()||(o(f),f.length===1&&ra(f,n().a))},_=()=>{o(null),c(null),a(!1),p(!1)},v=()=>{s()?(o(null),c(null),a(!1),p(!1)):(p(!0),r()===e.card.answer?(c(!0),e.onCorrect()):(c(!1),e.onIncorrect()),a(!0))};return A(ae,{get when(){return n()},get fallback(){return Wl()},get children(){return[(()=>{var f=Hl(),h=f.firstChild,l=h.nextSibling;return j(f,(()=>{var g=W(()=>n().q!==n().q);return()=>g()&&(()=>{var b=Bl();return j(b,()=>t("in_lang_how_do_you_say",{lang:t(n().a)})),Z(()=>Y(b,"lang",n().q)),b})()})(),h),j(h,()=>e.card.question),j(l,A(at,{get each(){return d()},children:g=>(()=>{var b=Gl();return b.$$click=()=>y(g),j(b,g),Z($=>{var w=n().a,C=`multiple-choice-button ${r()===g?"selected":""} ${s()&&r()===g?i()?"correct":"incorrect":""}`,P=m()?!0:void 0,T=s()?i()?`${g} (${t("correct")})`:`${g} (${t("incorrect")})`:`${t("select")} ${g}`;return w!==$.e&&Y(b,"lang",$.e=w),C!==$.t&&ke(b,$.t=C),P!==$.a&&(b.disabled=$.a=P),T!==$.o&&Y(b,"aria-label",$.o=T),$},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()})),Z(()=>Y(h,"lang",n().q)),f})(),A(xt,{get isCorrect(){return i()},get isInputPresent(){return r()!==null},onCheckAnswer:v,get onComplete(){return e.onComplete},onReset:_})]}})};le(["click"]);const sa=Lt(void 0),Xl=e=>A(sa.Provider,{get value(){return{config:e.config,isLoading:!1}},get children(){return e.children}}),qt=()=>{const e=At(sa);if(!e)throw new Error("useConfigContext must be used within ConfigProvider");return e};var Yl=M('<section class="vocab-match card"><h3></h3><table><tbody>'),Zl=M("<footer class=vocab-match-footer>"),ec=M("<p>Loading..."),tc=M("<tr><td><button></button></td><td><button>");const nc={class:"vocab",qlang:"default",vocab:{word:"ord"}},oa=e=>{const{t}=$e(),[n]=pe(()=>Tt(e.card)),[r,o]=G([]),[s,a]=G([]),[i,c]=G(!1),[d,u]=G(null),[m,p]=G(null),{config:y}=qt();ge(()=>{const h=Object.values(e.card.vocab);o(Un(h)),a(Object.keys(e.card.vocab).map((l,g)=>{const b=e.card.vocab[l];return{leftWord:l,rightWord:b,shuffledRightWord:r()[g],isLeftMatched:!1,isRightMatched:!1,isLeftDisabled:!1,isRightDisabled:!1,shakeIt:!1,shakeRight:!1}}))});const _=h=>{u(l=>l===h?null:h)},v=h=>{p(l=>l===h?null:h)},f=()=>{e.onCorrect(),e.onComplete()};return ge(()=>{if(!d()||!m())return;const h=d(),l=m();e.card.vocab[h]===l?(a(b=>b.map($=>{const w=$.leftWord===h&&$.rightWord===l,C=$.shuffledRightWord===l;return w||C?{...$,isLeftMatched:w?!0:$.isLeftMatched,isRightMatched:C?!0:$.isRightMatched,isLeftDisabled:w?!0:$.isLeftDisabled,isRightDisabled:C?!0:$.isRightDisabled}:$})),u(null),p(null)):(a(b=>b.map($=>$.leftWord===h||$.shuffledRightWord===l?{...$,shakeIt:$.leftWord===h,shakeRight:$.shuffledRightWord===l}:$)),setTimeout(()=>{a(b=>b.map($=>$.shakeIt||$.shakeRight?{...$,shakeIt:!1,shakeRight:!1}:$))},y.animationShakeMs),u(null),p(null))}),ge(()=>{s().every(h=>h.isLeftMatched&&h.isRightMatched)&&!i()&&c(!0)}),A(ae,{get when(){return n()},get fallback(){return ec()},get children(){return[(()=>{var h=Yl(),l=h.firstChild,g=l.nextSibling,b=g.firstChild;return j(l,()=>e.card.question||t("match_the_words")),j(b,A(at,{get each(){return s()},children:$=>(()=>{var w=tc(),C=w.firstChild,P=C.firstChild,T=C.nextSibling,R=T.firstChild;return P.$$click=()=>_($.leftWord),j(P,()=>$.leftWord),R.$$click=()=>v($.shuffledRightWord),j(R,()=>$.shuffledRightWord),Z(N=>{var D=n().q,z=`vocab-match left-word ${$.isLeftMatched?"correct":""} ${d()===$.leftWord?"selected":""} ${$.shakeIt?"shake":""}`,U=$.isLeftDisabled,H=$.isLeftMatched?`${$.leftWord} (${t("matched")})`:`${t("select")} ${$.leftWord}`,ne=n().a,me=`vocab-match right-word ${$.isRightMatched?"correct":""} ${m()===$.shuffledRightWord?"selected":""} ${$.shakeRight?"shake":""}`,se=$.isRightDisabled,ce=$.isRightMatched?`${$.shuffledRightWord}  (${t("matched")})`:`${t("select")} ${$.shuffledRightWord}`;return D!==N.e&&Y(P,"lang",N.e=D),z!==N.t&&ke(P,N.t=z),U!==N.a&&(P.disabled=N.a=U),H!==N.o&&Y(P,"aria-label",N.o=H),ne!==N.i&&Y(R,"lang",N.i=ne),me!==N.n&&ke(R,N.n=me),se!==N.s&&(R.disabled=N.s=se),ce!==N.h&&Y(R,"aria-label",N.h=ce),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),w})()})),Z(()=>Y(l,"lang",n().q)),h})(),A(ae,{get when(){return i()},get children(){var h=Zl();return j(h,A(xt,{get isCorrect(){return i()===!1?null:!0},get isInputPresent(){return i()},onCheckAnswer:f,onComplete:f})),h}})]}})};le(["click"]);var $o=M("<span>"),rc=M("<span class=provided-word>"),sc=M('<section class="card blanks-card"><h4></h4><h3 class=question></h3><div class=word-options>'),oc=M("<p>Loading..."),ac=M("<button>");const ic={class:"blanks",question:"Question",qlang:"default",words:[{answer:!0,other:!1}]},lc=e=>{const{t}=$e(),[n]=pe(()=>Tt(e.card)),[r,o]=G([]),[s,a]=G([]),[i,c]=G(null),[d,u]=G(!1),[m,p]=G(null);ge(()=>{o(Un(e.card.words.map(l=>Object.keys(l)[0])))});const y=l=>{s().includes(l)||(a([...s(),l]),u(!1))},_=()=>{const l=e.card.words.filter(b=>Object.values(b)[0]).map(b=>Object.keys(b)[0]);s().length===l.length&&s().every((b,$)=>b===l[$])?(u(!0),c(!0),e.onCorrect(s().length)):(u(!1),c(!1),e.onIncorrect(),p("incomplete"),setTimeout(()=>p(null),1e3))},v=()=>{i()&&e.onComplete()},f=()=>{a([]),c(null)},h=()=>{let l=0;const g=e.card.words.filter(b=>Object.values(b)[0]).map(b=>Object.keys(b)[0]);return e.card.question.split(/([\s\b])/).map(b=>{if(/^_{2,}/.test(b)){const $=s()[l],w=g[l];if(l++,d()){const C=$===w;return(()=>{var P=$o();return ke(P,C?"blank-correct":"blank-incorrect"),j(P,$),P})()}else return(()=>{var C=$o();return ke(C,$?"blank-filled":"blank"),j(C,$??"__"),C})()}else return(()=>{var $=rc();return j($,b),$})()})};return A(ae,{get when(){return n()},get fallback(){return oc()},get children(){return[(()=>{var l=sc(),g=l.firstChild,b=g.nextSibling,$=b.nextSibling;return j(g,()=>t("fill_in_the_blanks")),j(b,h),j($,()=>r().map(w=>{const C=s().includes(w),P=m()===w?"shake":"",T=C||i()===!0,R="word-option "+(C?"selected":"")+" "+P,N=C?`${w} (${t("selected")})`:`${t("select")} ${w}`;return(()=>{var D=ac();return D.$$click=()=>y(w),D.disabled=T,ke(D,R),Y(D,"aria-label",N),j(D,w),Z(()=>Y(D,"lang",n().a)),D})()})),Z(w=>{var C=n().q,P=n().q==="heb"?"rtl":"ltr";return C!==w.e&&Y(b,"lang",w.e=C),P!==w.t&&Y(b,"dir",w.t=P),w},{e:void 0,t:void 0}),l})(),A(xt,{get isCorrect(){return i()},get isInputPresent(){return s().length>0},onCheckAnswer:_,onComplete:v,onReset:f})]}})};le(["click"]);var cc=M("<aside class=letter-buttons>"),uc=M("<button>");const dc=3,gr={ang:[{symbol:"æ",name:"Ash"},{symbol:"ø",name:"o-slash"},{symbol:"þ",name:"Thorn"},{symbol:"ð",name:"Eth"},{symbol:"ȝ",name:"Yogh"},{symbol:"œ",name:"o-e"},{symbol:"ſ",name:"long-s"},{symbol:"ƿ",name:"wynn"},{symbol:"ā",name:"long-a"},{symbol:"ē",name:"long-e"},{symbol:"ī",name:"long-i"},{symbol:"ō",name:"long-o"},{symbol:"ū",name:"long-u"},{symbol:"ȳ",name:"long-y"}],heb:[{symbol:"א",name:"Alef"},{symbol:"ב",name:"Bet"},{symbol:"ג",name:"Gimel"},{symbol:"ד",name:"Dalet"},{symbol:"ה",name:"He"},{symbol:"ו",name:"Vav"},{symbol:"ז",name:"Zayin"},{symbol:"ח",name:"Chet"},{symbol:"ט",name:"Tet"},{symbol:"י",name:"Yod"},{symbol:"כ",name:"Kaf"},{symbol:"ך",name:"Final Kaf"},{symbol:"ל",name:"Lamed"},{symbol:"מ",name:"Mem"},{symbol:"ם",name:"Final Mem"},{symbol:"נ",name:"Nun"},{symbol:"ן",name:"Final Nun"},{symbol:"ס",name:"Samekh"},{symbol:"ע",name:"Ayin"},{symbol:"פ",name:"Pe"},{symbol:"ף",name:"Final Pe"},{symbol:"צ",name:"Tsadi"},{symbol:"ץ",name:"Final Tsadi"},{symbol:"ק",name:"Qof"},{symbol:"ר",name:"Resh"},{symbol:"ש",name:"Shin"},{symbol:"ת",name:"Tav"}],hun:[{symbol:"á",name:"a-acute"},{symbol:"é",name:"e-acute"},{symbol:"í",name:"i-acute"},{symbol:"ó",name:"o-acute"},{symbol:"ö",name:"o-umlaut"},{symbol:"ő",name:"o-double-acute"},{symbol:"ú",name:"u-acute"},{symbol:"ü",name:"u-umlaut"},{symbol:"ű",name:"u-double-acute"}]},fc=e=>{if(!gr[e.lang])return console.warn(`No buttons exist for the supplied language, "${e.lang}".`),"";if(e.text.length===0)return"";let t=gr[e.lang].filter(n=>e.text.includes(n.symbol));if(t.length<3){const n=gr[e.lang].filter(r=>!t.some(o=>o.symbol===r.symbol));t=[...t,...n.slice(0,dc-t.length)]}return(()=>{var n=cc();return j(n,A(at,{each:t,children:r=>(()=>{var o=uc();return o.$$click=()=>e.onSelect(r.symbol),j(o,()=>r.symbol),Z(s=>{var a=r.name,i=r.name;return a!==s.e&&Y(o,"aria-label",s.e=a),i!==s.t&&Y(o,"title",s.t=i),s},{e:void 0,t:void 0}),o})()})),n})()};le(["click"]);var hc=M('<section class="card writing-card"><h3 class=question></h3><div class=input><textarea id=writing-input class=answer autofocus>'),mc=M("<p>Loading..."),gc=M("<h4>");const pc={class:"writing",qlang:"default",question:"Question",answer:"Answer"},bo=e=>e.trim().toLowerCase().replace(/\W+/g,"").replace(/\s+/g," "),yc=e=>{const[t]=pe(()=>Tt(e.card)),{t:n}=$e(),[r,o]=G(""),[s,a]=G(null);let i=null;const c=W(()=>bo(e.card.answer)),d=y=>{a(null),o(y)},u=y=>{if(!i)return;ra(y,t().a);const _=i,v=_.selectionStart??r().length,f=_.selectionEnd??r().length,h=r().slice(0,v)+y+r().slice(f);d(h),queueMicrotask(()=>{_.selectionStart=_.selectionEnd=v+y.length,_.focus()})},m=()=>{bo(r())===c()?(a(!0),e.onCorrect()):(a(!1),e.onIncorrect())},p=()=>{a(null),d(""),e.onComplete()};return A(ae,{get when(){return t()?.a},get fallback(){return mc()},get children(){return[(()=>{var y=hc(),_=y.firstChild,v=_.nextSibling,f=v.firstChild;return j(y,(()=>{var h=W(()=>t().q!==t().a);return()=>h()&&(()=>{var l=gc();return j(l,()=>n("translate_to_lang",{lang:n(t().a)})),l})()})(),_),j(_,()=>e.card.question),f.$$input=h=>d(h.target.value),ot(h=>i=h,f),j(v,A(fc,{get lang(){return t().a},onSelect:u,get text(){return e.card.answer}}),null),Z(h=>{var l=t().q,g=n("type_in")+" "+n(t().a)+"...",b=t().a,$=n("enter_answer");return l!==h.e&&Y(_,"lang",h.e=l),g!==h.t&&Y(f,"placeholder",h.t=g),b!==h.a&&Y(f,"lang",h.a=b),$!==h.o&&Y(f,"aria-label",h.o=$),h},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>f.value=r()),y})(),A(xt,{get isCorrect(){return s()},get isInputPresent(){return r().length>0},onCheckAnswer:m,onComplete:p})]}})};le(["input"]);var vc=M('<section class="writing-blocks-card card"><h3 class=question></h3><div class=selected-words></div><hr><div class=options>'),$c=M("<p>Loading..."),bc=M("<button class=selected-word>"),_c=M("<button class=option-button>");const wc={class:"writing-blocks",qlang:"default",question:"Question",answer:"Answer",options:["Answer","Another"]},pr=e=>e.trim().toLowerCase().replace(/[^\s\w]+/g,"").replace(/\s+/g," "),Sc=e=>{let t="";const{t:n}=$e(),[r]=pe(()=>Tt(e.card)),[o,s]=G(null),[a,i]=G([]),c=W(()=>pr(e.card.answer)),d=p=>{s(null),i(y=>[...y,p])},u=p=>{s(null),i(y=>y.filter((_,v)=>v!==p))},m=()=>{console.log("WritingBlocks handleCheckAnswer");const p=pr(a().join(" "));console.log(`WritingBlocks normalizedUserInput = ${p} vs ${c()}`),p===c()?(console.log("WritingBlocks CORRECT"),s(!0),e.onCorrect()):(console.log("WritingBlocks INCORRECT"),s(!1),e.onIncorrect())};return ge(()=>{i([]),s(null)}),ge(()=>{const p=pr(a().join(" "));o()!==null&&p!==t&&(s(null),i([]))}),A(ae,{get when(){return r()},get fallback(){return $c()},get children(){return[(()=>{var p=vc(),y=p.firstChild,_=y.nextSibling,v=_.nextSibling,f=v.nextSibling;return j(y,()=>e.card.question),j(_,A(at,{get each(){return a()},children:(h,l)=>(()=>{var g=bc();return g.$$click=()=>u(l()),Y(g,"aria-label",`Remove word: ${h}`),j(g,h),g})()})),j(f,A(at,{get each(){return e.card.options},children:h=>(()=>{var l=_c();return l.$$click=()=>d(h),j(l,h),Z(g=>{var b=a().includes(h),$=a().includes(h)?`${h} (${n("selected")})`:`${n("select")} ${h}`;return b!==g.e&&(l.disabled=g.e=b),$!==g.t&&Y(l,"aria-label",g.t=$),g},{e:void 0,t:void 0}),l})()})),Z(()=>Y(y,"lang",r().q)),p})(),A(xt,{get isCorrect(){return o()},get isInputPresent(){return a().length>0},onCheckAnswer:m,get onComplete(){return e.onComplete}})]}})};le(["click"]);const Cc={class:"dynamic-vocab",question:"Question",qlang:"default"},Ec=e=>{const t=W(()=>{const r={};for(const o of e.lesson.cards.filter(s=>["vocab","blanks"].includes(s.class)))if(o.class==="blanks"&&o.qlang===e.card.qlang)o.words.forEach(s=>{const a=Object.keys(s)[0],i=s[a];r[a]=i?a:""});else if(o.class==="vocab")if(o.qlang===e.card.qlang)Object.assign(r,o.vocab);else{const s=Object.fromEntries(Object.entries(o.vocab).map(([a,i])=>[i,a]));Object.assign(r,s)}return r}),n={class:"vocab",qlang:e.card.qlang,vocab:t()};return A(oa,{card:n,get onCorrect(){return e.onCorrect},get onIncorrect(){return e.onIncorrect},get onComplete(){return e.onComplete}})},Pc={blanks:ic,"dynamic-vocab":Cc,"multiple-choice":Jl,vocab:nc,"writing-blocks":wc,writing:pc},kc=e=>structuredClone(Pc[e]),Oc=["blanks","dynamic-vocab","multiple-choice","vocab","writing-blocks","writing"];function Rc(e){return typeof e=="object"&&e!==null&&"answer"in e}var Nc=M("<p>"),Ic=M("<div>"),Lc=M("<p>Unknown lesson card...");function aa(e){const{t}=$e();return(()=>{var n=Ic();return Rt(n,"dblclick",e.ondblclick),j(n,A(za,{get fallback(){return Lc()},get children(){return[A(Ze,{get when(){return!e.card},get children(){var r=Nc();return j(r,()=>t("lesson_complete")),r}}),A(Ze,{get when(){return e.card?.class==="dynamic-vocab"},get children(){return A(Ec,{get card(){return e.card},get lesson(){return e.lesson},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="writing"},get children(){return A(yc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="writing-blocks"},get children(){return A(Sc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="multiple-choice"},get children(){return A(Ql,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="vocab"},get children(){return A(oa,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="blanks"},get children(){return A(lc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}})]}})),n})()}le(["dblclick"]);var Ac=M("<article class=lesson><h2><em></em><button class=close-button></button></h2><progress>");const _o={title:"A Lesson",description:"A lesson description",cards:[]},jc=e=>{const{t}=$e(),{showConfirm:n}=Qn(),[r,o]=G([]),s=W(()=>(r()&&r()[0])??null);let a=null;ge(()=>{e.lesson&&e.lesson.cards&&o(e.lesson.cards)});const i=()=>{n(t("confirm_leave_lesson"),()=>{na(),e.onCancel()})},c=y=>{y.key==="Escape"&&i()},d=y=>{const _=t("confirm_leave_app");return y.preventDefault(),_};window.addEventListener("keyup",c),window.addEventListener("beforeunload",d),Ge(()=>{window.removeEventListener("keyup",c),window.removeEventListener("beforeunload",d)});const u=()=>{if(a){if(o(y=>y.slice(1)),r().length===0){e.onLessonComplete();return}}else o(y=>[...y.slice(1),y[0]])},m=()=>{a=!1;const y=e.lesson.cards.indexOf(r()[0]);e.onAnswer(y,"bad_answer_goes_here")},p=()=>{a=!0;const y=e.lesson.cards.indexOf(r()[0]);e.onAnswer(y)};return!e.lesson||!e.lesson.cards?"Loading lesson cards...":(()=>{var y=Ac(),_=y.firstChild,v=_.firstChild,f=v.nextSibling,h=_.nextSibling;return j(v,()=>e.lesson.title),f.$$click=i,j(y,A(aa,{get card(){return s()},get lesson(){return e.lesson},onComplete:u,onCorrect:p,onIncorrect:m}),null),Z(l=>{var g=t("cancel_lesson"),b=e.lesson.cards.length,$=t("lesson_progress"),w=`${e.lesson.cards.length-r().length+1} / ${e.lesson.cards.length}`;return g!==l.e&&Y(f,"aria-label",l.e=g),b!==l.t&&Y(h,"max",l.t=b),$!==l.a&&Y(h,"aria-label",l.a=$),w!==l.o&&Y(h,"title",l.o=w),l},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>h.value=r().length===0?1:e.lesson.cards.length-r().length+1),y})()};le(["click"]);const Pn="oe_",mt={CURRENT_LESSON_INDEX:e=>`${Pn}current_lesson_index_${e}`,ANSWERS:e=>`${Pn}answers_${e}`,LESSONS:e=>`${Pn}course_${e}`,CURRENT_COURSE_INDEX:`${Pn}course`,STORE_NAME:"oe-courses",EDITING_MODE:"oe-editing"},Tc=()=>Object.assign({"../../lessons/alefbet.json":()=>rt(()=>import("./alefbet-CHfUpJb5.js"),[]),"../../lessons/lessons.json":()=>rt(()=>import("./lessons-C8xK8RN5.js"),[]),"../../lessons/lessons.old.json":()=>rt(()=>import("./lessons.old-Bh74MdUW.js"),[]),"../../lessons/test.json":()=>rt(()=>import("./test-B9qeRIeH.js"),[]),"../../lessons/uk-constitution.json":()=>rt(()=>import("./uk-constitution-2T_E9-3M.js"),[])}),xc={title:"New Course",description:"A description",language:"en",targetLanguage:"en",level:"level",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[]},qc=[];let yr;const On=e=>[...e.courses.map(t=>t.title)],ve=async()=>(yr||(yr=await Dc()),yr),Dc=async()=>{const[e,t]=Go(Bo({courseMetadata:null,lessons:[],loading:!1}),{name:mt.STORE_NAME,storage:localStorage});let n=null;const r=()=>(n||(n=Mo()),n),o=async R=>{const N=await r();if(isNaN(R)||R<0||R>=N.courses.length)throw new Error(`Invalid course index for deletion: ${R}`);$(R),await d(0)},s=({lessons:R,courseMetadata:N})=>{t({lessons:R,courseMetadata:N})},a=R=>{const D=new Tl().compile(Ml);if(!D(R))throw console.error(JSON.stringify(D.errors,null,4)),console.debug("courseData",R),new TypeError("Invalid course data",R)},i=async R=>{const N=`../../lessons/${R}.json`;console.info(`Loading course ${R} from ${N}`);const D=await Tc();if(!D[N])throw new Error("Lesson not found: "+N);const U=(await D[N]()).default;return console.info(`Loaded course ${R} from ${N}`),U},c=R=>{console.log("loadCourseFromFile"),t("loading",!0);try{const N=JSON.parse(R);a(N);const{lessons:D,...z}=N;t({lessons:D,courseMetadata:z})}catch(N){console.error("Invalid course file:",N)}finally{t("loading",!1)}},d=async R=>{if(console.info("loadCourseFromFile enter with",R),isNaN(R))return;const N=await r();if(R===N.courses.length){console.log("loadCourseFromFile Shall use the pre-loaded course from storage");return}if(R<0)throw console.warn("loadCourseFromFile Invalid course index:",R),new Error("loadCourseFromFile: Negative course index? "+R);t("loading",!0);try{let D;const{fileBasename:z}=N.courses[R];D=await i(z),a(D);const{lessons:U,...H}=D;s({lessons:U,courseMetadata:H}),t({loading:!1}),console.info("loadCourseFromFile OK")}catch(D){console.error("loadCourseFromFile Error loading lessons:",D),t("loading",!1)}console.info("loadCourseFromFile leave")},u=W(()=>e.lessons||[]),m=async R=>{if(!e.lessons||e.lessons.length===0){if(!Number.isFinite(R))throw new Error("No lessons loaded and no courseIdx supplied?");await d(R),console.debug("getCourseData loaded course",R)}return{...e.courseMetadata,lessons:e.lessons}},p=()=>e.courseMetadata?.language||"",y=()=>e.courseMetadata?.targetLanguage||"",_=R=>t({lessons:R}),v=W(()=>e.lessons&&e.lessons.length),f=R=>{t("lessons",N=>{const D={..._o};if(N){if(R===void 0||R>N.length)return[...N,D];if(R<=0)return[D,...N]}else return[D];return[...N.slice(0,R),{..._o},...N.slice(R)]})},h=R=>{console.trace("initNewCourse enter");const N=On(R).length;return t({loading:!0}),s({lessons:[...qc],courseMetadata:{...xc}}),t({loading:!1}),console.log("initNewCourse leave with",N),N},l=()=>e.lessons.map((R,N)=>({title:R.title,index:N})),g=(R,N,D)=>{console.debug("Enter saveCard");const z=e.lessons.map((U,H)=>H===N?{...U,cards:U.cards.map((ne,me)=>me===D?R:ne)}:U);_(z),console.log("saved card in",mt.STORE_NAME)},b=(R,N)=>{const D=e.lessons.map((z,U)=>U===R?{...z,cards:z.cards.filter((H,ne)=>ne!==N)}:z);_(D)},$=R=>{console.log("reset course",R);const N=R;localStorage.removeItem(mt.CURRENT_LESSON_INDEX(N)),localStorage.removeItem(mt.CURRENT_COURSE_INDEX),localStorage.removeItem(mt.ANSWERS(N)),localStorage.removeItem(mt.STORE_NAME),t({courseMetadata:null,lessons:[],loading:!1})};return{store:e,setTitle:R=>t("courseMetadata","title",R),getTitle:()=>e.courseMetadata?.title??"",setDescription:R=>{t("courseMetadata","description",R),console.log("set courseMetadata description",R)},getDescription:()=>(console.log("get courseMetadata description",e.courseMetadata?.description),e.courseMetadata?.description??""),initNewCourse:h,saveCourseToStorage:c,loadCourseFromFile:d,setCourse:s,deleteCourse:o,saveCard:g,deleteCard:b,setLessons:_,getLessons:u,getCourseData:m,getTargetLang:y,getSourceLang:p,getTotalLessonsCount:v,addLesson:f,lessonTitles2Indicies:l,reset:$,assertValidCourseData:a}};function ia(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const a={to:o,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:c=>{c&&(n=!0),i.navigate(o,{...s,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Rr;function xr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Rr=window.history.state._depth}xr();function Mc(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Vc(e,t){let n=!1;return()=>{const r=Rr;xr();const o=r==null?null:Rr-r;if(n){n=!1;return}o&&t(o)?(n=!0,window.history.go(-o)):e()}}const Fc=/^(?:[a-z0-9]+:)?\/\//i,Uc=/^\/+|(\/)\/+$/g,la="http://sr";function kt(e,t=!1){const n=e.replace(Uc,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Rn(e,t,n){if(Fc.test(t))return;const r=kt(e),o=n&&kt(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+kt(t,!s)}function Kc(e,t){if(e==null)throw new Error(t);return e}function zc(e,t){return kt(e).replace(/\/*(\*.*)?$/g,"")+kt(t)}function ca(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Hc(e,t,n){const[r,o]=e.split("/*",2),s=r.split("/").filter(Boolean),a=s.length;return i=>{const c=i.split("/").filter(Boolean),d=c.length-a;if(d<0||d>0&&o===void 0&&!t)return null;const u={path:a?"":"/",params:{}},m=p=>n===void 0?void 0:n[p];for(let p=0;p<a;p++){const y=s[p],_=y[0]===":",v=_?c[p]:c[p].toLowerCase(),f=_?y.slice(1):y.toLowerCase();if(_&&vr(v,m(f)))u.params[f]=v;else if(_||!vr(v,f))return null;u.path+=`/${v}`}if(o){const p=d?c.slice(-d).join("/"):"";if(vr(p,m(o)))u.params[o]=p;else return null}return u}}function vr(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Wc(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function ua(e){const t=new Map,n=Io();return new Proxy({},{get(r,o){return t.has(o)||Lo(n,()=>t.set(o,W(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Bc(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(o):s instanceof Array?(n.delete(o),s.forEach(a=>{n.append(o,String(a))})):n.set(o,String(s))});const r=n.toString();return r?`?${r}`:""}function da(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return da(r).reduce((s,a)=>[...s,...o.map(i=>i+a)],[])}const Gc=100,fa=Lt(),ha=Lt(),qr=()=>Kc(At(fa),"<A> and 'use' router primitives can be only used inside a Route."),Ce=()=>qr().navigatorFactory(),Dr=()=>qr().location,je=()=>qr().params,Jc=()=>{const e=Dr(),t=Ce(),n=(r,o)=>{const s=be(()=>Bc(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...o})};return[e.query,n]};function Qc(e,t=""){const{component:n,preload:r,load:o,children:s,info:a}=e,i=!s||Array.isArray(s)&&!s.length,c={key:e,component:n,preload:r||o,info:a};return ma(e.path).reduce((d,u)=>{for(const m of da(u)){const p=zc(t,m);let y=i?p:p.split("/*",1)[0];y=y.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),d.push({...c,originalPath:u,pattern:y,matcher:Hc(y,!i,e.matchFilters)})}return d},[])}function Xc(e,t=0){return{routes:e,score:Wc(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}function ma(e){return Array.isArray(e)?e:[e]}function ga(e,t="",n=[],r=[]){const o=ma(e);for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const c=Qc(i,t);for(const d of c){n.push(d);const u=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!u)ga(i.children,d.pattern,n,r);else{const m=Xc([...n],r.length);r.push(m)}n.pop()}}}return n.length?r:r.sort((s,a)=>a.score-s.score)}function $r(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function Yc(e,t,n){const r=new URL(la),o=W(u=>{const m=e();try{return new URL(m,r)}catch{return console.error(`Invalid path ${m}`),u}},r,{equals:(u,m)=>u.href===m.href}),s=W(()=>o().pathname),a=W(()=>o().search,!0),i=W(()=>o().hash),c=()=>"",d=Nr(a,()=>ca(o()));return{get pathname(){return s()},get search(){return a()},get hash(){return i()},get state(){return t()},get key(){return c()},query:n?n(d):ua(d)}}let st;function Zc(){return st}function eu(e,t,n,r={}){const{signal:[o,s],utils:a={}}=e,i=a.parsePath||(U=>U),c=a.renderPath||(U=>U),d=a.beforeLeave||ia(),u=Rn("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!o().value&&s({value:u,replace:!0,scroll:!1});const[m,p]=G(!1);let y;const _=(U,H)=>{H.value===v()&&H.state===h()||(y===void 0&&p(!0),st=U,y=H,Na(()=>{y===H&&(f(y.value),l(y.state),$[1](ne=>ne.filter(me=>me.pending)))}).finally(()=>{y===H&&No(()=>{st=void 0,U==="navigate"&&D(y),p(!1),y=void 0})}))},[v,f]=G(o().value),[h,l]=G(o().state),g=Yc(v,h,a.queryWrapper),b=[],$=G([]),w=W(()=>typeof r.transformUrl=="function"?$r(t(),r.transformUrl(g.pathname)):$r(t(),g.pathname)),C=()=>{const U=w(),H={};for(let ne=0;ne<U.length;ne++)Object.assign(H,U[ne].params);return H},P=a.paramsWrapper?a.paramsWrapper(C,t):ua(C),T={pattern:u,path:()=>u,outlet:()=>null,resolvePath(U){return Rn(u,U)}};return Z(Nr(o,U=>_("native",U),{defer:!0})),{base:T,location:g,params:P,isRouting:m,renderPath:c,parsePath:i,navigatorFactory:N,matches:w,beforeLeave:d,preloadRoute:z,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:$};function R(U,H,ne){be(()=>{if(typeof H=="number"){H&&(a.go?a.go(H):console.warn("Router integration does not support relative routing"));return}const me=!H||H[0]==="?",{replace:se,resolve:ce,scroll:F,state:O}={replace:!1,resolve:!me,scroll:!0,...ne},q=ce?U.resolvePath(H):Rn(me&&g.pathname||"",H);if(q===void 0)throw new Error(`Path '${H}' is not a routable path`);if(b.length>=Gc)throw new Error("Too many redirects");const L=v();(q!==L||O!==h())&&(Ja||d.confirm(q,ne)&&(b.push({value:L,replace:se,scroll:F,state:h()}),_("navigate",{value:q,state:O})))})}function N(U){return U=U||At(ha)||T,(H,ne)=>R(U,H,ne)}function D(U){const H=b[0];H&&(s({...U,replace:H.replace,scroll:H.scroll}),b.length=0)}function z(U,H){const ne=$r(t(),U.pathname),me=st;st="preload";for(let se in ne){const{route:ce,params:F}=ne[se];ce.component&&ce.component.preload&&ce.component.preload();const{preload:O}=ce;H&&O&&Lo(n(),()=>O({params:F,location:{pathname:U.pathname,search:U.search,hash:U.hash,query:ca(U),state:null,key:""},intent:"preload"}))}st=me}}function tu(e,t,n,r){const{base:o,location:s,params:a}=e,{pattern:i,component:c,preload:d}=r().route,u=W(()=>r().path);c&&c.preload&&c.preload();const m=d?d({params:a,location:s,intent:st||"initial"}):void 0;return{parent:t,pattern:i,path:u,outlet:()=>c?A(c,{params:a,location:s,data:m,get children(){return n()}}):n(),resolvePath(y){return Rn(o.path(),y,u())}}}const nu=e=>t=>{const{base:n}=t,r=$t(()=>t.children),o=W(()=>ga(r(),t.base||""));let s;const a=eu(e,o,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),A(fa.Provider,{value:a,get children(){return A(ru,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[W(()=>(s=Io())&&null),A(su,{routerState:a,get branches(){return o()}})]}})}})};function ru(e){const t=e.routerState.location,n=e.routerState.params,r=W(()=>e.preload&&be(()=>{e.preload({params:n,location:t,intent:Zc()||"initial"})}));return A(ae,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>A(o,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function su(e){const t=[];let n;const r=W(Nr(e.routerState.matches,(o,s,a)=>{let i=s&&o.length===s.length;const c=[];for(let d=0,u=o.length;d<u;d++){const m=s&&s[d],p=o[d];a&&m&&p.route.key===m.route.key?c[d]=a[d]:(i=!1,t[d]&&t[d](),pt(y=>{t[d]=y,c[d]=tu(e.routerState,c[d-1]||e.routerState.base,wo(()=>r()[d+1]),()=>e.routerState.matches()[d])}))}return t.splice(o.length).forEach(d=>d()),a&&i?a:(n=c[0],c)}));return wo(()=>r()&&n)()}const wo=e=>()=>A(ae,{get when(){return e()},keyed:!0,children:t=>A(ha.Provider,{value:t,get children(){return t.outlet()}})}),Ne=e=>{const t=$t(()=>e.children);return Fa(e,{get children(){return t()}})};function ou([e,t],n,r){return[e,r?o=>t(r(o)):t]}function au(e){let t=!1;const n=o=>typeof o=="string"?{value:o}:o,r=ou(G(n(e.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&e.set(o),o));return e.init&&Ge(e.init((o=e.get())=>{t=!0,r[1](n(o)),t=!1})),nu({signal:r,create:e.create,utils:e.utils})}function iu(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function lu(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const cu=new Map;function uu(e=!0,t=!1,n="/_server",r){return o=>{const s=o.base.path(),a=o.navigatorFactory(o.base);let i,c;function d(v){return v.namespaceURI==="http://www.w3.org/2000/svg"}function u(v){if(v.defaultPrevented||v.button!==0||v.metaKey||v.altKey||v.ctrlKey||v.shiftKey)return;const f=v.composedPath().find(w=>w instanceof Node&&w.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const h=d(f),l=h?f.href.baseVal:f.href;if((h?f.target.baseVal:f.target)||!l&&!f.hasAttribute("state"))return;const b=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||b&&b.includes("external"))return;const $=h?new URL(l,document.baseURI):new URL(l);if(!($.origin!==window.location.origin||s&&$.pathname&&!$.pathname.toLowerCase().startsWith(s.toLowerCase())))return[f,$]}function m(v){const f=u(v);if(!f)return;const[h,l]=f,g=o.parsePath(l.pathname+l.search+l.hash),b=h.getAttribute("state");v.preventDefault(),a(g,{resolve:!1,replace:h.hasAttribute("replace"),scroll:!h.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function p(v){const f=u(v);if(!f)return;const[h,l]=f;o.preloadRoute(l,h.getAttribute("preload")!=="false")}function y(v){clearTimeout(i);const f=u(v);if(!f)return c=null;const[h,l]=f;c!==h&&(i=setTimeout(()=>{o.preloadRoute(l,h.getAttribute("preload")!=="false"),c=h},20))}function _(v){if(v.defaultPrevented)return;let f=v.submitter&&v.submitter.hasAttribute("formaction")?v.submitter.getAttribute("formaction"):v.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const l=new URL(f,la);if(f=o.parsePath(l.pathname+l.search),!f.startsWith(n))return}if(v.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const h=cu.get(f);if(h){v.preventDefault();const l=new FormData(v.target,v.submitter);h.call({r:o,f:v.target},v.target.enctype==="multipart/form-data"?l:new URLSearchParams(l))}}le(["click","submit"]),document.addEventListener("click",m),e&&(document.addEventListener("mousemove",y,{passive:!0}),document.addEventListener("focusin",p,{passive:!0}),document.addEventListener("touchstart",p,{passive:!0})),document.addEventListener("submit",_),Ge(()=>{document.removeEventListener("click",m),e&&(document.removeEventListener("mousemove",y),document.removeEventListener("focusin",p),document.removeEventListener("touchstart",p)),document.removeEventListener("submit",_)})}}function du(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function fu(e){const t=()=>window.location.hash.slice(1),n=ia();return au({get:t,set({value:r,replace:o,scroll:s,state:a}){o?window.history.replaceState(Mc(a),"","#"+r):window.history.pushState(a,"","#"+r);const i=r.indexOf("#"),c=i>=0?r.slice(i+1):"";lu(c,s),xr()},init:r=>iu(window,"hashchange",Vc(r,o=>!n.confirm(o&&o<0?o:t()))),create:uu(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:du,beforeLeave:n}})(e)}function br(e){const t=Ce(),n=Dr(),{href:r,state:o}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:o}),null}var hu=M("<article id=main>");const mu=e=>{const t=$t(()=>e.children);return(()=>{var n=hu();return j(n,t),n})()},Je=e=>{const t=`answers-store-${e}`,[n,r]=Go(Bo({currentLessonIdx:-1,answers:{}}),{name:t,storage:localStorage}),o=$=>(n.answers[$]||r("answers",$,[]),n.answers[$]),s=($,w)=>{const C=o($);if(!C[w])for(let P=C.length;P<=w;P++)r("answers",$,P,{wrongAnswers:[],correct:!1});return n.answers[$][w]},a=$=>r("currentLessonIdx",$),i=()=>n.currentLessonIdx===-1?0:n.currentLessonIdx,c=()=>r("currentLessonIdx",i()+1),d=($,w,C="")=>{o($),s($,w),r("answers",$,w,P=>C===""?{...P,correct:!0}:{...P,wrongAnswers:[...P.wrongAnswers,C]})},u=$=>n.answers[$]??[],m=$=>{r("answers",$,[])},p=()=>{r("answers",{}),r("currentLessonIdx",-1)},y=()=>Object.keys(n.answers).length,_=()=>Object.values(n.answers).reduce(($,w)=>$+w.length,0),v=()=>Object.values(n.answers).reduce(($,w)=>$+w.filter(C=>C.correct).length,0),f=()=>Object.values(n.answers).reduce(($,w)=>$+w.reduce((C,P)=>C+P.wrongAnswers.length,0),0),h=$=>u($).length,l=$=>u($).filter(w=>w.correct).length;return{getCurrentLessonIdx:i,setCurrentLessonIdx:a,incrementCurrentLessonIdx:c,saveAnswer:d,getLessonAnswers:u,resetLesson:m,resetAllLessons:p,getTotalTakenLessons:y,getTotalQuestionsAnswered:_,getTotalCorrectAnswers:v,getTotalIncorrectAnswers:f,getLessonQuestionsAnsweredCorrectly:l,getLessonQuestionCount:h,getLessonQuestionsAnsweredIncorrectly:$=>u($).reduce((w,C)=>w+C.wrongAnswers.length,0),isLessonDone:$=>{const w=h($);return w>0&&l($)===w}}};var gu=M("<button class=large-icon-button><i class=utf8-icon-reset>");const pa=e=>{const{t}=$e(),n=Ce(),{showConfirm:r}=Qn(),[o]=pe(ve),s=Je(e.courseIdx),a=W(()=>s.getTotalQuestionsAnswered()),i=()=>{o.loading||(o().reset(e.courseIdx),s.resetAllLessons(),n("/course/"+e.courseIdx))};return a()===0?"":(()=>{var c=gu(),d=c.firstChild;return c.$$click=()=>r(t("lose_progress",{totalAnswered:a()}),i),Z(()=>Y(d,"title",t("reset_course"))),c})()};le(["click"]);var pu=M("<ol>"),yu=M('<section class="card lesson-list">'),vu=M("<div>Loading lesson list..."),$u=M("<p class=card>No lessons are available for this course."),bu=M("<li><button>");const ya=e=>{const[t]=pe(ve),n=Je(e.courseIndex);return A(ae,{get when(){return!t.loading},get fallback(){return vu()},get children(){var r=yu();return j(r,()=>e.children,null),j(r,A(ae,{get when(){return(t()?.getLessons()?.length??0)>0},get fallback(){return $u()},get children(){var o=pu();return j(o,A(at,{get each(){return t()?.getLessons()??[]},children:(s,a)=>{const i=a(),c=n.getCurrentLessonIdx(),d=n.isLessonDone(i),u=i===c+1&&!d,m=i>c&&!n.isLessonDone(i)&&!u;return(()=>{var p=bu(),y=p.firstChild;return y.$$click=()=>{e.onLessonSelected(i)},y.classList.toggle("current",!!u),y.classList.toggle("todo",!!m),j(y,()=>s.title),Z(_=>{var v=!!n.isLessonDone(i),f=s.description||"";return v!==_.e&&y.classList.toggle("completed",_.e=v),f!==_.t&&Y(y,"title",_.t=f),_},{e:void 0,t:void 0}),p})()}})),o}}),null),r}})};le(["click"]);var _u=M('<section class="completed-all-lessons card"><h2></h2><div class=stats>');const wu=e=>{const{t}=$e(),n=Ce(),r=je(),o=s=>{n(`/course/${r.courseIdx}/${s}/intro`)};return(()=>{var s=_u(),a=s.firstChild,i=a.nextSibling;return j(a,()=>t("all_lessons_done")),j(s,A(ya,{onLessonSelected:o,get courseIndex(){return Number(r.courseIdx)}}),i),j(s,()=>e.children&&e.children,null),j(s,A(pa,{get courseIdx(){return Number(r.courseIdx||-1)}}),null),s})()};var Su=M("<aside class=course-score-progress-component><progress id=course-score-progress class=course-score-progress-bar>/");const Cu=e=>{const{t}=$e(),n=e.correct+e.incorrect;return(()=>{var r=Su(),o=r.firstChild,s=o.firstChild;return Y(o,"max",n),j(o,()=>e.correct,s),j(o,n,null),Z(()=>Y(o,"aria-label",t("course_score_so_far"))),Z(()=>o.value=e.correct),r})()};var Eu=M('<section class="stats-component card"><h2></h2><table class=horizontal-stats><thead><tr><th class=correct-answers></th><th class=incorrect-answers></th><th class=questions-answered></th></tr></thead><tbody><tr><td></td><td></td><td>');const Pu=e=>{const{t}=$e(),n=Je(e.courseIdx);return!n||!n.getTotalQuestionsAnswered()?null:(()=>{var r=Eu(),o=r.firstChild,s=o.nextSibling,a=s.firstChild,i=a.firstChild,c=i.firstChild,d=c.nextSibling,u=d.nextSibling,m=a.nextSibling,p=m.firstChild,y=p.firstChild,_=y.nextSibling,v=_.nextSibling;return j(o,()=>t("progress")),j(r,A(Cu,{get correct(){return n.getTotalCorrectAnswers()},get incorrect(){return n.getTotalIncorrectAnswers()}}),s),j(c,()=>t("correct_answer_count_alt")),j(d,()=>t("incorrect_answer_count_alt")),j(u,()=>t("questions_answered_count_alt")),j(y,()=>n.getTotalCorrectAnswers()),j(_,()=>n.getTotalIncorrectAnswers()),j(v,()=>n.getTotalQuestionsAnswered()),Z(f=>{var h=t("corect_answers_alt"),l=t("incorrect_answer_count_alt"),g=t("questions_answered_count_alt");return h!==f.e&&Y(c,"title",f.e=h),l!==f.t&&Y(d,"title",f.t=l),g!==f.a&&Y(u,"title",f.a=g),f},{e:void 0,t:void 0,a:void 0}),r})()};var ku=M("<p>"),Ou=M('<section class="card no-border no-set-height"><h2>'),Ru=M("<article id=home>"),Nu=M("<div>Loading lessons ...");const Iu=()=>{const e=je(),t=Ce(),[n,r]=G(null),[o]=pe(ve),[s,a]=G(null);ge(()=>{const d=Number(e.courseIdx);Number.isFinite(d)?(console.log("Course home screen set courseIdx",d),r(d)):(console.log("Course home screen has no courseIdx"),r(null))}),ge(()=>{if(o()&&!o.loading&&n()!==null){const u=o()?.store.courseMetadata;a(u)}});const i=W(()=>{const d=n();return d!==null?Je(d):null}),c=d=>{t(`/course/${n()}/${d}/intro`)};return A(ae,{get when(){return W(()=>!!(!o.loading&&o()))()&&i()},get fallback(){return Nu()},get children(){var d=Ru();return j(d,A(Pu,{get courseIdx(){return n()}}),null),j(d,A(ya,{get courseIndex(){return n()},onLessonSelected:c,get children(){return A(ae,{get when(){return s()},get children(){var u=Ou(),m=u.firstChild;return j(m,()=>s().title),j(u,A(ae,{get when(){return s().description},get children(){var p=ku();return j(p,()=>s().description),p}}),null),u}})}}),null),d}})};var Lu=M("<div class=form-field><label>"),Au=M("<textarea class=text-input>"),ju=M("<input class=text-input>");const Me=e=>(()=>{var t=Lu(),n=t.firstChild;return j(n,()=>e.label),j(t,(()=>{var r=W(()=>!!e.multiline);return()=>r()?(()=>{var o=Au();return Rt(o,"input",e.onInput),Z(()=>Y(o,"placeholder",e.placeholder)),Z(()=>o.value=e.value),o})():(()=>{var o=ju();return Rt(o,"input",e.onInput),Z(s=>{var a=e.placeholder,i=e.type||"text";return a!==s.e&&Y(o,"placeholder",s.e=a),i!==s.t&&Y(o,"type",s.t=i),s},{e:void 0,t:void 0}),Z(()=>o.value=e.value),o})()})(),null),t})();le(["input"]);var Tu=M('<section class="boolean-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),xu=M('<div class=answer-row><button title="Click to mark as correct answer"><span></span></button><button type=button title="Remove this answer"><span class=utf8-icon-close>');function qu(e){const[t,n]=G(""),[r,o]=G(!1),s=(d,u)=>{const m=[...e.list],p=Object.keys(m[d])[0];m[d]={[u]:m[d][p]},e.onUpdate(m)},a=d=>{const u=[...e.list],m=Object.keys(u[d])[0];u[d]={[m]:!u[d][m]},e.onUpdate(u)},i=d=>{const u=[...e.list];u.splice(d,1),e.onUpdate(u)},c=()=>{if(!t())return;const d=[...e.list,{[t()]:r()}];e.onUpdate(d),n(""),o(!1)};return(()=>{var d=Tu(),u=d.firstChild,m=u.firstChild;return j(d,()=>e.list.map((p,y)=>{const _=Object.keys(p)[0],v=p[_];return(()=>{var f=xu(),h=f.firstChild,l=h.firstChild,g=h.nextSibling;return j(f,A(Me,{label:`Option ${y+1}`,value:_,onInput:b=>s(y,b.target.value),placeholder:"Enter answer"}),h),h.$$click=()=>a(y),ke(h,`checkmark ${v?"selected":""}`),ke(l,`utf8-icon-${v?"tick":"not-tick"}`),g.$$click=()=>i(y),f})()}),u),j(u,A(Me,{label:"New Option",get value(){return t()},onInput:p=>n(p.target.value),placeholder:"Enter new option"}),m),m.$$click=c,d})()}le(["click"]);var Du=M('<section class="answer-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Mu=M('<div class=answer-row><button title="Select as the correct answer"><span></span></button><button class=large-icon-button type=button title="Remove this answer"><span class=utf8-icon-close>');function So(e){const[t,n]=G(""),[r,o]=G([]);ge(()=>{o([...e.list])});const s=(d,u)=>{const m=[...r()];m[d]=u,o(m),e.onUpdate(m,e.answer)},a=d=>{const u=[...r()];u.splice(d,1),o(u),e.onUpdate(u,e.answer)},i=()=>{const d=t().trim();if(!d)return;const u=[...r(),d];o(u),n(""),e.onUpdate(u,e.answer)},c=d=>{const u=e.answer===d?"":d;e.onUpdate(r(),u)};return(()=>{var d=Du(),u=d.firstChild,m=u.firstChild;return j(d,()=>r().map((p,y)=>(()=>{var _=Mu(),v=_.firstChild,f=v.firstChild,h=v.nextSibling;return j(_,A(Me,{label:`Option ${y+1}`,value:p,onInput:l=>s(y,l.target.value),placeholder:"Enter answer"}),v),v.$$click=()=>c(p),h.$$click=()=>a(y),Z(l=>{var g=`large-icon-button checkmark ${e.answer===p?"selected":""}`,b=`utf8-icon-${e.answer===p?"tick":"not-tick"}`;return g!==l.e&&ke(v,l.e=g),b!==l.t&&ke(f,l.t=b),l},{e:void 0,t:void 0}),_})()),u),j(u,A(Me,{label:"New Option",get value(){return t()},onInput:p=>n(p.target.value),placeholder:"Enter new option"}),m),m.$$click=i,d})()}le(["click"]);var Vu=M('<section class="vocab-text answer-list"><div class="answer-row add-new"><button type=button title="Add this entry"><span class=utf8-icon-add>'),Fu=M('<div class=answer-row><button type=button title="Remove this entry"><span class=utf8-icon-close>');function Uu(e){const[t,n]=G(""),[r,o]=G(""),s=W(()=>Object.entries(e.list)),a=(u,m)=>{const p={...e.list},y=s()[u][0],_=p[y];delete p[y],p[m]=_,e.onUpdate(p)},i=(u,m)=>{const p={...e.list},y=s()[u][0];p[y]=m,e.onUpdate(p)},c=u=>{const m={...e.list},p=s()[u][0];delete m[p],e.onUpdate(m)},d=()=>{if(!t()||!r())return;const u={...e.list,[t()]:r()};e.onUpdate(u),n(""),o("")};return(()=>{var u=Vu(),m=u.firstChild,p=m.firstChild;return j(u,()=>s().map(([y,_],v)=>(()=>{var f=Fu(),h=f.firstChild;return j(f,A(Me,{label:`Prompt ${v+1}`,value:y,onInput:l=>a(v,l.target.value),placeholder:"Enter prompt"}),h),j(f,A(Me,{label:`Answer ${v+1}`,value:_,onInput:l=>i(v,l.target.value),placeholder:"Enter answer"}),h),h.$$click=()=>c(v),f})()),m),j(m,A(Me,{label:"New Prompt",get value(){return t()},onInput:y=>n(y.target.value),placeholder:"Enter new prompt"}),p),j(m,A(Me,{label:"New Answer",get value(){return r()},onInput:y=>o(y.target.value),placeholder:"Enter new answer"}),p),p.$$click=d,u})()}le(["click"]);var Ku=M("<p>Loading card..."),zu=M('<aside class="card-editor card"><section><h2>Editing <!> Card<button class="close-editor large-icon-button"><span class=utf8-icon-close></span></button></h2></section><footer class=modal-actions><button>Cancel</button><button>Save'),Hu=M("<section class=question>");const Wu=e=>{const{t}=$e(),[n,r]=G([]),[o,s]=G(""),[a,i]=G(""),[c,d]=G({}),[u,m]=G([]),[p,y]=G([]);ge(()=>{if(!e.card){console.warn("No card!");return}"answer"in e.card&&s(e.card.answer||""),"answers"in e.card&&r(e.card.answers||[]),"options"in e.card&&m(e.card.options),"question"in e.card&&i(e.card.question),"words"in e.card&&y(e.card.words),"vocab"in e.card&&d(e.card.vocab)});const _=()=>{if(!e.card)return;const f={...e.card};"answers"in f&&(f.answers=n()),"answer"in f&&(f.answer=o()),"options"in f&&(f.options=u()),"question"in e.card&&(f.question=a()),"words"in f&&(f.words=p()),"vocab"in f&&(f.vocab=c()),e.onSave(f)};function v(f,h,l){f(h),l&&Rc(e.card)&&s(l)}return A(ae,{get when(){return e.card},get fallback(){return Ku()},children:f=>(()=>{var h=zu(),l=h.firstChild,g=l.firstChild,b=g.firstChild,$=b.nextSibling,w=$.nextSibling,C=w.nextSibling,P=l.nextSibling,T=P.firstChild,R=T.nextSibling;return h.$$click=N=>N.stopPropagation(),j(g,()=>t("card-class."+e.card?.class),$),Rt(C,"click",e.onCancel),j(l,(()=>{var N=W(()=>!!a());return()=>N()&&(()=>{var D=Hu();return j(D,A(Me,{multiline:!0,label:"Question",get value(){return a()??"Question"},onInput:z=>i(z.target.value),placeholder:"Option: enter a question"})),D})()})(),null),j(l,(()=>{var N=W(()=>!!(f().answer&&f().class!=="writing-blocks"&&f().class!=="multiple-choice"));return()=>N()&&A(Me,{label:"Answer",get value(){return f().answer},onInput:D=>s(D.target.value),placeholder:"Enter answer"})})(),null),j(l,(()=>{var N=W(()=>"words"in f());return()=>N()&&A(qu,{get list(){return p()},onUpdate:(...D)=>v(y,...D)})})(),null),j(l,(()=>{var N=W(()=>"answers"in f());return()=>N()&&A(So,{get answer(){return o()},get list(){return n()},onUpdate:(...D)=>v(r,...D)})})(),null),j(l,(()=>{var N=W(()=>"options"in f());return()=>N()&&A(So,{get answer(){return o()},get list(){return u()},onUpdate:(...D)=>v(m,...D)})})(),null),j(l,(()=>{var N=W(()=>"vocab"in f());return()=>N()&&A(Uu,{get list(){return c()},onUpdate:(...D)=>v(d,...D)})})(),null),Rt(T,"click",e.onCancel),R.$$click=_,Z(()=>Y(C,"title",t("cacnel"))),h})()})};le(["click"]);var Bu=M("<article>"),Gu=M("<p>Loading editor...");const Ju=()=>{const e=je(),t=Ce(),[n]=pe(ve),r=()=>Number(e.courseIdx??-1),o=()=>Number(e.lessonIdx??-1),s=()=>Number(e.cardIdx??-1),a=W(()=>n()?.getLessons()??[]),i=W(()=>{const u=o();if(typeof o>"u"||!a().length)return;const m=a()[u];if(!m||!Array.isArray(m.cards))return console.warn("Invalid lesson:",u,m),null;const p=s();if(s()>=m.cards.length){console.warn("cardId is >= lesson.cards length"),t("/course/"+r());return}return m.cards[p]??null}),c=W(()=>a().length>0&&o()>=0&&s()>=0&&i()!==null);ge(()=>{n()});const d=u=>{const m=n();m&&(m.saveCard(u,o(),s()),t(-1))};return A(ae,{get when(){return W(()=>!!c())()&&i()},get fallback(){return Gu()},get children(){var u=Bu();return j(u,A(Wu,{get card(){return i()},onSave:d,onCancel:()=>t(`/editor/${r()}`)})),u}})},Qu=(e,t)=>{const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=t%60;let s="";return n>0&&(s+=`${n} ${e("hours")}`),(r>0||n>0)&&(s&&(s+=" "),s+=`${r} ${e("minutes")}`),s&&(s+=", "),s+=`${o} ${e("seconds")}`,s};var Xu=M('<section class="lesson-completed card"><h2></h2><p>'),Yu=M("<footer class=lesson-completed-footer><button class=next-button>");const Zu=e=>{const{t}=$e(),n=je(),r=Je(Number(n.courseIdx||-1)),o=r.getCurrentLessonIdx(),s=r.getLessonQuestionsAnsweredIncorrectly(o),a=r.getLessonQuestionCount(o),i=()=>{na(),e.onNext()};return[(()=>{var c=Xu(),d=c.firstChild,u=d.nextSibling;return j(d,()=>t("lesson_completed")),j(u,()=>t("lesson_completed_counts",{questionCount:a,incorrectAnswerCount:s,duration:Qu(t,e.durationInSeconds)})),c})(),(()=>{var c=Yu(),d=c.firstChild;return d.$$click=i,j(d,()=>t("continue")),c})()]};le(["click"]);const ed=()=>{const[e]=pe(ve),t=je(),[n]=Jc(),r=Ce(),o=W(()=>Number(t.courseIdx)),s=W(()=>Number(t.lessonIdx)),a=W(()=>Number(n.duration)||-1),i=W(()=>s()+1),c=()=>{const d=e();d&&(i()<d.getLessons().length?r(`/course/${o()}/${i()}/intro`):r(`/course/${o()}/finished`))};return A(ae,{get when(){return e()},get children(){return A(Zu,{onNext:c,get durationInSeconds(){return a()}})}})};var td=M("<div>Loading Lesson Data...");const nd=()=>{const[e]=pe(ve),t=je(),n=W(()=>Number(t.courseIdx||-1)),r=W(()=>Number(t.lessonIdx||-1)),o=Ce(),s=Je(n()),[a,i]=G(null),[c,d]=G(Date.now());ge(()=>{if(e.loading)return;const y=e();if(!y)return;const _=r(),v=y?.getLessons();v[_]&&(i(v[_]),d(Date.now()))});const u=()=>{o(`/course/${n()}`)},m=(y,_)=>{s.saveAnswer(r(),y,_||"")},p=()=>{const y=Math.floor((Date.now()-c())/1e3);o(`/course/${n()}/${r()}/completed?duration=${y}`)};return A(ae,{get when(){return a()},get fallback(){return td()},children:y=>A(jc,{get lesson(){return y()},onCancel:u,onAnswer:m,onLessonComplete:p})})};var rd=M("<div>Loading Lesson Data..."),sd=M('<article class="lesson-intro card"><header><h2> </h2><h3>'),od=M("<footer class=lesson-intro-footer><button class=next-button>"),ad=M("<p class=description>");const Co=()=>{const[e]=pe(ve),t=je(),n=Ce(),{t:r}=$e(),o=W(()=>Number(t.courseIdx)),s=W(()=>Number(t.lessonIdx)),a=W(()=>Je(o())),i=W(()=>{const d=e();if(!(!d||!d.store))return d.getLessons()?.[s()]}),c=()=>{Ul(),a()?.resetLesson(s()),n(`/course/${o()}/${s()}/in-progress`)};return A(ae,{get when(){return i()},get fallback(){return rd()},children:d=>[(()=>{var u=sd(),m=u.firstChild,p=m.firstChild,y=p.firstChild,_=p.nextSibling;return j(p,()=>r("lesson"),y),j(p,()=>s()+1,null),j(_,()=>d().title),j(u,(()=>{var v=W(()=>!!d().description);return()=>v()&&(()=>{var f=ad();return j(f,()=>d().description),f})()})(),null),u})(),(()=>{var u=od(),m=u.firstChild;return m.$$click=c,j(m,()=>r("begin")),u})()]})};le(["click"]);const id="0.2.3",ld="https://leegee.github.io/learning-oe-solidjs",va={version:id,homepage:ld};var cd=M("<h1 class=animated-text>");const ud=e=>{const[t,n]=G(!1);let r;return ge(()=>{if(r){let o;requestAnimationFrame(()=>{o=new IntersectionObserver(a=>{a[0].isIntersecting&&(n(!0),o.unobserve(r))},{threshold:.1}),o.observe(r)}),Ge(()=>{o?.disconnect()})}}),(()=>{var o=cd(),s=r;return typeof s=="function"?ot(s,o):r=o,j(o,()=>e.title),Z(()=>o.classList.toggle("visible",!!t())),o})()};var dd=M("<button class=large-icon-button><i class=icon-cog>");const Eo=e=>{const t=Ce();return(()=>{var n=dd();return n.$$click=()=>t("/editor/"+e.courseIdx),n})()};le(["click"]);var fd=M('<button title="Download this course"class="icon-download large-icon-button">'),hd=M('<dialog class=dialog-error><header><h3>Error saving lessons</h3></header><footer><button class="large-icon-button utf8-icon-close">');const Po=e=>{const[t]=pe(ve);let n=null;const r=async()=>{if(t.loading)return;const o="lessons.lson.json",s=await t().getCourseData(e.courseIdx);if(!s)throw new Error("Lessons not loaded?");try{const a=new Blob([JSON.stringify(s,null,2)],{type:"text/plain"}),i=URL.createObjectURL(a),c=document.createElement("a");c.href=i,c.download=o,c.click(),URL.revokeObjectURL(i)}catch(a){a.name!=="AbortError"&&(console.error("Error saving file:",a),n?.showModal())}};return[(()=>{var o=fd();return o.$$click=()=>r(),o})(),(()=>{var o=hd(),s=o.firstChild,a=s.nextSibling,i=a.firstChild;return ot(c=>n=c,o),i.$$click=()=>n?.close(),o})()]};le(["click"]);var md=M('<button title="Create a blank course"class="large-icon-button utf8-icon-new">');const gd=()=>{const e=Ce(),{config:t}=qt(),[n]=pe(ve),r=async()=>{if(n.loading)return;const o=n().initNewCourse(t);o?(Je(o),e(`/editor/${o}`)):alert("Error creating new course")};return A(ae,{get when(){return!n.loading},get children(){var o=md();return o.$$click=r,o}})};le(["click"]);var pd=M('<button title="Load a course from a file"class=large-icon-button><i class=icon-upload>'),yd=M("<input type=file accept=.json>"),vd=M("<dialog class=dialog-error><header><h3>Error loading course</h3></header><footer><button class=large-icon-button><span class=utf8-icon-close>"),$d=M('<dialog class=dialog-ok><header><h3>Course Loaded</h3></header><footer><button class="large-icon-button utf8-icon-tick">');const bd=()=>{const[e]=pe(ve);let t=null,n=null,r=null;const o=()=>{n?.close(),t?.close()},s=()=>r?.click(),a=async i=>{if(console.log("loadCourseFromFile enter"),e.loading)return;const d=i.target.files?.[0];if(d)try{console.log("Selected file:",d.name);const u=await d.text();console.log(u),await e()?.saveCourseToStorage(u),n?.showModal()}catch(u){u.name!=="AbortError"&&(console.error("Error loading file:",u),t?.showModal())}finally{r&&(r.value="")}};return[(()=>{var i=pd();return i.$$click=s,i})(),(()=>{var i=yd();return i.addEventListener("change",a),ot(c=>r=c,i),i.style.setProperty("display","none"),i})(),(()=>{var i=vd(),c=i.firstChild,d=c.nextSibling,u=d.firstChild;return ot(m=>t=m,i),u.$$click=o,i})(),(()=>{var i=$d(),c=i.firstChild,d=c.nextSibling,u=d.firstChild;return ot(m=>n=m,i),u.$$click=o,i})()]};le(["click"]);var ko=M("<span class=course-action-buttons>"),_d=M('<aside aria-roledescription="Toggle menu"class=hamburger-menu><section class=card><menu><li><a>Custom Course</a></li></menu><footer><small><button>Edit Courses </button></small></footer></section><footer><small>Version '),wd=M("<p>Loading..."),Sd=M("<li><a>");const Cd=()=>{const[e]=pe(ve),[t,n]=G(!1),r=Ce(),{config:o}=qt(),[s,a]=G(0),i=c=>{a(c),r("/course/"+c)};return ge(()=>{if(!e.loading&&isNaN(s())){console.debug("local course index is NaN?");return}}),A(ae,{get when(){return!e.loading},get fallback(){return wd()},get children(){var c=_d(),d=c.firstChild,u=d.firstChild,m=u.firstChild,p=m.firstChild,y=u.nextSibling,_=y.firstChild,v=_.firstChild,f=d.nextSibling,h=f.firstChild;return h.firstChild,j(d,A(ud,{get title(){return o.menuTitle||o.appTitle}}),u),j(u,()=>On(o).map((l,g)=>(()=>{var b=Sd(),$=b.firstChild;return $.$$click=()=>i(g),j($,l),j(b,A(ae,{get when(){return t()},get children(){var w=ko();return j(w,A(pa,{courseIdx:g}),null),j(w,A(Po,{courseIdx:g}),null),j(w,A(Eo,{courseIdx:g}),null),w}}),null),Z(()=>ke(b,s()===g?"selected":"")),b})()),m),p.$$click=()=>{r("/course/"+o.courses.length)},j(m,A(ae,{get when(){return t()},get children(){var l=ko();return j(l,A(gd,{}),null),j(l,A(bd,{}),null),j(l,A(Po,{get courseIdx(){return On(o).length}}),null),j(l,A(Eo,{get courseIdx(){return On(o).length}}),null),l}}),null),v.$$click=()=>n(!t()),j(h,()=>va.version,null),Z(()=>ke(u,"course-menu "+(t()?"editing":""))),c}})};le(["click"]);var Ed=M("<span contenteditable>");function Kn(e){let t,n=e.value;const r=o=>o.replace(/[\r\n]+/g,"").trim();return ge(()=>{t&&document.activeElement!==t&&(t.innerText=e.value)}),(()=>{var o=Ed();return o.addEventListener("blur",s=>{const a=r(s.currentTarget.innerText);a!==e.value&&e.onChange(a)}),o.$$keydown=s=>{const a=s.currentTarget;s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),a.blur()):s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),a.innerText=n,a.blur())},o.addEventListener("focus",()=>{n=e.value}),ot(s=>t=s,o),Z(s=>{var a=e.placeholder,i=`${e.class??""} ${e.value.trim()===""?"placeholder":""}`;return a!==s.e&&Y(o,"aria-placeholder",s.e=a),i!==s.t&&ke(o,s.t=i),s},{e:void 0,t:void 0}),o})()}le(["keydown"]);var Pd=M('<button class=add-card title="Add a new card to this lesson"><span class=utf8-icon-add>'),kd=M("<div class=card-class-picker><button class=delete-button><span class=utf8-icon-close>"),Od=M("<div class=add-card>"),Rd=M("<p>Loading..."),Nd=M("<button>");function Id(e){const[t]=pe(ve),n=je(),r=Ce(),[o,s]=G(!1),a=i=>{const c=t();if(!c)return;const d=Number(n.courseIdx),u=c.getLessons();if(!Array.isArray(u)||e.lessonIdx<0||e.lessonIdx>=u.length){console.error("Invalid lesson index or malformed lessons:",u,e.lessonIdx);return}const m=kc(i),p=u.map((_,v)=>v===e.lessonIdx?{..._,cards:[..._.cards,m]}:_);c.setLessons(p);const y=p[e.lessonIdx]?.cards?.length-1;if(y==null||y<0){console.error("Failed to calculate newCardIdx");return}r(`/editor/${d}/${e.lessonIdx}/${y}`)};return A(ae,{get when(){return!t.loading},get fallback(){return Rd()},get children(){var i=Od();return j(i,A(ae,{get when(){return!o()},get children(){var c=Pd();return c.$$click=()=>s(!0),c}}),null),j(i,A(ae,{get when(){return o()},get children(){var c=kd(),d=c.firstChild;return d.$$click=()=>s(!1),j(c,A(at,{each:Oc,children:u=>(()=>{var m=Nd();return m.$$click=()=>{a(u),s(!1)},j(m,u),m})()}),null),c}}),null),i}})}le(["click"]);var Ld=M('<button class="large-icon-button icon-up-fat"title="Add a new lesson above this">'),Ad=M('<button class="large-icon-button icon-down-fat"title="Add a new lesson beneath this">'),jd=M("<aside class=add-lesson-overlay>"),Td=M('<div class=add-lesson-button-component><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course">'),xd=M("<p>Loading...");function qd(e){const[t]=pe(ve),[n,r]=G(!1),o=s=>{s.target.closest(".add-lesson-button-component")||r(!1)};return document.addEventListener("click",o),Ge(()=>document.removeEventListener("click",o)),A(ae,{get when(){return!t.loading},get fallback(){return xd()},get children(){var s=Td(),a=s.firstChild;return a.$$click=()=>r(i=>!i),j(s,A(ae,{get when(){return n()},get children(){var i=jd();return j(i,A(ae,{get when(){return e.above||!e.above&&!e.below},get children(){var c=Ld();return c.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)-1),r(!1)},c}}),null),j(i,A(ae,{get when(){return e.below||!e.above&&!e.below},get children(){var c=Ad();return c.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)+1),r(!1)},c}}),null),i}}),null),s}})}le(["click"]);var Dd=M('<div class=card-holder><div class="vertical-controls top-controls"><button title="Move up to the previous lesson"class="move-card-button icon-up-fat"></button></div><div class=horizontal-controls><button title="Swap with the card on the left"class="move-card-button icon-left-fat"></button><div class=card-overlay-wrapper><div class=card-overlay><button title=Delete class="control small-control"><span class=icon-trash></span></button><button title=Edit class=control><span class=icon-pencil></span></button></div></div><button title="Swap with the card to the right"class="move-card-button icon-right-fat"></button></div><div class="vertical-controls bottom-controls"><button title="Move to the next lesson"class="move-card-button icon-down-fat">'),Md=M("<p>Loading...?!");function Vd(e){const[t]=pe(ve),{showConfirm:n}=Qn(),{t:r}=$e(),o=Ce(),s=je(),a=u=>({...u,cards:[...u.cards]}),i=()=>{t.loading||n(r("confirm_delete_card"),()=>t().deleteCard(Number(e.lessonIdx),Number(e.cardIdx)))},c=(u,m,p)=>{const _=[...t().getLessons()],v=a(_[u]),f=[...v.cards],h=m+p;if(h<0||h>=f.length)return;const[l]=f.splice(m,1);f.splice(h,0,l),v.cards=f,_[u]=v,t().setLessons(_)},d=(u,m,p)=>{if(t.loading)return"Loading...";const y=t().getLessons(),_=u+p;if(_<0||_>=y.length||m<0||m>=y[u].cards.length)return;const v=[...y],f=a(v[u]),h=a(v[_]),l=[...f.cards],g=[...h.cards],[b]=l.splice(m,1);g.push(b),f.cards=l,h.cards=g,v[u]=f,v[_]=h,t().setLessons(v)};return A(ae,{get when(){return!t.loading},get fallback(){return Md()},get children(){var u=Dd(),m=u.firstChild,p=m.firstChild,y=m.nextSibling,_=y.firstChild,v=_.nextSibling,f=v.firstChild,h=f.firstChild,l=h.nextSibling,g=v.nextSibling,b=y.nextSibling,$=b.firstChild;return p.$$click=()=>d(e.lessonIdx,e.cardIdx,-1),_.$$click=()=>c(e.lessonIdx,e.cardIdx,-1),j(v,A(aa,{tabindex:-1,get card(){return e.card},get lesson(){return e.lesson},ondblclick:()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`)}),f),h.$$click=()=>i(),l.$$click=()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`),g.$$click=()=>c(e.lessonIdx,e.cardIdx,1),$.$$click=()=>d(e.lessonIdx,e.cardIdx,1),Z(w=>{var C=e.lessonIdx===0,P=e.cardIdx===0,T=e.cardIdx===e.lesson.cards.length-1,R=e.lessonIdx===t().getLessons().length-1;return C!==w.e&&(p.disabled=w.e=C),P!==w.t&&(_.disabled=w.t=P),T!==w.a&&(g.disabled=w.a=T),R!==w.o&&($.disabled=w.o=R),w},{e:void 0,t:void 0,a:void 0,o:void 0}),u}})}le(["click"]);var Fd=M('<article class="card no-set-height no-lessons"><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course"></button><p>Click above to create your first lesson</p><p>Click titles and descriptions to edit them'),Ud=M("<p>..."),Kd=M("<section class=lesson><header><h3><span>: &nbsp;</span></h3><h4></h4></header><div class=cards>"),zd=M("<div class=card-holder>");function Hd(){const[e]=pe(ve),{t}=$e();ge(()=>{document.body.classList.add("editing-card"),Ge(()=>{document.body.classList.remove("editing-card")})});const n=(r,o)=>{const s=[...e().getLessons()];s[r]=o(s[r]),e().setLessons(s)};return A(ae,{get when(){return e()},get fallback(){return(()=>{var r=Ud(),o=r.firstChild;return j(r,()=>t("loading"),o),r})()},get children(){return[W(()=>e().getLessons().map((r,o)=>(()=>{var s=Kd(),a=s.firstChild,i=a.firstChild,c=i.firstChild,d=c.firstChild,u=i.nextSibling,m=a.nextSibling;return Y(s,"id",`lesson-${o}`),j(c,o+1,d),j(c,A(Kn,{get value(){return r.title},onChange:p=>n(o,y=>({...y,title:p}))}),null),j(i,A(qd,{lessonIdx:o}),null),j(u,A(Kn,{get value(){return r.description??""},onChange:p=>n(o,y=>({...y,description:p}))})),j(m,()=>r.cards.map((p,y)=>(()=>{var _=zd();return j(_,A(Vd,{lesson:r,lessonIdx:o,card:p,cardIdx:y})),_})()),null),j(m,A(Id,{lessonIdx:o}),null),s})())),A(ae,{get when(){return e().getLessons().length===0},get children(){var r=Fd(),o=r.firstChild;return o.$$click=()=>e()?.addLesson(0),r}})]}})}le(["click"]);var Wd=M('<button class="large-icon-button icon-trash">');function Bd(e){const[t]=pe(ve),{t:n}=$e(),r=Ce(),{showConfirm:o}=Qn(),s=async()=>{try{await t().deleteCourse(e.courseIdx),r("/")}catch(i){console.error("Failed to delete course:",i)}},a=async()=>{if(e.courseIdx==null){console.warn("No course selected.");return}t.loading||o(n("confirm_delete_course"),s)};return(()=>{var i=Wd();return i.$$click=a,Z(()=>Y(i,"title",n("delete_course"))),i})()}le(["click"]);var Gd=M("<p>..."),Jd=M("<nav class=coourse-action-buttons>"),Qd=M("<article class=course-editor role=dialog aria-modal=true><header><h2>:&nbsp;<q></q></h2><h3><q>"),Xd=M("<nav class=lesson-pager>"),Yd=M("<button class=pager-link>: ");function Zd(){const[e]=pe(ve),{t}=$e(),n=Ce(),r=je(),{config:o}=qt();return ge(()=>{console.log("editor course idx:",r.courseIdx)}),ge(()=>{document.body.classList.add("editing-card"),Ge(()=>{document.body.classList.remove("editing-card")})}),A(ae,{get when(){return e()},get fallback(){return(()=>{var s=Gd(),a=s.firstChild;return j(s,()=>t("loading"),a),s})()},children:s=>{const a=s().getLessons();return(()=>{var i=Qd(),c=i.firstChild,d=c.firstChild,u=d.firstChild,m=u.nextSibling,p=d.nextSibling,y=p.firstChild;return j(d,()=>t("course"),u),j(m,A(Kn,{get value(){return s().getTitle()??""},onChange:_=>s().setTitle(_)})),j(d,A(ae,{get when(){return Number(r.courseIdx)<o.courses.length},get children(){var _=Jd();return j(_,A(Bd,{get courseIdx(){return Number(r.courseIdx)}})),_}}),null),j(y,A(Kn,{get value(){return s().getDescription()??"Description"},onChange:_=>s().setDescription(_)})),j(c,(()=>{var _=W(()=>!!(a&&a.length>1));return()=>_()&&(()=>{var v=Xd();return j(v,()=>a.map((f,h)=>(()=>{var l=Yd(),g=l.firstChild;return l.$$click=()=>n(`#lesson-${h}`),j(l,h+1,g),j(l,()=>f.title,null),Z(()=>Y(l,"aria-label",`Go to lesson ${h+1}: ${f.title}`)),l})())),v})()})(),null),j(i,A(Hd,{}),null),i})()}})}le(["click"]);var ef=M("<h1>The specified resource is unavailable.");const tf=()=>[A(Ne,{path:"/editor/:courseIdx/:lessonIdx/:cardIdx",component:Ju}),A(Ne,{path:"/editor/:courseIdx?",component:Zd}),A(Ne,{path:"/course/:courseIdx",component:mu,get children(){return[A(Ne,{path:"/",component:Iu}),A(Ne,{path:":lessonIdx",component:Co}),A(Ne,{path:":lessonIdx/intro",component:Co}),A(Ne,{path:":lessonIdx/in-progress",component:nd}),A(Ne,{path:":lessonIdx/completed",component:ed}),A(Ne,{path:"finished",component:wu})]}}),A(Ne,{path:"/editor",component:()=>A(br,{href:"/menu"})}),A(Ne,{path:"/course",component:()=>A(br,{href:"/menu"})}),A(Ne,{path:"/menu",component:Cd}),A(Ne,{path:"/",component:()=>A(br,{href:"/menu"})}),A(Ne,{path:"*",component:()=>ef()})],nf=va.homepage,rf=()=>new URL(nf).pathname.replace(/\/?$/,"");var sf=M('<button class="hamburger-button large-icon-button"aria-label="Toggle menu"><span>');const of=()=>{const e=Dr(),t=Ce(),[n,r]=G("/"),o=rf(),s=()=>e.pathname.replace(o,"")||"/",a=()=>/\/menu(\/|$)/.test(e.pathname),i=()=>{if(a()){const c=s(),d=n();d===c||d==="/menu"||!d?t("/"):window.history.back()}else r(s()),t("/menu")};return ge(()=>{a()?document.body.classList.add("menu-shown"):document.body.classList.remove("menu-shown")}),(()=>{var c=sf(),d=c.firstChild;return c.$$click=i,Z(()=>ke(d,`utf8-icon-${a()?"close":"menu"}`)),c})()};le(["click"]);var af=M("<p>Loading..."),lf=M("<header class=header-component><aside class=header-progress><progress class=course-progress></progress></aside><div class=header-text><h1>");const cf=()=>{const{t:e}=$e(),{config:t}=qt(),n=je(),r=Je(Number(n.courseIdx||-1)),[o]=pe(ve);return A(ae,{get when(){return o()},get fallback(){return af()},children:s=>{const a=r.getTotalQuestionsAnswered(),i=s().getTotalLessonsCount();return(()=>{var c=lf(),d=c.firstChild,u=d.firstChild,m=d.nextSibling,p=m.firstChild;return u.value=a,Y(u,"max",i),j(p,()=>t.appTitle),j(m,A(of,{}),null),Z(y=>{var _=e("course_progress"),v=`${e("all_lessons")} ${a+1} / ${i}`,f=t.targetLanguage;return _!==y.e&&Y(u,"aria-label",y.e=_),v!==y.t&&Y(u,"title",y.t=v),f!==y.a&&Y(p,"lang",y.a=f),y},{e:void 0,t:void 0,a:void 0}),c})()}})},Oo=new Set;function uf(){const[e]=pe(ve),t=je();return ge(async()=>{if(e.loading)return;const n=t.courseIdx;if(!n)return;const r=Number(n);!isNaN(r)&&!Oo.has(n)&&(Oo.add(n),await e()?.loadCourseFromFile(r),console.log("Loaded course by route"))}),null}var df=M("<main id=main>");const ff=e=>A(fu,{root:n=>A(Xl,{get config(){return e.config},get children(){return[A(uf,{}),A(bi,{get children(){return A(Fl,{get children(){var r=df();return j(r,A(cf,{}),null),j(r,()=>n.children,null),r}})}})]}}),get children(){return A(tf,{})}}),hf=async()=>{try{return await Mo()}catch(e){return console.error("Error loading configuration:",e),null}},mf=async()=>{const e=await hf();if(!e)throw new Error("Failed to load config. App will not start.");await Promise.allSettled([ve(),$i(e)]);const t=A(ff,{config:e}),n=document.getElementById("root");n?(n.innerHTML="",Ba(()=>t,n)):pt(()=>t)};await mf();

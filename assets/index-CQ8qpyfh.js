(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const va=!0,$a=(e,t)=>e===t,Me=Symbol("solid-proxy"),ba=typeof Proxy=="function",_r=Symbol("solid-track"),_a=Symbol("solid-dev-component"),Ln={equals:$a};let ko=Ao;const We=1,An=2,wa={},nr={};var oe=null;let rr=null,Sa=null,he=null,Ce=null,He=null,Wn=0;const Ca={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function gt(e,t){const n=he,r=oe,o=e.length===0,s=t===void 0?r:t,i=o?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?()=>e(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>e(()=>ve(()=>Rt(i)));oe=i,he=null;try{return Ve(a,!0)}finally{he=n,oe=r}}function B(e,t){t=t?Object.assign({},Ln,t):Ln;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0};t.name&&(n.name=t.name),t.internal?n.internal=!0:Io(n);const r=o=>(typeof o=="function"&&(o=o(n.value)),Ir(n,o));return[Lo.bind(n),r]}function Ea(e,t,n){const r=xt(e,t,!0,We,n);at(r)}function Z(e,t,n){const r=xt(e,t,!1,We,n);at(r)}function ge(e,t,n){ko=Aa;const r=xt(e,t,!1,We,n);r.user=!0,He?He.push(r):at(r)}function W(e,t,n){n=n?Object.assign({},Ln,n):Ln;const r=xt(e,t,!0,0,n);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,at(r),Lo.bind(r)}function Pa(e){return e&&typeof e=="object"&&"then"in e}function At(e,t,n){let r,o,s;r=!0,o=e,s={};let i=null,a=nr,l=!1,d="initialValue"in s,c=typeof r=="function"&&W(r);const h=new Set,[g,v]=(s.storage||B)(s.initialValue),[w,y]=B(void 0),[f,m]=B(void 0,{equals:!1}),[u,p]=B(d?"ready":"unresolved");function b(P,A,D,k){return i===P&&(i=null,k!==void 0&&(d=!0),(P===a||A===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(k,{value:A})),a=nr,$(A,D)),A}function $(P,A){Ve(()=>{A===void 0&&v(()=>P),p(A!==void 0?"errored":d?"ready":"unresolved"),y(A);for(const D of h.keys())D.decrement();h.clear()},!1)}function _(){const P=Na,A=g(),D=w();if(D!==void 0&&!i)throw D;return he&&he.user,A}function C(P=!0){if(P!==!1&&l)return;l=!1;const A=c?c():r;if(A==null||A===!1){b(i,ve(g));return}const D=a!==nr?a:ve(()=>o(A,{value:g(),refetching:P}));return Pa(D)?(i=D,"value"in D?(D.status==="success"?b(i,D.value,void 0,A):b(i,void 0,Sr(D.value),A),D):(l=!0,queueMicrotask(()=>l=!1),Ve(()=>{p(d?"refreshing":"pending"),m()},!1),D.then(k=>b(D,k,void 0,A),k=>b(D,void 0,Sr(k),A)))):(b(i,D,void 0,A),D)}return Object.defineProperties(_,{state:{get:()=>u()},error:{get:()=>w()},loading:{get(){const P=u();return P==="pending"||P==="refreshing"}},latest:{get(){if(!d)return _();const P=w();if(P&&!i)throw P;return g()}}}),c?Ea(()=>C(!1)):C(!1),[_,{refetch:C,mutate:v}]}function Oo(e){return Ve(e,!1)}function ve(e){if(he===null)return e();const t=he;he=null;try{return e()}finally{he=t}}function Nr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let d=0;d<e.length;d++)a[d]=e[d]()}else a=e();if(s)return s=!1,i;const l=ve(()=>t(a,o,i));return o=a,l}}function ka(e){ge(()=>ve(e))}function Be(e){return oe===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):oe.cleanups===null?oe.cleanups=[e]:oe.cleanups.push(e),e}function wr(){return he}function Ro(){return oe}function No(e,t){const n=oe,r=he;oe=e,he=null;try{return Ve(t,!0)}catch(o){Lr(o)}finally{oe=n,he=r}}function Oa(e){const t=he,n=oe;return Promise.resolve().then(()=>{he=t,oe=n;let r;return Ve(e,!1),he=oe=null,r?r.done:void 0})}const[uf,df]=B(!1);function Ra(e,t){const n=xt(()=>ve(()=>(Object.assign(e,{[_a]:!0}),e(t))),void 0,!0,0);return n.props=t,n.observers=null,n.observerSlots=null,n.name=e.name,n.component=e,at(n),n.tValue!==void 0?n.tValue:n.value}function Io(e){oe&&(oe.sourceMap?oe.sourceMap.push(e):oe.sourceMap=[e],e.graph=oe)}function jt(e,t){const n=Symbol("context");return{id:n,Provider:ja(n,t),defaultValue:e}}function Tt(e){let t;return oe&&oe.context&&(t=oe.context[e.id])!==void 0?t:e.defaultValue}function vt(e){const t=W(e),n=W(()=>Cr(t()),void 0,{name:"children"});return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Na;function Lo(){if(this.sources&&this.state)if(this.state===We)at(this);else{const e=Ce;Ce=null,Ve(()=>Tn(this),!1),Ce=e}if(he){const e=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(e)):(he.sources=[this],he.sourceSlots=[e]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function Ir(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Ve(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=rr&&rr.running;i&&rr.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?Ce.push(s):He.push(s),s.observers&&jo(s)),i||(s.state=We)}if(Ce.length>1e6)throw Ce=[],va?new Error("Potential Infinite Loop Detected."):new Error},!1)),t}function at(e){if(!e.fn)return;Rt(e);const t=Wn;Ia(e,e.value,t)}function Ia(e,t,n){let r;const o=oe,s=he;he=oe=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=We,e.owned&&e.owned.forEach(Rt),e.owned=null),e.updatedAt=n+1,Lr(i)}finally{he=s,oe=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ir(e,r):e.value=r,e.updatedAt=n)}function xt(e,t,n,r=We,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:oe,context:oe?oe.context:null,pure:n};return oe===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):oe!==wa&&(oe.owned?oe.owned.push(s):oe.owned=[s]),o&&o.name&&(s.name=o.name),s}function jn(e){if(e.state===0)return;if(e.state===An)return Tn(e);if(e.suspense&&ve(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Wn);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===We)at(e);else if(e.state===An){const r=Ce;Ce=null,Ve(()=>Tn(e,t[0]),!1),Ce=r}}function Ve(e,t){if(Ce)return e();let n=!1;t||(Ce=[]),He?n=!0:He=[],Wn++;try{const r=e();return La(n),r}catch(r){n||(He=null),Ce=null,Lr(r)}}function La(e){if(Ce&&(Ao(Ce),Ce=null),e)return;const t=He;He=null,t.length&&Ve(()=>ko(t),!1)}function Ao(e){for(let t=0;t<e.length;t++)jn(e[t])}function Aa(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:jn(r)}for(t=0;t<n;t++)jn(e[t])}function Tn(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===We?r!==t&&(!r.updatedAt||r.updatedAt<Wn)&&jn(r):o===An&&Tn(r,t)}}}function jo(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=An,n.pure?Ce.push(n):He.push(n),n.observers&&jo(n))}}function Rt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Rt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Rt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,delete e.sourceMap}function Sr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Lr(e,t=oe){throw Sr(e)}function Cr(e){if(typeof e=="function"&&!e.length)return Cr(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Cr(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function ja(e,t){return function(r){let o;return Z(()=>o=ve(()=>(oe.context={...oe.context,[e]:r.value},vt(()=>r.children))),void 0,t),o}}const Ta=Symbol("fallback");function Fr(e){for(let t=0;t<e.length;t++)e[t]()}function xa(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return Be(()=>Fr(s)),()=>{let l=e()||[],d=l.length,c,h;return l[_r],ve(()=>{let v,w,y,f,m,u,p,b,$;if(d===0)i!==0&&(Fr(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[Ta],o[0]=gt(_=>(s[0]=_,n.fallback())),i=1);else if(i===0){for(o=new Array(d),h=0;h<d;h++)r[h]=l[h],o[h]=gt(g);i=d}else{for(y=new Array(d),f=new Array(d),a&&(m=new Array(d)),u=0,p=Math.min(i,d);u<p&&r[u]===l[u];u++);for(p=i-1,b=d-1;p>=u&&b>=u&&r[p]===l[b];p--,b--)y[b]=o[p],f[b]=s[p],a&&(m[b]=a[p]);for(v=new Map,w=new Array(b+1),h=b;h>=u;h--)$=l[h],c=v.get($),w[h]=c===void 0?-1:c,v.set($,h);for(c=u;c<=p;c++)$=r[c],h=v.get($),h!==void 0&&h!==-1?(y[h]=o[c],f[h]=s[c],a&&(m[h]=a[c]),h=w[h],v.set($,h)):s[c]();for(h=u;h<d;h++)h in y?(o[h]=y[h],s[h]=f[h],a&&(a[h]=m[h],a[h](h))):o[h]=gt(g);o=o.slice(0,i=d),r=l.slice(0)}return o});function g(v){if(s[h]=v,a){const[w,y]=B(h,{name:"index"});return a[h]=y,t(l[h],w)}return t(l[h])}}}function L(e,t){return Ra(e,t||{})}function Vt(){return!0}const qa={get(e,t,n){return t===Me?n:e.get(t)},has(e,t){return t===Me?!0:e.has(t)},set:Vt,deleteProperty:Vt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Vt,deleteProperty:Vt}},ownKeys(e){return e.keys()}};function sr(e){return(e=typeof e=="function"?e():e)?e:{}}function Da(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Ma(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&Me in a,e[i]=typeof a=="function"?(t=!0,W(a)):a}if(ba&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const l=sr(e[a])[i];if(l!==void 0)return l}},has(i){for(let a=e.length-1;a>=0;a--)if(i in sr(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(sr(e[a])));return[...new Set(i)]}},qa);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let d=l.length-1;d>=0;d--){const c=l[d];if(c==="__proto__"||c==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,c);if(!r[c])r[c]=h.get?{enumerable:!0,configurable:!0,get:Da.bind(n[c]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const g=n[c];g&&(h.get?g.push(h.get.bind(a)):h.value!==void 0&&g.push(()=>h.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],l=r[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}let Va=0;function Fa(){return`cl-${Va++}`}const To=e=>`Attempting to access a stale value from <${e}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function Je(e){const t="fallback"in e&&{fallback:()=>e.fallback};return W(xa(()=>e.each,e.children,t||void 0),void 0,{name:"value"})}function ce(e){const t=e.keyed,n=W(()=>e.when,void 0,{name:"condition value"}),r=t?n:W(n,void 0,{equals:(o,s)=>!o==!s,name:"condition"});return W(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?ve(()=>s(t?o:()=>{if(!ve(r))throw To("Show");return n()})):s}return e.fallback},void 0,{name:"value"})}function Ua(e){const t=vt(()=>e.children),n=W(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<o.length;i++){const a=i,l=o[i],d=s,c=W(()=>d()?void 0:l.when,void 0,{name:"condition value"}),h=l.keyed?c:W(c,void 0,{equals:(g,v)=>!g==!v,name:"condition"});s=()=>d()||(h()?[a,c,l]:void 0)}return s});return W(()=>{const r=n()();if(!r)return e.fallback;const[o,s,i]=r,a=i.children;return typeof a=="function"&&a.length>0?ve(()=>a(i.keyed?s():()=>{if(ve(n)()?.[0]!==o)throw To("Match");return s()})):a},void 0,{name:"eval conditions"})}function Ze(e){return e}const Ka={hooks:Ca,writeSignal:Ir,registerGraph:Io};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);function za(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,l=t[o-1].nextSibling,d=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const c=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],c)}else if(s===a)for(;i<o;)(!d||!d.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const c=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],c),t[o]=n[s]}else{if(!d){d=new Map;let h=a;for(;h<s;)d.set(n[h],h++)}const c=d.get(t[i]);if(c!=null)if(a<c&&c<s){let h=i,g=1,v;for(;++h<o&&h<s&&!((v=d.get(t[h]))==null||v!==c+g);)g++;if(g>c-a){const w=t[i];for(;a<c;)e.insertBefore(n[a++],w)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Ur="_$DX_DELEGATE";function Ha(e,t,n,r={}){if(!t)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let o;return gt(s=>{o=s,t===document?e():j(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function V(e,t,n,r){let o;const s=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function ie(e,t=window.document){const n=t[Ur]||(t[Ur]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Wa))}}function Y(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Pe(e,t){t==null?e.removeAttribute("class"):e.className=t}function Nt(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function ot(e,t,n){return ve(()=>e(t,n))}function j(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return xn(e,t,r,n);Z(o=>xn(e,t(),o,n),r)}function Wa(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[n];if(l&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?l.call(t,d,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();s(l[0]);for(let d=0;d<l.length-2&&(t=l[d],!!i());d++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function xn(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(i){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=lt(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=lt(e,n,r);else{if(s==="function")return Z(()=>{let a=t();for(;typeof a=="function";)a=a();n=xn(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(Er(a,t,n,o))return Z(()=>n=xn(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=lt(e,n,r),i)return n}else l?n.length===0?Kr(e,a,r):za(e,n,a):(n&&lt(e),Kr(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=lt(e,n,r,t);lt(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Er(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],l=n&&n[e.length],d;if(!(a==null||a===!0||a===!1))if((d=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Er(e,a,l)||o;else if(d==="function")if(r){for(;typeof a=="function";)a=a();o=Er(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||o}else e.push(a),o=!0;else{const c=String(a);l&&l.nodeType===3&&l.data===c?e.push(l):e.push(document.createTextNode(c))}}return o}function Kr(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function lt(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const l=a.parentNode===e;!s&&!i?l?e.replaceChild(o,a):e.insertBefore(o,n):l&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Ba=!1,Ga="modulepreload",Ja=function(e){return"/learning-oe-solidjs/"+e},zr={},rt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");o=Promise.allSettled(n.map(l=>{if(l=Ja(l),l in zr)return;zr[l]=!0;const d=l.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Ga,d||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((g,v)=>{h.addEventListener("load",g),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},Qa=["targetLanguage","defaultLanguage","appTitle","i18n"];let Ft;const xo=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;for(const n in t)t[n]&&typeof t[n]=="object"&&!Array.isArray(t[n])?((!e[n]||typeof e[n]!="object")&&(e[n]={}),xo(e[n],t[n])):e[n]=t[n];return e},qo=async()=>Ft||(Ft=(async()=>{let e,t;try{e=(await rt(async()=>{const{default:o}=await import("./default.config-C-p_k8Fb.js");return{default:o}},[])).default}catch{throw new Error("Default config file did not properly load")}try{t=(await rt(async()=>{const{default:o}=await import("./app.config-B8w4eQSU.js");return{default:o}},[])).default}catch{throw new Error('Config file "app.config.json" did not properly load')}const n=xo(e,t);let r=!0;if(Qa.forEach(o=>{n[o]||(console.warn(`app.config.json should contain the "${o}" key`),r=!1)}),!r)throw new Error("Invalid configuration file JSON.");return n})(),Ft),X=e=>typeof e=="string",bt=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},Hr=e=>e==null?"":""+e,Xa=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Ya=/###/g,Wr=e=>e&&e.indexOf("###")>-1?e.replace(Ya,"."):e,Br=e=>!e||X(e),Et=(e,t,n)=>{const r=X(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(Br(e))return{};const s=Wr(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return Br(e)?{}:{obj:e,k:Wr(r[o])}},Gr=(e,t,n)=>{const{obj:r,k:o}=Et(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],i=t.slice(0,t.length-1),a=Et(e,i,Object);for(;a.obj===void 0&&i.length;)s=`${i[i.length-1]}.${s}`,i=i.slice(0,i.length-1),a=Et(e,i,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},Za=(e,t,n,r)=>{const{obj:o,k:s}=Et(e,t,Object);o[s]=o[s]||[],o[s].push(n)},qn=(e,t)=>{const{obj:n,k:r}=Et(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ei=(e,t,n)=>{const r=qn(e,n);return r!==void 0?r:qn(t,n)},Do=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?X(e[r])||e[r]instanceof String||X(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Do(e[r],t[r],n):e[r]=t[r]);return e},ct=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ni=e=>X(e)?e.replace(/[&<>"'\/]/g,t=>ti[t]):e;class ri{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const si=[" ",",","?","!",";"],oi=new ri(20),ai=(e,t,n)=>{t=t||"",n=n||"";const r=si.filter(i=>t.indexOf(i)<0&&n.indexOf(i)<0);if(r.length===0)return!0;const o=oi.getRegExp(`(${r.map(i=>i==="?"?"\\?":i).join("|")})`);let s=!o.test(e);if(!s){const i=e.indexOf(n);i>0&&!o.test(e.substring(0,i))&&(s=!0)}return s},Pr=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let i,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],i=o[a],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&l<r.length-1)continue;s+=l-s+1;break}o=i}return o},Dn=e=>e?.replace("_","-"),ii={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Mn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||ii,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(X(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Mn(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Mn(this.logger,t)}}var qe=new Mn;class Bn{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(i=>{let[a,l]=i;for(let d=0;d<l;d++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[a,l]=i;for(let d=0;d<l;d++)a.apply(a,[t,...r])})}}class Jr extends Bn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,i=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):X(r)&&s?a.push(...r.split(s)):a.push(r)));const l=qn(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!i||!X(r)?l:Pr(this.data?.[t]?.[n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(i?r.split(i):r)),t.indexOf(".")>-1&&(a=t.split("."),o=n,n=a[1]),this.addNamespaces(n),Gr(this.data,a,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),o=r,r=n,n=a[1]),this.addNamespaces(n);let l=qn(this.data,a)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Do(l,r,s):l={...l,...r},Gr(this.data,a,l),i.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var Mo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{t=this.processors[s]?.process(t,n,r,o)??t}),t}};const Qr={},Xr=e=>!X(e)&&typeof e!="boolean"&&typeof e!="number";class Vn extends Bn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xa(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=qe.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const i=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ai(t,r,o);if(i&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:X(s)?[s]:s};const d=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),t=d.join(o)}return{key:t,namespaces:X(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],d=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(c){const k=n.nsSeparator||this.options.nsSeparator;return o?{res:`${l}${k}${i}`,usedKey:i,exactUsedKey:i,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${k}${i}`}return o?{res:i,usedKey:i,exactUsedKey:i,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:i}const h=this.resolve(t,n);let g=h?.res;const v=h?.usedKey||i,w=h?.exactUsedKey||i,y=["[object Number]","[object Function]","[object RegExp]"],f=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,u=n.count!==void 0&&!X(n.count),p=Vn.hasDefaultValue(n),b=u?this.pluralResolver.getSuffix(d,n.count,n):"",$=n.ordinal&&u?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",_=u&&!n.ordinal&&n.count===0,C=_&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${b}`]||n[`defaultValue${$}`]||n.defaultValue;let P=g;m&&!g&&p&&(P=C);const A=Xr(P),D=Object.prototype.toString.apply(P);if(m&&P&&A&&y.indexOf(D)<0&&!(X(f)&&Array.isArray(P))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,P,{...n,ns:a}):`key '${i} (${this.language})' returned an object instead of string.`;return o?(h.res=k,h.usedParams=this.getUsedParamsDetails(n),h):k}if(s){const k=Array.isArray(P),T=k?[]:{},K=k?w:v;for(const U in P)if(Object.prototype.hasOwnProperty.call(P,U)){const H=`${K}${s}${U}`;p&&!g?T[U]=this.translate(H,{...n,defaultValue:Xr(C)?C[U]:void 0,joinArrays:!1,ns:a}):T[U]=this.translate(H,{...n,joinArrays:!1,ns:a}),T[U]===H&&(T[U]=P[U])}g=T}}else if(m&&X(f)&&Array.isArray(g))g=g.join(f),g&&(g=this.extendTranslation(g,t,n,r));else{let k=!1,T=!1;!this.isValidLookup(g)&&p&&(k=!0,g=C),this.isValidLookup(g)||(T=!0,g=i);const U=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:g,H=p&&C!==g&&this.options.updateMissing;if(T||k||H){if(this.logger.log(H?"updateKey":"missingKey",d,l,i,H?C:g),s){const le=this.resolve(i,{...n,keySeparator:!1});le&&le.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let te=[];const me=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&me&&me[0])for(let le=0;le<me.length;le++)te.push(me[le]);else this.options.saveMissingTo==="all"?te=this.languageUtils.toResolveHierarchy(n.lng||this.language):te.push(n.lng||this.language);const ne=(le,F,R)=>{const q=p&&R!==g?R:U;this.options.missingKeyHandler?this.options.missingKeyHandler(le,l,F,q,H,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(le,l,F,q,H,n),this.emit("missingKey",le,l,F,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?te.forEach(le=>{const F=this.pluralResolver.getSuffixes(le,n);_&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(R=>{ne([le],i+R,n[`defaultValue${R}`]||C)})}):ne(te,i,C))}g=this.extendTranslation(g,t,n,h,r),T&&g===i&&this.options.appendNamespaceToMissingKey&&(g=`${l}:${i}`),(T||k)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${i}`:i,k?g:void 0))}return o?(h.res=g,h.usedParams=this.getUsedParamsDetails(n),h):g}extendTranslation(t,n,r,o,s){var i=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=X(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(d){const g=t.match(this.interpolator.nestingRegexp);c=g&&g.length}let h=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,r.lng||this.language||o.usedLng,r),d){const g=t.match(this.interpolator.nestingRegexp),v=g&&g.length;c<v&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var g=arguments.length,v=new Array(g),w=0;w<g;w++)v[w]=arguments[w];return s?.[0]===v[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${n[0]}`),null):i.translate(...v,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=X(a)?[a]:a;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=Mo.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,i,a;return X(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(l,n),c=d.key;o=c;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const g=n.count!==void 0&&!X(n.count),v=g&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(f=>{this.isValidLookup(r)||(a=f,!Qr[`${y[0]}-${f}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(Qr[`${y[0]}-${f}`]=!0,this.logger.warn(`key "${o}" for languages "${y.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(m=>{if(this.isValidLookup(r))return;i=m;const u=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(u,c,m,f,n);else{let b;g&&(b=this.pluralResolver.getSuffix(m,n.count,n));const $=`${this.options.pluralSeparator}zero`,_=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(u.push(c+b),n.ordinal&&b.indexOf(_)===0&&u.push(c+b.replace(_,this.options.pluralSeparator)),v&&u.push(c+$)),w){const C=`${c}${this.options.contextSeparator}${n.context}`;u.push(C),g&&(u.push(C+b),n.ordinal&&b.indexOf(_)===0&&u.push(C+b.replace(_,this.options.pluralSeparator)),v&&u.push(C+$))}}let p;for(;p=u.pop();)this.isValidLookup(r)||(s=p,r=this.getResource(m,f,p,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:i,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!X(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Yr{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qe.create("languageUtils")}getScriptPartFromCode(t){if(t=Dn(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Dn(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(X(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),X(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=i=>{i&&(this.isSupportedCode(i)?o.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return X(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):X(t)&&s(this.formatLanguageCode(t)),r.forEach(i=>{o.indexOf(i)<0&&s(this.formatLanguageCode(i))}),o}}const Zr={zero:0,one:1,two:2,few:3,many:4,other:5},es={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class li{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=qe.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Dn(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),es;if(!t.match(/-|_/))return es;const l=this.languageUtils.getLanguagePartFromCode(t);i=this.getRule(l,n)}return this.pluralRulesCache[s]=i,i}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>Zr[o]-Zr[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const ts=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=ei(e,t,n);return!s&&o&&X(n)&&(s=Pr(e,n,r),s===void 0&&(s=Pr(t,n,r))),s},or=e=>e.replace(/\$/g,"$$$$");class ci{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qe.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:i,suffix:a,suffixEscaped:l,formatSeparator:d,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:g,nestingPrefixEscaped:v,nestingSuffix:w,nestingSuffixEscaped:y,nestingOptionsSeparator:f,maxReplaces:m,alwaysFormat:u}=t.interpolation;this.escape=n!==void 0?n:ni,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ct(s):i||"{{",this.suffix=a?ct(a):l||"}}",this.formatSeparator=d||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=g?ct(g):v||ct("$t("),this.nestingSuffix=w?ct(w):y||ct(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=m||1e3,this.alwaysFormat=u!==void 0?u:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,i,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const m=ts(n,l,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...o,...n,interpolationkey:v}):m}const w=v.split(this.formatSeparator),y=w.shift().trim(),f=w.join(this.formatSeparator).trim();return this.format(ts(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),f,r,{...o,...n,interpolationkey:y})};this.resetRegExp();const c=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>or(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?or(this.escape(v)):or(v)}].forEach(v=>{for(a=0;s=v.regex.exec(t);){const w=s[1].trim();if(i=d(w),i===void 0)if(typeof c=="function"){const f=c(t,s,o);i=X(f)?f:""}else if(o&&Object.prototype.hasOwnProperty.call(o,w))i="";else if(h){i=s[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),i="";else!X(i)&&!this.useRawValueToEscape&&(i=Hr(i));const y=v.safeValue(i);if(t=t.replace(s[0],y),h?(v.regex.lastIndex+=i.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,i;const a=(l,d)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let g=`{${h[1]}`;l=h[0],g=this.interpolate(g,i);const v=g.match(/'/g),w=g.match(/"/g);((v?.length??0)%2===0&&!w||w.length%2!==0)&&(g=g.replace(/'/g,'"'));try{i=JSON.parse(g),d&&(i={...d,...i})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${g}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,l};for(;o=this.nestingRegexp.exec(t);){let l=[];i={...r},i=i.replace&&!X(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const c=o[1].split(this.formatSeparator).map(h=>h.trim());o[1]=c.shift(),l=c,d=!0}if(s=n(a.call(this,o[1].trim(),i),i),s&&o[0]===t&&!X(s))return s;X(s)||(s=Hr(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),d&&(s=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const ui=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(i=>{if(i){const[a,...l]=i.split(":"),d=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=d),d==="false"&&(n[c]=!1),d==="true"&&(n[c]=!0),isNaN(d)||(n[c]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},ut=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const i=r+JSON.stringify(s);let a=t[i];return a||(a=e(Dn(r),o),t[i]=a),a(n)}};class di{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qe.create("formatter"),this.options=t,this.formats={number:ut((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:ut((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:ut((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:ut((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:ut((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=ut(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:d,formatOptions:c}=ui(l);if(this.formats[d]){let h=a;try{const g=o?.formatParams?.[o.interpolationkey]||{},v=g.locale||g.lng||o.locale||o.lng||r;h=this.formats[d](a,v,{...c,...o,...g})}catch(g){this.logger.warn(g)}return h}else this.logger.warn(`there was no format function for ${d}`);return a},t)}}const fi=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class hi extends Bn{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=qe.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(t,n,r,o){const s={},i={},a={},l={};return t.forEach(d=>{let c=!0;n.forEach(h=>{const g=`${d}|${h}`;!r.reload&&this.store.hasResourceBundle(d,h)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?i[g]===void 0&&(i[g]=!0):(this.state[g]=1,c=!1,i[g]===void 0&&(i[g]=!0),s[g]===void 0&&(s[g]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(a[d]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const o=t.split("|"),s=o[0],i=o[1];n&&this.emit("failedLoading",s,i,n),!n&&r&&this.store.addResourceBundle(s,i,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{Za(l.loaded,[s],i),fi(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(d=>{a[d]||(a[d]={});const c=l.loaded[d];c.length&&c.forEach(h=>{a[d][h]===void 0&&(a[d][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!t.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:i});return}this.readingCalls++;const a=(d,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&c&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,i)},s);return}i(d,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const d=l(t,n);d&&typeof d.then=="function"?d.then(c=>a(null,c)).catch(a):a(null,d)}catch(d){a(d)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();X(t)&&(t=this.languageUtils.toResolveHierarchy(t)),X(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(i=>{this.loadOne(i)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(i,a)=>{i&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,i),!i&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,a),this.loaded(t,i,a)})}saveMissing(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const l={...i,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let c;d.length===5?c=d(t,n,r,o,l):c=d(t,n,r,o),c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}else d(t,n,r,o,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const ns=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),X(e[1])&&(t.defaultValue=e[1]),X(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),rs=e=>(X(e.ns)&&(e.ns=[e.ns]),X(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),X(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Ut=()=>{},mi=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class It extends Bn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=rs(t),this.services={},this.logger=qe,this.modules={external:[]},mi(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(X(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=ns();this.options={...o,...this.options,...rs(n)},this.options.interpolation={...o.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?qe.init(s(this.modules.logger),this.options):qe.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=di;const h=new Yr(this.options);this.store=new Jr(this.options.resources,this.options);const g=this.services;g.logger=qe,g.resourceStore=this.store,g.languageUtils=h,g.pluralResolver=new li(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(g.formatter=s(c),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new ci(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new hi(s(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(v){for(var w=arguments.length,y=new Array(w>1?w-1:0),f=1;f<w;f++)y[f-1]=arguments[f];t.emit(v,...y)}),this.modules.languageDetector&&(g.languageDetector=s(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=s(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Vn(this.services,this.options),this.translator.on("*",function(v){for(var w=arguments.length,y=new Array(w>1?w-1:0),f=1;f<w;f++)y[f-1]=arguments[f];t.emit(v,...y)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ut),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=bt(),d=()=>{const c=(h,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(g),r(h,g)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut;const o=X(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],i=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};o?i(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>i(l)),this.options.preload?.forEach?.(a=>i(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const o=bt();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Ut),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Mo.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=bt();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=X(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,c=>{i(c,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),o}getFixedT(t,n,r){var o=this;const s=function(i,a){let l;if(typeof a!="object"){for(var d=arguments.length,c=new Array(d>2?d-2:0),h=2;h<d;h++)c[h-2]=arguments[h];l=o.options.overloadTranslationOptionHandler([i,a].concat(c))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const g=o.options.keySeparator||".";let v;return l.keyPrefix&&Array.isArray(i)?v=i.map(w=>`${l.keyPrefix}${g}${w}`):v=l.keyPrefix?`${l.keyPrefix}${g}${i}`:i,o.t(v,l)};return X(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(a,l)=>{const d=this.services.backendConnector.state[`${a}|${l}`];return d===-1||d===0||d===2};if(n.precheck){const a=n.precheck(this,i);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(r,t)&&(!o||i(s,t)))}loadNamespaces(t,n){const r=bt();return this.options.ns?(X(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=bt();X(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(i=>o.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return s.length?(this.options.preload=o.concat(s),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Yr(ns());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new It(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new It(o);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((l,d)=>(l[d]={...this.store.data[d]},Object.keys(l[d]).reduce((c,h)=>(c[h]={...l[d][h]},c),{})),{});s.store=new Jr(a,o),s.services.resourceStore=s.store}return s.translator=new Vn(s.services,o),s.translator.on("*",function(a){for(var l=arguments.length,d=new Array(l>1?l-1:0),c=1;c<l;c++)d[c-1]=arguments[c];s.emit(a,...d)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const pe=It.createInstance();pe.createInstance=It.createInstance;pe.createInstance;pe.dir;pe.init;pe.loadResources;pe.reloadResources;pe.use;pe.changeLanguage;pe.getFixedT;pe.t;pe.exists;pe.setDefaultNamespace;pe.hasLoadedNamespace;pe.loadNamespaces;pe.loadLanguages;var gi=V("<div>Loading i18n...");const pi={t:(...e)=>pe.t(...e),language:()=>pe.language,setLanguage:e=>pe.changeLanguage(e)},Vo=jt(pi),yi=async e=>{const t=Object.fromEntries(Object.entries(e.i18n.availableLanguages).map(([n,r])=>[n,{translation:r}]));await pe.init({resources:t,lng:e.uiLanguage||e.targetLanguage||e.defaultLanguage,fallbackLng:e.defaultLanguage,interpolation:{escapeValue:!1}})},vi=e=>{const t=vt(()=>e.children),[n,r]=B(pe.language),[o,s]=B(!1),i=pe.t;return ge(()=>{r(pe.language),pe.on("languageChanged",r),s(!0)}),o()?L(Vo.Provider,{value:{t:i,language:n,setLanguage:r},get children(){return t()}}):gi()},$e=()=>{const e=Tt(Vo);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},kr=Symbol("store-raw"),pt=Symbol("store-node"),ze=Symbol("store-has"),Fo=Symbol("store-self");function Uo(e){let t=e[Me];if(!t&&(Object.defineProperty(e,Me,{value:t=new Proxy(e,_i)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Qe(e){let t;return e!=null&&typeof e=="object"&&(e[Me]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function yt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[kr])return n;if(!Qe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)o=e[i],(r=yt(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,d=i.length;l<d;l++)s=i[l],!a[s].get&&(o=e[s],(r=yt(o,t))!==o&&(e[s]=r))}return e}function Fn(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Lt(e,t,n){if(e[t])return e[t];const[r,o]=B(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function $i(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Me||t===pt||(delete n.value,delete n.writable,n.get=()=>e[Me][t]),n}function Ko(e){wr()&&Lt(Fn(e,pt),Fo)()}function bi(e){return Ko(e),Reflect.ownKeys(e)}const _i={get(e,t,n){if(t===kr)return e;if(t===Me)return n;if(t===_r)return Ko(e),n;const r=Fn(e,pt),o=r[t];let s=o?o():e[t];if(t===pt||t===ze||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);wr()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=Lt(r,t,s)())}return Qe(s)?Uo(s):s},has(e,t){return t===kr||t===Me||t===_r||t===pt||t===ze||t==="__proto__"?!0:(wr()&&Lt(Fn(e,ze),t)(),t in e)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:bi,getOwnPropertyDescriptor:$i};function Le(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[ze]&&e[ze][t]&&o!==void 0&&e[ze][t].$()):(e[t]=n,e[ze]&&e[ze][t]&&o===void 0&&e[ze][t].$());let i=Fn(e,pt),a;if((a=Lt(i,t,o))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(a=i[l])&&a.$();(a=Lt(i,"length",s))&&a.$(e.length)}(a=i[Fo])&&a.$()}function zo(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Le(e,o,t[o])}}function wi(e,t){if(typeof t=="function"&&(t=t(e)),t=yt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Le(e,n,o)}Le(e,"length",r)}else zo(e,t)}function Ct(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Ct(e,[r[l]].concat(t),n);return}else if(a&&i==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Ct(e,[l].concat(t),n);return}else if(a&&i==="object"){const{from:l=0,to:d=e.length-1,by:c=1}=r;for(let h=l;h<=d;h+=c)Ct(e,[h].concat(t),n);return}else if(t.length>1){Ct(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=yt(s),r===void 0||Qe(o)&&Qe(s)&&!Array.isArray(s)?zo(o,s):Le(e,r,s))}function Ho(...[e,t]){const n=yt(e||{}),r=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const o=Uo(n);Ka.registerGraph({value:n,name:t&&t.name});function s(...i){Oo(()=>{r&&i.length===1?wi(n,i[0]):Ct(n,i)})}return[o,s]}const Or=Symbol("store-root");function mt(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==Or&&(!Qe(e)||!Qe(s)||i!==Array.isArray(s)||o&&e[o]!==s[o])){Le(t,n,e);return}if(i){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,c,h,g,v,w,y,f;for(h=0,g=Math.min(s.length,e.length);h<g&&(s[h]===e[h]||o&&s[h]&&e[h]&&s[h][o]===e[h][o]);h++)mt(e[h],s,h,r,o);const m=new Array(e.length),u=new Map;for(g=s.length-1,v=e.length-1;g>=h&&v>=h&&(s[g]===e[v]||o&&s[g]&&e[v]&&s[g][o]===e[v][o]);g--,v--)m[v]=s[g];if(h>v||h>g){for(c=h;c<=v;c++)Le(s,c,e[c]);for(;c<e.length;c++)Le(s,c,m[c]),mt(e[c],s,c,r,o);s.length>e.length&&Le(s,"length",e.length);return}for(y=new Array(v+1),c=v;c>=h;c--)w=e[c],f=o&&w?w[o]:w,d=u.get(f),y[c]=d===void 0?-1:d,u.set(f,c);for(d=h;d<=g;d++)w=s[d],f=o&&w?w[o]:w,c=u.get(f),c!==void 0&&c!==-1&&(m[c]=s[d],c=y[c],u.set(f,c));for(c=h;c<e.length;c++)c in m?(Le(s,c,m[c]),mt(e[c],s,c,r,o)):Le(s,c,e[c])}else for(let d=0,c=e.length;d<c;d++)mt(e[d],s,d,r,o);s.length>e.length&&Le(s,"length",e.length);return}const a=Object.keys(e);for(let d=0,c=a.length;d<c;d++)mt(e[a[d]],s,a[d],r,o);const l=Object.keys(s);for(let d=0,c=l.length;d<c;d++)e[l[d]]===void 0&&Le(s,l[d],void 0)}function Si(e,t={}){const{merge:n,key:r="id"}=t,o=yt(e);return s=>{if(!Qe(s)||!Qe(o))return o;const i=mt(o,{[Or]:s},Or,n,r);return i===void 0?s:i}}function Wo(e,t={}){const n=t.storage||globalThis.localStorage,r=t.name||`storage-${Fa()}`;if(!n)return[e[0],e[1],null];const o=t.storageOptions,s=t.serialize||JSON.stringify.bind(JSON),i=t.deserialize||JSON.parse.bind(JSON),a=n.getItem(r,o),l=typeof e[0]=="function"?c=>{try{const h=i(c);e[1](()=>h)}catch(h){console.warn(h)}}:c=>{try{const h=i(c);e[1](Si(h))}catch(h){console.warn(h)}};let d=!0;if(a instanceof Promise?a.then(c=>d&&c&&l(c)):a&&l(a),typeof t.sync?.[0]=="function"){const c=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](h=>{h.key!==r||(h.url||globalThis.location.href)!==globalThis.location.href||h.newValue===s(ve(c))||l(h.newValue)})}return[e[0],typeof e[0]=="function"?c=>{const h=e[1](c),g=c!=null?s(h):c;return t.sync?.[1](r,g),g!=null?n.setItem(r,g,o):n.removeItem(r,o),d=!1,h}:(...c)=>{e[1](...c);const h=s(ve(()=>e[0]));t.sync?.[1](r,h),n.setItem(r,h,o),d=!1},a]}function Ci(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kt={exports:{}},ar={},Fe={},et={},ir={},lr={},cr={},ss;function Un(){return ss||(ss=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(u){if(super(),!e.IDENTIFIER.test(u))throw new Error("CodeGen: name must be a valid identifier");this.str=u}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(u){super(),this._items=typeof u=="string"?[u]:u}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const u=this._items[0];return u===""||u==='""'}get str(){var u;return(u=this._str)!==null&&u!==void 0?u:this._str=this._items.reduce((p,b)=>`${p}${b}`,"")}get names(){var u;return(u=this._names)!==null&&u!==void 0?u:this._names=this._items.reduce((p,b)=>(b instanceof n&&(p[b.str]=(p[b.str]||0)+1),p),{})}}e._Code=r,e.nil=new r("");function o(m,...u){const p=[m[0]];let b=0;for(;b<u.length;)a(p,u[b]),p.push(m[++b]);return new r(p)}e._=o;const s=new r("+");function i(m,...u){const p=[v(m[0])];let b=0;for(;b<u.length;)p.push(s),a(p,u[b]),p.push(s,v(m[++b]));return l(p),new r(p)}e.str=i;function a(m,u){u instanceof r?m.push(...u._items):u instanceof n?m.push(u):m.push(h(u))}e.addCodeArg=a;function l(m){let u=1;for(;u<m.length-1;){if(m[u]===s){const p=d(m[u-1],m[u+1]);if(p!==void 0){m.splice(u-1,3,p);continue}m[u++]="+"}u++}}function d(m,u){if(u==='""')return m;if(m==='""')return u;if(typeof m=="string")return u instanceof n||m[m.length-1]!=='"'?void 0:typeof u!="string"?`${m.slice(0,-1)}${u}"`:u[0]==='"'?m.slice(0,-1)+u.slice(1):void 0;if(typeof u=="string"&&u[0]==='"'&&!(m instanceof n))return`"${m}${u.slice(1)}`}function c(m,u){return u.emptyStr()?m:m.emptyStr()?u:i`${m}${u}`}e.strConcat=c;function h(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:v(Array.isArray(m)?m.join(","):m)}function g(m){return new r(v(m))}e.stringify=g;function v(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=v;function w(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new r(`.${m}`):o`[${m}]`}e.getProperty=w;function y(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new r(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=y;function f(m){return new r(m.toString())}e.regexpCode=f}(cr)),cr}var ur={},os;function as(){return os||(os=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Un();class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:d,parent:c}={}){this._names={},this._prefixes=d,this._parent=c}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const c=this._names[d]||this._nameGroup(d);return`${d}${c.index++}`}_nameGroup(d){var c,h;if(!((h=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||h===void 0)&&h.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=o;class s extends t.Name{constructor(d,c){super(c),this.prefix=d}setValue(d,{property:c,itemIndex:h}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(c)}[${h}]`}}e.ValueScopeName=s;const i=(0,t._)`\n`;class a extends o{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?i:t.nil}}get(){return this._scope}name(d){return new s(d,this._newName(d))}value(d,c){var h;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(d),{prefix:v}=g,w=(h=c.key)!==null&&h!==void 0?h:c.ref;let y=this._values[v];if(y){const u=y.get(w);if(u)return u}else y=this._values[v]=new Map;y.set(w,g);const f=this._scope[v]||(this._scope[v]=[]),m=f.length;return f[m]=c.ref,g.setValue(c,{property:v,itemIndex:m}),g}getValue(d,c){const h=this._values[d];if(h)return h.get(c)}scopeRefs(d,c=this._values){return this._reduceValues(c,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,t._)`${d}${h.scopePath}`})}scopeCode(d=this._values,c,h){return this._reduceValues(d,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},c,h)}_reduceValues(d,c,h={},g){let v=t.nil;for(const w in d){const y=d[w];if(!y)continue;const f=h[w]=h[w]||new Map;y.forEach(m=>{if(f.has(m))return;f.set(m,r.Started);let u=c(m);if(u){const p=this.opts.es5?e.varKinds.var:e.varKinds.const;v=(0,t._)`${v}${p} ${m} = ${u};${this.opts._n}`}else if(u=g?.(m))v=(0,t._)`${v}${u}${this.opts._n}`;else throw new n(m);f.set(m,r.Completed)})}return v}}e.ValueScope=a}(ur)),ur}var is;function se(){return is||(is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Un(),n=as();var r=Un();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=as();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,E){return this}}class i extends s{constructor(S,E,x){super(),this.varKind=S,this.name=E,this.rhs=x}render({es5:S,_n:E}){const x=S?n.varKinds.var:this.varKind,G=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${G};`+E}optimizeNames(S,E){if(S[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,S,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(S,E,x){super(),this.lhs=S,this.rhs=E,this.sideEffects=x}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,E){if(!(this.lhs instanceof t.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,S,E),this}get names(){const S=this.lhs instanceof t.Name?{}:{...this.lhs.names};return K(S,this.rhs)}}class l extends a{constructor(S,E,x,G){super(S,x,G),this.op=E}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class d extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class c extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class h extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class g extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,E){return this.code=U(this.code,S,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class v extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((E,x)=>E+x.render(S),"")}optimizeNodes(){const{nodes:S}=this;let E=S.length;for(;E--;){const x=S[E].optimizeNodes();Array.isArray(x)?S.splice(E,1,...x):x?S[E]=x:S.splice(E,1)}return S.length>0?this:void 0}optimizeNames(S,E){const{nodes:x}=this;let G=x.length;for(;G--;){const Q=x[G];Q.optimizeNames(S,E)||(H(S,Q.names),x.splice(G,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((S,E)=>T(S,E.names),{})}}class w extends v{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class y extends v{}class f extends w{}f.kind="else";class m extends w{constructor(S,E){super(E),this.condition=S}render(S){let E=`if(${this.condition})`+super.render(S);return this.else&&(E+="else "+this.else.render(S)),E}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let E=this.else;if(E){const x=E.optimizeNodes();E=this.else=Array.isArray(x)?new f(x):x}if(E)return S===!1?E instanceof m?E:E.nodes:this.nodes.length?this:new m(te(S),E instanceof m?[E]:E.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,E){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(S,E),!!(super.optimizeNames(S,E)||this.else))return this.condition=U(this.condition,S,E),this}get names(){const S=super.names;return K(S,this.condition),this.else&&T(S,this.else.names),S}}m.kind="if";class u extends w{}u.kind="for";class p extends u{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iteration=U(this.iteration,S,E),this}get names(){return T(super.names,this.iteration.names)}}class b extends u{constructor(S,E,x,G){super(),this.varKind=S,this.name=E,this.from=x,this.to=G}render(S){const E=S.es5?n.varKinds.var:this.varKind,{name:x,from:G,to:Q}=this;return`for(${E} ${x}=${G}; ${x}<${Q}; ${x}++)`+super.render(S)}get names(){const S=K(super.names,this.from);return K(S,this.to)}}class $ extends u{constructor(S,E,x,G){super(),this.loop=S,this.varKind=E,this.name=x,this.iterable=G}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iterable=U(this.iterable,S,E),this}get names(){return T(super.names,this.iterable.names)}}class _ extends w{constructor(S,E,x){super(),this.name=S,this.args=E,this.async=x}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}_.kind="func";class C extends v{render(S){return"return "+super.render(S)}}C.kind="return";class P extends w{render(S){let E="try"+super.render(S);return this.catch&&(E+=this.catch.render(S)),this.finally&&(E+=this.finally.render(S)),E}optimizeNodes(){var S,E;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(S,E){var x,G;return super.optimizeNames(S,E),(x=this.catch)===null||x===void 0||x.optimizeNames(S,E),(G=this.finally)===null||G===void 0||G.optimizeNames(S,E),this}get names(){const S=super.names;return this.catch&&T(S,this.catch.names),this.finally&&T(S,this.finally.names),S}}class A extends w{constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}A.kind="catch";class D extends w{render(S){return"finally"+super.render(S)}}D.kind="finally";class k{constructor(S,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=S,this._scope=new n.Scope({parent:S}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,E){const x=this._extScope.value(S,E);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(S,E){return this._extScope.getValue(S,E)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,E,x,G){const Q=this._scope.toName(E);return x!==void 0&&G&&(this._constants[Q.str]=x),this._leafNode(new i(S,Q,x)),Q}const(S,E,x){return this._def(n.varKinds.const,S,E,x)}let(S,E,x){return this._def(n.varKinds.let,S,E,x)}var(S,E,x){return this._def(n.varKinds.var,S,E,x)}assign(S,E,x){return this._leafNode(new a(S,E,x))}add(S,E){return this._leafNode(new l(S,e.operators.ADD,E))}code(S){return typeof S=="function"?S():S!==t.nil&&this._leafNode(new g(S)),this}object(...S){const E=["{"];for(const[x,G]of S)E.length>1&&E.push(","),E.push(x),(x!==G||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,G));return E.push("}"),new t._Code(E)}if(S,E,x){if(this._blockNode(new m(S)),E&&x)this.code(E).else().code(x).endIf();else if(E)this.code(E).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new m(S))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(m,f)}_for(S,E){return this._blockNode(S),E&&this.code(E).endFor(),this}for(S,E){return this._for(new p(S),E)}forRange(S,E,x,G,Q=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(S);return this._for(new b(Q,de,E,x),()=>G(de))}forOf(S,E,x,G=n.varKinds.const){const Q=this._scope.toName(S);if(this.opts.es5){const de=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${de}.length`,ae=>{this.var(Q,(0,t._)`${de}[${ae}]`),x(Q)})}return this._for(new $("of",G,Q,E),()=>x(Q))}forIn(S,E,x,G=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,t._)`Object.keys(${E})`,x);const Q=this._scope.toName(S);return this._for(new $("in",G,Q,E),()=>x(Q))}endFor(){return this._endBlockNode(u)}label(S){return this._leafNode(new d(S))}break(S){return this._leafNode(new c(S))}return(S){const E=new C;if(this._blockNode(E),this.code(S),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,E,x){if(!E&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const G=new P;if(this._blockNode(G),this.code(S),E){const Q=this.name("e");this._currNode=G.catch=new A(Q),E(Q)}return x&&(this._currNode=G.finally=new D,this.code(x)),this._endBlockNode(A,D)}throw(S){return this._leafNode(new h(S))}block(S,E){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(E),this}endBlock(S){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-E;if(x<0||S!==void 0&&x!==S)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${S} expected`);return this._nodes.length=E,this}func(S,E=t.nil,x,G){return this._blockNode(new _(S,E,x)),G&&this.code(G).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,E){const x=this._currNode;if(x instanceof S||E&&x instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${S.kind}/${E.kind}`:S.kind}"`)}_elseNode(S){const E=this._currNode;if(!(E instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const E=this._nodes;E[E.length-1]=S}}e.CodeGen=k;function T(I,S){for(const E in S)I[E]=(I[E]||0)+(S[E]||0);return I}function K(I,S){return S instanceof t._CodeOrName?T(I,S.names):I}function U(I,S,E){if(I instanceof t.Name)return x(I);if(!G(I))return I;return new t._Code(I._items.reduce((Q,de)=>(de instanceof t.Name&&(de=x(de)),de instanceof t._Code?Q.push(...de._items):Q.push(de),Q),[]));function x(Q){const de=E[Q.str];return de===void 0||S[Q.str]!==1?Q:(delete S[Q.str],de)}function G(Q){return Q instanceof t._Code&&Q._items.some(de=>de instanceof t.Name&&S[de.str]===1&&E[de.str]!==void 0)}}function H(I,S){for(const E in S)I[E]=(I[E]||0)-(S[E]||0)}function te(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:(0,t._)`!${q(I)}`}e.not=te;const me=R(e.operators.AND);function ne(...I){return I.reduce(me)}e.and=ne;const le=R(e.operators.OR);function F(...I){return I.reduce(le)}e.or=F;function R(I){return(S,E)=>S===t.nil?E:E===t.nil?S:(0,t._)`${q(S)} ${I} ${q(E)}`}function q(I){return I instanceof t.Name?I:(0,t._)`(${I})`}}(lr)),lr}var ee={},ls;function ue(){if(ls)return ee;ls=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.checkStrictMode=ee.getErrorPath=ee.Type=ee.useFunc=ee.setEvaluated=ee.evaluatedPropsToName=ee.mergeEvaluated=ee.eachItem=ee.unescapeJsonPointer=ee.escapeJsonPointer=ee.escapeFragment=ee.unescapeFragment=ee.schemaRefOrVal=ee.schemaHasRulesButRef=ee.schemaHasRules=ee.checkUnknownRules=ee.alwaysValidSchema=ee.toHash=void 0;const e=se(),t=Un();function n($){const _={};for(const C of $)_[C]=!0;return _}ee.toHash=n;function r($,_){return typeof _=="boolean"?_:Object.keys(_).length===0?!0:(o($,_),!s(_,$.self.RULES.all))}ee.alwaysValidSchema=r;function o($,_=$.schema){const{opts:C,self:P}=$;if(!C.strictSchema||typeof _=="boolean")return;const A=P.RULES.keywords;for(const D in _)A[D]||b($,`unknown keyword: "${D}"`)}ee.checkUnknownRules=o;function s($,_){if(typeof $=="boolean")return!$;for(const C in $)if(_[C])return!0;return!1}ee.schemaHasRules=s;function i($,_){if(typeof $=="boolean")return!$;for(const C in $)if(C!=="$ref"&&_.all[C])return!0;return!1}ee.schemaHasRulesButRef=i;function a({topSchemaRef:$,schemaPath:_},C,P,A){if(!A){if(typeof C=="number"||typeof C=="boolean")return C;if(typeof C=="string")return(0,e._)`${C}`}return(0,e._)`${$}${_}${(0,e.getProperty)(P)}`}ee.schemaRefOrVal=a;function l($){return h(decodeURIComponent($))}ee.unescapeFragment=l;function d($){return encodeURIComponent(c($))}ee.escapeFragment=d;function c($){return typeof $=="number"?`${$}`:$.replace(/~/g,"~0").replace(/\//g,"~1")}ee.escapeJsonPointer=c;function h($){return $.replace(/~1/g,"/").replace(/~0/g,"~")}ee.unescapeJsonPointer=h;function g($,_){if(Array.isArray($))for(const C of $)_(C);else _($)}ee.eachItem=g;function v({mergeNames:$,mergeToName:_,mergeValues:C,resultToName:P}){return(A,D,k,T)=>{const K=k===void 0?D:k instanceof e.Name?(D instanceof e.Name?$(A,D,k):_(A,D,k),k):D instanceof e.Name?(_(A,k,D),D):C(D,k);return T===e.Name&&!(K instanceof e.Name)?P(A,K):K}}ee.mergeEvaluated={props:v({mergeNames:($,_,C)=>$.if((0,e._)`${C} !== true && ${_} !== undefined`,()=>{$.if((0,e._)`${_} === true`,()=>$.assign(C,!0),()=>$.assign(C,(0,e._)`${C} || {}`).code((0,e._)`Object.assign(${C}, ${_})`))}),mergeToName:($,_,C)=>$.if((0,e._)`${C} !== true`,()=>{_===!0?$.assign(C,!0):($.assign(C,(0,e._)`${C} || {}`),y($,C,_))}),mergeValues:($,_)=>$===!0?!0:{...$,..._},resultToName:w}),items:v({mergeNames:($,_,C)=>$.if((0,e._)`${C} !== true && ${_} !== undefined`,()=>$.assign(C,(0,e._)`${_} === true ? true : ${C} > ${_} ? ${C} : ${_}`)),mergeToName:($,_,C)=>$.if((0,e._)`${C} !== true`,()=>$.assign(C,_===!0?!0:(0,e._)`${C} > ${_} ? ${C} : ${_}`)),mergeValues:($,_)=>$===!0?!0:Math.max($,_),resultToName:($,_)=>$.var("items",_)})};function w($,_){if(_===!0)return $.var("props",!0);const C=$.var("props",(0,e._)`{}`);return _!==void 0&&y($,C,_),C}ee.evaluatedPropsToName=w;function y($,_,C){Object.keys(C).forEach(P=>$.assign((0,e._)`${_}${(0,e.getProperty)(P)}`,!0))}ee.setEvaluated=y;const f={};function m($,_){return $.scopeValue("func",{ref:_,code:f[_.code]||(f[_.code]=new t._Code(_.code))})}ee.useFunc=m;var u;(function($){$[$.Num=0]="Num",$[$.Str=1]="Str"})(u||(ee.Type=u={}));function p($,_,C){if($ instanceof e.Name){const P=_===u.Num;return C?P?(0,e._)`"[" + ${$} + "]"`:(0,e._)`"['" + ${$} + "']"`:P?(0,e._)`"/" + ${$}`:(0,e._)`"/" + ${$}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return C?(0,e.getProperty)($).toString():"/"+c($)}ee.getErrorPath=p;function b($,_,C=$.opts.strictSchema){if(C){if(_=`strict mode: ${_}`,C===!0)throw new Error(_);$.self.logger.warn(_)}}return ee.checkStrictMode=b,ee}var zt={},cs;function Xe(){if(cs)return zt;cs=1,Object.defineProperty(zt,"__esModule",{value:!0});const e=se(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return zt.default=t,zt}var us;function Gn(){return us||(us=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=se(),n=ue(),r=Xe();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:m})=>m?(0,t.str)`"${f}" keyword must be ${m} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function o(f,m=e.keywordError,u,p){const{it:b}=f,{gen:$,compositeRule:_,allErrors:C}=b,P=h(f,m,u);p??(_||C)?l($,P):d(b,(0,t._)`[${P}]`)}e.reportError=o;function s(f,m=e.keywordError,u){const{it:p}=f,{gen:b,compositeRule:$,allErrors:_}=p,C=h(f,m,u);l(b,C),$||_||d(p,r.default.vErrors)}e.reportExtraError=s;function i(f,m){f.assign(r.default.errors,m),f.if((0,t._)`${r.default.vErrors} !== null`,()=>f.if(m,()=>f.assign((0,t._)`${r.default.vErrors}.length`,m),()=>f.assign(r.default.vErrors,null)))}e.resetErrorsCount=i;function a({gen:f,keyword:m,schemaValue:u,data:p,errsCount:b,it:$}){if(b===void 0)throw new Error("ajv implementation error");const _=f.name("err");f.forRange("i",b,r.default.errors,C=>{f.const(_,(0,t._)`${r.default.vErrors}[${C}]`),f.if((0,t._)`${_}.instancePath === undefined`,()=>f.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(r.default.instancePath,$.errorPath))),f.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${$.errSchemaPath}/${m}`),$.opts.verbose&&(f.assign((0,t._)`${_}.schema`,u),f.assign((0,t._)`${_}.data`,p))})}e.extendErrors=a;function l(f,m){const u=f.const("err",m);f.if((0,t._)`${r.default.vErrors} === null`,()=>f.assign(r.default.vErrors,(0,t._)`[${u}]`),(0,t._)`${r.default.vErrors}.push(${u})`),f.code((0,t._)`${r.default.errors}++`)}function d(f,m){const{gen:u,validateName:p,schemaEnv:b}=f;b.$async?u.throw((0,t._)`new ${f.ValidationError}(${m})`):(u.assign((0,t._)`${p}.errors`,m),u.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function h(f,m,u){const{createErrors:p}=f.it;return p===!1?(0,t._)`{}`:g(f,m,u)}function g(f,m,u={}){const{gen:p,it:b}=f,$=[v(b,u),w(f,u)];return y(f,m,$),p.object(...$)}function v({errorPath:f},{instancePath:m}){const u=m?(0,t.str)`${f}${(0,n.getErrorPath)(m,n.Type.Str)}`:f;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,u)]}function w({keyword:f,it:{errSchemaPath:m}},{schemaPath:u,parentSchema:p}){let b=p?m:(0,t.str)`${m}/${f}`;return u&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(u,n.Type.Str)}`),[c.schemaPath,b]}function y(f,{params:m,message:u},p){const{keyword:b,data:$,schemaValue:_,it:C}=f,{opts:P,propertyName:A,topSchemaRef:D,schemaPath:k}=C;p.push([c.keyword,b],[c.params,typeof m=="function"?m(f):m||(0,t._)`{}`]),P.messages&&p.push([c.message,typeof u=="function"?u(f):u]),P.verbose&&p.push([c.schema,_],[c.parentSchema,(0,t._)`${D}${k}`],[r.default.data,$]),A&&p.push([c.propertyName,A])}}(ir)),ir}var ds;function Ei(){if(ds)return et;ds=1,Object.defineProperty(et,"__esModule",{value:!0}),et.boolOrEmptySchema=et.topBoolOrEmptySchema=void 0;const e=Gn(),t=se(),n=Xe(),r={message:"boolean schema is false"};function o(a){const{gen:l,schema:d,validateName:c}=a;d===!1?i(a,!1):typeof d=="object"&&d.$async===!0?l.return(n.default.data):(l.assign((0,t._)`${c}.errors`,null),l.return(!0))}et.topBoolOrEmptySchema=o;function s(a,l){const{gen:d,schema:c}=a;c===!1?(d.var(l,!1),i(a)):d.var(l,!0)}et.boolOrEmptySchema=s;function i(a,l){const{gen:d,data:c}=a,h={gen:d,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(h,r,void 0,l)}return et}var we={},tt={},fs;function Bo(){if(fs)return tt;fs=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.getRules=tt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(o){return typeof o=="string"&&t.has(o)}tt.isJSONType=n;function r(){const o={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...o,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},o.number,o.string,o.array,o.object],post:{rules:[]},all:{},keywords:{}}}return tt.getRules=r,tt}var Ue={},hs;function Go(){if(hs)return Ue;hs=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.shouldUseRule=Ue.shouldUseGroup=Ue.schemaHasRulesForType=void 0;function e({schema:r,self:o},s){const i=o.RULES.types[s];return i&&i!==!0&&t(r,i)}Ue.schemaHasRulesForType=e;function t(r,o){return o.rules.some(s=>n(r,s))}Ue.shouldUseGroup=t;function n(r,o){var s;return r[o.keyword]!==void 0||((s=o.definition.implements)===null||s===void 0?void 0:s.some(i=>r[i]!==void 0))}return Ue.shouldUseRule=n,Ue}var ms;function Kn(){if(ms)return we;ms=1,Object.defineProperty(we,"__esModule",{value:!0}),we.reportTypeError=we.checkDataTypes=we.checkDataType=we.coerceAndCheckDataType=we.getJSONTypes=we.getSchemaTypes=we.DataType=void 0;const e=Bo(),t=Go(),n=Gn(),r=se(),o=ue();var s;(function(u){u[u.Correct=0]="Correct",u[u.Wrong=1]="Wrong"})(s||(we.DataType=s={}));function i(u){const p=a(u.type);if(p.includes("null")){if(u.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!p.length&&u.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');u.nullable===!0&&p.push("null")}return p}we.getSchemaTypes=i;function a(u){const p=Array.isArray(u)?u:u?[u]:[];if(p.every(e.isJSONType))return p;throw new Error("type must be JSONType or JSONType[]: "+p.join(","))}we.getJSONTypes=a;function l(u,p){const{gen:b,data:$,opts:_}=u,C=c(p,_.coerceTypes),P=p.length>0&&!(C.length===0&&p.length===1&&(0,t.schemaHasRulesForType)(u,p[0]));if(P){const A=w(p,$,_.strictNumbers,s.Wrong);b.if(A,()=>{C.length?h(u,p,C):f(u)})}return P}we.coerceAndCheckDataType=l;const d=new Set(["string","number","integer","boolean","null"]);function c(u,p){return p?u.filter(b=>d.has(b)||p==="array"&&b==="array"):[]}function h(u,p,b){const{gen:$,data:_,opts:C}=u,P=$.let("dataType",(0,r._)`typeof ${_}`),A=$.let("coerced",(0,r._)`undefined`);C.coerceTypes==="array"&&$.if((0,r._)`${P} == 'object' && Array.isArray(${_}) && ${_}.length == 1`,()=>$.assign(_,(0,r._)`${_}[0]`).assign(P,(0,r._)`typeof ${_}`).if(w(p,_,C.strictNumbers),()=>$.assign(A,_))),$.if((0,r._)`${A} !== undefined`);for(const k of b)(d.has(k)||k==="array"&&C.coerceTypes==="array")&&D(k);$.else(),f(u),$.endIf(),$.if((0,r._)`${A} !== undefined`,()=>{$.assign(_,A),g(u,A)});function D(k){switch(k){case"string":$.elseIf((0,r._)`${P} == "number" || ${P} == "boolean"`).assign(A,(0,r._)`"" + ${_}`).elseIf((0,r._)`${_} === null`).assign(A,(0,r._)`""`);return;case"number":$.elseIf((0,r._)`${P} == "boolean" || ${_} === null
              || (${P} == "string" && ${_} && ${_} == +${_})`).assign(A,(0,r._)`+${_}`);return;case"integer":$.elseIf((0,r._)`${P} === "boolean" || ${_} === null
              || (${P} === "string" && ${_} && ${_} == +${_} && !(${_} % 1))`).assign(A,(0,r._)`+${_}`);return;case"boolean":$.elseIf((0,r._)`${_} === "false" || ${_} === 0 || ${_} === null`).assign(A,!1).elseIf((0,r._)`${_} === "true" || ${_} === 1`).assign(A,!0);return;case"null":$.elseIf((0,r._)`${_} === "" || ${_} === 0 || ${_} === false`),$.assign(A,null);return;case"array":$.elseIf((0,r._)`${P} === "string" || ${P} === "number"
              || ${P} === "boolean" || ${_} === null`).assign(A,(0,r._)`[${_}]`)}}}function g({gen:u,parentData:p,parentDataProperty:b},$){u.if((0,r._)`${p} !== undefined`,()=>u.assign((0,r._)`${p}[${b}]`,$))}function v(u,p,b,$=s.Correct){const _=$===s.Correct?r.operators.EQ:r.operators.NEQ;let C;switch(u){case"null":return(0,r._)`${p} ${_} null`;case"array":C=(0,r._)`Array.isArray(${p})`;break;case"object":C=(0,r._)`${p} && typeof ${p} == "object" && !Array.isArray(${p})`;break;case"integer":C=P((0,r._)`!(${p} % 1) && !isNaN(${p})`);break;case"number":C=P();break;default:return(0,r._)`typeof ${p} ${_} ${u}`}return $===s.Correct?C:(0,r.not)(C);function P(A=r.nil){return(0,r.and)((0,r._)`typeof ${p} == "number"`,A,b?(0,r._)`isFinite(${p})`:r.nil)}}we.checkDataType=v;function w(u,p,b,$){if(u.length===1)return v(u[0],p,b,$);let _;const C=(0,o.toHash)(u);if(C.array&&C.object){const P=(0,r._)`typeof ${p} != "object"`;_=C.null?P:(0,r._)`!${p} || ${P}`,delete C.null,delete C.array,delete C.object}else _=r.nil;C.number&&delete C.integer;for(const P in C)_=(0,r.and)(_,v(P,p,b,$));return _}we.checkDataTypes=w;const y={message:({schema:u})=>`must be ${u}`,params:({schema:u,schemaValue:p})=>typeof u=="string"?(0,r._)`{type: ${u}}`:(0,r._)`{type: ${p}}`};function f(u){const p=m(u);(0,n.reportError)(p,y)}we.reportTypeError=f;function m(u){const{gen:p,data:b,schema:$}=u,_=(0,o.schemaRefOrVal)(u,$,"type");return{gen:p,keyword:"type",data:b,schema:$.type,schemaCode:_,schemaValue:_,parentSchema:$,params:{},it:u}}return we}var _t={},gs;function Pi(){if(gs)return _t;gs=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.assignDefaults=void 0;const e=se(),t=ue();function n(o,s){const{properties:i,items:a}=o.schema;if(s==="object"&&i)for(const l in i)r(o,l,i[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,d)=>r(o,d,l.default))}_t.assignDefaults=n;function r(o,s,i){const{gen:a,compositeRule:l,data:d,opts:c}=o;if(i===void 0)return;const h=(0,e._)`${d}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(o,`default is ignored for: ${h}`);return}let g=(0,e._)`${h} === undefined`;c.useDefaults==="empty"&&(g=(0,e._)`${g} || ${h} === null || ${h} === ""`),a.if(g,(0,e._)`${h} = ${(0,e.stringify)(i)}`)}return _t}var Te={},fe={},ps;function xe(){if(ps)return fe;ps=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.validateUnion=fe.validateArray=fe.usePattern=fe.callValidateCode=fe.schemaProperties=fe.allSchemaProperties=fe.noPropertyInData=fe.propertyInData=fe.isOwnProperty=fe.hasPropFunc=fe.reportMissingProp=fe.checkMissingProp=fe.checkReportMissingProp=void 0;const e=se(),t=ue(),n=Xe(),r=ue();function o(u,p){const{gen:b,data:$,it:_}=u;b.if(c(b,$,p,_.opts.ownProperties),()=>{u.setParams({missingProperty:(0,e._)`${p}`},!0),u.error()})}fe.checkReportMissingProp=o;function s({gen:u,data:p,it:{opts:b}},$,_){return(0,e.or)(...$.map(C=>(0,e.and)(c(u,p,C,b.ownProperties),(0,e._)`${_} = ${C}`)))}fe.checkMissingProp=s;function i(u,p){u.setParams({missingProperty:p},!0),u.error()}fe.reportMissingProp=i;function a(u){return u.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}fe.hasPropFunc=a;function l(u,p,b){return(0,e._)`${a(u)}.call(${p}, ${b})`}fe.isOwnProperty=l;function d(u,p,b,$){const _=(0,e._)`${p}${(0,e.getProperty)(b)} !== undefined`;return $?(0,e._)`${_} && ${l(u,p,b)}`:_}fe.propertyInData=d;function c(u,p,b,$){const _=(0,e._)`${p}${(0,e.getProperty)(b)} === undefined`;return $?(0,e.or)(_,(0,e.not)(l(u,p,b))):_}fe.noPropertyInData=c;function h(u){return u?Object.keys(u).filter(p=>p!=="__proto__"):[]}fe.allSchemaProperties=h;function g(u,p){return h(p).filter(b=>!(0,t.alwaysValidSchema)(u,p[b]))}fe.schemaProperties=g;function v({schemaCode:u,data:p,it:{gen:b,topSchemaRef:$,schemaPath:_,errorPath:C},it:P},A,D,k){const T=k?(0,e._)`${u}, ${p}, ${$}${_}`:p,K=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,C)],[n.default.parentData,P.parentData],[n.default.parentDataProperty,P.parentDataProperty],[n.default.rootData,n.default.rootData]];P.opts.dynamicRef&&K.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const U=(0,e._)`${T}, ${b.object(...K)}`;return D!==e.nil?(0,e._)`${A}.call(${D}, ${U})`:(0,e._)`${A}(${U})`}fe.callValidateCode=v;const w=(0,e._)`new RegExp`;function y({gen:u,it:{opts:p}},b){const $=p.unicodeRegExp?"u":"",{regExp:_}=p.code,C=_(b,$);return u.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,e._)`${_.code==="new RegExp"?w:(0,r.useFunc)(u,_)}(${b}, ${$})`})}fe.usePattern=y;function f(u){const{gen:p,data:b,keyword:$,it:_}=u,C=p.name("valid");if(_.allErrors){const A=p.let("valid",!0);return P(()=>p.assign(A,!1)),A}return p.var(C,!0),P(()=>p.break()),C;function P(A){const D=p.const("len",(0,e._)`${b}.length`);p.forRange("i",0,D,k=>{u.subschema({keyword:$,dataProp:k,dataPropType:t.Type.Num},C),p.if((0,e.not)(C),A)})}}fe.validateArray=f;function m(u){const{gen:p,schema:b,keyword:$,it:_}=u;if(!Array.isArray(b))throw new Error("ajv implementation error");if(b.some(D=>(0,t.alwaysValidSchema)(_,D))&&!_.opts.unevaluated)return;const P=p.let("valid",!1),A=p.name("_valid");p.block(()=>b.forEach((D,k)=>{const T=u.subschema({keyword:$,schemaProp:k,compositeRule:!0},A);p.assign(P,(0,e._)`${P} || ${A}`),u.mergeValidEvaluated(T,A)||p.if((0,e.not)(P))})),u.result(P,()=>u.reset(),()=>u.error(!0))}return fe.validateUnion=m,fe}var ys;function ki(){if(ys)return Te;ys=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.validateKeywordUsage=Te.validSchemaType=Te.funcKeywordCode=Te.macroKeywordCode=void 0;const e=se(),t=Xe(),n=xe(),r=Gn();function o(g,v){const{gen:w,keyword:y,schema:f,parentSchema:m,it:u}=g,p=v.macro.call(u.self,f,m,u),b=d(w,y,p);u.opts.validateSchema!==!1&&u.self.validateSchema(p,!0);const $=w.name("valid");g.subschema({schema:p,schemaPath:e.nil,errSchemaPath:`${u.errSchemaPath}/${y}`,topSchemaRef:b,compositeRule:!0},$),g.pass($,()=>g.error(!0))}Te.macroKeywordCode=o;function s(g,v){var w;const{gen:y,keyword:f,schema:m,parentSchema:u,$data:p,it:b}=g;l(b,v);const $=!p&&v.compile?v.compile.call(b.self,m,u,b):v.validate,_=d(y,f,$),C=y.let("valid");g.block$data(C,P),g.ok((w=v.valid)!==null&&w!==void 0?w:C);function P(){if(v.errors===!1)k(),v.modifying&&i(g),T(()=>g.error());else{const K=v.async?A():D();v.modifying&&i(g),T(()=>a(g,K))}}function A(){const K=y.let("ruleErrs",null);return y.try(()=>k((0,e._)`await `),U=>y.assign(C,!1).if((0,e._)`${U} instanceof ${b.ValidationError}`,()=>y.assign(K,(0,e._)`${U}.errors`),()=>y.throw(U))),K}function D(){const K=(0,e._)`${_}.errors`;return y.assign(K,null),k(e.nil),K}function k(K=v.async?(0,e._)`await `:e.nil){const U=b.opts.passContext?t.default.this:t.default.self,H=!("compile"in v&&!p||v.schema===!1);y.assign(C,(0,e._)`${K}${(0,n.callValidateCode)(g,_,U,H)}`,v.modifying)}function T(K){var U;y.if((0,e.not)((U=v.valid)!==null&&U!==void 0?U:C),K)}}Te.funcKeywordCode=s;function i(g){const{gen:v,data:w,it:y}=g;v.if(y.parentData,()=>v.assign(w,(0,e._)`${y.parentData}[${y.parentDataProperty}]`))}function a(g,v){const{gen:w}=g;w.if((0,e._)`Array.isArray(${v})`,()=>{w.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${v} : ${t.default.vErrors}.concat(${v})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(g)},()=>g.error())}function l({schemaEnv:g},v){if(v.async&&!g.$async)throw new Error("async keyword in sync schema")}function d(g,v,w){if(w===void 0)throw new Error(`keyword "${v}" failed to compile`);return g.scopeValue("keyword",typeof w=="function"?{ref:w}:{ref:w,code:(0,e.stringify)(w)})}function c(g,v,w=!1){return!v.length||v.some(y=>y==="array"?Array.isArray(g):y==="object"?g&&typeof g=="object"&&!Array.isArray(g):typeof g==y||w&&typeof g>"u")}Te.validSchemaType=c;function h({schema:g,opts:v,self:w,errSchemaPath:y},f,m){if(Array.isArray(f.keyword)?!f.keyword.includes(m):f.keyword!==m)throw new Error("ajv implementation error");const u=f.dependencies;if(u?.some(p=>!Object.prototype.hasOwnProperty.call(g,p)))throw new Error(`parent schema must have dependencies of ${m}: ${u.join(",")}`);if(f.validateSchema&&!f.validateSchema(g[m])){const b=`keyword "${m}" value is invalid at path "${y}": `+w.errorsText(f.validateSchema.errors);if(v.validateSchema==="log")w.logger.error(b);else throw new Error(b)}}return Te.validateKeywordUsage=h,Te}var Ke={},vs;function Oi(){if(vs)return Ke;vs=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.extendSubschemaMode=Ke.extendSubschemaData=Ke.getSubschema=void 0;const e=se(),t=ue();function n(s,{keyword:i,schemaProp:a,schema:l,schemaPath:d,errSchemaPath:c,topSchemaRef:h}){if(i!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(i!==void 0){const g=s.schema[i];return a===void 0?{schema:g,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(i)}`,errSchemaPath:`${s.errSchemaPath}/${i}`}:{schema:g[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(i)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${i}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(d===void 0||c===void 0||h===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:d,topSchemaRef:h,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Ke.getSubschema=n;function r(s,i,{dataProp:a,dataPropType:l,data:d,dataTypes:c,propertyName:h}){if(d!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:g}=i;if(a!==void 0){const{errorPath:w,dataPathArr:y,opts:f}=i,m=g.let("data",(0,e._)`${i.data}${(0,e.getProperty)(a)}`,!0);v(m),s.errorPath=(0,e.str)`${w}${(0,t.getErrorPath)(a,l,f.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...y,s.parentDataProperty]}if(d!==void 0){const w=d instanceof e.Name?d:g.let("data",d,!0);v(w),h!==void 0&&(s.propertyName=h)}c&&(s.dataTypes=c);function v(w){s.data=w,s.dataLevel=i.dataLevel+1,s.dataTypes=[],i.definedProperties=new Set,s.parentData=i.data,s.dataNames=[...i.dataNames,w]}}Ke.extendSubschemaData=r;function o(s,{jtdDiscriminator:i,jtdMetadata:a,compositeRule:l,createErrors:d,allErrors:c}){l!==void 0&&(s.compositeRule=l),d!==void 0&&(s.createErrors=d),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=i,s.jtdMetadata=a}return Ke.extendSubschemaMode=o,Ke}var Ee={},dr,$s;function Jo(){return $s||($s=1,dr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),dr}var fr={exports:{}},bs;function Ri(){if(bs)return fr.exports;bs=1;var e=fr.exports=function(r,o,s){typeof o=="function"&&(s=o,o={}),s=o.cb||s;var i=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(o,i,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,o,s,i,a,l,d,c,h,g){if(i&&typeof i=="object"&&!Array.isArray(i)){o(i,a,l,d,c,h,g);for(var v in i){var w=i[v];if(Array.isArray(w)){if(v in e.arrayKeywords)for(var y=0;y<w.length;y++)t(r,o,s,w[y],a+"/"+v+"/"+y,l,a,v,i,y)}else if(v in e.propsKeywords){if(w&&typeof w=="object")for(var f in w)t(r,o,s,w[f],a+"/"+v+"/"+n(f),l,a,v,i,f)}else(v in e.keywords||r.allKeys&&!(v in e.skipKeywords))&&t(r,o,s,w,a+"/"+v,l,a,v,i)}s(i,a,l,d,c,h,g)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return fr.exports}var _s;function Jn(){if(_s)return Ee;_s=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getSchemaRefs=Ee.resolveUrl=Ee.normalizeId=Ee._getFullPath=Ee.getFullPath=Ee.inlineRef=void 0;const e=ue(),t=Jo(),n=Ri(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(y,f=!0){return typeof y=="boolean"?!0:f===!0?!i(y):f?a(y)<=f:!1}Ee.inlineRef=o;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function i(y){for(const f in y){if(s.has(f))return!0;const m=y[f];if(Array.isArray(m)&&m.some(i)||typeof m=="object"&&i(m))return!0}return!1}function a(y){let f=0;for(const m in y){if(m==="$ref")return 1/0;if(f++,!r.has(m)&&(typeof y[m]=="object"&&(0,e.eachItem)(y[m],u=>f+=a(u)),f===1/0))return 1/0}return f}function l(y,f="",m){m!==!1&&(f=h(f));const u=y.parse(f);return d(y,u)}Ee.getFullPath=l;function d(y,f){return y.serialize(f).split("#")[0]+"#"}Ee._getFullPath=d;const c=/#\/?$/;function h(y){return y?y.replace(c,""):""}Ee.normalizeId=h;function g(y,f,m){return m=h(m),y.resolve(f,m)}Ee.resolveUrl=g;const v=/^[a-z_][-a-z0-9._]*$/i;function w(y,f){if(typeof y=="boolean")return{};const{schemaId:m,uriResolver:u}=this.opts,p=h(y[m]||f),b={"":p},$=l(u,p,!1),_={},C=new Set;return n(y,{allKeys:!0},(D,k,T,K)=>{if(K===void 0)return;const U=$+k;let H=b[K];typeof D[m]=="string"&&(H=te.call(this,D[m])),me.call(this,D.$anchor),me.call(this,D.$dynamicAnchor),b[k]=H;function te(ne){const le=this.opts.uriResolver.resolve;if(ne=h(H?le(H,ne):ne),C.has(ne))throw A(ne);C.add(ne);let F=this.refs[ne];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?P(D,F.schema,ne):ne!==h(U)&&(ne[0]==="#"?(P(D,_[ne],ne),_[ne]=D):this.refs[ne]=U),ne}function me(ne){if(typeof ne=="string"){if(!v.test(ne))throw new Error(`invalid anchor "${ne}"`);te.call(this,`#${ne}`)}}}),_;function P(D,k,T){if(k!==void 0&&!t(D,k))throw A(T)}function A(D){return new Error(`reference "${D}" resolves to more than one schema`)}}return Ee.getSchemaRefs=w,Ee}var ws;function Qn(){if(ws)return Fe;ws=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getData=Fe.KeywordCxt=Fe.validateFunctionCode=void 0;const e=Ei(),t=Kn(),n=Go(),r=Kn(),o=Pi(),s=ki(),i=Oi(),a=se(),l=Xe(),d=Jn(),c=ue(),h=Gn();function g(O){if($(O)&&(C(O),b(O))){f(O);return}v(O,()=>(0,e.topBoolOrEmptySchema)(O))}Fe.validateFunctionCode=g;function v({gen:O,validateName:N,schema:M,schemaEnv:z,opts:J},re){J.code.es5?O.func(N,(0,a._)`${l.default.data}, ${l.default.valCxt}`,z.$async,()=>{O.code((0,a._)`"use strict"; ${u(M,J)}`),y(O,J),O.code(re)}):O.func(N,(0,a._)`${l.default.data}, ${w(J)}`,z.$async,()=>O.code(u(M,J)).code(re))}function w(O){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${O.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function y(O,N){O.if(l.default.valCxt,()=>{O.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),O.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),O.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),O.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),N.dynamicRef&&O.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{O.var(l.default.instancePath,(0,a._)`""`),O.var(l.default.parentData,(0,a._)`undefined`),O.var(l.default.parentDataProperty,(0,a._)`undefined`),O.var(l.default.rootData,l.default.data),N.dynamicRef&&O.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function f(O){const{schema:N,opts:M,gen:z}=O;v(O,()=>{M.$comment&&N.$comment&&K(O),D(O),z.let(l.default.vErrors,null),z.let(l.default.errors,0),M.unevaluated&&m(O),P(O),U(O)})}function m(O){const{gen:N,validateName:M}=O;O.evaluated=N.const("evaluated",(0,a._)`${M}.evaluated`),N.if((0,a._)`${O.evaluated}.dynamicProps`,()=>N.assign((0,a._)`${O.evaluated}.props`,(0,a._)`undefined`)),N.if((0,a._)`${O.evaluated}.dynamicItems`,()=>N.assign((0,a._)`${O.evaluated}.items`,(0,a._)`undefined`))}function u(O,N){const M=typeof O=="object"&&O[N.schemaId];return M&&(N.code.source||N.code.process)?(0,a._)`/*# sourceURL=${M} */`:a.nil}function p(O,N){if($(O)&&(C(O),b(O))){_(O,N);return}(0,e.boolOrEmptySchema)(O,N)}function b({schema:O,self:N}){if(typeof O=="boolean")return!O;for(const M in O)if(N.RULES.all[M])return!0;return!1}function $(O){return typeof O.schema!="boolean"}function _(O,N){const{schema:M,gen:z,opts:J}=O;J.$comment&&M.$comment&&K(O),k(O),T(O);const re=z.const("_errs",l.default.errors);P(O,re),z.var(N,(0,a._)`${re} === ${l.default.errors}`)}function C(O){(0,c.checkUnknownRules)(O),A(O)}function P(O,N){if(O.opts.jtd)return te(O,[],!1,N);const M=(0,t.getSchemaTypes)(O.schema),z=(0,t.coerceAndCheckDataType)(O,M);te(O,M,!z,N)}function A(O){const{schema:N,errSchemaPath:M,opts:z,self:J}=O;N.$ref&&z.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(N,J.RULES)&&J.logger.warn(`$ref: keywords ignored in schema at path "${M}"`)}function D(O){const{schema:N,opts:M}=O;N.default!==void 0&&M.useDefaults&&M.strictSchema&&(0,c.checkStrictMode)(O,"default is ignored in the schema root")}function k(O){const N=O.schema[O.opts.schemaId];N&&(O.baseId=(0,d.resolveUrl)(O.opts.uriResolver,O.baseId,N))}function T(O){if(O.schema.$async&&!O.schemaEnv.$async)throw new Error("async schema in sync schema")}function K({gen:O,schemaEnv:N,schema:M,errSchemaPath:z,opts:J}){const re=M.$comment;if(J.$comment===!0)O.code((0,a._)`${l.default.self}.logger.log(${re})`);else if(typeof J.$comment=="function"){const be=(0,a.str)`${z}/$comment`,je=O.scopeValue("root",{ref:N.root});O.code((0,a._)`${l.default.self}.opts.$comment(${re}, ${be}, ${je}.schema)`)}}function U(O){const{gen:N,schemaEnv:M,validateName:z,ValidationError:J,opts:re}=O;M.$async?N.if((0,a._)`${l.default.errors} === 0`,()=>N.return(l.default.data),()=>N.throw((0,a._)`new ${J}(${l.default.vErrors})`)):(N.assign((0,a._)`${z}.errors`,l.default.vErrors),re.unevaluated&&H(O),N.return((0,a._)`${l.default.errors} === 0`))}function H({gen:O,evaluated:N,props:M,items:z}){M instanceof a.Name&&O.assign((0,a._)`${N}.props`,M),z instanceof a.Name&&O.assign((0,a._)`${N}.items`,z)}function te(O,N,M,z){const{gen:J,schema:re,data:be,allErrors:je,opts:ke,self:Oe}=O,{RULES:_e}=Oe;if(re.$ref&&(ke.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(re,_e))){J.block(()=>G(O,"$ref",_e.all.$ref.definition));return}ke.jtd||ne(O,N),J.block(()=>{for(const Ie of _e.rules)it(Ie);it(_e.post)});function it(Ie){(0,n.shouldUseGroup)(re,Ie)&&(Ie.type?(J.if((0,r.checkDataType)(Ie.type,be,ke.strictNumbers)),me(O,Ie),N.length===1&&N[0]===Ie.type&&M&&(J.else(),(0,r.reportTypeError)(O)),J.endIf()):me(O,Ie),je||J.if((0,a._)`${l.default.errors} === ${z||0}`))}}function me(O,N){const{gen:M,schema:z,opts:{useDefaults:J}}=O;J&&(0,o.assignDefaults)(O,N.type),M.block(()=>{for(const re of N.rules)(0,n.shouldUseRule)(z,re)&&G(O,re.keyword,re.definition,N.type)})}function ne(O,N){O.schemaEnv.meta||!O.opts.strictTypes||(le(O,N),O.opts.allowUnionTypes||F(O,N),R(O,O.dataTypes))}function le(O,N){if(N.length){if(!O.dataTypes.length){O.dataTypes=N;return}N.forEach(M=>{I(O.dataTypes,M)||E(O,`type "${M}" not allowed by context "${O.dataTypes.join(",")}"`)}),S(O,N)}}function F(O,N){N.length>1&&!(N.length===2&&N.includes("null"))&&E(O,"use allowUnionTypes to allow union type keyword")}function R(O,N){const M=O.self.RULES.all;for(const z in M){const J=M[z];if(typeof J=="object"&&(0,n.shouldUseRule)(O.schema,J)){const{type:re}=J.definition;re.length&&!re.some(be=>q(N,be))&&E(O,`missing type "${re.join(",")}" for keyword "${z}"`)}}}function q(O,N){return O.includes(N)||N==="number"&&O.includes("integer")}function I(O,N){return O.includes(N)||N==="integer"&&O.includes("number")}function S(O,N){const M=[];for(const z of O.dataTypes)I(N,z)?M.push(z):N.includes("integer")&&z==="number"&&M.push("integer");O.dataTypes=M}function E(O,N){const M=O.schemaEnv.baseId+O.errSchemaPath;N+=` at "${M}" (strictTypes)`,(0,c.checkStrictMode)(O,N,O.opts.strictTypes)}class x{constructor(N,M,z){if((0,s.validateKeywordUsage)(N,M,z),this.gen=N.gen,this.allErrors=N.allErrors,this.keyword=z,this.data=N.data,this.schema=N.schema[z],this.$data=M.$data&&N.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(N,this.schema,z,this.$data),this.schemaType=M.schemaType,this.parentSchema=N.schema,this.params={},this.it=N,this.def=M,this.$data)this.schemaCode=N.gen.const("vSchema",ae(this.$data,N));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,M.schemaType,M.allowUndefined))throw new Error(`${z} value must be ${JSON.stringify(M.schemaType)}`);("code"in M?M.trackErrors:M.errors!==!1)&&(this.errsCount=N.gen.const("_errs",l.default.errors))}result(N,M,z){this.failResult((0,a.not)(N),M,z)}failResult(N,M,z){this.gen.if(N),z?z():this.error(),M?(this.gen.else(),M(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(N,M){this.failResult((0,a.not)(N),void 0,M)}fail(N){if(N===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(N),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(N){if(!this.$data)return this.fail(N);const{schemaCode:M}=this;this.fail((0,a._)`${M} !== undefined && (${(0,a.or)(this.invalid$data(),N)})`)}error(N,M,z){if(M){this.setParams(M),this._error(N,z),this.setParams({});return}this._error(N,z)}_error(N,M){(N?h.reportExtraError:h.reportError)(this,this.def.error,M)}$dataError(){(0,h.reportError)(this,this.def.$dataError||h.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,h.resetErrorsCount)(this.gen,this.errsCount)}ok(N){this.allErrors||this.gen.if(N)}setParams(N,M){M?Object.assign(this.params,N):this.params=N}block$data(N,M,z=a.nil){this.gen.block(()=>{this.check$data(N,z),M()})}check$data(N=a.nil,M=a.nil){if(!this.$data)return;const{gen:z,schemaCode:J,schemaType:re,def:be}=this;z.if((0,a.or)((0,a._)`${J} === undefined`,M)),N!==a.nil&&z.assign(N,!0),(re.length||be.validateSchema)&&(z.elseIf(this.invalid$data()),this.$dataError(),N!==a.nil&&z.assign(N,!1)),z.else()}invalid$data(){const{gen:N,schemaCode:M,schemaType:z,def:J,it:re}=this;return(0,a.or)(be(),je());function be(){if(z.length){if(!(M instanceof a.Name))throw new Error("ajv implementation error");const ke=Array.isArray(z)?z:[z];return(0,a._)`${(0,r.checkDataTypes)(ke,M,re.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function je(){if(J.validateSchema){const ke=N.scopeValue("validate$data",{ref:J.validateSchema});return(0,a._)`!${ke}(${M})`}return a.nil}}subschema(N,M){const z=(0,i.getSubschema)(this.it,N);(0,i.extendSubschemaData)(z,this.it,N),(0,i.extendSubschemaMode)(z,N);const J={...this.it,...z,items:void 0,props:void 0};return p(J,M),J}mergeEvaluated(N,M){const{it:z,gen:J}=this;z.opts.unevaluated&&(z.props!==!0&&N.props!==void 0&&(z.props=c.mergeEvaluated.props(J,N.props,z.props,M)),z.items!==!0&&N.items!==void 0&&(z.items=c.mergeEvaluated.items(J,N.items,z.items,M)))}mergeValidEvaluated(N,M){const{it:z,gen:J}=this;if(z.opts.unevaluated&&(z.props!==!0||z.items!==!0))return J.if(M,()=>this.mergeEvaluated(N,a.Name)),!0}}Fe.KeywordCxt=x;function G(O,N,M,z){const J=new x(O,M,N);"code"in M?M.code(J,z):J.$data&&M.validate?(0,s.funcKeywordCode)(J,M):"macro"in M?(0,s.macroKeywordCode)(J,M):(M.compile||M.validate)&&(0,s.funcKeywordCode)(J,M)}const Q=/^\/(?:[^~]|~0|~1)*$/,de=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ae(O,{dataLevel:N,dataNames:M,dataPathArr:z}){let J,re;if(O==="")return l.default.rootData;if(O[0]==="/"){if(!Q.test(O))throw new Error(`Invalid JSON-pointer: ${O}`);J=O,re=l.default.rootData}else{const Oe=de.exec(O);if(!Oe)throw new Error(`Invalid JSON-pointer: ${O}`);const _e=+Oe[1];if(J=Oe[2],J==="#"){if(_e>=N)throw new Error(ke("property/index",_e));return z[N-_e]}if(_e>N)throw new Error(ke("data",_e));if(re=M[N-_e],!J)return re}let be=re;const je=J.split("/");for(const Oe of je)Oe&&(re=(0,a._)`${re}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Oe))}`,be=(0,a._)`${be} && ${re}`);return be;function ke(Oe,_e){return`Cannot access ${Oe} ${_e} levels up, current level is ${N}`}}return Fe.getData=ae,Fe}var Ht={},Ss;function Ar(){if(Ss)return Ht;Ss=1,Object.defineProperty(Ht,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return Ht.default=e,Ht}var Wt={},Cs;function Xn(){if(Cs)return Wt;Cs=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=Jn();class t extends Error{constructor(r,o,s,i){super(i||`can't resolve reference ${s} from id ${o}`),this.missingRef=(0,e.resolveUrl)(r,o,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return Wt.default=t,Wt}var Ne={},Es;function jr(){if(Es)return Ne;Es=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.resolveSchema=Ne.getCompilingSchema=Ne.resolveRef=Ne.compileSchema=Ne.SchemaEnv=void 0;const e=se(),t=Ar(),n=Xe(),r=Jn(),o=ue(),s=Qn();class i{constructor(m){var u;this.refs={},this.dynamicAnchors={};let p;typeof m.schema=="object"&&(p=m.schema),this.schema=m.schema,this.schemaId=m.schemaId,this.root=m.root||this,this.baseId=(u=m.baseId)!==null&&u!==void 0?u:(0,r.normalizeId)(p?.[m.schemaId||"$id"]),this.schemaPath=m.schemaPath,this.localRefs=m.localRefs,this.meta=m.meta,this.$async=p?.$async,this.refs={}}}Ne.SchemaEnv=i;function a(f){const m=c.call(this,f);if(m)return m;const u=(0,r.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:p,lines:b}=this.opts.code,{ownProperties:$}=this.opts,_=new e.CodeGen(this.scope,{es5:p,lines:b,ownProperties:$});let C;f.$async&&(C=_.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const P=_.scopeName("validate");f.validateName=P;const A={gen:_,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:_.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,e.stringify)(f.schema)}:{ref:f.schema}),validateName:P,ValidationError:C,schema:f.schema,schemaEnv:f,rootId:u,baseId:f.baseId||u,schemaPath:e.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let D;try{this._compilations.add(f),(0,s.validateFunctionCode)(A),_.optimize(this.opts.code.optimize);const k=_.toString();D=`${_.scopeRefs(n.default.scope)}return ${k}`,this.opts.code.process&&(D=this.opts.code.process(D,f));const K=new Function(`${n.default.self}`,`${n.default.scope}`,D)(this,this.scope.get());if(this.scope.value(P,{ref:K}),K.errors=null,K.schema=f.schema,K.schemaEnv=f,f.$async&&(K.$async=!0),this.opts.code.source===!0&&(K.source={validateName:P,validateCode:k,scopeValues:_._values}),this.opts.unevaluated){const{props:U,items:H}=A;K.evaluated={props:U instanceof e.Name?void 0:U,items:H instanceof e.Name?void 0:H,dynamicProps:U instanceof e.Name,dynamicItems:H instanceof e.Name},K.source&&(K.source.evaluated=(0,e.stringify)(K.evaluated))}return f.validate=K,f}catch(k){throw delete f.validate,delete f.validateName,D&&this.logger.error("Error compiling schema, function code:",D),k}finally{this._compilations.delete(f)}}Ne.compileSchema=a;function l(f,m,u){var p;u=(0,r.resolveUrl)(this.opts.uriResolver,m,u);const b=f.refs[u];if(b)return b;let $=g.call(this,f,u);if($===void 0){const _=(p=f.localRefs)===null||p===void 0?void 0:p[u],{schemaId:C}=this.opts;_&&($=new i({schema:_,schemaId:C,root:f,baseId:m}))}if($!==void 0)return f.refs[u]=d.call(this,$)}Ne.resolveRef=l;function d(f){return(0,r.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:a.call(this,f)}function c(f){for(const m of this._compilations)if(h(m,f))return m}Ne.getCompilingSchema=c;function h(f,m){return f.schema===m.schema&&f.root===m.root&&f.baseId===m.baseId}function g(f,m){let u;for(;typeof(u=this.refs[m])=="string";)m=u;return u||this.schemas[m]||v.call(this,f,m)}function v(f,m){const u=this.opts.uriResolver.parse(m),p=(0,r._getFullPath)(this.opts.uriResolver,u);let b=(0,r.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&p===b)return y.call(this,u,f);const $=(0,r.normalizeId)(p),_=this.refs[$]||this.schemas[$];if(typeof _=="string"){const C=v.call(this,f,_);return typeof C?.schema!="object"?void 0:y.call(this,u,C)}if(typeof _?.schema=="object"){if(_.validate||a.call(this,_),$===(0,r.normalizeId)(m)){const{schema:C}=_,{schemaId:P}=this.opts,A=C[P];return A&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,A)),new i({schema:C,schemaId:P,root:f,baseId:b})}return y.call(this,u,_)}}Ne.resolveSchema=v;const w=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(f,{baseId:m,schema:u,root:p}){var b;if(((b=f.fragment)===null||b===void 0?void 0:b[0])!=="/")return;for(const C of f.fragment.slice(1).split("/")){if(typeof u=="boolean")return;const P=u[(0,o.unescapeFragment)(C)];if(P===void 0)return;u=P;const A=typeof u=="object"&&u[this.opts.schemaId];!w.has(C)&&A&&(m=(0,r.resolveUrl)(this.opts.uriResolver,m,A))}let $;if(typeof u!="boolean"&&u.$ref&&!(0,o.schemaHasRulesButRef)(u,this.RULES)){const C=(0,r.resolveUrl)(this.opts.uriResolver,m,u.$ref);$=v.call(this,p,C)}const{schemaId:_}=this.opts;if($=$||new i({schema:u,schemaId:_,root:p,baseId:m}),$.schema!==$.root.schema)return $}return Ne}const Ni="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Ii="Meta-schema for $data reference (JSON AnySchema extension proposal)",Li="object",Ai=["$data"],ji={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Ti=!1,xi={$id:Ni,description:Ii,type:Li,required:Ai,properties:ji,additionalProperties:Ti};var Bt={},wt={exports:{}},hr,Ps;function qi(){return Ps||(Ps=1,hr={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),hr}var mr,ks;function Di(){if(ks)return mr;ks=1;const{HEX:e}=qi(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(y){if(a(y,".")<3)return{host:y,isIPV4:!1};const f=y.match(t)||[],[m]=f;return m?{host:i(m,"."),isIPV4:!0}:{host:y,isIPV4:!1}}function r(y,f=!1){let m="",u=!0;for(const p of y){if(e[p]===void 0)return;p!=="0"&&u===!0&&(u=!1),u||(m+=p)}return f&&m.length===0&&(m="0"),m}function o(y){let f=0;const m={error:!1,address:"",zone:""},u=[],p=[];let b=!1,$=!1,_=!1;function C(){if(p.length){if(b===!1){const P=r(p);if(P!==void 0)u.push(P);else return m.error=!0,!1}p.length=0}return!0}for(let P=0;P<y.length;P++){const A=y[P];if(!(A==="["||A==="]"))if(A===":"){if($===!0&&(_=!0),!C())break;if(f++,u.push(":"),f>7){m.error=!0;break}P-1>=0&&y[P-1]===":"&&($=!0);continue}else if(A==="%"){if(!C())break;b=!0}else{p.push(A);continue}}return p.length&&(b?m.zone=p.join(""):_?u.push(p.join("")):u.push(r(p))),m.address=u.join(""),m}function s(y){if(a(y,":")<2)return{host:y,isIPV6:!1};const f=o(y);if(f.error)return{host:y,isIPV6:!1};{let m=f.address,u=f.address;return f.zone&&(m+="%"+f.zone,u+="%25"+f.zone),{host:m,escapedHost:u,isIPV6:!0}}}function i(y,f){let m="",u=!0;const p=y.length;for(let b=0;b<p;b++){const $=y[b];$==="0"&&u?(b+1<=p&&y[b+1]===f||b+1===p)&&(m+=$,u=!1):($===f?u=!0:u=!1,m+=$)}return m}function a(y,f){let m=0;for(let u=0;u<y.length;u++)y[u]===f&&m++;return m}const l=/^\.\.?\//u,d=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,h=/^\/?(?:.|\n)*?(?=\/|$)/u;function g(y){const f=[];for(;y.length;)if(y.match(l))y=y.replace(l,"");else if(y.match(d))y=y.replace(d,"/");else if(y.match(c))y=y.replace(c,"/"),f.pop();else if(y==="."||y==="..")y="";else{const m=y.match(h);if(m){const u=m[0];y=y.slice(u.length),f.push(u)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function v(y,f){const m=f!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=m(y.scheme)),y.userinfo!==void 0&&(y.userinfo=m(y.userinfo)),y.host!==void 0&&(y.host=m(y.host)),y.path!==void 0&&(y.path=m(y.path)),y.query!==void 0&&(y.query=m(y.query)),y.fragment!==void 0&&(y.fragment=m(y.fragment)),y}function w(y){const f=[];if(y.userinfo!==void 0&&(f.push(y.userinfo),f.push("@")),y.host!==void 0){let m=unescape(y.host);const u=n(m);if(u.isIPV4)m=u.host;else{const p=s(u.host);p.isIPV6===!0?m=`[${p.escapedHost}]`:m=y.host}f.push(m)}return(typeof y.port=="number"||typeof y.port=="string")&&(f.push(":"),f.push(String(y.port))),f.length?f.join(""):void 0}return mr={recomposeAuthority:w,normalizeComponentEncoding:v,removeDotSegments:g,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},mr}var gr,Os;function Mi(){if(Os)return gr;Os=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}function r(u){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u}function o(u){const p=String(u.scheme).toLowerCase()==="https";return(u.port===(p?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}function s(u){return u.secure=n(u),u.resourceName=(u.path||"/")+(u.query?"?"+u.query:""),u.path=void 0,u.query=void 0,u}function i(u){if((u.port===(n(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){const[p,b]=u.resourceName.split("?");u.path=p&&p!=="/"?p:void 0,u.query=b,u.resourceName=void 0}return u.fragment=void 0,u}function a(u,p){if(!u.path)return u.error="URN can not be parsed",u;const b=u.path.match(t);if(b){const $=p.scheme||u.scheme||"urn";u.nid=b[1].toLowerCase(),u.nss=b[2];const _=`${$}:${p.nid||u.nid}`,C=m[_];u.path=void 0,C&&(u=C.parse(u,p))}else u.error=u.error||"URN can not be parsed.";return u}function l(u,p){const b=p.scheme||u.scheme||"urn",$=u.nid.toLowerCase(),_=`${b}:${p.nid||$}`,C=m[_];C&&(u=C.serialize(u,p));const P=u,A=u.nss;return P.path=`${$||p.nid}:${A}`,p.skipEscape=!0,P}function d(u,p){const b=u;return b.uuid=b.nss,b.nss=void 0,!p.tolerant&&(!b.uuid||!e.test(b.uuid))&&(b.error=b.error||"UUID is not valid."),b}function c(u){const p=u;return p.nss=(u.uuid||"").toLowerCase(),p}const h={scheme:"http",domainHost:!0,parse:r,serialize:o},g={scheme:"https",domainHost:h.domainHost,parse:r,serialize:o},v={scheme:"ws",domainHost:!0,parse:s,serialize:i},w={scheme:"wss",domainHost:v.domainHost,parse:v.parse,serialize:v.serialize},m={http:h,https:g,ws:v,wss:w,urn:{scheme:"urn",parse:a,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:d,serialize:c,skipNormalize:!0}};return gr=m,gr}var Rs;function Vi(){if(Rs)return wt.exports;Rs=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:o}=Di(),s=Mi();function i(f,m){return typeof f=="string"?f=c(w(f,m),m):typeof f=="object"&&(f=w(c(f,m),m)),f}function a(f,m,u){const p=Object.assign({scheme:"null"},u),b=l(w(f,p),w(m,p),p,!0);return c(b,{...p,skipEscape:!0})}function l(f,m,u,p){const b={};return p||(f=w(c(f,u),u),m=w(c(m,u),u)),u=u||{},!u.tolerant&&m.scheme?(b.scheme=m.scheme,b.userinfo=m.userinfo,b.host=m.host,b.port=m.port,b.path=n(m.path||""),b.query=m.query):(m.userinfo!==void 0||m.host!==void 0||m.port!==void 0?(b.userinfo=m.userinfo,b.host=m.host,b.port=m.port,b.path=n(m.path||""),b.query=m.query):(m.path?(m.path.charAt(0)==="/"?b.path=n(m.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?b.path="/"+m.path:f.path?b.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+m.path:b.path=m.path,b.path=n(b.path)),b.query=m.query):(b.path=f.path,m.query!==void 0?b.query=m.query:b.query=f.query),b.userinfo=f.userinfo,b.host=f.host,b.port=f.port),b.scheme=f.scheme),b.fragment=m.fragment,b}function d(f,m,u){return typeof f=="string"?(f=unescape(f),f=c(o(w(f,u),!0),{...u,skipEscape:!0})):typeof f=="object"&&(f=c(o(f,!0),{...u,skipEscape:!0})),typeof m=="string"?(m=unescape(m),m=c(o(w(m,u),!0),{...u,skipEscape:!0})):typeof m=="object"&&(m=c(o(m,!0),{...u,skipEscape:!0})),f.toLowerCase()===m.toLowerCase()}function c(f,m){const u={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},p=Object.assign({},m),b=[],$=s[(p.scheme||u.scheme||"").toLowerCase()];$&&$.serialize&&$.serialize(u,p),u.path!==void 0&&(p.skipEscape?u.path=unescape(u.path):(u.path=escape(u.path),u.scheme!==void 0&&(u.path=u.path.split("%3A").join(":")))),p.reference!=="suffix"&&u.scheme&&b.push(u.scheme,":");const _=r(u);if(_!==void 0&&(p.reference!=="suffix"&&b.push("//"),b.push(_),u.path&&u.path.charAt(0)!=="/"&&b.push("/")),u.path!==void 0){let C=u.path;!p.absolutePath&&(!$||!$.absolutePath)&&(C=n(C)),_===void 0&&(C=C.replace(/^\/\//u,"/%2F")),b.push(C)}return u.query!==void 0&&b.push("?",u.query),u.fragment!==void 0&&b.push("#",u.fragment),b.join("")}const h=Array.from({length:127},(f,m)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(m)));function g(f){let m=0;for(let u=0,p=f.length;u<p;++u)if(m=f.charCodeAt(u),m>126||h[m])return!0;return!1}const v=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function w(f,m){const u=Object.assign({},m),p={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},b=f.indexOf("%")!==-1;let $=!1;u.reference==="suffix"&&(f=(u.scheme?u.scheme+":":"")+"//"+f);const _=f.match(v);if(_){if(p.scheme=_[1],p.userinfo=_[3],p.host=_[4],p.port=parseInt(_[5],10),p.path=_[6]||"",p.query=_[7],p.fragment=_[8],isNaN(p.port)&&(p.port=_[5]),p.host){const P=t(p.host);if(P.isIPV4===!1){const A=e(P.host);p.host=A.host.toLowerCase(),$=A.isIPV6}else p.host=P.host,$=!0}p.scheme===void 0&&p.userinfo===void 0&&p.host===void 0&&p.port===void 0&&p.query===void 0&&!p.path?p.reference="same-document":p.scheme===void 0?p.reference="relative":p.fragment===void 0?p.reference="absolute":p.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==p.reference&&(p.error=p.error||"URI is not a "+u.reference+" reference.");const C=s[(u.scheme||p.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!C||!C.unicodeSupport)&&p.host&&(u.domainHost||C&&C.domainHost)&&$===!1&&g(p.host))try{p.host=URL.domainToASCII(p.host.toLowerCase())}catch(P){p.error=p.error||"Host's domain name can not be converted to ASCII: "+P}(!C||C&&!C.skipNormalize)&&(b&&p.scheme!==void 0&&(p.scheme=unescape(p.scheme)),b&&p.host!==void 0&&(p.host=unescape(p.host)),p.path&&(p.path=escape(unescape(p.path))),p.fragment&&(p.fragment=encodeURI(decodeURIComponent(p.fragment)))),C&&C.parse&&C.parse(p,u)}else p.error=p.error||"URI can not be parsed.";return p}const y={SCHEMES:s,normalize:i,resolve:a,resolveComponents:l,equal:d,serialize:c,parse:w};return wt.exports=y,wt.exports.default=y,wt.exports.fastUri=y,wt.exports}var Ns;function Fi(){if(Ns)return Bt;Ns=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=Vi();return e.code='require("ajv/dist/runtime/uri").default',Bt.default=e,Bt}var Is;function Ui(){return Is||(Is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Qn();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=se();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Ar(),o=Xn(),s=Bo(),i=jr(),a=se(),l=Jn(),d=Kn(),c=ue(),h=xi,g=Fi(),v=(F,R)=>new RegExp(F,R);v.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},u=200;function p(F){var R,q,I,S,E,x,G,Q,de,ae,O,N,M,z,J,re,be,je,ke,Oe,_e,it,Ie,Zn,er;const $t=F.strict,tr=(R=F.code)===null||R===void 0?void 0:R.optimize,Mr=tr===!0||tr===void 0?1:tr||0,Vr=(I=(q=F.code)===null||q===void 0?void 0:q.regExp)!==null&&I!==void 0?I:v,ya=(S=F.uriResolver)!==null&&S!==void 0?S:g.default;return{strictSchema:(x=(E=F.strictSchema)!==null&&E!==void 0?E:$t)!==null&&x!==void 0?x:!0,strictNumbers:(Q=(G=F.strictNumbers)!==null&&G!==void 0?G:$t)!==null&&Q!==void 0?Q:!0,strictTypes:(ae=(de=F.strictTypes)!==null&&de!==void 0?de:$t)!==null&&ae!==void 0?ae:"log",strictTuples:(N=(O=F.strictTuples)!==null&&O!==void 0?O:$t)!==null&&N!==void 0?N:"log",strictRequired:(z=(M=F.strictRequired)!==null&&M!==void 0?M:$t)!==null&&z!==void 0?z:!1,code:F.code?{...F.code,optimize:Mr,regExp:Vr}:{optimize:Mr,regExp:Vr},loopRequired:(J=F.loopRequired)!==null&&J!==void 0?J:u,loopEnum:(re=F.loopEnum)!==null&&re!==void 0?re:u,meta:(be=F.meta)!==null&&be!==void 0?be:!0,messages:(je=F.messages)!==null&&je!==void 0?je:!0,inlineRefs:(ke=F.inlineRefs)!==null&&ke!==void 0?ke:!0,schemaId:(Oe=F.schemaId)!==null&&Oe!==void 0?Oe:"$id",addUsedSchema:(_e=F.addUsedSchema)!==null&&_e!==void 0?_e:!0,validateSchema:(it=F.validateSchema)!==null&&it!==void 0?it:!0,validateFormats:(Ie=F.validateFormats)!==null&&Ie!==void 0?Ie:!0,unicodeRegExp:(Zn=F.unicodeRegExp)!==null&&Zn!==void 0?Zn:!0,int32range:(er=F.int32range)!==null&&er!==void 0?er:!0,uriResolver:ya}}class b{constructor(R={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,R=this.opts={...R,...p(R)};const{es5:q,lines:I}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:y,es5:q,lines:I}),this.logger=T(R.logger);const S=R.validateFormats;R.validateFormats=!1,this.RULES=(0,s.getRules)(),$.call(this,f,R,"NOT SUPPORTED"),$.call(this,m,R,"DEPRECATED","warn"),this._metaOpts=D.call(this),R.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),R.keywords&&A.call(this,R.keywords),typeof R.meta=="object"&&this.addMetaSchema(R.meta),C.call(this),R.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:R,meta:q,schemaId:I}=this.opts;let S=h;I==="id"&&(S={...h},S.id=S.$id,delete S.$id),q&&R&&this.addMetaSchema(S,S[I],!1)}defaultMeta(){const{meta:R,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof R=="object"?R[q]||R:void 0}validate(R,q){let I;if(typeof R=="string"){if(I=this.getSchema(R),!I)throw new Error(`no schema with key or ref "${R}"`)}else I=this.compile(R);const S=I(q);return"$async"in I||(this.errors=I.errors),S}compile(R,q){const I=this._addSchema(R,q);return I.validate||this._compileSchemaEnv(I)}compileAsync(R,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:I}=this.opts;return S.call(this,R,q);async function S(ae,O){await E.call(this,ae.$schema);const N=this._addSchema(ae,O);return N.validate||x.call(this,N)}async function E(ae){ae&&!this.getSchema(ae)&&await S.call(this,{$ref:ae},!0)}async function x(ae){try{return this._compileSchemaEnv(ae)}catch(O){if(!(O instanceof o.default))throw O;return G.call(this,O),await Q.call(this,O.missingSchema),x.call(this,ae)}}function G({missingSchema:ae,missingRef:O}){if(this.refs[ae])throw new Error(`AnySchema ${ae} is loaded but ${O} cannot be resolved`)}async function Q(ae){const O=await de.call(this,ae);this.refs[ae]||await E.call(this,O.$schema),this.refs[ae]||this.addSchema(O,ae,q)}async function de(ae){const O=this._loading[ae];if(O)return O;try{return await(this._loading[ae]=I(ae))}finally{delete this._loading[ae]}}}addSchema(R,q,I,S=this.opts.validateSchema){if(Array.isArray(R)){for(const x of R)this.addSchema(x,void 0,I,S);return this}let E;if(typeof R=="object"){const{schemaId:x}=this.opts;if(E=R[x],E!==void 0&&typeof E!="string")throw new Error(`schema ${x} must be string`)}return q=(0,l.normalizeId)(q||E),this._checkUnique(q),this.schemas[q]=this._addSchema(R,I,q,S,!0),this}addMetaSchema(R,q,I=this.opts.validateSchema){return this.addSchema(R,q,!0,I),this}validateSchema(R,q){if(typeof R=="boolean")return!0;let I;if(I=R.$schema,I!==void 0&&typeof I!="string")throw new Error("$schema must be a string");if(I=I||this.opts.defaultMeta||this.defaultMeta(),!I)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(I,R);if(!S&&q){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return S}getSchema(R){let q;for(;typeof(q=_.call(this,R))=="string";)R=q;if(q===void 0){const{schemaId:I}=this.opts,S=new i.SchemaEnv({schema:{},schemaId:I});if(q=i.resolveSchema.call(this,S,R),!q)return;this.refs[R]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(R){if(R instanceof RegExp)return this._removeAllSchemas(this.schemas,R),this._removeAllSchemas(this.refs,R),this;switch(typeof R){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=_.call(this,R);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[R],delete this.refs[R],this}case"object":{const q=R;this._cache.delete(q);let I=R[this.opts.schemaId];return I&&(I=(0,l.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(R){for(const q of R)this.addKeyword(q);return this}addKeyword(R,q){let I;if(typeof R=="string")I=R,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=I);else if(typeof R=="object"&&q===void 0){if(q=R,I=q.keyword,Array.isArray(I)&&!I.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,I,q),!q)return(0,c.eachItem)(I,E=>H.call(this,E)),this;me.call(this,q);const S={...q,type:(0,d.getJSONTypes)(q.type),schemaType:(0,d.getJSONTypes)(q.schemaType)};return(0,c.eachItem)(I,S.type.length===0?E=>H.call(this,E,S):E=>S.type.forEach(x=>H.call(this,E,S,x))),this}getKeyword(R){const q=this.RULES.all[R];return typeof q=="object"?q.definition:!!q}removeKeyword(R){const{RULES:q}=this;delete q.keywords[R],delete q.all[R];for(const I of q.rules){const S=I.rules.findIndex(E=>E.keyword===R);S>=0&&I.rules.splice(S,1)}return this}addFormat(R,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[R]=q,this}errorsText(R=this.errors,{separator:q=", ",dataVar:I="data"}={}){return!R||R.length===0?"No errors":R.map(S=>`${I}${S.instancePath} ${S.message}`).reduce((S,E)=>S+q+E)}$dataMetaSchema(R,q){const I=this.RULES.all;R=JSON.parse(JSON.stringify(R));for(const S of q){const E=S.split("/").slice(1);let x=R;for(const G of E)x=x[G];for(const G in I){const Q=I[G];if(typeof Q!="object")continue;const{$data:de}=Q.definition,ae=x[G];de&&ae&&(x[G]=le(ae))}}return R}_removeAllSchemas(R,q){for(const I in R){const S=R[I];(!q||q.test(I))&&(typeof S=="string"?delete R[I]:S&&!S.meta&&(this._cache.delete(S.schema),delete R[I]))}}_addSchema(R,q,I,S=this.opts.validateSchema,E=this.opts.addUsedSchema){let x;const{schemaId:G}=this.opts;if(typeof R=="object")x=R[G];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof R!="boolean")throw new Error("schema must be object or boolean")}let Q=this._cache.get(R);if(Q!==void 0)return Q;I=(0,l.normalizeId)(x||I);const de=l.getSchemaRefs.call(this,R,I);return Q=new i.SchemaEnv({schema:R,schemaId:G,meta:q,baseId:I,localRefs:de}),this._cache.set(Q.schema,Q),E&&!I.startsWith("#")&&(I&&this._checkUnique(I),this.refs[I]=Q),S&&this.validateSchema(R,!0),Q}_checkUnique(R){if(this.schemas[R]||this.refs[R])throw new Error(`schema with key or id "${R}" already exists`)}_compileSchemaEnv(R){if(R.meta?this._compileMetaSchema(R):i.compileSchema.call(this,R),!R.validate)throw new Error("ajv implementation error");return R.validate}_compileMetaSchema(R){const q=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,R)}finally{this.opts=q}}}b.ValidationError=r.default,b.MissingRefError=o.default,e.default=b;function $(F,R,q,I="error"){for(const S in F){const E=S;E in R&&this.logger[I](`${q}: option ${S}. ${F[E]}`)}}function _(F){return F=(0,l.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const R in F)this.addSchema(F[R],R)}function P(){for(const F in this.opts.formats){const R=this.opts.formats[F];R&&this.addFormat(F,R)}}function A(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const R in F){const q=F[R];q.keyword||(q.keyword=R),this.addKeyword(q)}}function D(){const F={...this.opts};for(const R of w)delete F[R];return F}const k={log(){},warn(){},error(){}};function T(F){if(F===!1)return k;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const K=/^[a-z_$][a-z0-9_$:-]*$/i;function U(F,R){const{RULES:q}=this;if((0,c.eachItem)(F,I=>{if(q.keywords[I])throw new Error(`Keyword ${I} is already defined`);if(!K.test(I))throw new Error(`Keyword ${I} has invalid name`)}),!!R&&R.$data&&!("code"in R||"validate"in R))throw new Error('$data keyword must have "code" or "validate" function')}function H(F,R,q){var I;const S=R?.post;if(q&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let x=S?E.post:E.rules.find(({type:Q})=>Q===q);if(x||(x={type:q,rules:[]},E.rules.push(x)),E.keywords[F]=!0,!R)return;const G={keyword:F,definition:{...R,type:(0,d.getJSONTypes)(R.type),schemaType:(0,d.getJSONTypes)(R.schemaType)}};R.before?te.call(this,x,G,R.before):x.rules.push(G),E.all[F]=G,(I=R.implements)===null||I===void 0||I.forEach(Q=>this.addKeyword(Q))}function te(F,R,q){const I=F.rules.findIndex(S=>S.keyword===q);I>=0?F.rules.splice(I,0,R):(F.rules.push(R),this.logger.warn(`rule ${q} is not defined`))}function me(F){let{metaSchema:R}=F;R!==void 0&&(F.$data&&this.opts.$data&&(R=le(R)),F.validateSchema=this.compile(R,!0))}const ne={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function le(F){return{anyOf:[F,ne]}}}(ar)),ar}var Gt={},Jt={},Qt={},Ls;function Ki(){if(Ls)return Qt;Ls=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Qt.default=e,Qt}var Ge={},As;function zi(){if(As)return Ge;As=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.callRef=Ge.getValidate=void 0;const e=Xn(),t=xe(),n=se(),r=Xe(),o=jr(),s=ue(),i={keyword:"$ref",schemaType:"string",code(d){const{gen:c,schema:h,it:g}=d,{baseId:v,schemaEnv:w,validateName:y,opts:f,self:m}=g,{root:u}=w;if((h==="#"||h==="#/")&&v===u.baseId)return b();const p=o.resolveRef.call(m,u,v,h);if(p===void 0)throw new e.default(g.opts.uriResolver,v,h);if(p instanceof o.SchemaEnv)return $(p);return _(p);function b(){if(w===u)return l(d,y,w,w.$async);const C=c.scopeValue("root",{ref:u});return l(d,(0,n._)`${C}.validate`,u,u.$async)}function $(C){const P=a(d,C);l(d,P,C,C.$async)}function _(C){const P=c.scopeValue("schema",f.code.source===!0?{ref:C,code:(0,n.stringify)(C)}:{ref:C}),A=c.name("valid"),D=d.subschema({schema:C,dataTypes:[],schemaPath:n.nil,topSchemaRef:P,errSchemaPath:h},A);d.mergeEvaluated(D),d.ok(A)}}};function a(d,c){const{gen:h}=d;return c.validate?h.scopeValue("validate",{ref:c.validate}):(0,n._)`${h.scopeValue("wrapper",{ref:c})}.validate`}Ge.getValidate=a;function l(d,c,h,g){const{gen:v,it:w}=d,{allErrors:y,schemaEnv:f,opts:m}=w,u=m.passContext?r.default.this:n.nil;g?p():b();function p(){if(!f.$async)throw new Error("async schema referenced by sync schema");const C=v.let("valid");v.try(()=>{v.code((0,n._)`await ${(0,t.callValidateCode)(d,c,u)}`),_(c),y||v.assign(C,!0)},P=>{v.if((0,n._)`!(${P} instanceof ${w.ValidationError})`,()=>v.throw(P)),$(P),y||v.assign(C,!1)}),d.ok(C)}function b(){d.result((0,t.callValidateCode)(d,c,u),()=>_(c),()=>$(c))}function $(C){const P=(0,n._)`${C}.errors`;v.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${P} : ${r.default.vErrors}.concat(${P})`),v.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function _(C){var P;if(!w.opts.unevaluated)return;const A=(P=h?.validate)===null||P===void 0?void 0:P.evaluated;if(w.props!==!0)if(A&&!A.dynamicProps)A.props!==void 0&&(w.props=s.mergeEvaluated.props(v,A.props,w.props));else{const D=v.var("props",(0,n._)`${C}.evaluated.props`);w.props=s.mergeEvaluated.props(v,D,w.props,n.Name)}if(w.items!==!0)if(A&&!A.dynamicItems)A.items!==void 0&&(w.items=s.mergeEvaluated.items(v,A.items,w.items));else{const D=v.var("items",(0,n._)`${C}.evaluated.items`);w.items=s.mergeEvaluated.items(v,D,w.items,n.Name)}}}return Ge.callRef=l,Ge.default=i,Ge}var js;function Hi(){if(js)return Jt;js=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e=Ki(),t=zi(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Jt.default=n,Jt}var Xt={},Yt={},Ts;function Wi(){if(Ts)return Yt;Ts=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=se(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:i})=>(0,e.str)`must be ${n[s].okStr} ${i}`,params:({keyword:s,schemaCode:i})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${i}}`},o={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:i,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${n[i].fail} ${l} || isNaN(${a})`)}};return Yt.default=o,Yt}var Zt={},xs;function Bi(){if(xs)return Zt;xs=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=se(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:o,data:s,schemaCode:i,it:a}=r,l=a.opts.multipleOfPrecision,d=o.let("res"),c=l?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${l}`:(0,e._)`${d} !== parseInt(${d})`;r.fail$data((0,e._)`(${i} === 0 || (${d} = ${s}/${i}, ${c}))`)}};return Zt.default=n,Zt}var en={},tn={},qs;function Gi(){if(qs)return tn;qs=1,Object.defineProperty(tn,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,o=0,s;for(;o<n;)r++,s=t.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=t.charCodeAt(o),(s&64512)===56320&&o++);return r}return tn.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',tn}var Ds;function Ji(){if(Ds)return en;Ds=1,Object.defineProperty(en,"__esModule",{value:!0});const e=se(),t=ue(),n=Gi(),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:i}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:i,data:a,schemaCode:l,it:d}=s,c=i==="maxLength"?e.operators.GT:e.operators.LT,h=d.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${h} ${c} ${l}`)}};return en.default=o,en}var nn={},Ms;function Qi(){if(Ms)return nn;Ms=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=xe(),t=se(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,t.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,t._)`{pattern: ${o}}`},code(o){const{data:s,$data:i,schema:a,schemaCode:l,it:d}=o,c=d.opts.unicodeRegExp?"u":"",h=i?(0,t._)`(new RegExp(${l}, ${c}))`:(0,e.usePattern)(o,a);o.fail$data((0,t._)`!${h}.test(${s})`)}};return nn.default=r,nn}var rn={},Vs;function Xi(){if(Vs)return rn;Vs=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=se(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:i}=r,a=o==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${i}`)}};return rn.default=n,rn}var sn={},Fs;function Yi(){if(Fs)return sn;Fs=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=xe(),t=se(),n=ue(),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:i,schema:a,schemaCode:l,data:d,$data:c,it:h}=s,{opts:g}=h;if(!c&&a.length===0)return;const v=a.length>=g.loopRequired;if(h.allErrors?w():y(),g.strictRequired){const u=s.parentSchema.properties,{definedProperties:p}=s.it;for(const b of a)if(u?.[b]===void 0&&!p.has(b)){const $=h.schemaEnv.baseId+h.errSchemaPath,_=`required property "${b}" is not defined at "${$}" (strictRequired)`;(0,n.checkStrictMode)(h,_,h.opts.strictRequired)}}function w(){if(v||c)s.block$data(t.nil,f);else for(const u of a)(0,e.checkReportMissingProp)(s,u)}function y(){const u=i.let("missing");if(v||c){const p=i.let("valid",!0);s.block$data(p,()=>m(u,p)),s.ok(p)}else i.if((0,e.checkMissingProp)(s,a,u)),(0,e.reportMissingProp)(s,u),i.else()}function f(){i.forOf("prop",l,u=>{s.setParams({missingProperty:u}),i.if((0,e.noPropertyInData)(i,d,u,g.ownProperties),()=>s.error())})}function m(u,p){s.setParams({missingProperty:u}),i.forOf(u,l,()=>{i.assign(p,(0,e.propertyInData)(i,d,u,g.ownProperties)),i.if((0,t.not)(p),()=>{s.error(),i.break()})},t.nil)}}};return sn.default=o,sn}var on={},Us;function Zi(){if(Us)return on;Us=1,Object.defineProperty(on,"__esModule",{value:!0});const e=se(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:i}=r,a=o==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${i}`)}};return on.default=n,on}var an={},ln={},Ks;function Tr(){if(Ks)return ln;Ks=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=Jo();return e.code='require("ajv/dist/runtime/equal").default',ln.default=e,ln}var zs;function el(){if(zs)return an;zs=1,Object.defineProperty(an,"__esModule",{value:!0});const e=Kn(),t=se(),n=ue(),r=Tr(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${i} are identical)`,params:({params:{i,j:a}})=>(0,t._)`{i: ${i}, j: ${a}}`},code(i){const{gen:a,data:l,$data:d,schema:c,parentSchema:h,schemaCode:g,it:v}=i;if(!d&&!c)return;const w=a.let("valid"),y=h.items?(0,e.getSchemaTypes)(h.items):[];i.block$data(w,f,(0,t._)`${g} === false`),i.ok(w);function f(){const b=a.let("i",(0,t._)`${l}.length`),$=a.let("j");i.setParams({i:b,j:$}),a.assign(w,!0),a.if((0,t._)`${b} > 1`,()=>(m()?u:p)(b,$))}function m(){return y.length>0&&!y.some(b=>b==="object"||b==="array")}function u(b,$){const _=a.name("item"),C=(0,e.checkDataTypes)(y,_,v.opts.strictNumbers,e.DataType.Wrong),P=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${b}--;`,()=>{a.let(_,(0,t._)`${l}[${b}]`),a.if(C,(0,t._)`continue`),y.length>1&&a.if((0,t._)`typeof ${_} == "string"`,(0,t._)`${_} += "_"`),a.if((0,t._)`typeof ${P}[${_}] == "number"`,()=>{a.assign($,(0,t._)`${P}[${_}]`),i.error(),a.assign(w,!1).break()}).code((0,t._)`${P}[${_}] = ${b}`)})}function p(b,$){const _=(0,n.useFunc)(a,r.default),C=a.name("outer");a.label(C).for((0,t._)`;${b}--;`,()=>a.for((0,t._)`${$} = ${b}; ${$}--;`,()=>a.if((0,t._)`${_}(${l}[${b}], ${l}[${$}])`,()=>{i.error(),a.assign(w,!1).break(C)})))}}};return an.default=s,an}var cn={},Hs;function tl(){if(Hs)return cn;Hs=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=se(),t=ue(),n=Tr(),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:i,data:a,$data:l,schemaCode:d,schema:c}=s;l||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(i,n.default)}(${a}, ${d})`):s.fail((0,e._)`${c} !== ${a}`)}};return cn.default=o,cn}var un={},Ws;function nl(){if(Ws)return un;Ws=1,Object.defineProperty(un,"__esModule",{value:!0});const e=se(),t=ue(),n=Tr(),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:i,data:a,$data:l,schema:d,schemaCode:c,it:h}=s;if(!l&&d.length===0)throw new Error("enum must have non-empty array");const g=d.length>=h.opts.loopEnum;let v;const w=()=>v??(v=(0,t.useFunc)(i,n.default));let y;if(g||l)y=i.let("valid"),s.block$data(y,f);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const u=i.const("vSchema",c);y=(0,e.or)(...d.map((p,b)=>m(u,b)))}s.pass(y);function f(){i.assign(y,!1),i.forOf("v",c,u=>i.if((0,e._)`${w()}(${a}, ${u})`,()=>i.assign(y,!0).break()))}function m(u,p){const b=d[p];return typeof b=="object"&&b!==null?(0,e._)`${w()}(${a}, ${u}[${p}])`:(0,e._)`${a} === ${b}`}}};return un.default=o,un}var Bs;function rl(){if(Bs)return Xt;Bs=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=Wi(),t=Bi(),n=Ji(),r=Qi(),o=Xi(),s=Yi(),i=Zi(),a=el(),l=tl(),d=nl(),c=[e.default,t.default,n.default,r.default,o.default,s.default,i.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,d.default];return Xt.default=c,Xt}var dn={},dt={},Gs;function Qo(){if(Gs)return dt;Gs=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.validateAdditionalItems=void 0;const e=se(),t=ue(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:i,it:a}=s,{items:l}=i;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(s,l)}};function o(s,i){const{gen:a,schema:l,data:d,keyword:c,it:h}=s;h.items=!0;const g=a.const("len",(0,e._)`${d}.length`);if(l===!1)s.setParams({len:i.length}),s.pass((0,e._)`${g} <= ${i.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(h,l)){const w=a.var("valid",(0,e._)`${g} <= ${i.length}`);a.if((0,e.not)(w),()=>v(w)),s.ok(w)}function v(w){a.forRange("i",i.length,g,y=>{s.subschema({keyword:c,dataProp:y,dataPropType:t.Type.Num},w),h.allErrors||a.if((0,e.not)(w),()=>a.break())})}}return dt.validateAdditionalItems=o,dt.default=r,dt}var fn={},ft={},Js;function Xo(){if(Js)return ft;Js=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.validateTuple=void 0;const e=se(),t=ue(),n=xe(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:i,it:a}=s;if(Array.isArray(i))return o(s,"additionalItems",i);a.items=!0,!(0,t.alwaysValidSchema)(a,i)&&s.ok((0,n.validateArray)(s))}};function o(s,i,a=s.schema){const{gen:l,parentSchema:d,data:c,keyword:h,it:g}=s;y(d),g.opts.unevaluated&&a.length&&g.items!==!0&&(g.items=t.mergeEvaluated.items(l,a.length,g.items));const v=l.name("valid"),w=l.const("len",(0,e._)`${c}.length`);a.forEach((f,m)=>{(0,t.alwaysValidSchema)(g,f)||(l.if((0,e._)`${w} > ${m}`,()=>s.subschema({keyword:h,schemaProp:m,dataProp:m},v)),s.ok(v))});function y(f){const{opts:m,errSchemaPath:u}=g,p=a.length,b=p===f.minItems&&(p===f.maxItems||f[i]===!1);if(m.strictTuples&&!b){const $=`"${h}" is ${p}-tuple, but minItems or maxItems/${i} are not specified or different at path "${u}"`;(0,t.checkStrictMode)(g,$,m.strictTuples)}}}return ft.validateTuple=o,ft.default=r,ft}var Qs;function sl(){if(Qs)return fn;Qs=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=Xo(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return fn.default=t,fn}var hn={},Xs;function ol(){if(Xs)return hn;Xs=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=se(),t=ue(),n=xe(),r=Qo(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{schema:a,parentSchema:l,it:d}=i,{prefixItems:c}=l;d.items=!0,!(0,t.alwaysValidSchema)(d,a)&&(c?(0,r.validateAdditionalItems)(i,c):i.ok((0,n.validateArray)(i)))}};return hn.default=s,hn}var mn={},Ys;function al(){if(Ys)return mn;Ys=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=se(),t=ue(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:s}})=>s===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${s} valid item(s)`,params:({params:{min:o,max:s}})=>s===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${s}}`},code(o){const{gen:s,schema:i,parentSchema:a,data:l,it:d}=o;let c,h;const{minContains:g,maxContains:v}=a;d.opts.next?(c=g===void 0?1:g,h=v):c=1;const w=s.const("len",(0,e._)`${l}.length`);if(o.setParams({min:c,max:h}),h===void 0&&c===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(h!==void 0&&c>h){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,t.alwaysValidSchema)(d,i)){let p=(0,e._)`${w} >= ${c}`;h!==void 0&&(p=(0,e._)`${p} && ${w} <= ${h}`),o.pass(p);return}d.items=!0;const y=s.name("valid");h===void 0&&c===1?m(y,()=>s.if(y,()=>s.break())):c===0?(s.let(y,!0),h!==void 0&&s.if((0,e._)`${l}.length > 0`,f)):(s.let(y,!1),f()),o.result(y,()=>o.reset());function f(){const p=s.name("_valid"),b=s.let("count",0);m(p,()=>s.if(p,()=>u(b)))}function m(p,b){s.forRange("i",0,w,$=>{o.subschema({keyword:"contains",dataProp:$,dataPropType:t.Type.Num,compositeRule:!0},p),b()})}function u(p){s.code((0,e._)`${p}++`),h===void 0?s.if((0,e._)`${p} >= ${c}`,()=>s.assign(y,!0).break()):(s.if((0,e._)`${p} > ${h}`,()=>s.assign(y,!1).break()),c===1?s.assign(y,!0):s.if((0,e._)`${p} >= ${c}`,()=>s.assign(y,!0)))}}};return mn.default=r,mn}var pr={},Zs;function il(){return Zs||(Zs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=se(),n=ue(),r=xe();e.error={message:({params:{property:l,depsCount:d,deps:c}})=>{const h=d===1?"property":"properties";return(0,t.str)`must have ${h} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:d,deps:c,missingProperty:h}})=>(0,t._)`{property: ${l},
    missingProperty: ${h},
    depsCount: ${d},
    deps: ${c}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[d,c]=s(l);i(l,d),a(l,c)}};function s({schema:l}){const d={},c={};for(const h in l){if(h==="__proto__")continue;const g=Array.isArray(l[h])?d:c;g[h]=l[h]}return[d,c]}function i(l,d=l.schema){const{gen:c,data:h,it:g}=l;if(Object.keys(d).length===0)return;const v=c.let("missing");for(const w in d){const y=d[w];if(y.length===0)continue;const f=(0,r.propertyInData)(c,h,w,g.opts.ownProperties);l.setParams({property:w,depsCount:y.length,deps:y.join(", ")}),g.allErrors?c.if(f,()=>{for(const m of y)(0,r.checkReportMissingProp)(l,m)}):(c.if((0,t._)`${f} && (${(0,r.checkMissingProp)(l,y,v)})`),(0,r.reportMissingProp)(l,v),c.else())}}e.validatePropertyDeps=i;function a(l,d=l.schema){const{gen:c,data:h,keyword:g,it:v}=l,w=c.name("valid");for(const y in d)(0,n.alwaysValidSchema)(v,d[y])||(c.if((0,r.propertyInData)(c,h,y,v.opts.ownProperties),()=>{const f=l.subschema({keyword:g,schemaProp:y},w);l.mergeValidEvaluated(f,w)},()=>c.var(w,!0)),l.ok(w))}e.validateSchemaDeps=a,e.default=o}(pr)),pr}var gn={},eo;function ll(){if(eo)return gn;eo=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=se(),t=ue(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:s,schema:i,data:a,it:l}=o;if((0,t.alwaysValidSchema)(l,i))return;const d=s.name("valid");s.forIn("key",a,c=>{o.setParams({propertyName:c}),o.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},d),s.if((0,e.not)(d),()=>{o.error(!0),l.allErrors||s.break()})}),o.ok(d)}};return gn.default=r,gn}var pn={},to;function Yo(){if(to)return pn;to=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=xe(),t=se(),n=Xe(),r=ue(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:i})=>(0,t._)`{additionalProperty: ${i.additionalProperty}}`},code(i){const{gen:a,schema:l,parentSchema:d,data:c,errsCount:h,it:g}=i;if(!h)throw new Error("ajv implementation error");const{allErrors:v,opts:w}=g;if(g.props=!0,w.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(g,l))return;const y=(0,e.allSchemaProperties)(d.properties),f=(0,e.allSchemaProperties)(d.patternProperties);m(),i.ok((0,t._)`${h} === ${n.default.errors}`);function m(){a.forIn("key",c,_=>{!y.length&&!f.length?b(_):a.if(u(_),()=>b(_))})}function u(_){let C;if(y.length>8){const P=(0,r.schemaRefOrVal)(g,d.properties,"properties");C=(0,e.isOwnProperty)(a,P,_)}else y.length?C=(0,t.or)(...y.map(P=>(0,t._)`${_} === ${P}`)):C=t.nil;return f.length&&(C=(0,t.or)(C,...f.map(P=>(0,t._)`${(0,e.usePattern)(i,P)}.test(${_})`))),(0,t.not)(C)}function p(_){a.code((0,t._)`delete ${c}[${_}]`)}function b(_){if(w.removeAdditional==="all"||w.removeAdditional&&l===!1){p(_);return}if(l===!1){i.setParams({additionalProperty:_}),i.error(),v||a.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(g,l)){const C=a.name("valid");w.removeAdditional==="failing"?($(_,C,!1),a.if((0,t.not)(C),()=>{i.reset(),p(_)})):($(_,C),v||a.if((0,t.not)(C),()=>a.break()))}}function $(_,C,P){const A={keyword:"additionalProperties",dataProp:_,dataPropType:r.Type.Str};P===!1&&Object.assign(A,{compositeRule:!0,createErrors:!1,allErrors:!1}),i.subschema(A,C)}}};return pn.default=s,pn}var yn={},no;function cl(){if(no)return yn;no=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=Qn(),t=xe(),n=ue(),r=Yo(),o={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:i,schema:a,parentSchema:l,data:d,it:c}=s;c.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const h=(0,t.allSchemaProperties)(a);for(const f of h)c.definedProperties.add(f);c.opts.unevaluated&&h.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(i,(0,n.toHash)(h),c.props));const g=h.filter(f=>!(0,n.alwaysValidSchema)(c,a[f]));if(g.length===0)return;const v=i.name("valid");for(const f of g)w(f)?y(f):(i.if((0,t.propertyInData)(i,d,f,c.opts.ownProperties)),y(f),c.allErrors||i.else().var(v,!0),i.endIf()),s.it.definedProperties.add(f),s.ok(v);function w(f){return c.opts.useDefaults&&!c.compositeRule&&a[f].default!==void 0}function y(f){s.subschema({keyword:"properties",schemaProp:f,dataProp:f},v)}}};return yn.default=o,yn}var vn={},ro;function ul(){if(ro)return vn;ro=1,Object.defineProperty(vn,"__esModule",{value:!0});const e=xe(),t=se(),n=ue(),r=ue(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:i,schema:a,data:l,parentSchema:d,it:c}=s,{opts:h}=c,g=(0,e.allSchemaProperties)(a),v=g.filter(b=>(0,n.alwaysValidSchema)(c,a[b]));if(g.length===0||v.length===g.length&&(!c.opts.unevaluated||c.props===!0))return;const w=h.strictSchema&&!h.allowMatchingProperties&&d.properties,y=i.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(i,c.props));const{props:f}=c;m();function m(){for(const b of g)w&&u(b),c.allErrors?p(b):(i.var(y,!0),p(b),i.if(y))}function u(b){for(const $ in w)new RegExp(b).test($)&&(0,n.checkStrictMode)(c,`property ${$} matches pattern ${b} (use allowMatchingProperties)`)}function p(b){i.forIn("key",l,$=>{i.if((0,t._)`${(0,e.usePattern)(s,b)}.test(${$})`,()=>{const _=v.includes(b);_||s.subschema({keyword:"patternProperties",schemaProp:b,dataProp:$,dataPropType:r.Type.Str},y),c.opts.unevaluated&&f!==!0?i.assign((0,t._)`${f}[${$}]`,!0):!_&&!c.allErrors&&i.if((0,t.not)(y),()=>i.break())})})}}};return vn.default=o,vn}var $n={},so;function dl(){if(so)return $n;so=1,Object.defineProperty($n,"__esModule",{value:!0});const e=ue(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:o,it:s}=n;if((0,e.alwaysValidSchema)(s,o)){n.fail();return}const i=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),n.failResult(i,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return $n.default=t,$n}var bn={},oo;function fl(){if(oo)return bn;oo=1,Object.defineProperty(bn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:xe().validateUnion,error:{message:"must match a schema in anyOf"}};return bn.default=t,bn}var _n={},ao;function hl(){if(ao)return _n;ao=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=se(),t=ue(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:s,schema:i,parentSchema:a,it:l}=o;if(!Array.isArray(i))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const d=i,c=s.let("valid",!1),h=s.let("passing",null),g=s.name("_valid");o.setParams({passing:h}),s.block(v),o.result(c,()=>o.reset(),()=>o.error(!0));function v(){d.forEach((w,y)=>{let f;(0,t.alwaysValidSchema)(l,w)?s.var(g,!0):f=o.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},g),y>0&&s.if((0,e._)`${g} && ${c}`).assign(c,!1).assign(h,(0,e._)`[${h}, ${y}]`).else(),s.if(g,()=>{s.assign(c,!0),s.assign(h,y),f&&o.mergeEvaluated(f,e.Name)})})}}};return _n.default=r,_n}var wn={},io;function ml(){if(io)return wn;io=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=ue(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:o,it:s}=n;if(!Array.isArray(o))throw new Error("ajv implementation error");const i=r.name("valid");o.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const d=n.subschema({keyword:"allOf",schemaProp:l},i);n.ok(i),n.mergeEvaluated(d)})}};return wn.default=t,wn}var Sn={},lo;function gl(){if(lo)return Sn;lo=1,Object.defineProperty(Sn,"__esModule",{value:!0});const e=se(),t=ue(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:i,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const d=o(l,"then"),c=o(l,"else");if(!d&&!c)return;const h=i.let("valid",!0),g=i.name("_valid");if(v(),s.reset(),d&&c){const y=i.let("ifClause");s.setParams({ifClause:y}),i.if(g,w("then",y),w("else",y))}else d?i.if(g,w("then")):i.if((0,e.not)(g),w("else"));s.pass(h,()=>s.error(!0));function v(){const y=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},g);s.mergeEvaluated(y)}function w(y,f){return()=>{const m=s.subschema({keyword:y},g);i.assign(h,g),s.mergeValidEvaluated(m,h),f?i.assign(f,(0,e._)`${y}`):s.setParams({ifClause:y})}}}};function o(s,i){const a=s.schema[i];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return Sn.default=r,Sn}var Cn={},co;function pl(){if(co)return Cn;co=1,Object.defineProperty(Cn,"__esModule",{value:!0});const e=ue(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:o}){r.if===void 0&&(0,e.checkStrictMode)(o,`"${n}" without "if" is ignored`)}};return Cn.default=t,Cn}var uo;function yl(){if(uo)return dn;uo=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=Qo(),t=sl(),n=Xo(),r=ol(),o=al(),s=il(),i=ll(),a=Yo(),l=cl(),d=ul(),c=dl(),h=fl(),g=hl(),v=ml(),w=gl(),y=pl();function f(m=!1){const u=[c.default,h.default,g.default,v.default,w.default,y.default,i.default,a.default,s.default,l.default,d.default];return m?u.push(t.default,r.default):u.push(e.default,n.default),u.push(o.default),u}return dn.default=f,dn}var En={},Pn={},fo;function vl(){if(fo)return Pn;fo=1,Object.defineProperty(Pn,"__esModule",{value:!0});const e=se(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,o){const{gen:s,data:i,$data:a,schema:l,schemaCode:d,it:c}=r,{opts:h,errSchemaPath:g,schemaEnv:v,self:w}=c;if(!h.validateFormats)return;a?y():f();function y(){const m=s.scopeValue("formats",{ref:w.formats,code:h.code.formats}),u=s.const("fDef",(0,e._)`${m}[${d}]`),p=s.let("fType"),b=s.let("format");s.if((0,e._)`typeof ${u} == "object" && !(${u} instanceof RegExp)`,()=>s.assign(p,(0,e._)`${u}.type || "string"`).assign(b,(0,e._)`${u}.validate`),()=>s.assign(p,(0,e._)`"string"`).assign(b,u)),r.fail$data((0,e.or)($(),_()));function $(){return h.strictSchema===!1?e.nil:(0,e._)`${d} && !${b}`}function _(){const C=v.$async?(0,e._)`(${u}.async ? await ${b}(${i}) : ${b}(${i}))`:(0,e._)`${b}(${i})`,P=(0,e._)`(typeof ${b} == "function" ? ${C} : ${b}.test(${i}))`;return(0,e._)`${b} && ${b} !== true && ${p} === ${o} && !${P}`}}function f(){const m=w.formats[l];if(!m){$();return}if(m===!0)return;const[u,p,b]=_(m);u===o&&r.pass(C());function $(){if(h.strictSchema===!1){w.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${l}" ignored in schema at path "${g}"`}}function _(P){const A=P instanceof RegExp?(0,e.regexpCode)(P):h.code.formats?(0,e._)`${h.code.formats}${(0,e.getProperty)(l)}`:void 0,D=s.scopeValue("formats",{key:l,ref:P,code:A});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,e._)`${D}.validate`]:["string",P,D]}function C(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!v.$async)throw new Error("async format in sync schema");return(0,e._)`await ${b}(${i})`}return typeof p=="function"?(0,e._)`${b}(${i})`:(0,e._)`${b}.test(${i})`}}}};return Pn.default=n,Pn}var ho;function $l(){if(ho)return En;ho=1,Object.defineProperty(En,"__esModule",{value:!0});const t=[vl().default];return En.default=t,En}var nt={},mo;function bl(){return mo||(mo=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.contentVocabulary=nt.metadataVocabulary=void 0,nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),nt}var go;function _l(){if(go)return Gt;go=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=Hi(),t=rl(),n=yl(),r=$l(),o=bl(),s=[e.default,t.default,(0,n.default)(),r.default,o.metadataVocabulary,o.contentVocabulary];return Gt.default=s,Gt}var kn={},St={},po;function wl(){if(po)return St;po=1,Object.defineProperty(St,"__esModule",{value:!0}),St.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(St.DiscrError=e={})),St}var yo;function Sl(){if(yo)return kn;yo=1,Object.defineProperty(kn,"__esModule",{value:!0});const e=se(),t=wl(),n=jr(),r=Xn(),o=ue(),i={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:d}})=>(0,e._)`{error: ${a}, tag: ${d}, tagValue: ${l}}`},code(a){const{gen:l,data:d,schema:c,parentSchema:h,it:g}=a,{oneOf:v}=h;if(!g.opts.discriminator)throw new Error("discriminator: requires discriminator option");const w=c.propertyName;if(typeof w!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const y=l.let("valid",!1),f=l.const("tag",(0,e._)`${d}${(0,e.getProperty)(w)}`);l.if((0,e._)`typeof ${f} == "string"`,()=>m(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:f,tagName:w})),a.ok(y);function m(){const b=p();l.if(!1);for(const $ in b)l.elseIf((0,e._)`${f} === ${$}`),l.assign(y,u(b[$]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:f,tagName:w}),l.endIf()}function u(b){const $=l.name("valid"),_=a.subschema({keyword:"oneOf",schemaProp:b},$);return a.mergeEvaluated(_,e.Name),$}function p(){var b;const $={},_=P(h);let C=!0;for(let k=0;k<v.length;k++){let T=v[k];if(T?.$ref&&!(0,o.schemaHasRulesButRef)(T,g.self.RULES)){const U=T.$ref;if(T=n.resolveRef.call(g.self,g.schemaEnv.root,g.baseId,U),T instanceof n.SchemaEnv&&(T=T.schema),T===void 0)throw new r.default(g.opts.uriResolver,g.baseId,U)}const K=(b=T?.properties)===null||b===void 0?void 0:b[w];if(typeof K!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${w}"`);C=C&&(_||P(T)),A(K,k)}if(!C)throw new Error(`discriminator: "${w}" must be required`);return $;function P({required:k}){return Array.isArray(k)&&k.includes(w)}function A(k,T){if(k.const)D(k.const,T);else if(k.enum)for(const K of k.enum)D(K,T);else throw new Error(`discriminator: "properties/${w}" must have "const" or "enum"`)}function D(k,T){if(typeof k!="string"||k in $)throw new Error(`discriminator: "${w}" values must be unique strings`);$[k]=T}}}};return kn.default=i,kn}const Cl="http://json-schema.org/draft-07/schema#",El="http://json-schema.org/draft-07/schema#",Pl="Core schema meta-schema",kl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ol=["object","boolean"],Rl={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Nl={$schema:Cl,$id:El,title:Pl,definitions:kl,type:Ol,properties:Rl,default:!0};var vo;function Il(){return vo||(vo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Ui(),r=_l(),o=Sl(),s=Nl,i=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(w=>this.addVocabulary(w)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const w=this.opts.$data?this.$dataMetaSchema(s,i):s;this.addMetaSchema(w,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var d=Qn();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var c=se();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var h=Ar();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var g=Xn();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})}(Kt,Kt.exports)),Kt.exports}var Ll=Il();const Al=Ci(Ll),jl="http://json-schema.org/draft-07/schema#",Tl="object",xl={title:{type:"string",description:"The title of the course."},description:{type:"string",description:"A short description of the course."},language:{type:"string",description:"The primary language of the course."},targetLanguage:{type:"string",description:"The language being taught in the course."},author:{type:"string",description:"The name of the course creator."},version:{type:"string",description:"Versioning for tracking updates to the course."},createdAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp when the course was created."},updatedAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp of the last course update."},tags:{type:"array",items:{type:"string"},description:"Keywords related to the course for searching and categorization."},lessons:{type:"array",items:{type:"object",properties:{title:{type:"string"},description:{type:"string"},cards:{type:"array",items:{oneOf:[{type:"object",properties:{class:{type:"string",enum:["vocab"]},qlang:{type:"string",enum:["default","target"]},vocab:{type:"object",additionalProperties:{type:"string"}}},required:["class","qlang","vocab"]},{type:"object",properties:{class:{type:"string",enum:["dynamic-vocab"]},qlang:{type:"string",enum:["default","target"]}},required:["class","qlang"]},{type:"object",properties:{class:{type:"string",enum:["multiple-choice"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answers:{type:"array",items:{type:"string"}},answer:{type:"string"}},required:["class","qlang","question","answers","answer"]},{type:"object",properties:{class:{type:"string",enum:["writing"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["writing-blocks"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"},options:{type:"array",items:{type:"string"}}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["blanks"]},qlang:{type:"string",enum:["default","target"]},alang:{type:"string",enum:["default","target"]},question:{type:"string"},words:{type:"array",items:{type:"object",minProperties:1,maxProperties:1,additionalProperties:{type:"boolean"}}}},required:["class","qlang","question","words"]}]}}},required:["title","cards"]}}},ql={$schema:jl,type:Tl,properties:xl};var Dl=V('<div class=modal-bg><dialog class=confirm-dialog><h3></h3><footer><button class="cancel-button utf8-icon-close"></button><button class="next-button utf8-icon-tick">');const Zo=jt(),Ml=e=>{const[t,n]=B(!1),[r,o]=B(()=>{}),[s,i]=B(""),a=(c,h)=>{i(c),o(()=>h),n(!0)},l=()=>{r()(),n(!1)},d=()=>{n(!1)};return L(Zo.Provider,{value:{showConfirm:a},get children(){return[W(()=>e.children),L(ce,{get when(){return t()},get children(){var c=Dl(),h=c.firstChild,g=h.firstChild,v=g.nextSibling,w=v.firstChild,y=w.nextSibling;return j(g,s),w.$$click=d,y.$$click=l,Z(f=>{var m=t()?"flex":"none",u=t();return m!==f.e&&((f.e=m)!=null?c.style.setProperty("display",m):c.style.removeProperty("display")),u!==f.t&&(h.open=f.t=u),f},{e:void 0,t:void 0}),c}})]}})},Yn=()=>{const e=Tt(Zo);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e};ie(["click"]);function Vl(){const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}function ea(){document.exitFullscreen&&document.exitFullscreen()}const zn=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},qt=async e=>{const t=ye(),n=t.getSourceLang(),r=t.getTargetLang();return e.alang&&e.alang===e.qlang?{q:n,a:r}:{q:e.qlang==="default"?n:r,a:e.alang??(e.qlang==="default"?r:n)}};var Fl=V("<button id=action-button aria-label=action-button>");const Dt=e=>{const{t}=$e(),[n,r]=B(!1);ge(()=>{e.isCorrect===null&&r(!1)});const o=()=>{n()?e.isCorrect===!1&&e.onReset?(r(!1),e.onReset()):e.onComplete():(e.onCheckAnswer(),r(!0))},s=i=>{e.isInputPresent&&e.isCorrect!==null&&(i.key==="Enter"||i.key===" "||i.key==="Spacebar")&&o()};return ka(()=>document.addEventListener("keydown",s)),Be(()=>document.removeEventListener("keydown",s)),(()=>{var i=Fl();return i.$$click=o,j(i,(()=>{var a=W(()=>e.isCorrect===null);return()=>a()?t("check"):W(()=>e.isCorrect===!0)()?t("correct_next"):t("incorrect_next")})()),Z(a=>{var l=e.isCorrect===null?"next-button":e.isCorrect===!0?"correct-next-button":"incorrect-next-button",d=!e.isInputPresent;return l!==a.e&&Pe(i,a.e=l),d!==a.t&&(i.disabled=a.t=d),a},{e:void 0,t:void 0}),i})()};ie(["click"]);let Rn;window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices(),Rn=speechSynthesis.getVoices().find(e=>e.lang.startsWith("en")&&e.localService)});const Ul={heb:{langTag:"en-GB",letters:{א:"aleph",ב:"bet",ג:"gimmel",ד:"dalet",ה:"he",ו:"vav",ז:"zayin",ח:"chet",ט:"tet",י:"yod",כ:"kaf",ך:"kaf",ל:"lamed",מ:"mem",ם:"mem",נ:"nun",ן:"nun",ס:"samekh",ע:"ayin",פ:"pe",ף:"pe",צ:"tsadi",ץ:"tsadi",ק:"qof",ר:"resh",ש:"shin",ת:"tav"}},ang:{langTag:"en-GB",letters:{æ:"ash",þ:"thorn",ð:"eth",ƿ:"wynn",Ƿ:"wynn",ȝ:"yogh"}}};function ta(e,t){if(!Rn)return;if(!e||!t){console.warn("Missing letter or language code");return}const n=Ul[t];if(!n){console.warn("Unsupported language code:",t);return}const r=e.toLocaleLowerCase(),o=n.letters[r];if(!o){console.warn(`Letter name not found for '${e}' in language '${t}'`);return}const s=new SpeechSynthesisUtterance(o);s.lang=n.langTag,s.rate=.75,Rn&&(s.voice=Rn),speechSynthesis.cancel(),speechSynthesis.speak(s),console.log(s)}var Kl=V('<section class="card multiple-choice"><h3 class=question></h3><div class=options>'),zl=V("<p>Loading..."),Hl=V("<h4>"),Wl=V("<button>");const Bl={class:"multiple-choice",question:"A Question",qlang:"default",answers:["An answer","Another answer"],answer:"An answer"},Gl=e=>{const{t}=$e(),[n]=At(()=>qt(e.card)),[r,o]=B(null),[s,i]=B(!1),[a,l]=B(null),[d,c]=B(zn(e.card.answers)),[h,g]=B(!1);ge(()=>{c(zn(e.card.answers)),i(!1),o(null),l(null),g(!1)});const v=f=>{h()||(o(f),f.length===1&&ta(f,n().a))},w=()=>{o(null),l(null),i(!1),g(!1)},y=()=>{s()?(o(null),l(null),i(!1),g(!1)):(g(!0),r()===e.card.answer?(l(!0),e.onCorrect()):(l(!1),e.onIncorrect()),i(!0))};return L(ce,{get when(){return n()},get fallback(){return zl()},get children(){return[(()=>{var f=Kl(),m=f.firstChild,u=m.nextSibling;return j(f,(()=>{var p=W(()=>n().q!==n().q);return()=>p()&&(()=>{var b=Hl();return j(b,()=>t("in_lang_how_do_you_say",{lang:t(n().a)})),Z(()=>Y(b,"lang",n().q)),b})()})(),m),j(m,()=>e.card.question),j(u,L(Je,{get each(){return d()},children:p=>(()=>{var b=Wl();return b.$$click=()=>v(p),j(b,p),Z($=>{var _=n().a,C=`multiple-choice-button ${r()===p?"selected":""} ${s()&&r()===p?a()?"correct":"incorrect":""}`,P=h()?!0:void 0,A=s()?a()?`${p} (${t("correct")})`:`${p} (${t("incorrect")})`:`${t("select")} ${p}`;return _!==$.e&&Y(b,"lang",$.e=_),C!==$.t&&Pe(b,$.t=C),P!==$.a&&(b.disabled=$.a=P),A!==$.o&&Y(b,"aria-label",$.o=A),$},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()})),Z(()=>Y(m,"lang",n().q)),f})(),L(Dt,{get isCorrect(){return a()},get isInputPresent(){return r()!==null},onCheckAnswer:y,get onComplete(){return e.onComplete},onReset:w})]}})};ie(["click"]);const na=jt(void 0),Jl=e=>L(na.Provider,{get value(){return{config:e.config,isLoading:!1}},get children(){return e.children}}),Mt=()=>{const e=Tt(na);if(!e)throw new Error("useConfigContext must be used within ConfigProvider");return e};var Ql=V('<section class="vocab-match card"><h3></h3><table><tbody>'),Xl=V("<footer class=vocab-match-footer>"),Yl=V("<p>Loading..."),Zl=V("<tr><td><button></button></td><td><button>");const ec={class:"vocab",qlang:"default",vocab:{word:"ord"}},ra=e=>{const{t}=$e(),[n]=At(()=>qt(e.card)),[r,o]=B([]),[s,i]=B([]),[a,l]=B(!1),[d,c]=B(null),[h,g]=B(null),{config:v}=Mt();ge(()=>{const m=Object.values(e.card.vocab);o(zn(m)),i(Object.keys(e.card.vocab).map((u,p)=>{const b=e.card.vocab[u];return{leftWord:u,rightWord:b,shuffledRightWord:r()[p],isLeftMatched:!1,isRightMatched:!1,isLeftDisabled:!1,isRightDisabled:!1,shakeIt:!1,shakeRight:!1}}))});const w=m=>{c(u=>u===m?null:m)},y=m=>{g(u=>u===m?null:m)},f=()=>{e.onCorrect(),e.onComplete()};return ge(()=>{if(!d()||!h())return;const m=d(),u=h();e.card.vocab[m]===u?(i(b=>b.map($=>{const _=$.leftWord===m&&$.rightWord===u,C=$.shuffledRightWord===u;return _||C?{...$,isLeftMatched:_?!0:$.isLeftMatched,isRightMatched:C?!0:$.isRightMatched,isLeftDisabled:_?!0:$.isLeftDisabled,isRightDisabled:C?!0:$.isRightDisabled}:$})),c(null),g(null)):(i(b=>b.map($=>$.leftWord===m||$.shuffledRightWord===u?{...$,shakeIt:$.leftWord===m,shakeRight:$.shuffledRightWord===u}:$)),setTimeout(()=>{i(b=>b.map($=>$.shakeIt||$.shakeRight?{...$,shakeIt:!1,shakeRight:!1}:$))},v.animationShakeMs),c(null),g(null))}),ge(()=>{s().every(m=>m.isLeftMatched&&m.isRightMatched)&&!a()&&l(!0)}),L(ce,{get when(){return n()},get fallback(){return Yl()},get children(){return[(()=>{var m=Ql(),u=m.firstChild,p=u.nextSibling,b=p.firstChild;return j(u,()=>e.card.question||t("match_the_words")),j(b,L(Je,{get each(){return s()},children:$=>(()=>{var _=Zl(),C=_.firstChild,P=C.firstChild,A=C.nextSibling,D=A.firstChild;return P.$$click=()=>w($.leftWord),j(P,()=>$.leftWord),D.$$click=()=>y($.shuffledRightWord),j(D,()=>$.shuffledRightWord),Z(k=>{var T=n().q,K=`vocab-match left-word ${$.isLeftMatched?"correct":""} ${d()===$.leftWord?"selected":""} ${$.shakeIt?"shake":""}`,U=$.isLeftDisabled,H=$.isLeftMatched?`${$.leftWord} (${t("matched")})`:`${t("select")} ${$.leftWord}`,te=n().a,me=`vocab-match right-word ${$.isRightMatched?"correct":""} ${h()===$.shuffledRightWord?"selected":""} ${$.shakeRight?"shake":""}`,ne=$.isRightDisabled,le=$.isRightMatched?`${$.shuffledRightWord}  (${t("matched")})`:`${t("select")} ${$.shuffledRightWord}`;return T!==k.e&&Y(P,"lang",k.e=T),K!==k.t&&Pe(P,k.t=K),U!==k.a&&(P.disabled=k.a=U),H!==k.o&&Y(P,"aria-label",k.o=H),te!==k.i&&Y(D,"lang",k.i=te),me!==k.n&&Pe(D,k.n=me),ne!==k.s&&(D.disabled=k.s=ne),le!==k.h&&Y(D,"aria-label",k.h=le),k},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),_})()})),Z(()=>Y(u,"lang",n().q)),m})(),L(ce,{get when(){return a()},get children(){var m=Xl();return j(m,L(Dt,{get isCorrect(){return a()===!1?null:!0},get isInputPresent(){return a()},onCheckAnswer:f,onComplete:f})),m}})]}})};ie(["click"]);var $o=V("<span>"),tc=V("<span class=provided-word>"),nc=V('<section class="card blanks-card"><h4></h4><h3 class=question></h3><div class=word-options>'),rc=V("<p>Loading..."),sc=V("<button>");const oc={class:"blanks",question:"Question",qlang:"default",words:[{answer:!0,other:!1}]},ac=e=>{const{t}=$e(),[n]=At(()=>qt(e.card)),[r,o]=B([]),[s,i]=B([]),[a,l]=B(null),[d,c]=B(!1),[h,g]=B(null);ge(()=>{o(zn(e.card.words.map(u=>Object.keys(u)[0])))});const v=u=>{s().includes(u)||(i([...s(),u]),c(!1))},w=()=>{const u=e.card.words.filter(b=>Object.values(b)[0]).map(b=>Object.keys(b)[0]);s().length===u.length&&s().every((b,$)=>b===u[$])?(c(!0),l(!0),e.onCorrect(s().length)):(c(!1),l(!1),e.onIncorrect(),g("incomplete"),setTimeout(()=>g(null),1e3))},y=()=>{a()&&e.onComplete()},f=()=>{i([]),l(null)},m=()=>{let u=0;const p=e.card.words.filter(b=>Object.values(b)[0]).map(b=>Object.keys(b)[0]);return e.card.question.split(/([\s\b])/).map(b=>{if(/^_{2,}/.test(b)){const $=s()[u],_=p[u];if(u++,d()){const C=$===_;return(()=>{var P=$o();return Pe(P,C?"blank-correct":"blank-incorrect"),j(P,$),P})()}else return(()=>{var C=$o();return Pe(C,$?"blank-filled":"blank"),j(C,$??"__"),C})()}else return(()=>{var $=tc();return j($,b),$})()})};return L(ce,{get when(){return n()},get fallback(){return rc()},get children(){return[(()=>{var u=nc(),p=u.firstChild,b=p.nextSibling,$=b.nextSibling;return j(p,()=>t("fill_in_the_blanks")),j(b,m),j($,()=>r().map(_=>{const C=s().includes(_),P=h()===_?"shake":"",A=C||a()===!0,D="word-option "+(C?"selected":"")+" "+P,k=C?`${_} (${t("selected")})`:`${t("select")} ${_}`;return(()=>{var T=sc();return T.$$click=()=>v(_),T.disabled=A,Pe(T,D),Y(T,"aria-label",k),j(T,_),Z(()=>Y(T,"lang",n().a)),T})()})),Z(_=>{var C=n().q,P=n().q==="heb"?"rtl":"ltr";return C!==_.e&&Y(b,"lang",_.e=C),P!==_.t&&Y(b,"dir",_.t=P),_},{e:void 0,t:void 0}),u})(),L(Dt,{get isCorrect(){return a()},get isInputPresent(){return s().length>0},onCheckAnswer:w,onComplete:y,onReset:f})]}})};ie(["click"]);var ic=V("<aside class=letter-buttons>"),lc=V("<button>");const cc=3,yr={ang:[{symbol:"æ",name:"Ash"},{symbol:"ø",name:"o-slash"},{symbol:"þ",name:"Thorn"},{symbol:"ð",name:"Eth"},{symbol:"ȝ",name:"Yogh"},{symbol:"œ",name:"o-e"},{symbol:"ſ",name:"long-s"},{symbol:"ƿ",name:"wynn"},{symbol:"ā",name:"long-a"},{symbol:"ē",name:"long-e"},{symbol:"ī",name:"long-i"},{symbol:"ō",name:"long-o"},{symbol:"ū",name:"long-u"},{symbol:"ȳ",name:"long-y"}],heb:[{symbol:"א",name:"Alef"},{symbol:"ב",name:"Bet"},{symbol:"ג",name:"Gimel"},{symbol:"ד",name:"Dalet"},{symbol:"ה",name:"He"},{symbol:"ו",name:"Vav"},{symbol:"ז",name:"Zayin"},{symbol:"ח",name:"Chet"},{symbol:"ט",name:"Tet"},{symbol:"י",name:"Yod"},{symbol:"כ",name:"Kaf"},{symbol:"ך",name:"Final Kaf"},{symbol:"ל",name:"Lamed"},{symbol:"מ",name:"Mem"},{symbol:"ם",name:"Final Mem"},{symbol:"נ",name:"Nun"},{symbol:"ן",name:"Final Nun"},{symbol:"ס",name:"Samekh"},{symbol:"ע",name:"Ayin"},{symbol:"פ",name:"Pe"},{symbol:"ף",name:"Final Pe"},{symbol:"צ",name:"Tsadi"},{symbol:"ץ",name:"Final Tsadi"},{symbol:"ק",name:"Qof"},{symbol:"ר",name:"Resh"},{symbol:"ש",name:"Shin"},{symbol:"ת",name:"Tav"}],hun:[{symbol:"á",name:"a-acute"},{symbol:"é",name:"e-acute"},{symbol:"í",name:"i-acute"},{symbol:"ó",name:"o-acute"},{symbol:"ö",name:"o-umlaut"},{symbol:"ő",name:"o-double-acute"},{symbol:"ú",name:"u-acute"},{symbol:"ü",name:"u-umlaut"},{symbol:"ű",name:"u-double-acute"}]},uc=e=>{if(!yr[e.lang])return console.warn(`No buttons exist for the supplied language, "${e.lang}".`),"";if(e.text.length===0)return"";let t=yr[e.lang].filter(n=>e.text.includes(n.symbol));if(t.length<3){const n=yr[e.lang].filter(r=>!t.some(o=>o.symbol===r.symbol));t=[...t,...n.slice(0,cc-t.length)]}return(()=>{var n=ic();return j(n,L(Je,{each:t,children:r=>(()=>{var o=lc();return o.$$click=()=>e.onSelect(r.symbol),j(o,()=>r.symbol),Z(s=>{var i=r.name,a=r.name;return i!==s.e&&Y(o,"aria-label",s.e=i),a!==s.t&&Y(o,"title",s.t=a),s},{e:void 0,t:void 0}),o})()})),n})()};ie(["click"]);const Pt=e=>e.trim().toLocaleLowerCase().replace(/[^\p{L}\p{N}\s]+/gu,"").replace(/\s+/g," ");var dc=V('<section class="card writing-card"><h3 class=question></h3><div class=input><textarea id=writing-input class=answer autofocus>'),fc=V("<p>Loading..."),hc=V("<h4>");const mc={class:"writing",qlang:"default",question:"Question",answer:"Answer"},gc=e=>{const[t]=At(()=>qt(e.card)),{t:n}=$e(),[r,o]=B(""),[s,i]=B(null);let a=null;const l=W(()=>Pt(e.card.answer)),d=v=>{i(null),o(v)},c=v=>{if(!a)return;ta(v,t().a);const w=a,y=w.selectionStart??r().length,f=w.selectionEnd??r().length,m=r().slice(0,y)+v+r().slice(f);d(m),queueMicrotask(()=>{w.selectionStart=w.selectionEnd=y+v.length,w.focus()})},h=()=>{Pt(r())===l()?(i(!0),e.onCorrect()):(i(!1),e.onIncorrect())},g=()=>{i(null),d(""),e.onComplete()};return L(ce,{get when(){return t()?.a},get fallback(){return fc()},get children(){return[(()=>{var v=dc(),w=v.firstChild,y=w.nextSibling,f=y.firstChild;return j(v,(()=>{var m=W(()=>t().q!==t().a);return()=>m()&&(()=>{var u=hc();return j(u,()=>n("translate_to_lang",{lang:n(t().a)})),u})()})(),w),j(w,()=>e.card.question),f.$$input=m=>d(m.target.value),ot(m=>a=m,f),j(y,L(uc,{get lang(){return t().a},onSelect:c,get text(){return e.card.answer}}),null),Z(m=>{var u=t().q,p=n("type_in")+" "+n(t().a)+"...",b=t().a,$=n("enter_answer");return u!==m.e&&Y(w,"lang",m.e=u),p!==m.t&&Y(f,"placeholder",m.t=p),b!==m.a&&Y(f,"lang",m.a=b),$!==m.o&&Y(f,"aria-label",m.o=$),m},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>f.value=r()),v})(),L(Dt,{get isCorrect(){return s()},get isInputPresent(){return r().length>0},onCheckAnswer:h,onComplete:g})]}})};ie(["input"]);var pc=V('<section class="writing-blocks-card card"><h3 class=question></h3><div class=selected-words></div><hr><div class=options>'),yc=V("<p>Loading..."),vc=V("<button class=selected-word>"),$c=V("<button class=option-button>");const bc={class:"writing-blocks",qlang:"default",question:"Question",answer:"Answer",options:["Answer","Another"]},_c=e=>{let t="";const{t:n}=$e(),[r]=At(()=>qt(e.card)),[o,s]=B(null),[i,a]=B([]),l=W(()=>Pt(e.card.answer)),d=g=>{s(null),a(v=>[...v,g])},c=g=>{s(null),a(v=>v.filter((w,y)=>y!==g))},h=()=>{console.log("WritingBlocks handleCheckAnswer");const g=Pt(i().join(" "));console.log(`WritingBlocks normalizedUserInput = ${g} vs ${l()}`),g===l()?(console.log("WritingBlocks CORRECT"),s(!0),e.onCorrect()):(console.log("WritingBlocks INCORRECT"),s(!1),e.onIncorrect())};return ge(()=>{a([]),s(null)}),ge(()=>{const g=Pt(i().join(" "));o()!==null&&g!==t&&(s(null),a([]))}),L(ce,{get when(){return r()},get fallback(){return yc()},get children(){return[(()=>{var g=pc(),v=g.firstChild,w=v.nextSibling,y=w.nextSibling,f=y.nextSibling;return j(v,()=>e.card.question),j(w,L(Je,{get each(){return i()},children:(m,u)=>(()=>{var p=vc();return p.$$click=()=>c(u()),Y(p,"aria-label",`Remove word: ${m}`),j(p,m),p})()})),j(f,L(Je,{get each(){return e.card.options},children:m=>(()=>{var u=$c();return u.$$click=()=>d(m),j(u,m),Z(p=>{var b=i().includes(m),$=i().includes(m)?`${m} (${n("selected")})`:`${n("select")} ${m}`;return b!==p.e&&(u.disabled=p.e=b),$!==p.t&&Y(u,"aria-label",p.t=$),p},{e:void 0,t:void 0}),u})()})),Z(()=>Y(v,"lang",r().q)),g})(),L(Dt,{get isCorrect(){return o()},get isInputPresent(){return i().length>0},onCheckAnswer:h,get onComplete(){return e.onComplete}})]}})};ie(["click"]);const wc={class:"dynamic-vocab",question:"Question",qlang:"default"},Sc=e=>{const t=W(()=>{const r={};for(const o of e.lesson.cards.filter(s=>["vocab","blanks"].includes(s.class)))if(o.class==="blanks"&&o.qlang===e.card.qlang)o.words.forEach(s=>{const i=Object.keys(s)[0],a=s[i];r[i]=a?i:""});else if(o.class==="vocab")if(o.qlang===e.card.qlang)Object.assign(r,o.vocab);else{const s=Object.fromEntries(Object.entries(o.vocab).map(([i,a])=>[a,i]));Object.assign(r,s)}return r}),n={class:"vocab",qlang:e.card.qlang,vocab:t()};return L(ra,{card:n,get onCorrect(){return e.onCorrect},get onIncorrect(){return e.onIncorrect},get onComplete(){return e.onComplete}})},Cc={blanks:oc,"dynamic-vocab":wc,"multiple-choice":Bl,vocab:ec,"writing-blocks":bc,writing:mc},Ec=e=>structuredClone(Cc[e]),Pc=["blanks","dynamic-vocab","multiple-choice","vocab","writing-blocks","writing"];function kc(e){return typeof e=="object"&&e!==null&&"answer"in e}var Oc=V("<p>"),Rc=V("<div>"),Nc=V("<p>Unknown lesson card...");function sa(e){const{t}=$e();return(()=>{var n=Rc();return Nt(n,"dblclick",e.ondblclick),j(n,L(Ua,{get fallback(){return Nc()},get children(){return[L(Ze,{get when(){return!e.card},get children(){var r=Oc();return j(r,()=>t("lesson_complete")),r}}),L(Ze,{get when(){return e.card?.class==="dynamic-vocab"},get children(){return L(Sc,{get card(){return e.card},get lesson(){return e.lesson},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),L(Ze,{get when(){return e.card?.class==="writing"},get children(){return L(gc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),L(Ze,{get when(){return e.card?.class==="writing-blocks"},get children(){return L(_c,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),L(Ze,{get when(){return e.card?.class==="multiple-choice"},get children(){return L(Gl,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),L(Ze,{get when(){return e.card?.class==="vocab"},get children(){return L(ra,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),L(Ze,{get when(){return e.card?.class==="blanks"},get children(){return L(ac,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}})]}})),n})()}ie(["dblclick"]);var Ic=V("<progress class=leeson-progress-bar>");function Lc(e){const{t}=$e();return(()=>{var n=Ic();return Z(r=>{var o=e.max,s=t("lesson_progress"),i=e.title;return o!==r.e&&Y(n,"max",r.e=o),s!==r.t&&Y(n,"aria-label",r.t=s),i!==r.a&&Y(n,"title",r.a=i),r},{e:void 0,t:void 0,a:void 0}),Z(()=>n.value=e.value),n})()}var Ac=V("<article class=lesson><h2><em></em><button class=close-button>");const bo={title:"A Lesson",description:"A lesson description",cards:[]},jc=e=>{const{t}=$e(),{showConfirm:n}=Yn(),[r,o]=B([]),s=W(()=>(r()&&r()[0])??null);let i=null;ge(()=>{e.lesson&&e.lesson.cards&&o(e.lesson.cards)});const a=()=>{n(t("confirm_leave_lesson"),()=>{ea(),e.onCancel()})},l=v=>{v.key==="Escape"&&a()},d=v=>{const w=t("confirm_leave_app");return v.preventDefault(),w};window.addEventListener("keyup",l),window.addEventListener("beforeunload",d),Be(()=>{window.removeEventListener("keyup",l),window.removeEventListener("beforeunload",d)});const c=()=>{if(i){if(o(v=>v.slice(1)),r().length===0){e.onLessonComplete();return}}else o(v=>[...v.slice(1),v[0]])},h=()=>{i=!1;const v=e.lesson.cards.indexOf(r()[0]);e.onAnswer(v,"bad_answer_goes_here")},g=()=>{i=!0;const v=e.lesson.cards.indexOf(r()[0]);e.onAnswer(v)};return!e.lesson||!e.lesson.cards?"Loading lesson cards...":(()=>{var v=Ac(),w=v.firstChild,y=w.firstChild,f=y.nextSibling;return j(y,()=>e.lesson.title),f.$$click=a,j(v,L(Lc,{get value(){return W(()=>r().length===0)()?1:e.lesson.cards.length-r().length+1},get max(){return e.lesson.cards.length},get title(){return`${e.lesson.cards.length-r().length+1} / ${e.lesson.cards.length}`}}),null),j(v,L(sa,{get card(){return s()},get lesson(){return e.lesson},onComplete:c,onCorrect:g,onIncorrect:h}),null),Z(()=>Y(f,"aria-label",t("cancel_lesson"))),v})()};ie(["click"]);const On="oe_",ht={CURRENT_LESSON_INDEX:e=>`${On}current_lesson_index_${e}`,ANSWERS:e=>`${On}answers_${e}`,LESSONS:e=>`${On}course_${e}`,CURRENT_COURSE_INDEX:`${On}course`,STORE_NAME:"oe-courses",EDITING_MODE:"oe-editing"},Tc=()=>Object.assign({"../../lessons/alefbet.json":()=>rt(()=>import("./alefbet-CHYTnS2p.js"),[]),"../../lessons/lessons.json":()=>rt(()=>import("./lessons-BgGmDxE0.js"),[]),"../../lessons/lessons.old.json":()=>rt(()=>import("./lessons.old-Bh74MdUW.js"),[]),"../../lessons/test.json":()=>rt(()=>import("./test-IGdgOCZR.js"),[]),"../../lessons/uk-constitution.json":()=>rt(()=>import("./uk-constitution-2T_E9-3M.js"),[])}),xc={title:"New Course",description:"A description",language:"en",targetLanguage:"en",level:"level",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[]},qc=[];let kt;const Nn=e=>[...e.courses.map(t=>t.title)],Dc=async()=>(kt||(kt=await Mc()),kt),Mc=async()=>{const[e,t]=Wo(Ho({courseMetadata:null,lessons:[],loading:!1}),{name:ht.STORE_NAME,storage:localStorage});let n=null;const r=()=>(n||(n=qo()),n),o=async k=>{const T=await r();if(isNaN(k)||k<0||k>=T.courses.length)throw new Error(`Invalid course index for deletion: ${k}`);$(k),await d(0)},s=({lessons:k,courseMetadata:T})=>{t({lessons:k,courseMetadata:T})},i=k=>{const K=new Al().compile(ql);if(!K(k))throw console.error(JSON.stringify(K.errors,null,4)),console.debug("courseData",k),new TypeError("Invalid course data",k)},a=async k=>{const T=`../../lessons/${k}.json`;console.info(`Loading course "${k}" from "${T}"`);const K=await Tc();if(!K[T])throw new Error("Lesson not found: "+T);const H=(await K[T]()).default;return console.info(`Loaded course ${k} from ${T}`),H},l=k=>{console.log("saveCourseToStorage"),t("loading",!0);try{const T=JSON.parse(k);i(T);const{lessons:K,...U}=T;t("lessons",K),t("courseMetadata",U)}catch(T){console.error("Invalid course file:",T)}finally{t("loading",!1)}},d=async k=>{if(console.info("loadCourseFromFile enter with",k),isNaN(k)){console.error("Course index is not a number",k);return}const T=await r();if(k===T.courses.length){console.log("loadCourseFromFile Shall use the pre-loaded course from storage");return}if(k<0)throw console.warn("loadCourseFromFile Invalid course index:",k),new Error("loadCourseFromFile: Negative course index? "+k);t("loading",!0);try{let K;const{fileBasename:U}=T.courses[k];K=await a(U),i(K);const{lessons:H,...te}=K;s({lessons:H,courseMetadata:te}),t({loading:!1}),console.info("loadCourseFromFile OK")}catch(K){console.error("loadCourseFromFile Error loading lessons:",K),t("loading",!1)}console.info("loadCourseFromFile leave")},c=W(()=>e.lessons||[]),h=async k=>{if(!e.lessons||e.lessons.length===0){if(!Number.isFinite(k))throw new Error("No lessons loaded and no courseIdx supplied?");await d(k),console.debug("getCourseData loaded course",k)}return{...e.courseMetadata,lessons:e.lessons}},g=()=>e.courseMetadata?.language||"",v=()=>e.courseMetadata?.targetLanguage||"",w=k=>t("lessons",k),y=W(()=>e.lessons&&e.lessons.length),f=k=>{t("lessons",T=>{const K={...bo};if(T){if(k===void 0||k>T.length)return[...T,K];if(k<=0)return[K,...T]}else return[K];return[...T.slice(0,k),{...bo},...T.slice(k)]})},m=k=>{console.trace("initNewCourse enter");const T=Nn(k).length;return t({loading:!0}),s({lessons:[...qc],courseMetadata:{...xc}}),t({loading:!1}),console.log("initNewCourse leave with",T),T},u=()=>e.lessons.map((k,T)=>({title:k.title,index:T})),p=(k,T,K)=>{console.debug("Enter saveCard");const U=e.lessons.map((H,te)=>te===T?{...H,cards:H.cards.map((me,ne)=>ne===K?k:me)}:H);w(U),console.log("saved card in",ht.STORE_NAME)},b=(k,T)=>{const K=e.lessons.map((U,H)=>H===k?{...U,cards:U.cards.filter((te,me)=>me!==T)}:U);w(K)},$=k=>{console.log("reset course",k);const T=k;localStorage.removeItem(ht.CURRENT_LESSON_INDEX(T)),localStorage.removeItem(ht.CURRENT_COURSE_INDEX),localStorage.removeItem(ht.ANSWERS(T)),localStorage.removeItem(ht.STORE_NAME),t({courseMetadata:null,lessons:[],loading:!1})},_=k=>t("courseMetadata","title",k),C=()=>e.courseMetadata?.title??"",P=k=>{t("courseMetadata","description",k),console.log("set courseMetadata description",k)},A=()=>(console.log("get courseMetadata description",e.courseMetadata?.description),e.courseMetadata?.description??""),D=W(()=>e.lessons.reduce((k,T)=>k+(T.cards?.length??0),0));return{store:e,setTitle:_,getTitle:C,setDescription:P,getDescription:A,initNewCourse:m,saveCourseToStorage:l,loadCourseFromFile:d,setCourse:s,deleteCourse:o,saveCard:p,deleteCard:b,setLessons:w,getLessons:c,getCourseData:h,getTargetLang:v,getSourceLang:g,getTotalLessonsCount:y,getTotalQuestionsCount:D,addLesson:f,lessonTitles2Indicies:u,reset:$,assertValidCourseData:i}},ye=()=>{if(!kt)throw new Error("Course store not initialized. Call useCourseStore() first.");return kt};function oa(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const i={to:o,options:s,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const a of e)a.listener({...i,from:a.location,retry:l=>{l&&(n=!0),a.navigate(o,{...s,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:r}}let Rr;function xr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Rr=window.history.state._depth}xr();function Vc(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Fc(e,t){let n=!1;return()=>{const r=Rr;xr();const o=r==null?null:Rr-r;if(n){n=!1;return}o&&t(o)?(n=!0,window.history.go(-o)):e()}}const Uc=/^(?:[a-z0-9]+:)?\/\//i,Kc=/^\/+|(\/)\/+$/g,aa="http://sr";function Ot(e,t=!1){const n=e.replace(Kc,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function In(e,t,n){if(Uc.test(t))return;const r=Ot(e),o=n&&Ot(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+Ot(t,!s)}function zc(e,t){if(e==null)throw new Error(t);return e}function Hc(e,t){return Ot(e).replace(/\/*(\*.*)?$/g,"")+Ot(t)}function ia(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Wc(e,t,n){const[r,o]=e.split("/*",2),s=r.split("/").filter(Boolean),i=s.length;return a=>{const l=a.split("/").filter(Boolean),d=l.length-i;if(d<0||d>0&&o===void 0&&!t)return null;const c={path:i?"":"/",params:{}},h=g=>n===void 0?void 0:n[g];for(let g=0;g<i;g++){const v=s[g],w=v[0]===":",y=w?l[g]:l[g].toLowerCase(),f=w?v.slice(1):v.toLowerCase();if(w&&vr(y,h(f)))c.params[f]=y;else if(w||!vr(y,f))return null;c.path+=`/${y}`}if(o){const g=d?l.slice(-d).join("/"):"";if(vr(g,h(o)))c.params[o]=g;else return null}return c}}function vr(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Bc(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function la(e){const t=new Map,n=Ro();return new Proxy({},{get(r,o){return t.has(o)||No(n,()=>t.set(o,W(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Gc(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(o):s instanceof Array?(n.delete(o),s.forEach(i=>{n.append(o,String(i))})):n.set(o,String(s))});const r=n.toString();return r?`?${r}`:""}function ca(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return ca(r).reduce((s,i)=>[...s,...o.map(a=>a+i)],[])}const Jc=100,ua=jt(),da=jt(),qr=()=>zc(Tt(ua),"<A> and 'use' router primitives can be only used inside a Route."),Se=()=>qr().navigatorFactory(),Dr=()=>qr().location,Ae=()=>qr().params,Qc=()=>{const e=Dr(),t=Se(),n=(r,o)=>{const s=ve(()=>Gc(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...o})};return[e.query,n]};function Xc(e,t=""){const{component:n,preload:r,load:o,children:s,info:i}=e,a=!s||Array.isArray(s)&&!s.length,l={key:e,component:n,preload:r||o,info:i};return fa(e.path).reduce((d,c)=>{for(const h of ca(c)){const g=Hc(t,h);let v=a?g:g.split("/*",1)[0];v=v.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),d.push({...l,originalPath:c,pattern:v,matcher:Wc(v,!a,e.matchFilters)})}return d},[])}function Yc(e,t=0){return{routes:e,score:Bc(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],i=s.matcher(n);if(!i)return null;r.unshift({...i,route:s})}return r}}}function fa(e){return Array.isArray(e)?e:[e]}function ha(e,t="",n=[],r=[]){const o=fa(e);for(let s=0,i=o.length;s<i;s++){const a=o[s];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Xc(a,t);for(const d of l){n.push(d);const c=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!c)ha(a.children,d.pattern,n,r);else{const h=Yc([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((s,i)=>i.score-s.score)}function $r(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function Zc(e,t,n){const r=new URL(aa),o=W(c=>{const h=e();try{return new URL(h,r)}catch{return console.error(`Invalid path ${h}`),c}},r,{equals:(c,h)=>c.href===h.href}),s=W(()=>o().pathname),i=W(()=>o().search,!0),a=W(()=>o().hash),l=()=>"",d=Nr(i,()=>ia(o()));return{get pathname(){return s()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return l()},query:n?n(d):la(d)}}let st;function eu(){return st}function tu(e,t,n,r={}){const{signal:[o,s],utils:i={}}=e,a=i.parsePath||(U=>U),l=i.renderPath||(U=>U),d=i.beforeLeave||oa(),c=In("",r.base||"");if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!o().value&&s({value:c,replace:!0,scroll:!1});const[h,g]=B(!1);let v;const w=(U,H)=>{H.value===y()&&H.state===m()||(v===void 0&&g(!0),st=U,v=H,Oa(()=>{v===H&&(f(v.value),u(v.state),$[1](te=>te.filter(me=>me.pending)))}).finally(()=>{v===H&&Oo(()=>{st=void 0,U==="navigate"&&T(v),g(!1),v=void 0})}))},[y,f]=B(o().value),[m,u]=B(o().state),p=Zc(y,m,i.queryWrapper),b=[],$=B([]),_=W(()=>typeof r.transformUrl=="function"?$r(t(),r.transformUrl(p.pathname)):$r(t(),p.pathname)),C=()=>{const U=_(),H={};for(let te=0;te<U.length;te++)Object.assign(H,U[te].params);return H},P=i.paramsWrapper?i.paramsWrapper(C,t):la(C),A={pattern:c,path:()=>c,outlet:()=>null,resolvePath(U){return In(c,U)}};return Z(Nr(o,U=>w("native",U),{defer:!0})),{base:A,location:p,params:P,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:k,matches:_,beforeLeave:d,preloadRoute:K,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:$};function D(U,H,te){ve(()=>{if(typeof H=="number"){H&&(i.go?i.go(H):console.warn("Router integration does not support relative routing"));return}const me=!H||H[0]==="?",{replace:ne,resolve:le,scroll:F,state:R}={replace:!1,resolve:!me,scroll:!0,...te},q=le?U.resolvePath(H):In(me&&p.pathname||"",H);if(q===void 0)throw new Error(`Path '${H}' is not a routable path`);if(b.length>=Jc)throw new Error("Too many redirects");const I=y();(q!==I||R!==m())&&(Ba||d.confirm(q,te)&&(b.push({value:I,replace:ne,scroll:F,state:m()}),w("navigate",{value:q,state:R})))})}function k(U){return U=U||Tt(da)||A,(H,te)=>D(U,H,te)}function T(U){const H=b[0];H&&(s({...U,replace:H.replace,scroll:H.scroll}),b.length=0)}function K(U,H){const te=$r(t(),U.pathname),me=st;st="preload";for(let ne in te){const{route:le,params:F}=te[ne];le.component&&le.component.preload&&le.component.preload();const{preload:R}=le;H&&R&&No(n(),()=>R({params:F,location:{pathname:U.pathname,search:U.search,hash:U.hash,query:ia(U),state:null,key:""},intent:"preload"}))}st=me}}function nu(e,t,n,r){const{base:o,location:s,params:i}=e,{pattern:a,component:l,preload:d}=r().route,c=W(()=>r().path);l&&l.preload&&l.preload();const h=d?d({params:i,location:s,intent:st||"initial"}):void 0;return{parent:t,pattern:a,path:c,outlet:()=>l?L(l,{params:i,location:s,data:h,get children(){return n()}}):n(),resolvePath(v){return In(o.path(),v,c())}}}const ru=e=>t=>{const{base:n}=t,r=vt(()=>t.children),o=W(()=>ha(r(),t.base||""));let s;const i=tu(e,o,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),L(ua.Provider,{value:i,get children(){return L(su,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[W(()=>(s=Ro())&&null),L(ou,{routerState:i,get branches(){return o()}})]}})}})};function su(e){const t=e.routerState.location,n=e.routerState.params,r=W(()=>e.preload&&ve(()=>{e.preload({params:n,location:t,intent:eu()||"initial"})}));return L(ce,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>L(o,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function ou(e){const t=[];let n;const r=W(Nr(e.routerState.matches,(o,s,i)=>{let a=s&&o.length===s.length;const l=[];for(let d=0,c=o.length;d<c;d++){const h=s&&s[d],g=o[d];i&&h&&g.route.key===h.route.key?l[d]=i[d]:(a=!1,t[d]&&t[d](),gt(v=>{t[d]=v,l[d]=nu(e.routerState,l[d-1]||e.routerState.base,_o(()=>r()[d+1]),()=>e.routerState.matches()[d])}))}return t.splice(o.length).forEach(d=>d()),i&&a?i:(n=l[0],l)}));return _o(()=>r()&&n)()}const _o=e=>()=>L(ce,{get when(){return e()},keyed:!0,children:t=>L(da.Provider,{value:t,get children(){return t.outlet()}})}),Re=e=>{const t=vt(()=>e.children);return Ma(e,{get children(){return t()}})};function au([e,t],n,r){return[e,r?o=>t(r(o)):t]}function iu(e){let t=!1;const n=o=>typeof o=="string"?{value:o}:o,r=au(B(n(e.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&e.set(o),o));return e.init&&Be(e.init((o=e.get())=>{t=!0,r[1](n(o)),t=!1})),ru({signal:r,create:e.create,utils:e.utils})}function lu(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function cu(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const uu=new Map;function du(e=!0,t=!1,n="/_server",r){return o=>{const s=o.base.path(),i=o.navigatorFactory(o.base);let a,l;function d(y){return y.namespaceURI==="http://www.w3.org/2000/svg"}function c(y){if(y.defaultPrevented||y.button!==0||y.metaKey||y.altKey||y.ctrlKey||y.shiftKey)return;const f=y.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const m=d(f),u=m?f.href.baseVal:f.href;if((m?f.target.baseVal:f.target)||!u&&!f.hasAttribute("state"))return;const b=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||b&&b.includes("external"))return;const $=m?new URL(u,document.baseURI):new URL(u);if(!($.origin!==window.location.origin||s&&$.pathname&&!$.pathname.toLowerCase().startsWith(s.toLowerCase())))return[f,$]}function h(y){const f=c(y);if(!f)return;const[m,u]=f,p=o.parsePath(u.pathname+u.search+u.hash),b=m.getAttribute("state");y.preventDefault(),i(p,{resolve:!1,replace:m.hasAttribute("replace"),scroll:!m.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function g(y){const f=c(y);if(!f)return;const[m,u]=f;o.preloadRoute(u,m.getAttribute("preload")!=="false")}function v(y){clearTimeout(a);const f=c(y);if(!f)return l=null;const[m,u]=f;l!==m&&(a=setTimeout(()=>{o.preloadRoute(u,m.getAttribute("preload")!=="false"),l=m},20))}function w(y){if(y.defaultPrevented)return;let f=y.submitter&&y.submitter.hasAttribute("formaction")?y.submitter.getAttribute("formaction"):y.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const u=new URL(f,aa);if(f=o.parsePath(u.pathname+u.search),!f.startsWith(n))return}if(y.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const m=uu.get(f);if(m){y.preventDefault();const u=new FormData(y.target,y.submitter);m.call({r:o,f:y.target},y.target.enctype==="multipart/form-data"?u:new URLSearchParams(u))}}ie(["click","submit"]),document.addEventListener("click",h),e&&(document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",w),Be(()=>{document.removeEventListener("click",h),e&&(document.removeEventListener("mousemove",v),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",w)})}}function fu(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function hu(e){const t=()=>window.location.hash.slice(1),n=oa();return iu({get:t,set({value:r,replace:o,scroll:s,state:i}){o?window.history.replaceState(Vc(i),"","#"+r):window.history.pushState(i,"","#"+r);const a=r.indexOf("#"),l=a>=0?r.slice(a+1):"";cu(l,s),xr()},init:r=>lu(window,"hashchange",Fc(r,o=>!n.confirm(o&&o<0?o:t()))),create:du(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:fu,beforeLeave:n}})(e)}function br(e){const t=Se(),n=Dr(),{href:r,state:o}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:o}),null}var mu=V("<article id=main>");const gu=e=>{const t=vt(()=>e.children);return(()=>{var n=mu();return j(n,t),n})()},Ye=e=>{const t=`answers-store-${e}`,[n,r]=Wo(Ho({currentLessonIdx:-1,answers:{}}),{name:t,storage:localStorage}),o=$=>(n.answers[$]||r("answers",$,[]),n.answers[$]),s=($,_)=>{const C=o($);if(!C[_])for(let P=C.length;P<=_;P++)r("answers",$,P,{wrongAnswers:[],correct:!1});return n.answers[$][_]},i=$=>r("currentLessonIdx",$),a=()=>n.currentLessonIdx===-1?0:n.currentLessonIdx,l=()=>r("currentLessonIdx",a()+1),d=($,_,C="")=>{console.log("calling lessonsStore.saveAnswer for",$),o($),s($,_),r("answers",$,_,P=>C===""?{...P,correct:!0}:{...P,wrongAnswers:[...P.wrongAnswers,C]})},c=$=>n.answers[$]??[],h=$=>{r("answers",$,[])},g=()=>{r("answers",{}),r("currentLessonIdx",-1)},v=()=>Object.keys(n.answers).length,w=()=>Object.values(n.answers).reduce(($,_)=>$+_.length,0),y=()=>Object.values(n.answers).reduce(($,_)=>$+_.filter(C=>C.correct).length,0),f=()=>Object.values(n.answers).reduce(($,_)=>$+_.reduce((C,P)=>C+P.wrongAnswers.length,0),0),m=$=>c($).length,u=$=>c($).filter(_=>_.correct).length;return{getCurrentLessonIdx:a,setCurrentLessonIdx:i,incrementCurrentLessonIdx:l,saveAnswer:d,getLessonAnswers:c,resetLesson:h,resetAllLessons:g,getTotalTakenLessons:v,getTotalQuestionsAnswered:w,getTotalCorrectAnswers:y,getTotalIncorrectAnswers:f,getLessonQuestionsAnsweredCorrectly:u,getLessonQuestionCount:m,getTotalWrongAttemptsInLesson:$=>c($).reduce((_,C)=>_+C.wrongAnswers.length,0),isLessonDone:$=>{const _=m($);return _>0&&u($)===_}}};var pu=V("<button class=large-icon-button><i class=utf8-icon-reset>");const ma=e=>{const{t}=$e(),n=Se(),{showConfirm:r}=Yn(),o=ye(),s=Ye(e.courseIdx),i=W(()=>s.getTotalQuestionsAnswered()),a=()=>{o.reset(e.courseIdx),s.resetAllLessons(),n("/course/"+e.courseIdx)};return i()===0?"":(()=>{var l=pu(),d=l.firstChild;return l.$$click=()=>r(t("lose_progress",{totalAnswered:i()}),a),Z(()=>Y(d,"title",t("reset_course"))),l})()};ie(["click"]);var yu=V("<ol>"),vu=V('<section class="card lesson-list">'),$u=V("<div>Loading lesson list..."),bu=V("<p class=card>No lessons are available for this course."),_u=V("<li><button>");const ga=e=>{const t=ye(),n=W(()=>Ye(e.courseIndex));return L(ce,{when:t,get fallback(){return $u()},get children(){var r=vu();return j(r,()=>e.children,null),j(r,L(ce,{get when(){return(t.getLessons()?.length??0)>0},get fallback(){return bu()},get children(){var o=yu();return j(o,L(Je,{get each(){return t.getLessons()??[]},children:(s,i)=>{const a=i(),l=n().getCurrentLessonIdx(),d=n().isLessonDone(a),c=a===l+1&&!d,h=a>l&&!n().isLessonDone(a)&&!c;return(()=>{var g=_u(),v=g.firstChild;return v.$$click=()=>e.onLessonSelected(a),v.classList.toggle("current",!!c),v.classList.toggle("todo",!!h),j(v,()=>s.title),Z(w=>{var y=!!n().isLessonDone(a),f=s.description||"";return y!==w.e&&v.classList.toggle("completed",w.e=y),f!==w.t&&Y(v,"title",w.t=f),w},{e:void 0,t:void 0}),g})()}})),o}}),null),r}})};ie(["click"]);var wu=V('<section class="completed-all-lessons card"><h2></h2><div class=stats>');const Su=e=>{const{t}=$e(),n=Se(),r=Ae(),o=s=>{n(`/course/${r.courseIdx}/${s}/intro`)};return(()=>{var s=wu(),i=s.firstChild,a=i.nextSibling;return j(i,()=>t("all_lessons_done")),j(s,L(ga,{onLessonSelected:o,get courseIndex(){return Number(r.courseIdx)}}),a),j(s,()=>e.children&&e.children,null),j(s,L(ma,{get courseIdx(){return Number(r.courseIdx||-1)}}),null),s})()};var Cu=V("<aside class=course-score-progress-component><progress class=course-score-progress-bar>/");const Eu=e=>{const{t}=$e(),r=ye().getTotalQuestionsCount();return(()=>{var o=Cu(),s=o.firstChild,i=s.firstChild;return Y(s,"max",r),j(s,()=>e.correct,i),j(s,r,null),Z(()=>Y(s,"aria-label",t("course_score_so_far"))),Z(()=>s.value=e.correct),o})()};var Pu=V('<section class="stats-component card"><h2></h2><table class=horizontal-stats><thead><tr><th class=correct-answers></th><th class=incorrect-answers></th><th class=questions-answered></th></tr></thead><tbody><tr><td></td><td></td><td>');const ku=e=>{const{t}=$e(),n=W(()=>Ye(e.courseIdx));if(!n()||!n().getTotalQuestionsAnswered())return null;const r=W(()=>n().getTotalQuestionsAnswered());return(()=>{var o=Pu(),s=o.firstChild,i=s.nextSibling,a=i.firstChild,l=a.firstChild,d=l.firstChild,c=d.nextSibling,h=c.nextSibling,g=a.nextSibling,v=g.firstChild,w=v.firstChild,y=w.nextSibling,f=y.nextSibling;return j(s,()=>t("progress")),j(o,L(Eu,{get correct(){return r()}}),i),j(d,()=>t("correct_answer_count_alt")),j(c,()=>t("incorrect_answer_count_alt")),j(h,()=>t("questions_answered_count_alt")),j(w,()=>n().getTotalCorrectAnswers()),j(y,()=>n().getTotalIncorrectAnswers()),j(f,()=>n().getTotalQuestionsAnswered()),Z(m=>{var u=t("corect_answers_alt"),p=t("incorrect_answer_count_alt"),b=t("questions_answered_count_alt");return u!==m.e&&Y(d,"title",m.e=u),p!==m.t&&Y(c,"title",m.t=p),b!==m.a&&Y(h,"title",m.a=b),m},{e:void 0,t:void 0,a:void 0}),o})()};var Ou=V("<p>"),Ru=V('<section class="card no-border no-set-height"><h2>'),Nu=V("<article id=home>"),Iu=V("<div>[1] Loading lessons ...");const Lu=()=>{const e=Ae(),t=Se(),[n,r]=B(null),[o,s]=B(null),i=ye(),[a,l]=B(null);ge(()=>{const c=Number(e.courseIdx);Number.isFinite(c)?(console.log("Course home screen set courseIdx",c),s(c)):(console.log("Course home screen has no courseIdx"),s(null))}),ge(()=>{if(i&&o()!==null){const h=i.store.courseMetadata;l(h)}}),ge(()=>{const c=o();c!==null&&(console.log("Creating lessonStore for courseIdx",c),r(Ye(c)))});const d=c=>{t(`/course/${o()}/${c}/intro`)};return L(ce,{get when(){return i&&n()},get fallback(){return Iu()},get children(){var c=Nu();return j(c,L(ku,{get courseIdx(){return o()}}),null),j(c,L(ga,{get courseIndex(){return o()},onLessonSelected:d,get children(){return L(ce,{get when(){return a()},get children(){var h=Ru(),g=h.firstChild;return j(g,()=>a().title),j(h,L(ce,{get when(){return a().description},get children(){var v=Ou();return j(v,()=>a().description),v}}),null),h}})}}),null),c}})};var Au=V("<div class=form-field><label>"),ju=V("<textarea class=text-input>"),Tu=V("<input class=text-input>");const De=e=>(()=>{var t=Au(),n=t.firstChild;return j(n,()=>e.label),j(t,(()=>{var r=W(()=>!!e.multiline);return()=>r()?(()=>{var o=ju();return Nt(o,"input",e.onInput),Z(()=>Y(o,"placeholder",e.placeholder)),Z(()=>o.value=e.value),o})():(()=>{var o=Tu();return Nt(o,"input",e.onInput),Z(s=>{var i=e.placeholder,a=e.type||"text";return i!==s.e&&Y(o,"placeholder",s.e=i),a!==s.t&&Y(o,"type",s.t=a),s},{e:void 0,t:void 0}),Z(()=>o.value=e.value),o})()})(),null),t})();ie(["input"]);var xu=V('<section class="boolean-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),qu=V('<div class=answer-row><button title="Click to mark as correct answer"><span></span></button><button type=button title="Remove this answer"><span class=utf8-icon-close>');function Du(e){const[t,n]=B(""),[r,o]=B(!1),s=(d,c)=>{const h=[...e.list],g=Object.keys(h[d])[0];h[d]={[c]:h[d][g]},e.onUpdate(h)},i=d=>{const c=[...e.list],h=Object.keys(c[d])[0];c[d]={[h]:!c[d][h]},e.onUpdate(c)},a=d=>{const c=[...e.list];c.splice(d,1),e.onUpdate(c)},l=()=>{if(!t())return;const d=[...e.list,{[t()]:r()}];e.onUpdate(d),n(""),o(!1)};return(()=>{var d=xu(),c=d.firstChild,h=c.firstChild;return j(d,()=>e.list.map((g,v)=>{const w=Object.keys(g)[0],y=g[w];return(()=>{var f=qu(),m=f.firstChild,u=m.firstChild,p=m.nextSibling;return j(f,L(De,{label:`Option ${v+1}`,value:w,onInput:b=>s(v,b.target.value),placeholder:"Enter answer"}),m),m.$$click=()=>i(v),Pe(m,`checkmark ${y?"selected":""}`),Pe(u,`utf8-icon-${y?"tick":"not-tick"}`),p.$$click=()=>a(v),f})()}),c),j(c,L(De,{label:"New Option",get value(){return t()},onInput:g=>n(g.target.value),placeholder:"Enter new option"}),h),h.$$click=l,d})()}ie(["click"]);var Mu=V('<section class="answer-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Vu=V('<div class=answer-row><button title="Select as the correct answer"><span></span></button><button class=large-icon-button type=button title="Remove this answer"><span class=utf8-icon-close>');function wo(e){const[t,n]=B(""),[r,o]=B([]);ge(()=>{o([...e.list])});const s=(d,c)=>{const h=[...r()];h[d]=c,o(h),e.onUpdate(h,e.answer)},i=d=>{const c=[...r()];c.splice(d,1),o(c),e.onUpdate(c,e.answer)},a=()=>{const d=t().trim();if(!d)return;const c=[...r(),d];o(c),n(""),e.onUpdate(c,e.answer)},l=d=>{const c=e.answer===d?"":d;e.onUpdate(r(),c)};return(()=>{var d=Mu(),c=d.firstChild,h=c.firstChild;return j(d,()=>r().map((g,v)=>(()=>{var w=Vu(),y=w.firstChild,f=y.firstChild,m=y.nextSibling;return j(w,L(De,{label:`Option ${v+1}`,value:g,onInput:u=>s(v,u.target.value),placeholder:"Enter answer"}),y),y.$$click=()=>l(g),m.$$click=()=>i(v),Z(u=>{var p=`large-icon-button checkmark ${e.answer===g?"selected":""}`,b=`utf8-icon-${e.answer===g?"tick":"not-tick"}`;return p!==u.e&&Pe(y,u.e=p),b!==u.t&&Pe(f,u.t=b),u},{e:void 0,t:void 0}),w})()),c),j(c,L(De,{label:"New Option",get value(){return t()},onInput:g=>n(g.target.value),placeholder:"Enter new option"}),h),h.$$click=a,d})()}ie(["click"]);var Fu=V('<section class="vocab-text answer-list"><div class="answer-row add-new"><button type=button title="Add this entry"><span class=utf8-icon-add>'),Uu=V('<div class=answer-row><button type=button title="Remove this entry"><span class=utf8-icon-close>');function Ku(e){const[t,n]=B(""),[r,o]=B(""),s=W(()=>Object.entries(e.list)),i=(c,h)=>{const g={...e.list},v=s()[c][0],w=g[v];delete g[v],g[h]=w,e.onUpdate(g)},a=(c,h)=>{const g={...e.list},v=s()[c][0];g[v]=h,e.onUpdate(g)},l=c=>{const h={...e.list},g=s()[c][0];delete h[g],e.onUpdate(h)},d=()=>{if(!t()||!r())return;const c={...e.list,[t()]:r()};e.onUpdate(c),n(""),o("")};return(()=>{var c=Fu(),h=c.firstChild,g=h.firstChild;return j(c,()=>s().map(([v,w],y)=>(()=>{var f=Uu(),m=f.firstChild;return j(f,L(De,{label:`Prompt ${y+1}`,value:v,onInput:u=>i(y,u.target.value),placeholder:"Enter prompt"}),m),j(f,L(De,{label:`Answer ${y+1}`,value:w,onInput:u=>a(y,u.target.value),placeholder:"Enter answer"}),m),m.$$click=()=>l(y),f})()),h),j(h,L(De,{label:"New Prompt",get value(){return t()},onInput:v=>n(v.target.value),placeholder:"Enter new prompt"}),g),j(h,L(De,{label:"New Answer",get value(){return r()},onInput:v=>o(v.target.value),placeholder:"Enter new answer"}),g),g.$$click=d,c})()}ie(["click"]);var zu=V("<p>Loading card..."),Hu=V('<aside class="card-editor card"><section><h2>Editing <!> Card<button class="close-editor large-icon-button"><span class=utf8-icon-close></span></button></h2></section><footer class=modal-actions><button>Cancel</button><button>Save'),Wu=V("<section class=question>");const Bu=e=>{const{t}=$e(),[n,r]=B([]),[o,s]=B(""),[i,a]=B(""),[l,d]=B({}),[c,h]=B([]),[g,v]=B([]);ge(()=>{if(!e.card){console.warn("No card!");return}"answer"in e.card&&s(e.card.answer||""),"answers"in e.card&&r(e.card.answers||[]),"options"in e.card&&h(e.card.options),"question"in e.card&&a(e.card.question),"words"in e.card&&v(e.card.words),"vocab"in e.card&&d(e.card.vocab)});const w=()=>{if(!e.card)return;const f={...e.card};"answers"in f&&(f.answers=n()),"answer"in f&&(f.answer=o()),"options"in f&&(f.options=c()),"question"in e.card&&(f.question=i()),"words"in f&&(f.words=g()),"vocab"in f&&(f.vocab=l()),e.onSave(f)};function y(f,m,u){f(m),u&&kc(e.card)&&s(u)}return L(ce,{get when(){return e.card},get fallback(){return zu()},children:f=>(()=>{var m=Hu(),u=m.firstChild,p=u.firstChild,b=p.firstChild,$=b.nextSibling,_=$.nextSibling,C=_.nextSibling,P=u.nextSibling,A=P.firstChild,D=A.nextSibling;return m.$$click=k=>k.stopPropagation(),j(p,()=>t("card-class."+e.card?.class),$),Nt(C,"click",e.onCancel),j(u,(()=>{var k=W(()=>!!i());return()=>k()&&(()=>{var T=Wu();return j(T,L(De,{multiline:!0,label:"Question",get value(){return i()??"Question"},onInput:K=>a(K.target.value),placeholder:"Option: enter a question"})),T})()})(),null),j(u,(()=>{var k=W(()=>!!(f().answer&&f().class!=="writing-blocks"&&f().class!=="multiple-choice"));return()=>k()&&L(De,{label:"Answer",get value(){return f().answer},onInput:T=>s(T.target.value),placeholder:"Enter answer"})})(),null),j(u,(()=>{var k=W(()=>"words"in f());return()=>k()&&L(Du,{get list(){return g()},onUpdate:(...T)=>y(v,...T)})})(),null),j(u,(()=>{var k=W(()=>"answers"in f());return()=>k()&&L(wo,{get answer(){return o()},get list(){return n()},onUpdate:(...T)=>y(r,...T)})})(),null),j(u,(()=>{var k=W(()=>"options"in f());return()=>k()&&L(wo,{get answer(){return o()},get list(){return c()},onUpdate:(...T)=>y(h,...T)})})(),null),j(u,(()=>{var k=W(()=>"vocab"in f());return()=>k()&&L(Ku,{get list(){return l()},onUpdate:(...T)=>y(d,...T)})})(),null),Nt(A,"click",e.onCancel),D.$$click=w,Z(()=>Y(C,"title",t("cacnel"))),m})()})};ie(["click"]);var Gu=V("<article>"),Ju=V("<p>Loading editor...");const Qu=()=>{const e=Ae(),t=Se(),n=ye(),r=()=>Number(e.courseIdx??-1),o=()=>Number(e.lessonIdx??-1),s=()=>Number(e.cardIdx??-1),i=W(()=>n?.getLessons()??[]),a=W(()=>{const c=o();if(typeof c>"u"||!i().length)return;const h=i()[c];if(!h||!Array.isArray(h.cards))return console.warn("Invalid lesson:",c,h),null;const g=s();if(g>=h.cards.length){console.warn("cardId is >= lesson.cards length"),t("/course/"+r());return}return h.cards[g]??null}),l=W(()=>i().length>0&&o()>=0&&s()>=0&&a()!==null);ge(()=>{});const d=c=>{n&&(n.saveCard(c,o(),s()),t(-1))};return L(ce,{get when(){return W(()=>!!l())()&&a()},get fallback(){return Ju()},get children(){var c=Gu();return j(c,L(Bu,{get card(){return a()},onSave:d,onCancel:()=>t(`/editor/${r()}`)})),c}})},Xu=(e,t)=>{const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=t%60;let s="";return n>0&&(s+=`${n} ${e("hours")}`),(r>0||n>0)&&(s&&(s+=" "),s+=`${r} ${e("minutes")}`),s&&(s+=", "),s+=`${o} ${e("seconds")}`,s};var Yu=V('<section class="lesson-completed card"><h2></h2><p>'),Zu=V("<footer class=lesson-completed-footer><button class=next-button>");const ed=e=>{const{t}=$e(),n=Ae(),r=Ye(Number(n.courseIdx||-1)),o=r.getCurrentLessonIdx(),s=r.getTotalWrongAttemptsInLesson(o),i=r.getLessonQuestionCount(o),a=()=>{ea(),e.onNext()};return[(()=>{var l=Yu(),d=l.firstChild,c=d.nextSibling;return j(d,()=>t("lesson_completed")),j(c,()=>t("lesson_completed_counts",{questionCount:i,incorrectAnswerCount:s,duration:Xu(t,e.lessonDurationInSeconds)})),l})(),(()=>{var l=Zu(),d=l.firstChild;return d.$$click=a,j(d,()=>t("continue")),l})()]};ie(["click"]);const td=()=>{const e=Ae(),[t]=Qc(),n=Se(),r=ye(),o=W(()=>Number(e.courseIdx)),s=W(()=>Number(e.lessonIdx)),i=W(()=>Number(t["lesson-duration"])||-999),a=W(()=>s()+1),l=()=>{r&&(a()<r.getLessons().length?n(`/course/${o()}`):n(`/course/${o()}/finished`))};return L(ce,{when:r,get children(){return L(ed,{onNext:l,get lessonDurationInSeconds(){return i()}})}})};var nd=V("<div>Loading Lesson Data...");const rd=()=>{const e=Ae(),t=ye(),n=W(()=>Number(e.courseIdx||-1)),r=W(()=>Number(e.lessonIdx||-1)),o=Se(),s=Ye(n()),[i,a]=B(null),[l,d]=B(Date.now());ge(()=>{if(!t)return;const v=r(),w=t.getLessons();w[v]&&(a(w[v]),d(Date.now()))});const c=()=>{o(`/course/${n()}`)},h=(v,w)=>{console.log("calling lessonsStore.saveAnswer for",v),s.saveAnswer(r(),v,w||"")},g=()=>{const v=Math.floor((Date.now()-l())/1e3);o(`/course/${n()}/${r()}/completed?lesson-duration=${v}`)};return L(ce,{get when(){return i()},get fallback(){return nd()},children:v=>L(jc,{get lesson(){return v()},onCancel:c,onAnswer:h,onLessonComplete:g})})};var sd=V("<div>Loading Lesson Data..."),od=V('<article class="lesson-intro card"><header><h2> </h2><h3>'),ad=V("<footer class=lesson-intro-footer><button class=next-button>"),id=V("<p class=description>");const So=()=>{const e=Ae(),t=Se(),{t:n}=$e(),r=ye(),o=W(()=>Number(e.courseIdx)),s=W(()=>Number(e.lessonIdx)),i=W(()=>Ye(o())),a=W(()=>{if(r)return r.getLessons()?.[s()]}),l=()=>{Vl(),i()?.resetLesson(s()),t(`/course/${o()}/${s()}/in-progress`)};return L(ce,{get when(){return a()},get fallback(){return sd()},children:d=>[(()=>{var c=od(),h=c.firstChild,g=h.firstChild,v=g.firstChild,w=g.nextSibling;return j(g,()=>n("lesson"),v),j(g,()=>s()+1,null),j(w,()=>d().title),j(c,(()=>{var y=W(()=>!!d().description);return()=>y()&&(()=>{var f=id();return j(f,()=>d().description),f})()})(),null),c})(),(()=>{var c=ad(),h=c.firstChild;return h.$$click=l,j(h,()=>n("begin")),c})()]})};ie(["click"]);const ld="0.2.4",cd="https://leegee.github.io/learning-oe-solidjs",pa={version:ld,homepage:cd};var ud=V("<h1 class=animated-text>");const dd=e=>{const[t,n]=B(!1);let r;return ge(()=>{if(r){let o;requestAnimationFrame(()=>{o=new IntersectionObserver(i=>{i[0].isIntersecting&&(n(!0),o.unobserve(r))},{threshold:.1}),o.observe(r)}),Be(()=>{o?.disconnect()})}}),(()=>{var o=ud(),s=r;return typeof s=="function"?ot(s,o):r=o,j(o,()=>e.title),Z(()=>o.classList.toggle("visible",!!t())),o})()};var fd=V("<button class=large-icon-button><i class=icon-cog>");const Co=e=>{const t=Se();return(()=>{var n=fd();return n.$$click=()=>t("/editor/"+e.courseIdx),n})()};ie(["click"]);var hd=V('<button title="Download this course"class="icon-download large-icon-button">'),md=V('<dialog class=dialog-error><header><h3>Error saving lessons</h3></header><footer><button class="large-icon-button utf8-icon-close">');const Eo=e=>{const t=ye();let n=null;const r=async()=>{const o="lessons.lson.json";try{const s=await t.getCourseData(e.courseIdx);if(!s)throw new Error("Lessons not loaded?");const i=new Blob([JSON.stringify(s,null,2)],{type:"text/plain"}),a=URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=o,l.click(),URL.revokeObjectURL(a)}catch(s){s.name!=="AbortError"&&(console.error("Error saving file:",s),n?.showModal())}};return[(()=>{var o=hd();return o.$$click=r,o})(),(()=>{var o=md(),s=o.firstChild,i=s.nextSibling,a=i.firstChild;return ot(l=>n=l,o),a.$$click=()=>n?.close(),o})()]};ie(["click"]);var gd=V('<button title="Create a blank course"class="large-icon-button utf8-icon-new">');const pd=()=>{const e=Se(),{config:t}=Mt(),n=async()=>{const o=ye();if(!o)return;const s=o.initNewCourse(t);s!==void 0?(Ye(s),e(`/editor/${s}`)):alert("Error creating new course")},r=ye();return L(ce,{when:r,get children(){var o=gd();return o.$$click=n,o}})};ie(["click"]);var yd=V('<button title="Load a course from a file"class=large-icon-button><i class=icon-upload>'),vd=V("<input type=file accept=.json,application/json>"),$d=V("<dialog class=dialog-error><header><h3>Error loading course</h3></header><footer><button class=large-icon-button><span class=utf8-icon-close>"),bd=V('<dialog class=dialog-ok><header><h3>Course Loaded</h3></header><footer><button class="large-icon-button utf8-icon-tick">');const _d=()=>{const e=ye();let t=null,n=null,r=null;const o=()=>{n?.close(),t?.close()},s=()=>r?.click(),i=async a=>{const d=a.target.files?.[0];if(d)try{const c=await d.text();await e.saveCourseToStorage(c),n?.showModal()}catch(c){c.name!=="AbortError"&&(console.error("Error loading file:",c),t?.showModal())}finally{r&&(r.value="")}};return[(()=>{var a=yd();return a.$$click=s,a.disabled=!e,a})(),(()=>{var a=vd();return a.addEventListener("change",i),ot(l=>r=l,a),a.style.setProperty("display","none"),a})(),(()=>{var a=$d(),l=a.firstChild,d=l.nextSibling,c=d.firstChild;return ot(h=>t=h,a),c.$$click=o,a})(),(()=>{var a=bd(),l=a.firstChild,d=l.nextSibling,c=d.firstChild;return ot(h=>n=h,a),c.$$click=o,a})()]};ie(["click"]);var Po=V("<span class=course-action-buttons>"),wd=V('<aside aria-roledescription="Toggle menu"class=hamburger-menu><section class=card><menu><li><a>Custom Course</a></li></menu><footer><small><button>Edit Courses </button></small></footer></section><footer><small>Version '),Sd=V("<p>Loading..."),Cd=V("<li><a>");const Ed=()=>{const e=ye(),[t,n]=B(!1),r=Se(),{config:o}=Mt(),[s,i]=B(0),a=l=>{i(l),r("/course/"+l)};return ge(()=>{if(!e){console.warn("Course store not available");return}isNaN(s())&&console.debug("local course index is NaN?")}),L(ce,{when:e,get fallback(){return Sd()},get children(){var l=wd(),d=l.firstChild,c=d.firstChild,h=c.firstChild,g=h.firstChild,v=c.nextSibling,w=v.firstChild,y=w.firstChild,f=d.nextSibling,m=f.firstChild;return m.firstChild,j(d,L(dd,{get title(){return o.menuTitle||o.appTitle}}),c),j(c,()=>Nn(o).map((u,p)=>(()=>{var b=Cd(),$=b.firstChild;return $.$$click=()=>a(p),j($,u),j(b,L(ce,{get when(){return t()},get children(){var _=Po();return j(_,L(ma,{courseIdx:p}),null),j(_,L(Eo,{courseIdx:p}),null),j(_,L(Co,{courseIdx:p}),null),_}}),null),Z(()=>Pe(b,s()===p?"selected":"")),b})()),h),g.$$click=()=>{r("/course/"+o.courses.length)},j(h,L(ce,{get when(){return t()},get children(){var u=Po();return j(u,L(pd,{}),null),j(u,L(_d,{}),null),j(u,L(Eo,{get courseIdx(){return Nn(o).length}}),null),j(u,L(Co,{get courseIdx(){return Nn(o).length}}),null),u}}),null),y.$$click=()=>n(!t()),j(m,()=>pa.version,null),Z(()=>Pe(c,"course-menu "+(t()?"editing":""))),l}})};ie(["click"]);var Pd=V("<span contenteditable>");function Hn(e){let t,n=e.value;const r=o=>o.replace(/[\r\n]+/g,"").trim();return ge(()=>{t&&document.activeElement!==t&&(t.innerText=e.value)}),(()=>{var o=Pd();return o.addEventListener("blur",s=>{const i=r(s.currentTarget.innerText);i!==e.value&&e.onChange(i)}),o.$$keydown=s=>{const i=s.currentTarget;s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),i.blur()):s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),i.innerText=n,i.blur())},o.addEventListener("focus",()=>{n=e.value}),ot(s=>t=s,o),Z(s=>{var i=e.placeholder,a=`${e.class??""} ${e.value.trim()===""?"placeholder":""}`;return i!==s.e&&Y(o,"aria-placeholder",s.e=i),a!==s.t&&Pe(o,s.t=a),s},{e:void 0,t:void 0}),o})()}ie(["keydown"]);var kd=V('<button class=add-card title="Add a new card to this lesson"><span class=utf8-icon-add>'),Od=V("<div class=card-class-picker><button class=delete-button><span class=utf8-icon-close>"),Rd=V("<div class=add-card>"),Nd=V("<button>");function Id(e){const t=ye(),n=Ae(),r=Se(),[o,s]=B(!1),i=a=>{const l=Number(n.courseIdx),d=t.getLessons();if(!Array.isArray(d)||e.lessonIdx<0||e.lessonIdx>=d.length){console.error("Invalid lesson index or malformed lessons:",d,e.lessonIdx);return}const c=Ec(a),h=d.map((v,w)=>w===e.lessonIdx?{...v,cards:[...v.cards,c]}:v);t.setLessons(h);const g=h[e.lessonIdx]?.cards?.length-1;if(g==null||g<0){console.error("Failed to calculate newCardIdx");return}r(`/editor/${l}/${e.lessonIdx}/${g}`)};return(()=>{var a=Rd();return j(a,L(ce,{get when(){return!o()},get children(){var l=kd();return l.$$click=()=>s(!0),l}}),null),j(a,L(ce,{get when(){return o()},get children(){var l=Od(),d=l.firstChild;return d.$$click=()=>s(!1),j(l,L(Je,{each:Pc,children:c=>(()=>{var h=Nd();return h.$$click=()=>{i(c),s(!1)},j(h,c),h})()}),null),l}}),null),a})()}ie(["click"]);var Ld=V('<button class="large-icon-button icon-up-fat"title="Add a new lesson above this">'),Ad=V('<button class="large-icon-button icon-down-fat"title="Add a new lesson beneath this">'),jd=V("<aside class=add-lesson-overlay>"),Td=V('<div class=add-lesson-button-component><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course">');function xd(e){const t=ye(),[n,r]=B(!1),o=s=>{s.target.closest(".add-lesson-button-component")||r(!1)};return document.addEventListener("click",o),Be(()=>document.removeEventListener("click",o)),(()=>{var s=Td(),i=s.firstChild;return i.$$click=()=>r(a=>!a),j(s,L(ce,{get when(){return n()},get children(){var a=jd();return j(a,L(ce,{get when(){return e.above||!e.above&&!e.below},get children(){var l=Ld();return l.$$click=()=>{t.addLesson(Number(e.lessonIdx)-1),r(!1)},l}}),null),j(a,L(ce,{get when(){return e.below||!e.above&&!e.below},get children(){var l=Ad();return l.$$click=()=>{t.addLesson(Number(e.lessonIdx)+1),r(!1)},l}}),null),a}}),null),s})()}ie(["click"]);var qd=V('<div class=card-holder><div class="vertical-controls top-controls"><button title="Move up to the previous lesson"class="move-card-button icon-up-fat"></button></div><div class=horizontal-controls><button title="Swap with the card on the left"class="move-card-button icon-left-fat"></button><div class=card-overlay-wrapper><div class=card-overlay><button title=Delete class="control small-control"><span class=icon-trash></span></button><button title=Edit class=control><span class=icon-pencil></span></button></div></div><button title="Swap with the card to the right"class="move-card-button icon-right-fat"></button></div><div class="vertical-controls bottom-controls"><button title="Move to the next lesson"class="move-card-button icon-down-fat">');function Dd(e){const t=ye(),{showConfirm:n}=Yn(),{t:r}=$e(),o=Se(),s=Ae(),i=c=>({...c,cards:[...c.cards]}),a=()=>{n(r("confirm_delete_card"),()=>t.deleteCard(Number(e.lessonIdx),Number(e.cardIdx)))},l=(c,h,g)=>{const w=[...t.getLessons()],y=i(w[c]),f=[...y.cards],m=h+g;if(m<0||m>=f.length)return;const[u]=f.splice(h,1);f.splice(m,0,u),y.cards=f,w[c]=y,t.setLessons(w)},d=(c,h,g)=>{const v=t.getLessons(),w=c+g;if(w<0||w>=v.length||h<0||h>=v[c].cards.length)return;const y=[...v],f=i(y[c]),m=i(y[w]),u=[...f.cards],p=[...m.cards],[b]=u.splice(h,1);p.push(b),f.cards=u,m.cards=p,y[c]=f,y[w]=m,t.setLessons(y)};return(()=>{var c=qd(),h=c.firstChild,g=h.firstChild,v=h.nextSibling,w=v.firstChild,y=w.nextSibling,f=y.firstChild,m=f.firstChild,u=m.nextSibling,p=y.nextSibling,b=v.nextSibling,$=b.firstChild;return g.$$click=()=>d(e.lessonIdx,e.cardIdx,-1),w.$$click=()=>l(e.lessonIdx,e.cardIdx,-1),j(y,L(sa,{tabindex:-1,get card(){return e.card},get lesson(){return e.lesson},ondblclick:()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`)}),f),m.$$click=()=>a(),u.$$click=()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`),p.$$click=()=>l(e.lessonIdx,e.cardIdx,1),$.$$click=()=>d(e.lessonIdx,e.cardIdx,1),Z(_=>{var C=e.lessonIdx===0,P=e.cardIdx===0,A=e.cardIdx===e.lesson.cards.length-1,D=e.lessonIdx===t.getLessons().length-1;return C!==_.e&&(g.disabled=_.e=C),P!==_.t&&(w.disabled=_.t=P),A!==_.a&&(p.disabled=_.a=A),D!==_.o&&($.disabled=_.o=D),_},{e:void 0,t:void 0,a:void 0,o:void 0}),c})()}ie(["click"]);var Md=V('<article class="card no-set-height no-lessons"><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course"></button><p>Click above to create your first lesson</p><p>Click titles and descriptions to edit them'),Vd=V("<section class=lesson><header><h3><span>: &nbsp;</span></h3><h4></h4></header><div class=cards>");function Fd(){const e=ye();ge(()=>{document.body.classList.add("editing-card"),Be(()=>{document.body.classList.remove("editing-card")})});const t=(n,r)=>{const o=[...e.getLessons()];o[n]=r(o[n]),e.setLessons(o)};return[W(()=>e.getLessons().map((n,r)=>(()=>{var o=Vd(),s=o.firstChild,i=s.firstChild,a=i.firstChild,l=a.firstChild,d=i.nextSibling,c=s.nextSibling;return Y(o,"id",`lesson-${r}`),j(a,r+1,l),j(a,L(Hn,{get value(){return n.title},onChange:h=>t(r,g=>({...g,title:h}))}),null),j(i,L(xd,{lessonIdx:r}),null),j(d,L(Hn,{get value(){return n.description??""},onChange:h=>t(r,g=>({...g,description:h}))})),j(c,L(Je,{get each(){return n.cards},children:(h,g)=>L(Dd,{lesson:n,lessonIdx:r,card:h,get cardIdx(){return g()}})}),null),j(c,L(Id,{lessonIdx:r}),null),o})())),L(ce,{get when(){return e.getLessons().length===0},get children(){var n=Md(),r=n.firstChild;return r.$$click=()=>e.addLesson(0),n}})]}ie(["click"]);var Ud=V('<button class="large-icon-button icon-trash">');function Kd(e){const{t}=$e(),n=Se(),{showConfirm:r}=Yn(),o=async()=>{const a=ye();if(a)try{await a.deleteCourse(e.courseIdx),n("/")}catch(l){console.error("Failed to delete course:",l)}},s=()=>{if(e.courseIdx==null){console.warn("No course selected.");return}r(t("confirm_delete_course"),o)},i=ye();return(()=>{var a=Ud();return a.$$click=s,a.disabled=!i,Z(()=>Y(a,"title",t("delete_course"))),a})()}ie(["click"]);var zd=V("<nav class=coourse-action-buttons>"),Hd=V("<article class=course-editor role=dialog aria-modal=true><header><h2>:&nbsp;<q></q></h2><h3><q>"),Wd=V("<nav class=lesson-pager>"),Bd=V("<button class=pager-link>: ");function Gd(){const e=ye(),{t}=$e(),n=Se(),r=Ae(),{config:o}=Mt();return ge(()=>{console.log("editor course idx:",r.courseIdx)}),ge(()=>{document.body.classList.add("editing-card"),Be(()=>{document.body.classList.remove("editing-card")})}),(()=>{var s=Hd(),i=s.firstChild,a=i.firstChild,l=a.firstChild,d=l.nextSibling,c=a.nextSibling,h=c.firstChild;return j(a,()=>t("course"),l),j(d,L(Hn,{get value(){return e.getTitle()??""},onChange:g=>e.setTitle(g)})),j(a,L(ce,{get when(){return Number(r.courseIdx)<o.courses.length},get children(){var g=zd();return j(g,L(Kd,{get courseIdx(){return Number(r.courseIdx)}})),g}}),null),j(h,L(Hn,{get value(){return e.getDescription()??"Description"},onChange:g=>e.setDescription(g)})),j(i,(()=>{var g=W(()=>e.getLessons()?.length>1);return()=>g()&&(()=>{var v=Wd();return j(v,()=>e.getLessons().map((w,y)=>(()=>{var f=Bd(),m=f.firstChild;return f.$$click=()=>n(`#lesson-${y}`),j(f,y+1,m),j(f,()=>w.title,null),Z(()=>Y(f,"aria-label",`Go to lesson ${y+1}: ${w.title}`)),f})())),v})()})(),null),j(s,L(Fd,{}),null),s})()}ie(["click"]);var Jd=V("<h1>The specified resource is unavailable.");const Qd=()=>[L(Re,{path:"/editor/:courseIdx/:lessonIdx/:cardIdx",component:Qu}),L(Re,{path:"/editor/:courseIdx?",component:Gd}),L(Re,{path:"/course/:courseIdx",component:gu,get children(){return[L(Re,{path:"/",component:Lu}),L(Re,{path:":lessonIdx",component:So}),L(Re,{path:":lessonIdx/intro",component:So}),L(Re,{path:":lessonIdx/in-progress",component:rd}),L(Re,{path:":lessonIdx/completed",component:td}),L(Re,{path:"finished",component:Su})]}}),L(Re,{path:"/editor",component:()=>L(br,{href:"/menu"})}),L(Re,{path:"/course",component:()=>L(br,{href:"/menu"})}),L(Re,{path:"/menu",component:Ed}),L(Re,{path:"/",component:()=>L(br,{href:"/menu"})}),L(Re,{path:"*",component:()=>Jd()})],Xd=pa.homepage,Yd=()=>new URL(Xd).pathname.replace(/\/?$/,"");var Zd=V('<button class="hamburger-button large-icon-button"aria-label="Toggle menu"><span>');const ef=()=>{const e=Dr(),t=Se(),[n,r]=B("/"),o=Yd(),s=()=>e.pathname.replace(o,"")||"/",i=()=>/\/menu(\/|$)/.test(e.pathname),a=()=>{if(i()){const l=s(),d=n();d===l||d==="/menu"||!d?t("/"):window.history.back()}else r(s()),t("/menu")};return ge(()=>{i()?document.body.classList.add("menu-shown"):document.body.classList.remove("menu-shown")}),(()=>{var l=Zd(),d=l.firstChild;return l.$$click=a,Z(()=>Pe(d,`utf8-icon-${i()?"close":"menu"}`)),l})()};ie(["click"]);var tf=V("<header class=header-component><div class=header-text><h1>"),nf=V("<p>Loading...");const rf=()=>{const e=Ae(),{config:t}=Mt(),n=ye(),r=!!e.courseIdx;return L(ce,{when:n,get fallback(){return nf()},get children(){var o=tf(),s=o.firstChild,i=s.firstChild;return j(i,()=>t.appTitle),j(s,L(ce,{when:r,get children(){return L(ef,{})}}),null),Z(()=>Y(i,"lang",t.targetLanguage)),o}})};function sf(){const e=ye(),t=Ae();return ge(()=>{const n=t.courseIdx;if(n==null)return;const r=Number(n);isNaN(r)?console.error("Load course by route failure - course index was non-numeric",n):(console.log("Load course by route"),e.loadCourseFromFile(r))}),null}var of=V("<main id=main>");const af=e=>L(hu,{root:n=>L(Jl,{get config(){return e.config},get children(){return[L(sf,{}),L(vi,{get children(){return L(Ml,{get children(){var r=of();return j(r,L(rf,{}),null),j(r,()=>n.children,null),r}})}})]}}),get children(){return L(Qd,{})}}),lf=async()=>{try{return await qo()}catch(e){return console.error("Error loading configuration:",e),null}},cf=async()=>{const e=await lf();if(!e)throw new Error("Failed to load config. App will not start.");await Promise.allSettled([Dc(),yi(e)]);const t=L(af,{config:e}),n=document.getElementById("root");n?(n.innerHTML="",Ha(()=>t,n)):gt(()=>t)};await cf();

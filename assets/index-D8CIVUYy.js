(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const ya=!0,va=(e,t)=>e===t,Ve=Symbol("solid-proxy"),$a=typeof Proxy=="function",br=Symbol("solid-track"),ba=Symbol("solid-dev-component"),Rn={equals:va};let ko=Ao;const Be=1,Nn=2,_a={},Zn={};var oe=null;let er=null,wa=null,he=null,Ee=null,We=null,Kn=0;const Sa={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function pt(e,t){const n=he,r=oe,o=e.length===0,s=t===void 0?r:t,i=o?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?()=>e(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>e(()=>$e(()=>Ot(i)));oe=i,he=null;try{return Fe(a,!0)}finally{he=n,oe=r}}function J(e,t){t=t?Object.assign({},Rn,t):Rn;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0};t.name&&(n.name=t.name),t.internal?n.internal=!0:Io(n);const r=o=>(typeof o=="function"&&(o=o(n.value)),Nr(n,o));return[Lo.bind(n),r]}function Ca(e,t,n){const r=jt(e,t,!0,Be,n);it(r)}function Z(e,t,n){const r=jt(e,t,!1,Be,n);it(r)}function ge(e,t,n){ko=La;const r=jt(e,t,!1,Be,n);r.user=!0,We?We.push(r):it(r)}function W(e,t,n){n=n?Object.assign({},Rn,n):Rn;const r=jt(e,t,!0,0,n);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,it(r),Lo.bind(r)}function Ea(e){return e&&typeof e=="object"&&"then"in e}function pe(e,t,n){let r,o,s;r=!0,o=e,s={};let i=null,a=Zn,l=!1,d="initialValue"in s,u=typeof r=="function"&&W(r);const m=new Set,[p,v]=(s.storage||J)(s.initialValue),[_,y]=J(void 0),[f,h]=J(void 0,{equals:!1}),[c,g]=J(d?"ready":"unresolved");function $(P,A,R,N){return i===P&&(i=null,N!==void 0&&(d=!0),(P===a||A===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(N,{value:A})),a=Zn,b(A,R)),A}function b(P,A){Fe(()=>{A===void 0&&v(()=>P),g(A!==void 0?"errored":d?"ready":"unresolved"),y(A);for(const R of m.keys())R.decrement();m.clear()},!1)}function w(){const P=Ra,A=p(),R=_();if(R!==void 0&&!i)throw R;return he&&he.user,A}function C(P=!0){if(P!==!1&&l)return;l=!1;const A=u?u():r;if(A==null||A===!1){$(i,$e(p));return}const R=a!==Zn?a:$e(()=>o(A,{value:p(),refetching:P}));return Ea(R)?(i=R,"value"in R?(R.status==="success"?$(i,R.value,void 0,A):$(i,void 0,wr(R.value),A),R):(l=!0,queueMicrotask(()=>l=!1),Fe(()=>{g(d?"refreshing":"pending"),h()},!1),R.then(N=>$(R,N,void 0,A),N=>$(R,void 0,wr(N),A)))):($(i,R,void 0,A),R)}return Object.defineProperties(w,{state:{get:()=>c()},error:{get:()=>_()},loading:{get(){const P=c();return P==="pending"||P==="refreshing"}},latest:{get(){if(!d)return w();const P=_();if(P&&!i)throw P;return p()}}}),u?Ca(()=>C(!1)):C(!1),[w,{refetch:C,mutate:v}]}function Oo(e){return Fe(e,!1)}function $e(e){if(he===null)return e();const t=he;he=null;try{return e()}finally{he=t}}function Rr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let d=0;d<e.length;d++)a[d]=e[d]()}else a=e();if(s)return s=!1,i;const l=$e(()=>t(a,o,i));return o=a,l}}function Pa(e){ge(()=>$e(e))}function Je(e){return oe===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):oe.cleanups===null?oe.cleanups=[e]:oe.cleanups.push(e),e}function _r(){return he}function Ro(){return oe}function No(e,t){const n=oe,r=he;oe=e,he=null;try{return Fe(t,!0)}catch(o){Ir(o)}finally{oe=n,he=r}}function ka(e){const t=he,n=oe;return Promise.resolve().then(()=>{he=t,oe=n;let r;return Fe(e,!1),he=oe=null,r?r.done:void 0})}const[df,ff]=J(!1);function Oa(e,t){const n=jt(()=>$e(()=>(Object.assign(e,{[ba]:!0}),e(t))),void 0,!0,0);return n.props=t,n.observers=null,n.observerSlots=null,n.name=e.name,n.component=e,it(n),n.tValue!==void 0?n.tValue:n.value}function Io(e){oe&&(oe.sourceMap?oe.sourceMap.push(e):oe.sourceMap=[e],e.graph=oe)}function Lt(e,t){const n=Symbol("context");return{id:n,Provider:Aa(n,t),defaultValue:e}}function At(e){let t;return oe&&oe.context&&(t=oe.context[e.id])!==void 0?t:e.defaultValue}function $t(e){const t=W(e),n=W(()=>Sr(t()),void 0,{name:"children"});return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Ra;function Lo(){if(this.sources&&this.state)if(this.state===Be)it(this);else{const e=Ee;Ee=null,Fe(()=>Ln(this),!1),Ee=e}if(he){const e=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(e)):(he.sources=[this],he.sourceSlots=[e]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function Nr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=er&&er.running;i&&er.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?Ee.push(s):We.push(s),s.observers&&jo(s)),i||(s.state=Be)}if(Ee.length>1e6)throw Ee=[],ya?new Error("Potential Infinite Loop Detected."):new Error},!1)),t}function it(e){if(!e.fn)return;Ot(e);const t=Kn;Na(e,e.value,t)}function Na(e,t,n){let r;const o=oe,s=he;he=oe=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=Be,e.owned&&e.owned.forEach(Ot),e.owned=null),e.updatedAt=n+1,Ir(i)}finally{he=s,oe=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Nr(e,r):e.value=r,e.updatedAt=n)}function jt(e,t,n,r=Be,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:oe,context:oe?oe.context:null,pure:n};return oe===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):oe!==_a&&(oe.owned?oe.owned.push(s):oe.owned=[s]),o&&o.name&&(s.name=o.name),s}function In(e){if(e.state===0)return;if(e.state===Nn)return Ln(e);if(e.suspense&&$e(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Kn);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Be)it(e);else if(e.state===Nn){const r=Ee;Ee=null,Fe(()=>Ln(e,t[0]),!1),Ee=r}}function Fe(e,t){if(Ee)return e();let n=!1;t||(Ee=[]),We?n=!0:We=[],Kn++;try{const r=e();return Ia(n),r}catch(r){n||(We=null),Ee=null,Ir(r)}}function Ia(e){if(Ee&&(Ao(Ee),Ee=null),e)return;const t=We;We=null,t.length&&Fe(()=>ko(t),!1)}function Ao(e){for(let t=0;t<e.length;t++)In(e[t])}function La(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:In(r)}for(t=0;t<n;t++)In(e[t])}function Ln(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===Be?r!==t&&(!r.updatedAt||r.updatedAt<Kn)&&In(r):o===Nn&&Ln(r,t)}}}function jo(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Nn,n.pure?Ee.push(n):We.push(n),n.observers&&jo(n))}}function Ot(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ot(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ot(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,delete e.sourceMap}function wr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ir(e,t=oe){throw wr(e)}function Sr(e){if(typeof e=="function"&&!e.length)return Sr(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Sr(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Aa(e,t){return function(r){let o;return Z(()=>o=$e(()=>(oe.context={...oe.context,[e]:r.value},$t(()=>r.children))),void 0,t),o}}const ja=Symbol("fallback");function Vr(e){for(let t=0;t<e.length;t++)e[t]()}function Ta(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return Je(()=>Vr(s)),()=>{let l=e()||[],d=l.length,u,m;return l[br],$e(()=>{let v,_,y,f,h,c,g,$,b;if(d===0)i!==0&&(Vr(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[ja],o[0]=pt(w=>(s[0]=w,n.fallback())),i=1);else if(i===0){for(o=new Array(d),m=0;m<d;m++)r[m]=l[m],o[m]=pt(p);i=d}else{for(y=new Array(d),f=new Array(d),a&&(h=new Array(d)),c=0,g=Math.min(i,d);c<g&&r[c]===l[c];c++);for(g=i-1,$=d-1;g>=c&&$>=c&&r[g]===l[$];g--,$--)y[$]=o[g],f[$]=s[g],a&&(h[$]=a[g]);for(v=new Map,_=new Array($+1),m=$;m>=c;m--)b=l[m],u=v.get(b),_[m]=u===void 0?-1:u,v.set(b,m);for(u=c;u<=g;u++)b=r[u],m=v.get(b),m!==void 0&&m!==-1?(y[m]=o[u],f[m]=s[u],a&&(h[m]=a[u]),m=_[m],v.set(b,m)):s[u]();for(m=c;m<d;m++)m in y?(o[m]=y[m],s[m]=f[m],a&&(a[m]=h[m],a[m](m))):o[m]=pt(p);o=o.slice(0,i=d),r=l.slice(0)}return o});function p(v){if(s[m]=v,a){const[_,y]=J(m,{name:"index"});return a[m]=y,t(l[m],_)}return t(l[m])}}}function j(e,t){return Oa(e,t||{})}function Dt(){return!0}const xa={get(e,t,n){return t===Ve?n:e.get(t)},has(e,t){return t===Ve?!0:e.has(t)},set:Dt,deleteProperty:Dt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Dt,deleteProperty:Dt}},ownKeys(e){return e.keys()}};function tr(e){return(e=typeof e=="function"?e():e)?e:{}}function qa(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Da(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&Ve in a,e[i]=typeof a=="function"?(t=!0,W(a)):a}if($a&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const l=tr(e[a])[i];if(l!==void 0)return l}},has(i){for(let a=e.length-1;a>=0;a--)if(i in tr(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(tr(e[a])));return[...new Set(i)]}},xa);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let d=l.length-1;d>=0;d--){const u=l[d];if(u==="__proto__"||u==="constructor")continue;const m=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=m.get?{enumerable:!0,configurable:!0,get:qa.bind(n[u]=[m.get.bind(a)])}:m.value!==void 0?m:void 0;else{const p=n[u];p&&(m.get?p.push(m.get.bind(a)):m.value!==void 0&&p.push(()=>m.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],l=r[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}let Ma=0;function Va(){return`cl-${Ma++}`}const To=e=>`Attempting to access a stale value from <${e}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function at(e){const t="fallback"in e&&{fallback:()=>e.fallback};return W(Ta(()=>e.each,e.children,t||void 0),void 0,{name:"value"})}function ae(e){const t=e.keyed,n=W(()=>e.when,void 0,{name:"condition value"}),r=t?n:W(n,void 0,{equals:(o,s)=>!o==!s,name:"condition"});return W(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?$e(()=>s(t?o:()=>{if(!$e(r))throw To("Show");return n()})):s}return e.fallback},void 0,{name:"value"})}function Fa(e){const t=$t(()=>e.children),n=W(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<o.length;i++){const a=i,l=o[i],d=s,u=W(()=>d()?void 0:l.when,void 0,{name:"condition value"}),m=l.keyed?u:W(u,void 0,{equals:(p,v)=>!p==!v,name:"condition"});s=()=>d()||(m()?[a,u,l]:void 0)}return s});return W(()=>{const r=n()();if(!r)return e.fallback;const[o,s,i]=r,a=i.children;return typeof a=="function"&&a.length>0?$e(()=>a(i.keyed?s():()=>{if($e(n)()?.[0]!==o)throw To("Match");return s()})):a},void 0,{name:"eval conditions"})}function Ze(e){return e}const Ua={hooks:Sa,writeSignal:Nr,registerGraph:Io};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);function Ka(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,l=t[o-1].nextSibling,d=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!d||!d.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!d){d=new Map;let m=a;for(;m<s;)d.set(n[m],m++)}const u=d.get(t[i]);if(u!=null)if(a<u&&u<s){let m=i,p=1,v;for(;++m<o&&m<s&&!((v=d.get(t[m]))==null||v!==u+p);)p++;if(p>u-a){const _=t[i];for(;a<u;)e.insertBefore(n[a++],_)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Fr="_$DX_DELEGATE";function za(e,t,n,r={}){if(!t)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let o;return pt(s=>{o=s,t===document?e():T(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function D(e,t,n,r){let o;const s=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function le(e,t=window.document){const n=t[Fr]||(t[Fr]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Ha))}}function Y(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ne(e,t){t==null?e.removeAttribute("class"):e.className=t}function Rt(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function ot(e,t,n){return $e(()=>e(t,n))}function T(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return An(e,t,r,n);Z(o=>An(e,t(),o,n),r)}function Ha(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[n];if(l&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?l.call(t,d,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();s(l[0]);for(let d=0;d<l.length-2&&(t=l[d],!!i());d++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function An(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(i){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=ct(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=ct(e,n,r);else{if(s==="function")return Z(()=>{let a=t();for(;typeof a=="function";)a=a();n=An(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(Cr(a,t,n,o))return Z(()=>n=An(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=ct(e,n,r),i)return n}else l?n.length===0?Ur(e,a,r):Ka(e,n,a):(n&&ct(e),Ur(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=ct(e,n,r,t);ct(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Cr(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],l=n&&n[e.length],d;if(!(a==null||a===!0||a===!1))if((d=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Cr(e,a,l)||o;else if(d==="function")if(r){for(;typeof a=="function";)a=a();o=Cr(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||o}else e.push(a),o=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return o}function Ur(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ct(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const l=a.parentNode===e;!s&&!i?l?e.replaceChild(o,a):e.insertBefore(o,n):l&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Wa=!1,Ba="modulepreload",Ja=function(e){return"/learning-oe-solidjs/"+e},Kr={},rt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");o=Promise.allSettled(n.map(l=>{if(l=Ja(l),l in Kr)return;Kr[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Ba,d||(m.as="script"),m.crossOrigin="",m.href=l,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},Ga=["targetLanguage","defaultLanguage","appTitle","i18n"];let Mt;const xo=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;for(const n in t)t[n]&&typeof t[n]=="object"&&!Array.isArray(t[n])?((!e[n]||typeof e[n]!="object")&&(e[n]={}),xo(e[n],t[n])):e[n]=t[n];return e},qo=async()=>Mt||(Mt=(async()=>{let e,t;try{e=(await rt(async()=>{const{default:o}=await import("./default.config-C-p_k8Fb.js");return{default:o}},[])).default}catch{throw new Error("Default config file did not properly load")}try{t=(await rt(async()=>{const{default:o}=await import("./app.config-CK3W4uPV.js");return{default:o}},[])).default}catch{throw new Error('Config file "app.config.json" did not properly load')}const n=xo(e,t);let r=!0;if(Ga.forEach(o=>{n[o]||(console.warn(`app.config.json should contain the "${o}" key`),r=!1)}),!r)throw new Error("Invalid configuration file JSON.");return n})(),Mt),X=e=>typeof e=="string",_t=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},zr=e=>e==null?"":""+e,Qa=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Xa=/###/g,Hr=e=>e&&e.indexOf("###")>-1?e.replace(Xa,"."):e,Wr=e=>!e||X(e),Pt=(e,t,n)=>{const r=X(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(Wr(e))return{};const s=Hr(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return Wr(e)?{}:{obj:e,k:Hr(r[o])}},Br=(e,t,n)=>{const{obj:r,k:o}=Pt(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],i=t.slice(0,t.length-1),a=Pt(e,i,Object);for(;a.obj===void 0&&i.length;)s=`${i[i.length-1]}.${s}`,i=i.slice(0,i.length-1),a=Pt(e,i,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},Ya=(e,t,n,r)=>{const{obj:o,k:s}=Pt(e,t,Object);o[s]=o[s]||[],o[s].push(n)},jn=(e,t)=>{const{obj:n,k:r}=Pt(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Za=(e,t,n)=>{const r=jn(e,n);return r!==void 0?r:jn(t,n)},Do=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?X(e[r])||e[r]instanceof String||X(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Do(e[r],t[r],n):e[r]=t[r]);return e},ut=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ti=e=>X(e)?e.replace(/[&<>"'\/]/g,t=>ei[t]):e;class ni{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const ri=[" ",",","?","!",";"],si=new ni(20),oi=(e,t,n)=>{t=t||"",n=n||"";const r=ri.filter(i=>t.indexOf(i)<0&&n.indexOf(i)<0);if(r.length===0)return!0;const o=si.getRegExp(`(${r.map(i=>i==="?"?"\\?":i).join("|")})`);let s=!o.test(e);if(!s){const i=e.indexOf(n);i>0&&!o.test(e.substring(0,i))&&(s=!0)}return s},Er=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let i,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],i=o[a],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&l<r.length-1)continue;s+=l-s+1;break}o=i}return o},Tn=e=>e?.replace("_","-"),ai={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class xn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||ai,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(X(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new xn(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new xn(this.logger,t)}}var De=new xn;class zn{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(i=>{let[a,l]=i;for(let d=0;d<l;d++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[a,l]=i;for(let d=0;d<l;d++)a.apply(a,[t,...r])})}}class Jr extends zn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,i=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):X(r)&&s?a.push(...r.split(s)):a.push(r)));const l=jn(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!i||!X(r)?l:Er(this.data?.[t]?.[n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(i?r.split(i):r)),t.indexOf(".")>-1&&(a=t.split("."),o=n,n=a[1]),this.addNamespaces(n),Br(this.data,a,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),o=r,r=n,n=a[1]),this.addNamespaces(n);let l=jn(this.data,a)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Do(l,r,s):l={...l,...r},Br(this.data,a,l),i.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var Mo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{t=this.processors[s]?.process(t,n,r,o)??t}),t}};const Gr={},Qr=e=>!X(e)&&typeof e!="boolean"&&typeof e!="number";class qn extends zn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Qa(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=De.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const i=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!oi(t,r,o);if(i&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:X(s)?[s]:s};const d=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),t=d.join(o)}return{key:t,namespaces:X(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],d=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(u){const N=n.nsSeparator||this.options.nsSeparator;return o?{res:`${l}${N}${i}`,usedKey:i,exactUsedKey:i,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${N}${i}`}return o?{res:i,usedKey:i,exactUsedKey:i,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:i}const m=this.resolve(t,n);let p=m?.res;const v=m?.usedKey||i,_=m?.exactUsedKey||i,y=["[object Number]","[object Function]","[object RegExp]"],f=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,h=!this.i18nFormat||this.i18nFormat.handleAsObject,c=n.count!==void 0&&!X(n.count),g=qn.hasDefaultValue(n),$=c?this.pluralResolver.getSuffix(d,n.count,n):"",b=n.ordinal&&c?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",w=c&&!n.ordinal&&n.count===0,C=w&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${$}`]||n[`defaultValue${b}`]||n.defaultValue;let P=p;h&&!p&&g&&(P=C);const A=Qr(P),R=Object.prototype.toString.apply(P);if(h&&P&&A&&y.indexOf(R)<0&&!(X(f)&&Array.isArray(P))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,P,{...n,ns:a}):`key '${i} (${this.language})' returned an object instead of string.`;return o?(m.res=N,m.usedParams=this.getUsedParamsDetails(n),m):N}if(s){const N=Array.isArray(P),V=N?[]:{},z=N?_:v;for(const U in P)if(Object.prototype.hasOwnProperty.call(P,U)){const H=`${z}${s}${U}`;g&&!p?V[U]=this.translate(H,{...n,defaultValue:Qr(C)?C[U]:void 0,joinArrays:!1,ns:a}):V[U]=this.translate(H,{...n,joinArrays:!1,ns:a}),V[U]===H&&(V[U]=P[U])}p=V}}else if(h&&X(f)&&Array.isArray(p))p=p.join(f),p&&(p=this.extendTranslation(p,t,n,r));else{let N=!1,V=!1;!this.isValidLookup(p)&&g&&(N=!0,p=C),this.isValidLookup(p)||(V=!0,p=i);const U=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:p,H=g&&C!==p&&this.options.updateMissing;if(V||N||H){if(this.logger.log(H?"updateKey":"missingKey",d,l,i,H?C:p),s){const ce=this.resolve(i,{...n,keySeparator:!1});ce&&ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ne=[];const me=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&me&&me[0])for(let ce=0;ce<me.length;ce++)ne.push(me[ce]);else this.options.saveMissingTo==="all"?ne=this.languageUtils.toResolveHierarchy(n.lng||this.language):ne.push(n.lng||this.language);const se=(ce,F,O)=>{const q=g&&O!==p?O:U;this.options.missingKeyHandler?this.options.missingKeyHandler(ce,l,F,q,H,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ce,l,F,q,H,n),this.emit("missingKey",ce,l,F,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?ne.forEach(ce=>{const F=this.pluralResolver.getSuffixes(ce,n);w&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(O=>{se([ce],i+O,n[`defaultValue${O}`]||C)})}):se(ne,i,C))}p=this.extendTranslation(p,t,n,m,r),V&&p===i&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${i}`),(V||N)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${i}`:i,N?p:void 0))}return o?(m.res=p,m.usedParams=this.getUsedParamsDetails(n),m):p}extendTranslation(t,n,r,o,s){var i=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=X(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const p=t.match(this.interpolator.nestingRegexp);u=p&&p.length}let m=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,r.lng||this.language||o.usedLng,r),d){const p=t.match(this.interpolator.nestingRegexp),v=p&&p.length;u<v&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return s?.[0]===v[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${n[0]}`),null):i.translate(...v,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=X(a)?[a]:a;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=Mo.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,i,a;return X(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(l,n),u=d.key;o=u;let m=d.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const p=n.count!==void 0&&!X(n.count),v=p&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);m.forEach(f=>{this.isValidLookup(r)||(a=f,!Gr[`${y[0]}-${f}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(Gr[`${y[0]}-${f}`]=!0,this.logger.warn(`key "${o}" for languages "${y.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(h=>{if(this.isValidLookup(r))return;i=h;const c=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(c,u,h,f,n);else{let $;p&&($=this.pluralResolver.getSuffix(h,n.count,n));const b=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(c.push(u+$),n.ordinal&&$.indexOf(w)===0&&c.push(u+$.replace(w,this.options.pluralSeparator)),v&&c.push(u+b)),_){const C=`${u}${this.options.contextSeparator}${n.context}`;c.push(C),p&&(c.push(C+$),n.ordinal&&$.indexOf(w)===0&&c.push(C+$.replace(w,this.options.pluralSeparator)),v&&c.push(C+b))}}let g;for(;g=c.pop();)this.isValidLookup(r)||(s=g,r=this.getResource(h,f,g,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:i,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!X(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Xr{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=De.create("languageUtils")}getScriptPartFromCode(t){if(t=Tn(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Tn(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(X(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),X(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=i=>{i&&(this.isSupportedCode(i)?o.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return X(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):X(t)&&s(this.formatLanguageCode(t)),r.forEach(i=>{o.indexOf(i)<0&&s(this.formatLanguageCode(i))}),o}}const Yr={zero:0,one:1,two:2,few:3,many:4,other:5},Zr={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ii{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=De.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Tn(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Zr;if(!t.match(/-|_/))return Zr;const l=this.languageUtils.getLanguagePartFromCode(t);i=this.getRule(l,n)}return this.pluralRulesCache[s]=i,i}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>Yr[o]-Yr[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const es=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Za(e,t,n);return!s&&o&&X(n)&&(s=Er(e,n,r),s===void 0&&(s=Er(t,n,r))),s},nr=e=>e.replace(/\$/g,"$$$$");class li{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:i,suffix:a,suffixEscaped:l,formatSeparator:d,unescapeSuffix:u,unescapePrefix:m,nestingPrefix:p,nestingPrefixEscaped:v,nestingSuffix:_,nestingSuffixEscaped:y,nestingOptionsSeparator:f,maxReplaces:h,alwaysFormat:c}=t.interpolation;this.escape=n!==void 0?n:ti,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ut(s):i||"{{",this.suffix=a?ut(a):l||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=p?ut(p):v||ut("$t("),this.nestingSuffix=_?ut(_):y||ut(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=h||1e3,this.alwaysFormat=c!==void 0?c:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,i,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const h=es(n,l,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(h,void 0,r,{...o,...n,interpolationkey:v}):h}const _=v.split(this.formatSeparator),y=_.shift().trim(),f=_.join(this.formatSeparator).trim();return this.format(es(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),f,r,{...o,...n,interpolationkey:y})};this.resetRegExp();const u=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,m=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>nr(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?nr(this.escape(v)):nr(v)}].forEach(v=>{for(a=0;s=v.regex.exec(t);){const _=s[1].trim();if(i=d(_),i===void 0)if(typeof u=="function"){const f=u(t,s,o);i=X(f)?f:""}else if(o&&Object.prototype.hasOwnProperty.call(o,_))i="";else if(m){i=s[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${t}`),i="";else!X(i)&&!this.useRawValueToEscape&&(i=zr(i));const y=v.safeValue(i);if(t=t.replace(s[0],y),m?(v.regex.lastIndex+=i.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,i;const a=(l,d)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const m=l.split(new RegExp(`${u}[ ]*{`));let p=`{${m[1]}`;l=m[0],p=this.interpolate(p,i);const v=p.match(/'/g),_=p.match(/"/g);((v?.length??0)%2===0&&!_||_.length%2!==0)&&(p=p.replace(/'/g,'"'));try{i=JSON.parse(p),d&&(i={...d,...i})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${u}${p}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,l};for(;o=this.nestingRegexp.exec(t);){let l=[];i={...r},i=i.replace&&!X(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const u=o[1].split(this.formatSeparator).map(m=>m.trim());o[1]=u.shift(),l=u,d=!0}if(s=n(a.call(this,o[1].trim(),i),i),s&&o[0]===t&&!X(s))return s;X(s)||(s=zr(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),d&&(s=l.reduce((u,m)=>this.format(u,m,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const ci=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(i=>{if(i){const[a,...l]=i.split(":"),d=l.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},dt=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const i=r+JSON.stringify(s);let a=t[i];return a||(a=e(Tn(r),o),t[i]=a),a(n)}};class ui{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("formatter"),this.options=t,this.formats={number:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:dt((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:dt((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:dt((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=dt(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:d,formatOptions:u}=ci(l);if(this.formats[d]){let m=a;try{const p=o?.formatParams?.[o.interpolationkey]||{},v=p.locale||p.lng||o.locale||o.lng||r;m=this.formats[d](a,v,{...u,...o,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${d}`);return a},t)}}const di=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class fi extends zn{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=De.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(t,n,r,o){const s={},i={},a={},l={};return t.forEach(d=>{let u=!0;n.forEach(m=>{const p=`${d}|${m}`;!r.reload&&this.store.hasResourceBundle(d,m)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?i[p]===void 0&&(i[p]=!0):(this.state[p]=1,u=!1,i[p]===void 0&&(i[p]=!0),s[p]===void 0&&(s[p]=!0),l[m]===void 0&&(l[m]=!0)))}),u||(a[d]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const o=t.split("|"),s=o[0],i=o[1];n&&this.emit("failedLoading",s,i,n),!n&&r&&this.store.addResourceBundle(s,i,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{Ya(l.loaded,[s],i),di(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(d=>{a[d]||(a[d]={});const u=l.loaded[d];u.length&&u.forEach(m=>{a[d][m]===void 0&&(a[d][m]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!t.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:i});return}this.readingCalls++;const a=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(d&&u&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,i)},s);return}i(d,u)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const d=l(t,n);d&&typeof d.then=="function"?d.then(u=>a(null,u)).catch(a):a(null,d)}catch(d){a(d)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();X(t)&&(t=this.languageUtils.toResolveHierarchy(t)),X(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(i=>{this.loadOne(i)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(i,a)=>{i&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,i),!i&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,a),this.loaded(t,i,a)})}saveMissing(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const l={...i,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(t,n,r,o,l):u=d(t,n,r,o),u&&typeof u.then=="function"?u.then(m=>a(null,m)).catch(a):a(null,u)}catch(u){a(u)}else d(t,n,r,o,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const ts=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),X(e[1])&&(t.defaultValue=e[1]),X(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ns=e=>(X(e.ns)&&(e.ns=[e.ns]),X(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),X(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Vt=()=>{},hi=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Nt extends zn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ns(t),this.services={},this.logger=De,this.modules={external:[]},hi(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(X(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=ts();this.options={...o,...this.options,...ns(n)},this.options.interpolation={...o.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?De.init(s(this.modules.logger),this.options):De.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=ui;const m=new Xr(this.options);this.store=new Jr(this.options.resources,this.options);const p=this.services;p.logger=De,p.resourceStore=this.store,p.languageUtils=m,p.pluralResolver=new ii(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=s(u),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new li(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new fi(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(v){for(var _=arguments.length,y=new Array(_>1?_-1:0),f=1;f<_;f++)y[f-1]=arguments[f];t.emit(v,...y)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new qn(this.services,this.options),this.translator.on("*",function(v){for(var _=arguments.length,y=new Array(_>1?_-1:0),f=1;f<_;f++)y[f-1]=arguments[f];t.emit(v,...y)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Vt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const l=_t(),d=()=>{const u=(m,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(m,p)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const o=X(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],i=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};o?i(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>i(l)),this.options.preload?.forEach?.(a=>i(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const o=_t();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Vt),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Mo.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=_t();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=X(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,u=>{i(u,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),o}getFixedT(t,n,r){var o=this;const s=function(i,a){let l;if(typeof a!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),m=2;m<d;m++)u[m-2]=arguments[m];l=o.options.overloadTranslationOptionHandler([i,a].concat(u))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const p=o.options.keySeparator||".";let v;return l.keyPrefix&&Array.isArray(i)?v=i.map(_=>`${l.keyPrefix}${p}${_}`):v=l.keyPrefix?`${l.keyPrefix}${p}${i}`:i,o.t(v,l)};return X(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(a,l)=>{const d=this.services.backendConnector.state[`${a}|${l}`];return d===-1||d===0||d===2};if(n.precheck){const a=n.precheck(this,i);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(r,t)&&(!o||i(s,t)))}loadNamespaces(t,n){const r=_t();return this.options.ns?(X(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=_t();X(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(i=>o.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return s.length?(this.options.preload=o.concat(s),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Xr(ts());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Nt(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new Nt(o);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((l,d)=>(l[d]={...this.store.data[d]},Object.keys(l[d]).reduce((u,m)=>(u[m]={...l[d][m]},u),{})),{});s.store=new Jr(a,o),s.services.resourceStore=s.store}return s.translator=new qn(s.services,o),s.translator.on("*",function(a){for(var l=arguments.length,d=new Array(l>1?l-1:0),u=1;u<l;u++)d[u-1]=arguments[u];s.emit(a,...d)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=Nt.createInstance();ye.createInstance=Nt.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;var mi=D("<div>Loading i18n...");const gi={t:(...e)=>ye.t(...e),language:()=>ye.language,setLanguage:e=>ye.changeLanguage(e)},Vo=Lt(gi),pi=async e=>{const t=Object.fromEntries(Object.entries(e.i18n.availableLanguages).map(([n,r])=>[n,{translation:r}]));await ye.init({resources:t,lng:e.uiLanguage||e.targetLanguage||e.defaultLanguage,fallbackLng:e.defaultLanguage,interpolation:{escapeValue:!1}})},yi=e=>{const t=$t(()=>e.children),[n,r]=J(ye.language),[o,s]=J(!1),i=ye.t;return ge(()=>{r(ye.language),ye.on("languageChanged",r),s(!0)}),o()?j(Vo.Provider,{value:{t:i,language:n,setLanguage:r},get children(){return t()}}):mi()},be=()=>{const e=At(Vo);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},Pr=Symbol("store-raw"),yt=Symbol("store-node"),He=Symbol("store-has"),Fo=Symbol("store-self");function Uo(e){let t=e[Ve];if(!t&&(Object.defineProperty(e,Ve,{value:t=new Proxy(e,bi)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Xe(e){let t;return e!=null&&typeof e=="object"&&(e[Ve]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function vt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[Pr])return n;if(!Xe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)o=e[i],(r=vt(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,d=i.length;l<d;l++)s=i[l],!a[s].get&&(o=e[s],(r=vt(o,t))!==o&&(e[s]=r))}return e}function Dn(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function It(e,t,n){if(e[t])return e[t];const[r,o]=J(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function vi(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ve||t===yt||(delete n.value,delete n.writable,n.get=()=>e[Ve][t]),n}function Ko(e){_r()&&It(Dn(e,yt),Fo)()}function $i(e){return Ko(e),Reflect.ownKeys(e)}const bi={get(e,t,n){if(t===Pr)return e;if(t===Ve)return n;if(t===br)return Ko(e),n;const r=Dn(e,yt),o=r[t];let s=o?o():e[t];if(t===yt||t===He||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);_r()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=It(r,t,s)())}return Xe(s)?Uo(s):s},has(e,t){return t===Pr||t===Ve||t===br||t===yt||t===He||t==="__proto__"?!0:(_r()&&It(Dn(e,He),t)(),t in e)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:$i,getOwnPropertyDescriptor:vi};function Ae(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[He]&&e[He][t]&&o!==void 0&&e[He][t].$()):(e[t]=n,e[He]&&e[He][t]&&o===void 0&&e[He][t].$());let i=Dn(e,yt),a;if((a=It(i,t,o))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(a=i[l])&&a.$();(a=It(i,"length",s))&&a.$(e.length)}(a=i[Fo])&&a.$()}function zo(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ae(e,o,t[o])}}function _i(e,t){if(typeof t=="function"&&(t=t(e)),t=vt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Ae(e,n,o)}Ae(e,"length",r)}else zo(e,t)}function Et(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Et(e,[r[l]].concat(t),n);return}else if(a&&i==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Et(e,[l].concat(t),n);return}else if(a&&i==="object"){const{from:l=0,to:d=e.length-1,by:u=1}=r;for(let m=l;m<=d;m+=u)Et(e,[m].concat(t),n);return}else if(t.length>1){Et(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=vt(s),r===void 0||Xe(o)&&Xe(s)&&!Array.isArray(s)?zo(o,s):Ae(e,r,s))}function Ho(...[e,t]){const n=vt(e||{}),r=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const o=Uo(n);Ua.registerGraph({value:n,name:t&&t.name});function s(...i){Oo(()=>{r&&i.length===1?_i(n,i[0]):Et(n,i)})}return[o,s]}const kr=Symbol("store-root");function gt(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==kr&&(!Xe(e)||!Xe(s)||i!==Array.isArray(s)||o&&e[o]!==s[o])){Ae(t,n,e);return}if(i){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,u,m,p,v,_,y,f;for(m=0,p=Math.min(s.length,e.length);m<p&&(s[m]===e[m]||o&&s[m]&&e[m]&&s[m][o]===e[m][o]);m++)gt(e[m],s,m,r,o);const h=new Array(e.length),c=new Map;for(p=s.length-1,v=e.length-1;p>=m&&v>=m&&(s[p]===e[v]||o&&s[p]&&e[v]&&s[p][o]===e[v][o]);p--,v--)h[v]=s[p];if(m>v||m>p){for(u=m;u<=v;u++)Ae(s,u,e[u]);for(;u<e.length;u++)Ae(s,u,h[u]),gt(e[u],s,u,r,o);s.length>e.length&&Ae(s,"length",e.length);return}for(y=new Array(v+1),u=v;u>=m;u--)_=e[u],f=o&&_?_[o]:_,d=c.get(f),y[u]=d===void 0?-1:d,c.set(f,u);for(d=m;d<=p;d++)_=s[d],f=o&&_?_[o]:_,u=c.get(f),u!==void 0&&u!==-1&&(h[u]=s[d],u=y[u],c.set(f,u));for(u=m;u<e.length;u++)u in h?(Ae(s,u,h[u]),gt(e[u],s,u,r,o)):Ae(s,u,e[u])}else for(let d=0,u=e.length;d<u;d++)gt(e[d],s,d,r,o);s.length>e.length&&Ae(s,"length",e.length);return}const a=Object.keys(e);for(let d=0,u=a.length;d<u;d++)gt(e[a[d]],s,a[d],r,o);const l=Object.keys(s);for(let d=0,u=l.length;d<u;d++)e[l[d]]===void 0&&Ae(s,l[d],void 0)}function wi(e,t={}){const{merge:n,key:r="id"}=t,o=vt(e);return s=>{if(!Xe(s)||!Xe(o))return o;const i=gt(o,{[kr]:s},kr,n,r);return i===void 0?s:i}}function Wo(e,t={}){const n=t.storage||globalThis.localStorage,r=t.name||`storage-${Va()}`;if(!n)return[e[0],e[1],null];const o=t.storageOptions,s=t.serialize||JSON.stringify.bind(JSON),i=t.deserialize||JSON.parse.bind(JSON),a=n.getItem(r,o),l=typeof e[0]=="function"?u=>{try{const m=i(u);e[1](()=>m)}catch(m){console.warn(m)}}:u=>{try{const m=i(u);e[1](wi(m))}catch(m){console.warn(m)}};let d=!0;if(a instanceof Promise?a.then(u=>d&&u&&l(u)):a&&l(a),typeof t.sync?.[0]=="function"){const u=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](m=>{m.key!==r||(m.url||globalThis.location.href)!==globalThis.location.href||m.newValue===s($e(u))||l(m.newValue)})}return[e[0],typeof e[0]=="function"?u=>{const m=e[1](u),p=u!=null?s(m):u;return t.sync?.[1](r,p),p!=null?n.setItem(r,p,o):n.removeItem(r,o),d=!1,m}:(...u)=>{e[1](...u);const m=s($e(()=>e[0]));t.sync?.[1](r,m),n.setItem(r,m,o),d=!1},a]}function Si(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ft={exports:{}},rr={},Ue={},et={},sr={},or={},ar={},rs;function Mn(){return rs||(rs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(c){if(super(),!e.IDENTIFIER.test(c))throw new Error("CodeGen: name must be a valid identifier");this.str=c}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(c){super(),this._items=typeof c=="string"?[c]:c}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const c=this._items[0];return c===""||c==='""'}get str(){var c;return(c=this._str)!==null&&c!==void 0?c:this._str=this._items.reduce((g,$)=>`${g}${$}`,"")}get names(){var c;return(c=this._names)!==null&&c!==void 0?c:this._names=this._items.reduce((g,$)=>($ instanceof n&&(g[$.str]=(g[$.str]||0)+1),g),{})}}e._Code=r,e.nil=new r("");function o(h,...c){const g=[h[0]];let $=0;for(;$<c.length;)a(g,c[$]),g.push(h[++$]);return new r(g)}e._=o;const s=new r("+");function i(h,...c){const g=[v(h[0])];let $=0;for(;$<c.length;)g.push(s),a(g,c[$]),g.push(s,v(h[++$]));return l(g),new r(g)}e.str=i;function a(h,c){c instanceof r?h.push(...c._items):c instanceof n?h.push(c):h.push(m(c))}e.addCodeArg=a;function l(h){let c=1;for(;c<h.length-1;){if(h[c]===s){const g=d(h[c-1],h[c+1]);if(g!==void 0){h.splice(c-1,3,g);continue}h[c++]="+"}c++}}function d(h,c){if(c==='""')return h;if(h==='""')return c;if(typeof h=="string")return c instanceof n||h[h.length-1]!=='"'?void 0:typeof c!="string"?`${h.slice(0,-1)}${c}"`:c[0]==='"'?h.slice(0,-1)+c.slice(1):void 0;if(typeof c=="string"&&c[0]==='"'&&!(h instanceof n))return`"${h}${c.slice(1)}`}function u(h,c){return c.emptyStr()?h:h.emptyStr()?c:i`${h}${c}`}e.strConcat=u;function m(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:v(Array.isArray(h)?h.join(","):h)}function p(h){return new r(v(h))}e.stringify=p;function v(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=v;function _(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new r(`.${h}`):o`[${h}]`}e.getProperty=_;function y(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new r(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=y;function f(h){return new r(h.toString())}e.regexpCode=f}(ar)),ar}var ir={},ss;function os(){return ss||(ss=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Mn();class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:d,parent:u}={}){this._names={},this._prefixes=d,this._parent=u}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const u=this._names[d]||this._nameGroup(d);return`${d}${u.index++}`}_nameGroup(d){var u,m;if(!((m=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=o;class s extends t.Name{constructor(d,u){super(u),this.prefix=d}setValue(d,{property:u,itemIndex:m}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(u)}[${m}]`}}e.ValueScopeName=s;const i=(0,t._)`\n`;class a extends o{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?i:t.nil}}get(){return this._scope}name(d){return new s(d,this._newName(d))}value(d,u){var m;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const p=this.toName(d),{prefix:v}=p,_=(m=u.key)!==null&&m!==void 0?m:u.ref;let y=this._values[v];if(y){const c=y.get(_);if(c)return c}else y=this._values[v]=new Map;y.set(_,p);const f=this._scope[v]||(this._scope[v]=[]),h=f.length;return f[h]=u.ref,p.setValue(u,{property:v,itemIndex:h}),p}getValue(d,u){const m=this._values[d];if(m)return m.get(u)}scopeRefs(d,u=this._values){return this._reduceValues(u,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,t._)`${d}${m.scopePath}`})}scopeCode(d=this._values,u,m){return this._reduceValues(d,p=>{if(p.value===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return p.value.code},u,m)}_reduceValues(d,u,m={},p){let v=t.nil;for(const _ in d){const y=d[_];if(!y)continue;const f=m[_]=m[_]||new Map;y.forEach(h=>{if(f.has(h))return;f.set(h,r.Started);let c=u(h);if(c){const g=this.opts.es5?e.varKinds.var:e.varKinds.const;v=(0,t._)`${v}${g} ${h} = ${c};${this.opts._n}`}else if(c=p?.(h))v=(0,t._)`${v}${c}${this.opts._n}`;else throw new n(h);f.set(h,r.Completed)})}return v}}e.ValueScope=a}(ir)),ir}var as;function re(){return as||(as=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Mn(),n=os();var r=Mn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=os();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,E){return this}}class i extends s{constructor(S,E,x){super(),this.varKind=S,this.name=E,this.rhs=x}render({es5:S,_n:E}){const x=S?n.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${B};`+E}optimizeNames(S,E){if(S[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,S,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(S,E,x){super(),this.lhs=S,this.rhs=E,this.sideEffects=x}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,E){if(!(this.lhs instanceof t.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,S,E),this}get names(){const S=this.lhs instanceof t.Name?{}:{...this.lhs.names};return z(S,this.rhs)}}class l extends a{constructor(S,E,x,B){super(S,x,B),this.op=E}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class d extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class u extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class m extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class p extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,E){return this.code=U(this.code,S,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class v extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((E,x)=>E+x.render(S),"")}optimizeNodes(){const{nodes:S}=this;let E=S.length;for(;E--;){const x=S[E].optimizeNodes();Array.isArray(x)?S.splice(E,1,...x):x?S[E]=x:S.splice(E,1)}return S.length>0?this:void 0}optimizeNames(S,E){const{nodes:x}=this;let B=x.length;for(;B--;){const Q=x[B];Q.optimizeNames(S,E)||(H(S,Q.names),x.splice(B,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((S,E)=>V(S,E.names),{})}}class _ extends v{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class y extends v{}class f extends _{}f.kind="else";class h extends _{constructor(S,E){super(E),this.condition=S}render(S){let E=`if(${this.condition})`+super.render(S);return this.else&&(E+="else "+this.else.render(S)),E}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let E=this.else;if(E){const x=E.optimizeNodes();E=this.else=Array.isArray(x)?new f(x):x}if(E)return S===!1?E instanceof h?E:E.nodes:this.nodes.length?this:new h(ne(S),E instanceof h?[E]:E.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,E){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(S,E),!!(super.optimizeNames(S,E)||this.else))return this.condition=U(this.condition,S,E),this}get names(){const S=super.names;return z(S,this.condition),this.else&&V(S,this.else.names),S}}h.kind="if";class c extends _{}c.kind="for";class g extends c{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iteration=U(this.iteration,S,E),this}get names(){return V(super.names,this.iteration.names)}}class $ extends c{constructor(S,E,x,B){super(),this.varKind=S,this.name=E,this.from=x,this.to=B}render(S){const E=S.es5?n.varKinds.var:this.varKind,{name:x,from:B,to:Q}=this;return`for(${E} ${x}=${B}; ${x}<${Q}; ${x}++)`+super.render(S)}get names(){const S=z(super.names,this.from);return z(S,this.to)}}class b extends c{constructor(S,E,x,B){super(),this.loop=S,this.varKind=E,this.name=x,this.iterable=B}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iterable=U(this.iterable,S,E),this}get names(){return V(super.names,this.iterable.names)}}class w extends _{constructor(S,E,x){super(),this.name=S,this.args=E,this.async=x}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}w.kind="func";class C extends v{render(S){return"return "+super.render(S)}}C.kind="return";class P extends _{render(S){let E="try"+super.render(S);return this.catch&&(E+=this.catch.render(S)),this.finally&&(E+=this.finally.render(S)),E}optimizeNodes(){var S,E;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(S,E){var x,B;return super.optimizeNames(S,E),(x=this.catch)===null||x===void 0||x.optimizeNames(S,E),(B=this.finally)===null||B===void 0||B.optimizeNames(S,E),this}get names(){const S=super.names;return this.catch&&V(S,this.catch.names),this.finally&&V(S,this.finally.names),S}}class A extends _{constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}A.kind="catch";class R extends _{render(S){return"finally"+super.render(S)}}R.kind="finally";class N{constructor(S,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=S,this._scope=new n.Scope({parent:S}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,E){const x=this._extScope.value(S,E);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(S,E){return this._extScope.getValue(S,E)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,E,x,B){const Q=this._scope.toName(E);return x!==void 0&&B&&(this._constants[Q.str]=x),this._leafNode(new i(S,Q,x)),Q}const(S,E,x){return this._def(n.varKinds.const,S,E,x)}let(S,E,x){return this._def(n.varKinds.let,S,E,x)}var(S,E,x){return this._def(n.varKinds.var,S,E,x)}assign(S,E,x){return this._leafNode(new a(S,E,x))}add(S,E){return this._leafNode(new l(S,e.operators.ADD,E))}code(S){return typeof S=="function"?S():S!==t.nil&&this._leafNode(new p(S)),this}object(...S){const E=["{"];for(const[x,B]of S)E.length>1&&E.push(","),E.push(x),(x!==B||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,B));return E.push("}"),new t._Code(E)}if(S,E,x){if(this._blockNode(new h(S)),E&&x)this.code(E).else().code(x).endIf();else if(E)this.code(E).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new h(S))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(h,f)}_for(S,E){return this._blockNode(S),E&&this.code(E).endFor(),this}for(S,E){return this._for(new g(S),E)}forRange(S,E,x,B,Q=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(S);return this._for(new $(Q,de,E,x),()=>B(de))}forOf(S,E,x,B=n.varKinds.const){const Q=this._scope.toName(S);if(this.opts.es5){const de=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${de}.length`,ie=>{this.var(Q,(0,t._)`${de}[${ie}]`),x(Q)})}return this._for(new b("of",B,Q,E),()=>x(Q))}forIn(S,E,x,B=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,t._)`Object.keys(${E})`,x);const Q=this._scope.toName(S);return this._for(new b("in",B,Q,E),()=>x(Q))}endFor(){return this._endBlockNode(c)}label(S){return this._leafNode(new d(S))}break(S){return this._leafNode(new u(S))}return(S){const E=new C;if(this._blockNode(E),this.code(S),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,E,x){if(!E&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new P;if(this._blockNode(B),this.code(S),E){const Q=this.name("e");this._currNode=B.catch=new A(Q),E(Q)}return x&&(this._currNode=B.finally=new R,this.code(x)),this._endBlockNode(A,R)}throw(S){return this._leafNode(new m(S))}block(S,E){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(E),this}endBlock(S){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-E;if(x<0||S!==void 0&&x!==S)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${S} expected`);return this._nodes.length=E,this}func(S,E=t.nil,x,B){return this._blockNode(new w(S,E,x)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,E){const x=this._currNode;if(x instanceof S||E&&x instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${S.kind}/${E.kind}`:S.kind}"`)}_elseNode(S){const E=this._currNode;if(!(E instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const E=this._nodes;E[E.length-1]=S}}e.CodeGen=N;function V(L,S){for(const E in S)L[E]=(L[E]||0)+(S[E]||0);return L}function z(L,S){return S instanceof t._CodeOrName?V(L,S.names):L}function U(L,S,E){if(L instanceof t.Name)return x(L);if(!B(L))return L;return new t._Code(L._items.reduce((Q,de)=>(de instanceof t.Name&&(de=x(de)),de instanceof t._Code?Q.push(...de._items):Q.push(de),Q),[]));function x(Q){const de=E[Q.str];return de===void 0||S[Q.str]!==1?Q:(delete S[Q.str],de)}function B(Q){return Q instanceof t._Code&&Q._items.some(de=>de instanceof t.Name&&S[de.str]===1&&E[de.str]!==void 0)}}function H(L,S){for(const E in S)L[E]=(L[E]||0)-(S[E]||0)}function ne(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${q(L)}`}e.not=ne;const me=O(e.operators.AND);function se(...L){return L.reduce(me)}e.and=se;const ce=O(e.operators.OR);function F(...L){return L.reduce(ce)}e.or=F;function O(L){return(S,E)=>S===t.nil?E:E===t.nil?S:(0,t._)`${q(S)} ${L} ${q(E)}`}function q(L){return L instanceof t.Name?L:(0,t._)`(${L})`}}(or)),or}var ee={},is;function ue(){if(is)return ee;is=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.checkStrictMode=ee.getErrorPath=ee.Type=ee.useFunc=ee.setEvaluated=ee.evaluatedPropsToName=ee.mergeEvaluated=ee.eachItem=ee.unescapeJsonPointer=ee.escapeJsonPointer=ee.escapeFragment=ee.unescapeFragment=ee.schemaRefOrVal=ee.schemaHasRulesButRef=ee.schemaHasRules=ee.checkUnknownRules=ee.alwaysValidSchema=ee.toHash=void 0;const e=re(),t=Mn();function n(b){const w={};for(const C of b)w[C]=!0;return w}ee.toHash=n;function r(b,w){return typeof w=="boolean"?w:Object.keys(w).length===0?!0:(o(b,w),!s(w,b.self.RULES.all))}ee.alwaysValidSchema=r;function o(b,w=b.schema){const{opts:C,self:P}=b;if(!C.strictSchema||typeof w=="boolean")return;const A=P.RULES.keywords;for(const R in w)A[R]||$(b,`unknown keyword: "${R}"`)}ee.checkUnknownRules=o;function s(b,w){if(typeof b=="boolean")return!b;for(const C in b)if(w[C])return!0;return!1}ee.schemaHasRules=s;function i(b,w){if(typeof b=="boolean")return!b;for(const C in b)if(C!=="$ref"&&w.all[C])return!0;return!1}ee.schemaHasRulesButRef=i;function a({topSchemaRef:b,schemaPath:w},C,P,A){if(!A){if(typeof C=="number"||typeof C=="boolean")return C;if(typeof C=="string")return(0,e._)`${C}`}return(0,e._)`${b}${w}${(0,e.getProperty)(P)}`}ee.schemaRefOrVal=a;function l(b){return m(decodeURIComponent(b))}ee.unescapeFragment=l;function d(b){return encodeURIComponent(u(b))}ee.escapeFragment=d;function u(b){return typeof b=="number"?`${b}`:b.replace(/~/g,"~0").replace(/\//g,"~1")}ee.escapeJsonPointer=u;function m(b){return b.replace(/~1/g,"/").replace(/~0/g,"~")}ee.unescapeJsonPointer=m;function p(b,w){if(Array.isArray(b))for(const C of b)w(C);else w(b)}ee.eachItem=p;function v({mergeNames:b,mergeToName:w,mergeValues:C,resultToName:P}){return(A,R,N,V)=>{const z=N===void 0?R:N instanceof e.Name?(R instanceof e.Name?b(A,R,N):w(A,R,N),N):R instanceof e.Name?(w(A,N,R),R):C(R,N);return V===e.Name&&!(z instanceof e.Name)?P(A,z):z}}ee.mergeEvaluated={props:v({mergeNames:(b,w,C)=>b.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>{b.if((0,e._)`${w} === true`,()=>b.assign(C,!0),()=>b.assign(C,(0,e._)`${C} || {}`).code((0,e._)`Object.assign(${C}, ${w})`))}),mergeToName:(b,w,C)=>b.if((0,e._)`${C} !== true`,()=>{w===!0?b.assign(C,!0):(b.assign(C,(0,e._)`${C} || {}`),y(b,C,w))}),mergeValues:(b,w)=>b===!0?!0:{...b,...w},resultToName:_}),items:v({mergeNames:(b,w,C)=>b.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>b.assign(C,(0,e._)`${w} === true ? true : ${C} > ${w} ? ${C} : ${w}`)),mergeToName:(b,w,C)=>b.if((0,e._)`${C} !== true`,()=>b.assign(C,w===!0?!0:(0,e._)`${C} > ${w} ? ${C} : ${w}`)),mergeValues:(b,w)=>b===!0?!0:Math.max(b,w),resultToName:(b,w)=>b.var("items",w)})};function _(b,w){if(w===!0)return b.var("props",!0);const C=b.var("props",(0,e._)`{}`);return w!==void 0&&y(b,C,w),C}ee.evaluatedPropsToName=_;function y(b,w,C){Object.keys(C).forEach(P=>b.assign((0,e._)`${w}${(0,e.getProperty)(P)}`,!0))}ee.setEvaluated=y;const f={};function h(b,w){return b.scopeValue("func",{ref:w,code:f[w.code]||(f[w.code]=new t._Code(w.code))})}ee.useFunc=h;var c;(function(b){b[b.Num=0]="Num",b[b.Str=1]="Str"})(c||(ee.Type=c={}));function g(b,w,C){if(b instanceof e.Name){const P=w===c.Num;return C?P?(0,e._)`"[" + ${b} + "]"`:(0,e._)`"['" + ${b} + "']"`:P?(0,e._)`"/" + ${b}`:(0,e._)`"/" + ${b}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return C?(0,e.getProperty)(b).toString():"/"+u(b)}ee.getErrorPath=g;function $(b,w,C=b.opts.strictSchema){if(C){if(w=`strict mode: ${w}`,C===!0)throw new Error(w);b.self.logger.warn(w)}}return ee.checkStrictMode=$,ee}var Ut={},ls;function Ye(){if(ls)return Ut;ls=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e=re(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Ut.default=t,Ut}var cs;function Hn(){return cs||(cs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=re(),n=ue(),r=Ye();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:h})=>h?(0,t.str)`"${f}" keyword must be ${h} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function o(f,h=e.keywordError,c,g){const{it:$}=f,{gen:b,compositeRule:w,allErrors:C}=$,P=m(f,h,c);g??(w||C)?l(b,P):d($,(0,t._)`[${P}]`)}e.reportError=o;function s(f,h=e.keywordError,c){const{it:g}=f,{gen:$,compositeRule:b,allErrors:w}=g,C=m(f,h,c);l($,C),b||w||d(g,r.default.vErrors)}e.reportExtraError=s;function i(f,h){f.assign(r.default.errors,h),f.if((0,t._)`${r.default.vErrors} !== null`,()=>f.if(h,()=>f.assign((0,t._)`${r.default.vErrors}.length`,h),()=>f.assign(r.default.vErrors,null)))}e.resetErrorsCount=i;function a({gen:f,keyword:h,schemaValue:c,data:g,errsCount:$,it:b}){if($===void 0)throw new Error("ajv implementation error");const w=f.name("err");f.forRange("i",$,r.default.errors,C=>{f.const(w,(0,t._)`${r.default.vErrors}[${C}]`),f.if((0,t._)`${w}.instancePath === undefined`,()=>f.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,b.errorPath))),f.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${b.errSchemaPath}/${h}`),b.opts.verbose&&(f.assign((0,t._)`${w}.schema`,c),f.assign((0,t._)`${w}.data`,g))})}e.extendErrors=a;function l(f,h){const c=f.const("err",h);f.if((0,t._)`${r.default.vErrors} === null`,()=>f.assign(r.default.vErrors,(0,t._)`[${c}]`),(0,t._)`${r.default.vErrors}.push(${c})`),f.code((0,t._)`${r.default.errors}++`)}function d(f,h){const{gen:c,validateName:g,schemaEnv:$}=f;$.$async?c.throw((0,t._)`new ${f.ValidationError}(${h})`):(c.assign((0,t._)`${g}.errors`,h),c.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function m(f,h,c){const{createErrors:g}=f.it;return g===!1?(0,t._)`{}`:p(f,h,c)}function p(f,h,c={}){const{gen:g,it:$}=f,b=[v($,c),_(f,c)];return y(f,h,b),g.object(...b)}function v({errorPath:f},{instancePath:h}){const c=h?(0,t.str)`${f}${(0,n.getErrorPath)(h,n.Type.Str)}`:f;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,c)]}function _({keyword:f,it:{errSchemaPath:h}},{schemaPath:c,parentSchema:g}){let $=g?h:(0,t.str)`${h}/${f}`;return c&&($=(0,t.str)`${$}${(0,n.getErrorPath)(c,n.Type.Str)}`),[u.schemaPath,$]}function y(f,{params:h,message:c},g){const{keyword:$,data:b,schemaValue:w,it:C}=f,{opts:P,propertyName:A,topSchemaRef:R,schemaPath:N}=C;g.push([u.keyword,$],[u.params,typeof h=="function"?h(f):h||(0,t._)`{}`]),P.messages&&g.push([u.message,typeof c=="function"?c(f):c]),P.verbose&&g.push([u.schema,w],[u.parentSchema,(0,t._)`${R}${N}`],[r.default.data,b]),A&&g.push([u.propertyName,A])}}(sr)),sr}var us;function Ci(){if(us)return et;us=1,Object.defineProperty(et,"__esModule",{value:!0}),et.boolOrEmptySchema=et.topBoolOrEmptySchema=void 0;const e=Hn(),t=re(),n=Ye(),r={message:"boolean schema is false"};function o(a){const{gen:l,schema:d,validateName:u}=a;d===!1?i(a,!1):typeof d=="object"&&d.$async===!0?l.return(n.default.data):(l.assign((0,t._)`${u}.errors`,null),l.return(!0))}et.topBoolOrEmptySchema=o;function s(a,l){const{gen:d,schema:u}=a;u===!1?(d.var(l,!1),i(a)):d.var(l,!0)}et.boolOrEmptySchema=s;function i(a,l){const{gen:d,data:u}=a,m={gen:d,keyword:"false schema",data:u,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(m,r,void 0,l)}return et}var Se={},tt={},ds;function Bo(){if(ds)return tt;ds=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.getRules=tt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(o){return typeof o=="string"&&t.has(o)}tt.isJSONType=n;function r(){const o={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...o,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},o.number,o.string,o.array,o.object],post:{rules:[]},all:{},keywords:{}}}return tt.getRules=r,tt}var Ke={},fs;function Jo(){if(fs)return Ke;fs=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.shouldUseRule=Ke.shouldUseGroup=Ke.schemaHasRulesForType=void 0;function e({schema:r,self:o},s){const i=o.RULES.types[s];return i&&i!==!0&&t(r,i)}Ke.schemaHasRulesForType=e;function t(r,o){return o.rules.some(s=>n(r,s))}Ke.shouldUseGroup=t;function n(r,o){var s;return r[o.keyword]!==void 0||((s=o.definition.implements)===null||s===void 0?void 0:s.some(i=>r[i]!==void 0))}return Ke.shouldUseRule=n,Ke}var hs;function Vn(){if(hs)return Se;hs=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.reportTypeError=Se.checkDataTypes=Se.checkDataType=Se.coerceAndCheckDataType=Se.getJSONTypes=Se.getSchemaTypes=Se.DataType=void 0;const e=Bo(),t=Jo(),n=Hn(),r=re(),o=ue();var s;(function(c){c[c.Correct=0]="Correct",c[c.Wrong=1]="Wrong"})(s||(Se.DataType=s={}));function i(c){const g=a(c.type);if(g.includes("null")){if(c.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!g.length&&c.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');c.nullable===!0&&g.push("null")}return g}Se.getSchemaTypes=i;function a(c){const g=Array.isArray(c)?c:c?[c]:[];if(g.every(e.isJSONType))return g;throw new Error("type must be JSONType or JSONType[]: "+g.join(","))}Se.getJSONTypes=a;function l(c,g){const{gen:$,data:b,opts:w}=c,C=u(g,w.coerceTypes),P=g.length>0&&!(C.length===0&&g.length===1&&(0,t.schemaHasRulesForType)(c,g[0]));if(P){const A=_(g,b,w.strictNumbers,s.Wrong);$.if(A,()=>{C.length?m(c,g,C):f(c)})}return P}Se.coerceAndCheckDataType=l;const d=new Set(["string","number","integer","boolean","null"]);function u(c,g){return g?c.filter($=>d.has($)||g==="array"&&$==="array"):[]}function m(c,g,$){const{gen:b,data:w,opts:C}=c,P=b.let("dataType",(0,r._)`typeof ${w}`),A=b.let("coerced",(0,r._)`undefined`);C.coerceTypes==="array"&&b.if((0,r._)`${P} == 'object' && Array.isArray(${w}) && ${w}.length == 1`,()=>b.assign(w,(0,r._)`${w}[0]`).assign(P,(0,r._)`typeof ${w}`).if(_(g,w,C.strictNumbers),()=>b.assign(A,w))),b.if((0,r._)`${A} !== undefined`);for(const N of $)(d.has(N)||N==="array"&&C.coerceTypes==="array")&&R(N);b.else(),f(c),b.endIf(),b.if((0,r._)`${A} !== undefined`,()=>{b.assign(w,A),p(c,A)});function R(N){switch(N){case"string":b.elseIf((0,r._)`${P} == "number" || ${P} == "boolean"`).assign(A,(0,r._)`"" + ${w}`).elseIf((0,r._)`${w} === null`).assign(A,(0,r._)`""`);return;case"number":b.elseIf((0,r._)`${P} == "boolean" || ${w} === null
              || (${P} == "string" && ${w} && ${w} == +${w})`).assign(A,(0,r._)`+${w}`);return;case"integer":b.elseIf((0,r._)`${P} === "boolean" || ${w} === null
              || (${P} === "string" && ${w} && ${w} == +${w} && !(${w} % 1))`).assign(A,(0,r._)`+${w}`);return;case"boolean":b.elseIf((0,r._)`${w} === "false" || ${w} === 0 || ${w} === null`).assign(A,!1).elseIf((0,r._)`${w} === "true" || ${w} === 1`).assign(A,!0);return;case"null":b.elseIf((0,r._)`${w} === "" || ${w} === 0 || ${w} === false`),b.assign(A,null);return;case"array":b.elseIf((0,r._)`${P} === "string" || ${P} === "number"
              || ${P} === "boolean" || ${w} === null`).assign(A,(0,r._)`[${w}]`)}}}function p({gen:c,parentData:g,parentDataProperty:$},b){c.if((0,r._)`${g} !== undefined`,()=>c.assign((0,r._)`${g}[${$}]`,b))}function v(c,g,$,b=s.Correct){const w=b===s.Correct?r.operators.EQ:r.operators.NEQ;let C;switch(c){case"null":return(0,r._)`${g} ${w} null`;case"array":C=(0,r._)`Array.isArray(${g})`;break;case"object":C=(0,r._)`${g} && typeof ${g} == "object" && !Array.isArray(${g})`;break;case"integer":C=P((0,r._)`!(${g} % 1) && !isNaN(${g})`);break;case"number":C=P();break;default:return(0,r._)`typeof ${g} ${w} ${c}`}return b===s.Correct?C:(0,r.not)(C);function P(A=r.nil){return(0,r.and)((0,r._)`typeof ${g} == "number"`,A,$?(0,r._)`isFinite(${g})`:r.nil)}}Se.checkDataType=v;function _(c,g,$,b){if(c.length===1)return v(c[0],g,$,b);let w;const C=(0,o.toHash)(c);if(C.array&&C.object){const P=(0,r._)`typeof ${g} != "object"`;w=C.null?P:(0,r._)`!${g} || ${P}`,delete C.null,delete C.array,delete C.object}else w=r.nil;C.number&&delete C.integer;for(const P in C)w=(0,r.and)(w,v(P,g,$,b));return w}Se.checkDataTypes=_;const y={message:({schema:c})=>`must be ${c}`,params:({schema:c,schemaValue:g})=>typeof c=="string"?(0,r._)`{type: ${c}}`:(0,r._)`{type: ${g}}`};function f(c){const g=h(c);(0,n.reportError)(g,y)}Se.reportTypeError=f;function h(c){const{gen:g,data:$,schema:b}=c,w=(0,o.schemaRefOrVal)(c,b,"type");return{gen:g,keyword:"type",data:$,schema:b.type,schemaCode:w,schemaValue:w,parentSchema:b,params:{},it:c}}return Se}var wt={},ms;function Ei(){if(ms)return wt;ms=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.assignDefaults=void 0;const e=re(),t=ue();function n(o,s){const{properties:i,items:a}=o.schema;if(s==="object"&&i)for(const l in i)r(o,l,i[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,d)=>r(o,d,l.default))}wt.assignDefaults=n;function r(o,s,i){const{gen:a,compositeRule:l,data:d,opts:u}=o;if(i===void 0)return;const m=(0,e._)`${d}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(o,`default is ignored for: ${m}`);return}let p=(0,e._)`${m} === undefined`;u.useDefaults==="empty"&&(p=(0,e._)`${p} || ${m} === null || ${m} === ""`),a.if(p,(0,e._)`${m} = ${(0,e.stringify)(i)}`)}return wt}var xe={},fe={},gs;function qe(){if(gs)return fe;gs=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.validateUnion=fe.validateArray=fe.usePattern=fe.callValidateCode=fe.schemaProperties=fe.allSchemaProperties=fe.noPropertyInData=fe.propertyInData=fe.isOwnProperty=fe.hasPropFunc=fe.reportMissingProp=fe.checkMissingProp=fe.checkReportMissingProp=void 0;const e=re(),t=ue(),n=Ye(),r=ue();function o(c,g){const{gen:$,data:b,it:w}=c;$.if(u($,b,g,w.opts.ownProperties),()=>{c.setParams({missingProperty:(0,e._)`${g}`},!0),c.error()})}fe.checkReportMissingProp=o;function s({gen:c,data:g,it:{opts:$}},b,w){return(0,e.or)(...b.map(C=>(0,e.and)(u(c,g,C,$.ownProperties),(0,e._)`${w} = ${C}`)))}fe.checkMissingProp=s;function i(c,g){c.setParams({missingProperty:g},!0),c.error()}fe.reportMissingProp=i;function a(c){return c.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}fe.hasPropFunc=a;function l(c,g,$){return(0,e._)`${a(c)}.call(${g}, ${$})`}fe.isOwnProperty=l;function d(c,g,$,b){const w=(0,e._)`${g}${(0,e.getProperty)($)} !== undefined`;return b?(0,e._)`${w} && ${l(c,g,$)}`:w}fe.propertyInData=d;function u(c,g,$,b){const w=(0,e._)`${g}${(0,e.getProperty)($)} === undefined`;return b?(0,e.or)(w,(0,e.not)(l(c,g,$))):w}fe.noPropertyInData=u;function m(c){return c?Object.keys(c).filter(g=>g!=="__proto__"):[]}fe.allSchemaProperties=m;function p(c,g){return m(g).filter($=>!(0,t.alwaysValidSchema)(c,g[$]))}fe.schemaProperties=p;function v({schemaCode:c,data:g,it:{gen:$,topSchemaRef:b,schemaPath:w,errorPath:C},it:P},A,R,N){const V=N?(0,e._)`${c}, ${g}, ${b}${w}`:g,z=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,C)],[n.default.parentData,P.parentData],[n.default.parentDataProperty,P.parentDataProperty],[n.default.rootData,n.default.rootData]];P.opts.dynamicRef&&z.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const U=(0,e._)`${V}, ${$.object(...z)}`;return R!==e.nil?(0,e._)`${A}.call(${R}, ${U})`:(0,e._)`${A}(${U})`}fe.callValidateCode=v;const _=(0,e._)`new RegExp`;function y({gen:c,it:{opts:g}},$){const b=g.unicodeRegExp?"u":"",{regExp:w}=g.code,C=w($,b);return c.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,e._)`${w.code==="new RegExp"?_:(0,r.useFunc)(c,w)}(${$}, ${b})`})}fe.usePattern=y;function f(c){const{gen:g,data:$,keyword:b,it:w}=c,C=g.name("valid");if(w.allErrors){const A=g.let("valid",!0);return P(()=>g.assign(A,!1)),A}return g.var(C,!0),P(()=>g.break()),C;function P(A){const R=g.const("len",(0,e._)`${$}.length`);g.forRange("i",0,R,N=>{c.subschema({keyword:b,dataProp:N,dataPropType:t.Type.Num},C),g.if((0,e.not)(C),A)})}}fe.validateArray=f;function h(c){const{gen:g,schema:$,keyword:b,it:w}=c;if(!Array.isArray($))throw new Error("ajv implementation error");if($.some(R=>(0,t.alwaysValidSchema)(w,R))&&!w.opts.unevaluated)return;const P=g.let("valid",!1),A=g.name("_valid");g.block(()=>$.forEach((R,N)=>{const V=c.subschema({keyword:b,schemaProp:N,compositeRule:!0},A);g.assign(P,(0,e._)`${P} || ${A}`),c.mergeValidEvaluated(V,A)||g.if((0,e.not)(P))})),c.result(P,()=>c.reset(),()=>c.error(!0))}return fe.validateUnion=h,fe}var ps;function Pi(){if(ps)return xe;ps=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.validateKeywordUsage=xe.validSchemaType=xe.funcKeywordCode=xe.macroKeywordCode=void 0;const e=re(),t=Ye(),n=qe(),r=Hn();function o(p,v){const{gen:_,keyword:y,schema:f,parentSchema:h,it:c}=p,g=v.macro.call(c.self,f,h,c),$=d(_,y,g);c.opts.validateSchema!==!1&&c.self.validateSchema(g,!0);const b=_.name("valid");p.subschema({schema:g,schemaPath:e.nil,errSchemaPath:`${c.errSchemaPath}/${y}`,topSchemaRef:$,compositeRule:!0},b),p.pass(b,()=>p.error(!0))}xe.macroKeywordCode=o;function s(p,v){var _;const{gen:y,keyword:f,schema:h,parentSchema:c,$data:g,it:$}=p;l($,v);const b=!g&&v.compile?v.compile.call($.self,h,c,$):v.validate,w=d(y,f,b),C=y.let("valid");p.block$data(C,P),p.ok((_=v.valid)!==null&&_!==void 0?_:C);function P(){if(v.errors===!1)N(),v.modifying&&i(p),V(()=>p.error());else{const z=v.async?A():R();v.modifying&&i(p),V(()=>a(p,z))}}function A(){const z=y.let("ruleErrs",null);return y.try(()=>N((0,e._)`await `),U=>y.assign(C,!1).if((0,e._)`${U} instanceof ${$.ValidationError}`,()=>y.assign(z,(0,e._)`${U}.errors`),()=>y.throw(U))),z}function R(){const z=(0,e._)`${w}.errors`;return y.assign(z,null),N(e.nil),z}function N(z=v.async?(0,e._)`await `:e.nil){const U=$.opts.passContext?t.default.this:t.default.self,H=!("compile"in v&&!g||v.schema===!1);y.assign(C,(0,e._)`${z}${(0,n.callValidateCode)(p,w,U,H)}`,v.modifying)}function V(z){var U;y.if((0,e.not)((U=v.valid)!==null&&U!==void 0?U:C),z)}}xe.funcKeywordCode=s;function i(p){const{gen:v,data:_,it:y}=p;v.if(y.parentData,()=>v.assign(_,(0,e._)`${y.parentData}[${y.parentDataProperty}]`))}function a(p,v){const{gen:_}=p;_.if((0,e._)`Array.isArray(${v})`,()=>{_.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${v} : ${t.default.vErrors}.concat(${v})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(p)},()=>p.error())}function l({schemaEnv:p},v){if(v.async&&!p.$async)throw new Error("async keyword in sync schema")}function d(p,v,_){if(_===void 0)throw new Error(`keyword "${v}" failed to compile`);return p.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,e.stringify)(_)})}function u(p,v,_=!1){return!v.length||v.some(y=>y==="array"?Array.isArray(p):y==="object"?p&&typeof p=="object"&&!Array.isArray(p):typeof p==y||_&&typeof p>"u")}xe.validSchemaType=u;function m({schema:p,opts:v,self:_,errSchemaPath:y},f,h){if(Array.isArray(f.keyword)?!f.keyword.includes(h):f.keyword!==h)throw new Error("ajv implementation error");const c=f.dependencies;if(c?.some(g=>!Object.prototype.hasOwnProperty.call(p,g)))throw new Error(`parent schema must have dependencies of ${h}: ${c.join(",")}`);if(f.validateSchema&&!f.validateSchema(p[h])){const $=`keyword "${h}" value is invalid at path "${y}": `+_.errorsText(f.validateSchema.errors);if(v.validateSchema==="log")_.logger.error($);else throw new Error($)}}return xe.validateKeywordUsage=m,xe}var ze={},ys;function ki(){if(ys)return ze;ys=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.extendSubschemaMode=ze.extendSubschemaData=ze.getSubschema=void 0;const e=re(),t=ue();function n(s,{keyword:i,schemaProp:a,schema:l,schemaPath:d,errSchemaPath:u,topSchemaRef:m}){if(i!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(i!==void 0){const p=s.schema[i];return a===void 0?{schema:p,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(i)}`,errSchemaPath:`${s.errSchemaPath}/${i}`}:{schema:p[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(i)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${i}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(d===void 0||u===void 0||m===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:d,topSchemaRef:m,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}ze.getSubschema=n;function r(s,i,{dataProp:a,dataPropType:l,data:d,dataTypes:u,propertyName:m}){if(d!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:p}=i;if(a!==void 0){const{errorPath:_,dataPathArr:y,opts:f}=i,h=p.let("data",(0,e._)`${i.data}${(0,e.getProperty)(a)}`,!0);v(h),s.errorPath=(0,e.str)`${_}${(0,t.getErrorPath)(a,l,f.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...y,s.parentDataProperty]}if(d!==void 0){const _=d instanceof e.Name?d:p.let("data",d,!0);v(_),m!==void 0&&(s.propertyName=m)}u&&(s.dataTypes=u);function v(_){s.data=_,s.dataLevel=i.dataLevel+1,s.dataTypes=[],i.definedProperties=new Set,s.parentData=i.data,s.dataNames=[...i.dataNames,_]}}ze.extendSubschemaData=r;function o(s,{jtdDiscriminator:i,jtdMetadata:a,compositeRule:l,createErrors:d,allErrors:u}){l!==void 0&&(s.compositeRule=l),d!==void 0&&(s.createErrors=d),u!==void 0&&(s.allErrors=u),s.jtdDiscriminator=i,s.jtdMetadata=a}return ze.extendSubschemaMode=o,ze}var Pe={},lr,vs;function Go(){return vs||(vs=1,lr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),lr}var cr={exports:{}},$s;function Oi(){if($s)return cr.exports;$s=1;var e=cr.exports=function(r,o,s){typeof o=="function"&&(s=o,o={}),s=o.cb||s;var i=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(o,i,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,o,s,i,a,l,d,u,m,p){if(i&&typeof i=="object"&&!Array.isArray(i)){o(i,a,l,d,u,m,p);for(var v in i){var _=i[v];if(Array.isArray(_)){if(v in e.arrayKeywords)for(var y=0;y<_.length;y++)t(r,o,s,_[y],a+"/"+v+"/"+y,l,a,v,i,y)}else if(v in e.propsKeywords){if(_&&typeof _=="object")for(var f in _)t(r,o,s,_[f],a+"/"+v+"/"+n(f),l,a,v,i,f)}else(v in e.keywords||r.allKeys&&!(v in e.skipKeywords))&&t(r,o,s,_,a+"/"+v,l,a,v,i)}s(i,a,l,d,u,m,p)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return cr.exports}var bs;function Wn(){if(bs)return Pe;bs=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getSchemaRefs=Pe.resolveUrl=Pe.normalizeId=Pe._getFullPath=Pe.getFullPath=Pe.inlineRef=void 0;const e=ue(),t=Go(),n=Oi(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(y,f=!0){return typeof y=="boolean"?!0:f===!0?!i(y):f?a(y)<=f:!1}Pe.inlineRef=o;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function i(y){for(const f in y){if(s.has(f))return!0;const h=y[f];if(Array.isArray(h)&&h.some(i)||typeof h=="object"&&i(h))return!0}return!1}function a(y){let f=0;for(const h in y){if(h==="$ref")return 1/0;if(f++,!r.has(h)&&(typeof y[h]=="object"&&(0,e.eachItem)(y[h],c=>f+=a(c)),f===1/0))return 1/0}return f}function l(y,f="",h){h!==!1&&(f=m(f));const c=y.parse(f);return d(y,c)}Pe.getFullPath=l;function d(y,f){return y.serialize(f).split("#")[0]+"#"}Pe._getFullPath=d;const u=/#\/?$/;function m(y){return y?y.replace(u,""):""}Pe.normalizeId=m;function p(y,f,h){return h=m(h),y.resolve(f,h)}Pe.resolveUrl=p;const v=/^[a-z_][-a-z0-9._]*$/i;function _(y,f){if(typeof y=="boolean")return{};const{schemaId:h,uriResolver:c}=this.opts,g=m(y[h]||f),$={"":g},b=l(c,g,!1),w={},C=new Set;return n(y,{allKeys:!0},(R,N,V,z)=>{if(z===void 0)return;const U=b+N;let H=$[z];typeof R[h]=="string"&&(H=ne.call(this,R[h])),me.call(this,R.$anchor),me.call(this,R.$dynamicAnchor),$[N]=H;function ne(se){const ce=this.opts.uriResolver.resolve;if(se=m(H?ce(H,se):se),C.has(se))throw A(se);C.add(se);let F=this.refs[se];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?P(R,F.schema,se):se!==m(U)&&(se[0]==="#"?(P(R,w[se],se),w[se]=R):this.refs[se]=U),se}function me(se){if(typeof se=="string"){if(!v.test(se))throw new Error(`invalid anchor "${se}"`);ne.call(this,`#${se}`)}}}),w;function P(R,N,V){if(N!==void 0&&!t(R,N))throw A(V)}function A(R){return new Error(`reference "${R}" resolves to more than one schema`)}}return Pe.getSchemaRefs=_,Pe}var _s;function Bn(){if(_s)return Ue;_s=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;const e=Ci(),t=Vn(),n=Jo(),r=Vn(),o=Ei(),s=Pi(),i=ki(),a=re(),l=Ye(),d=Wn(),u=ue(),m=Hn();function p(k){if(b(k)&&(C(k),$(k))){f(k);return}v(k,()=>(0,e.topBoolOrEmptySchema)(k))}Ue.validateFunctionCode=p;function v({gen:k,validateName:I,schema:M,schemaEnv:K,opts:G},te){G.code.es5?k.func(I,(0,a._)`${l.default.data}, ${l.default.valCxt}`,K.$async,()=>{k.code((0,a._)`"use strict"; ${c(M,G)}`),y(k,G),k.code(te)}):k.func(I,(0,a._)`${l.default.data}, ${_(G)}`,K.$async,()=>k.code(c(M,G)).code(te))}function _(k){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${k.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function y(k,I){k.if(l.default.valCxt,()=>{k.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),k.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),k.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),k.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),I.dynamicRef&&k.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{k.var(l.default.instancePath,(0,a._)`""`),k.var(l.default.parentData,(0,a._)`undefined`),k.var(l.default.parentDataProperty,(0,a._)`undefined`),k.var(l.default.rootData,l.default.data),I.dynamicRef&&k.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function f(k){const{schema:I,opts:M,gen:K}=k;v(k,()=>{M.$comment&&I.$comment&&z(k),R(k),K.let(l.default.vErrors,null),K.let(l.default.errors,0),M.unevaluated&&h(k),P(k),U(k)})}function h(k){const{gen:I,validateName:M}=k;k.evaluated=I.const("evaluated",(0,a._)`${M}.evaluated`),I.if((0,a._)`${k.evaluated}.dynamicProps`,()=>I.assign((0,a._)`${k.evaluated}.props`,(0,a._)`undefined`)),I.if((0,a._)`${k.evaluated}.dynamicItems`,()=>I.assign((0,a._)`${k.evaluated}.items`,(0,a._)`undefined`))}function c(k,I){const M=typeof k=="object"&&k[I.schemaId];return M&&(I.code.source||I.code.process)?(0,a._)`/*# sourceURL=${M} */`:a.nil}function g(k,I){if(b(k)&&(C(k),$(k))){w(k,I);return}(0,e.boolOrEmptySchema)(k,I)}function $({schema:k,self:I}){if(typeof k=="boolean")return!k;for(const M in k)if(I.RULES.all[M])return!0;return!1}function b(k){return typeof k.schema!="boolean"}function w(k,I){const{schema:M,gen:K,opts:G}=k;G.$comment&&M.$comment&&z(k),N(k),V(k);const te=K.const("_errs",l.default.errors);P(k,te),K.var(I,(0,a._)`${te} === ${l.default.errors}`)}function C(k){(0,u.checkUnknownRules)(k),A(k)}function P(k,I){if(k.opts.jtd)return ne(k,[],!1,I);const M=(0,t.getSchemaTypes)(k.schema),K=(0,t.coerceAndCheckDataType)(k,M);ne(k,M,!K,I)}function A(k){const{schema:I,errSchemaPath:M,opts:K,self:G}=k;I.$ref&&K.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(I,G.RULES)&&G.logger.warn(`$ref: keywords ignored in schema at path "${M}"`)}function R(k){const{schema:I,opts:M}=k;I.default!==void 0&&M.useDefaults&&M.strictSchema&&(0,u.checkStrictMode)(k,"default is ignored in the schema root")}function N(k){const I=k.schema[k.opts.schemaId];I&&(k.baseId=(0,d.resolveUrl)(k.opts.uriResolver,k.baseId,I))}function V(k){if(k.schema.$async&&!k.schemaEnv.$async)throw new Error("async schema in sync schema")}function z({gen:k,schemaEnv:I,schema:M,errSchemaPath:K,opts:G}){const te=M.$comment;if(G.$comment===!0)k.code((0,a._)`${l.default.self}.logger.log(${te})`);else if(typeof G.$comment=="function"){const _e=(0,a.str)`${K}/$comment`,Te=k.scopeValue("root",{ref:I.root});k.code((0,a._)`${l.default.self}.opts.$comment(${te}, ${_e}, ${Te}.schema)`)}}function U(k){const{gen:I,schemaEnv:M,validateName:K,ValidationError:G,opts:te}=k;M.$async?I.if((0,a._)`${l.default.errors} === 0`,()=>I.return(l.default.data),()=>I.throw((0,a._)`new ${G}(${l.default.vErrors})`)):(I.assign((0,a._)`${K}.errors`,l.default.vErrors),te.unevaluated&&H(k),I.return((0,a._)`${l.default.errors} === 0`))}function H({gen:k,evaluated:I,props:M,items:K}){M instanceof a.Name&&k.assign((0,a._)`${I}.props`,M),K instanceof a.Name&&k.assign((0,a._)`${I}.items`,K)}function ne(k,I,M,K){const{gen:G,schema:te,data:_e,allErrors:Te,opts:ke,self:Oe}=k,{RULES:we}=Oe;if(te.$ref&&(ke.ignoreKeywordsWithRef||!(0,u.schemaHasRulesButRef)(te,we))){G.block(()=>B(k,"$ref",we.all.$ref.definition));return}ke.jtd||se(k,I),G.block(()=>{for(const Le of we.rules)lt(Le);lt(we.post)});function lt(Le){(0,n.shouldUseGroup)(te,Le)&&(Le.type?(G.if((0,r.checkDataType)(Le.type,_e,ke.strictNumbers)),me(k,Le),I.length===1&&I[0]===Le.type&&M&&(G.else(),(0,r.reportTypeError)(k)),G.endIf()):me(k,Le),Te||G.if((0,a._)`${l.default.errors} === ${K||0}`))}}function me(k,I){const{gen:M,schema:K,opts:{useDefaults:G}}=k;G&&(0,o.assignDefaults)(k,I.type),M.block(()=>{for(const te of I.rules)(0,n.shouldUseRule)(K,te)&&B(k,te.keyword,te.definition,I.type)})}function se(k,I){k.schemaEnv.meta||!k.opts.strictTypes||(ce(k,I),k.opts.allowUnionTypes||F(k,I),O(k,k.dataTypes))}function ce(k,I){if(I.length){if(!k.dataTypes.length){k.dataTypes=I;return}I.forEach(M=>{L(k.dataTypes,M)||E(k,`type "${M}" not allowed by context "${k.dataTypes.join(",")}"`)}),S(k,I)}}function F(k,I){I.length>1&&!(I.length===2&&I.includes("null"))&&E(k,"use allowUnionTypes to allow union type keyword")}function O(k,I){const M=k.self.RULES.all;for(const K in M){const G=M[K];if(typeof G=="object"&&(0,n.shouldUseRule)(k.schema,G)){const{type:te}=G.definition;te.length&&!te.some(_e=>q(I,_e))&&E(k,`missing type "${te.join(",")}" for keyword "${K}"`)}}}function q(k,I){return k.includes(I)||I==="number"&&k.includes("integer")}function L(k,I){return k.includes(I)||I==="integer"&&k.includes("number")}function S(k,I){const M=[];for(const K of k.dataTypes)L(I,K)?M.push(K):I.includes("integer")&&K==="number"&&M.push("integer");k.dataTypes=M}function E(k,I){const M=k.schemaEnv.baseId+k.errSchemaPath;I+=` at "${M}" (strictTypes)`,(0,u.checkStrictMode)(k,I,k.opts.strictTypes)}class x{constructor(I,M,K){if((0,s.validateKeywordUsage)(I,M,K),this.gen=I.gen,this.allErrors=I.allErrors,this.keyword=K,this.data=I.data,this.schema=I.schema[K],this.$data=M.$data&&I.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(I,this.schema,K,this.$data),this.schemaType=M.schemaType,this.parentSchema=I.schema,this.params={},this.it=I,this.def=M,this.$data)this.schemaCode=I.gen.const("vSchema",ie(this.$data,I));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,M.schemaType,M.allowUndefined))throw new Error(`${K} value must be ${JSON.stringify(M.schemaType)}`);("code"in M?M.trackErrors:M.errors!==!1)&&(this.errsCount=I.gen.const("_errs",l.default.errors))}result(I,M,K){this.failResult((0,a.not)(I),M,K)}failResult(I,M,K){this.gen.if(I),K?K():this.error(),M?(this.gen.else(),M(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(I,M){this.failResult((0,a.not)(I),void 0,M)}fail(I){if(I===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(I),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(I){if(!this.$data)return this.fail(I);const{schemaCode:M}=this;this.fail((0,a._)`${M} !== undefined && (${(0,a.or)(this.invalid$data(),I)})`)}error(I,M,K){if(M){this.setParams(M),this._error(I,K),this.setParams({});return}this._error(I,K)}_error(I,M){(I?m.reportExtraError:m.reportError)(this,this.def.error,M)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(I){this.allErrors||this.gen.if(I)}setParams(I,M){M?Object.assign(this.params,I):this.params=I}block$data(I,M,K=a.nil){this.gen.block(()=>{this.check$data(I,K),M()})}check$data(I=a.nil,M=a.nil){if(!this.$data)return;const{gen:K,schemaCode:G,schemaType:te,def:_e}=this;K.if((0,a.or)((0,a._)`${G} === undefined`,M)),I!==a.nil&&K.assign(I,!0),(te.length||_e.validateSchema)&&(K.elseIf(this.invalid$data()),this.$dataError(),I!==a.nil&&K.assign(I,!1)),K.else()}invalid$data(){const{gen:I,schemaCode:M,schemaType:K,def:G,it:te}=this;return(0,a.or)(_e(),Te());function _e(){if(K.length){if(!(M instanceof a.Name))throw new Error("ajv implementation error");const ke=Array.isArray(K)?K:[K];return(0,a._)`${(0,r.checkDataTypes)(ke,M,te.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Te(){if(G.validateSchema){const ke=I.scopeValue("validate$data",{ref:G.validateSchema});return(0,a._)`!${ke}(${M})`}return a.nil}}subschema(I,M){const K=(0,i.getSubschema)(this.it,I);(0,i.extendSubschemaData)(K,this.it,I),(0,i.extendSubschemaMode)(K,I);const G={...this.it,...K,items:void 0,props:void 0};return g(G,M),G}mergeEvaluated(I,M){const{it:K,gen:G}=this;K.opts.unevaluated&&(K.props!==!0&&I.props!==void 0&&(K.props=u.mergeEvaluated.props(G,I.props,K.props,M)),K.items!==!0&&I.items!==void 0&&(K.items=u.mergeEvaluated.items(G,I.items,K.items,M)))}mergeValidEvaluated(I,M){const{it:K,gen:G}=this;if(K.opts.unevaluated&&(K.props!==!0||K.items!==!0))return G.if(M,()=>this.mergeEvaluated(I,a.Name)),!0}}Ue.KeywordCxt=x;function B(k,I,M,K){const G=new x(k,M,I);"code"in M?M.code(G,K):G.$data&&M.validate?(0,s.funcKeywordCode)(G,M):"macro"in M?(0,s.macroKeywordCode)(G,M):(M.compile||M.validate)&&(0,s.funcKeywordCode)(G,M)}const Q=/^\/(?:[^~]|~0|~1)*$/,de=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ie(k,{dataLevel:I,dataNames:M,dataPathArr:K}){let G,te;if(k==="")return l.default.rootData;if(k[0]==="/"){if(!Q.test(k))throw new Error(`Invalid JSON-pointer: ${k}`);G=k,te=l.default.rootData}else{const Oe=de.exec(k);if(!Oe)throw new Error(`Invalid JSON-pointer: ${k}`);const we=+Oe[1];if(G=Oe[2],G==="#"){if(we>=I)throw new Error(ke("property/index",we));return K[I-we]}if(we>I)throw new Error(ke("data",we));if(te=M[I-we],!G)return te}let _e=te;const Te=G.split("/");for(const Oe of Te)Oe&&(te=(0,a._)`${te}${(0,a.getProperty)((0,u.unescapeJsonPointer)(Oe))}`,_e=(0,a._)`${_e} && ${te}`);return _e;function ke(Oe,we){return`Cannot access ${Oe} ${we} levels up, current level is ${I}`}}return Ue.getData=ie,Ue}var Kt={},ws;function Lr(){if(ws)return Kt;ws=1,Object.defineProperty(Kt,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return Kt.default=e,Kt}var zt={},Ss;function Jn(){if(Ss)return zt;Ss=1,Object.defineProperty(zt,"__esModule",{value:!0});const e=Wn();class t extends Error{constructor(r,o,s,i){super(i||`can't resolve reference ${s} from id ${o}`),this.missingRef=(0,e.resolveUrl)(r,o,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return zt.default=t,zt}var Ie={},Cs;function Ar(){if(Cs)return Ie;Cs=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;const e=re(),t=Lr(),n=Ye(),r=Wn(),o=ue(),s=Bn();class i{constructor(h){var c;this.refs={},this.dynamicAnchors={};let g;typeof h.schema=="object"&&(g=h.schema),this.schema=h.schema,this.schemaId=h.schemaId,this.root=h.root||this,this.baseId=(c=h.baseId)!==null&&c!==void 0?c:(0,r.normalizeId)(g?.[h.schemaId||"$id"]),this.schemaPath=h.schemaPath,this.localRefs=h.localRefs,this.meta=h.meta,this.$async=g?.$async,this.refs={}}}Ie.SchemaEnv=i;function a(f){const h=u.call(this,f);if(h)return h;const c=(0,r.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:g,lines:$}=this.opts.code,{ownProperties:b}=this.opts,w=new e.CodeGen(this.scope,{es5:g,lines:$,ownProperties:b});let C;f.$async&&(C=w.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const P=w.scopeName("validate");f.validateName=P;const A={gen:w,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:w.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,e.stringify)(f.schema)}:{ref:f.schema}),validateName:P,ValidationError:C,schema:f.schema,schemaEnv:f,rootId:c,baseId:f.baseId||c,schemaPath:e.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let R;try{this._compilations.add(f),(0,s.validateFunctionCode)(A),w.optimize(this.opts.code.optimize);const N=w.toString();R=`${w.scopeRefs(n.default.scope)}return ${N}`,this.opts.code.process&&(R=this.opts.code.process(R,f));const z=new Function(`${n.default.self}`,`${n.default.scope}`,R)(this,this.scope.get());if(this.scope.value(P,{ref:z}),z.errors=null,z.schema=f.schema,z.schemaEnv=f,f.$async&&(z.$async=!0),this.opts.code.source===!0&&(z.source={validateName:P,validateCode:N,scopeValues:w._values}),this.opts.unevaluated){const{props:U,items:H}=A;z.evaluated={props:U instanceof e.Name?void 0:U,items:H instanceof e.Name?void 0:H,dynamicProps:U instanceof e.Name,dynamicItems:H instanceof e.Name},z.source&&(z.source.evaluated=(0,e.stringify)(z.evaluated))}return f.validate=z,f}catch(N){throw delete f.validate,delete f.validateName,R&&this.logger.error("Error compiling schema, function code:",R),N}finally{this._compilations.delete(f)}}Ie.compileSchema=a;function l(f,h,c){var g;c=(0,r.resolveUrl)(this.opts.uriResolver,h,c);const $=f.refs[c];if($)return $;let b=p.call(this,f,c);if(b===void 0){const w=(g=f.localRefs)===null||g===void 0?void 0:g[c],{schemaId:C}=this.opts;w&&(b=new i({schema:w,schemaId:C,root:f,baseId:h}))}if(b!==void 0)return f.refs[c]=d.call(this,b)}Ie.resolveRef=l;function d(f){return(0,r.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:a.call(this,f)}function u(f){for(const h of this._compilations)if(m(h,f))return h}Ie.getCompilingSchema=u;function m(f,h){return f.schema===h.schema&&f.root===h.root&&f.baseId===h.baseId}function p(f,h){let c;for(;typeof(c=this.refs[h])=="string";)h=c;return c||this.schemas[h]||v.call(this,f,h)}function v(f,h){const c=this.opts.uriResolver.parse(h),g=(0,r._getFullPath)(this.opts.uriResolver,c);let $=(0,r.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&g===$)return y.call(this,c,f);const b=(0,r.normalizeId)(g),w=this.refs[b]||this.schemas[b];if(typeof w=="string"){const C=v.call(this,f,w);return typeof C?.schema!="object"?void 0:y.call(this,c,C)}if(typeof w?.schema=="object"){if(w.validate||a.call(this,w),b===(0,r.normalizeId)(h)){const{schema:C}=w,{schemaId:P}=this.opts,A=C[P];return A&&($=(0,r.resolveUrl)(this.opts.uriResolver,$,A)),new i({schema:C,schemaId:P,root:f,baseId:$})}return y.call(this,c,w)}}Ie.resolveSchema=v;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(f,{baseId:h,schema:c,root:g}){var $;if((($=f.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(const C of f.fragment.slice(1).split("/")){if(typeof c=="boolean")return;const P=c[(0,o.unescapeFragment)(C)];if(P===void 0)return;c=P;const A=typeof c=="object"&&c[this.opts.schemaId];!_.has(C)&&A&&(h=(0,r.resolveUrl)(this.opts.uriResolver,h,A))}let b;if(typeof c!="boolean"&&c.$ref&&!(0,o.schemaHasRulesButRef)(c,this.RULES)){const C=(0,r.resolveUrl)(this.opts.uriResolver,h,c.$ref);b=v.call(this,g,C)}const{schemaId:w}=this.opts;if(b=b||new i({schema:c,schemaId:w,root:g,baseId:h}),b.schema!==b.root.schema)return b}return Ie}const Ri="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Ni="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ii="object",Li=["$data"],Ai={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ji=!1,Ti={$id:Ri,description:Ni,type:Ii,required:Li,properties:Ai,additionalProperties:ji};var Ht={},St={exports:{}},ur,Es;function xi(){return Es||(Es=1,ur={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),ur}var dr,Ps;function qi(){if(Ps)return dr;Ps=1;const{HEX:e}=xi(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(y){if(a(y,".")<3)return{host:y,isIPV4:!1};const f=y.match(t)||[],[h]=f;return h?{host:i(h,"."),isIPV4:!0}:{host:y,isIPV4:!1}}function r(y,f=!1){let h="",c=!0;for(const g of y){if(e[g]===void 0)return;g!=="0"&&c===!0&&(c=!1),c||(h+=g)}return f&&h.length===0&&(h="0"),h}function o(y){let f=0;const h={error:!1,address:"",zone:""},c=[],g=[];let $=!1,b=!1,w=!1;function C(){if(g.length){if($===!1){const P=r(g);if(P!==void 0)c.push(P);else return h.error=!0,!1}g.length=0}return!0}for(let P=0;P<y.length;P++){const A=y[P];if(!(A==="["||A==="]"))if(A===":"){if(b===!0&&(w=!0),!C())break;if(f++,c.push(":"),f>7){h.error=!0;break}P-1>=0&&y[P-1]===":"&&(b=!0);continue}else if(A==="%"){if(!C())break;$=!0}else{g.push(A);continue}}return g.length&&($?h.zone=g.join(""):w?c.push(g.join("")):c.push(r(g))),h.address=c.join(""),h}function s(y){if(a(y,":")<2)return{host:y,isIPV6:!1};const f=o(y);if(f.error)return{host:y,isIPV6:!1};{let h=f.address,c=f.address;return f.zone&&(h+="%"+f.zone,c+="%25"+f.zone),{host:h,escapedHost:c,isIPV6:!0}}}function i(y,f){let h="",c=!0;const g=y.length;for(let $=0;$<g;$++){const b=y[$];b==="0"&&c?($+1<=g&&y[$+1]===f||$+1===g)&&(h+=b,c=!1):(b===f?c=!0:c=!1,h+=b)}return h}function a(y,f){let h=0;for(let c=0;c<y.length;c++)y[c]===f&&h++;return h}const l=/^\.\.?\//u,d=/^\/\.(?:\/|$)/u,u=/^\/\.\.(?:\/|$)/u,m=/^\/?(?:.|\n)*?(?=\/|$)/u;function p(y){const f=[];for(;y.length;)if(y.match(l))y=y.replace(l,"");else if(y.match(d))y=y.replace(d,"/");else if(y.match(u))y=y.replace(u,"/"),f.pop();else if(y==="."||y==="..")y="";else{const h=y.match(m);if(h){const c=h[0];y=y.slice(c.length),f.push(c)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function v(y,f){const h=f!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=h(y.scheme)),y.userinfo!==void 0&&(y.userinfo=h(y.userinfo)),y.host!==void 0&&(y.host=h(y.host)),y.path!==void 0&&(y.path=h(y.path)),y.query!==void 0&&(y.query=h(y.query)),y.fragment!==void 0&&(y.fragment=h(y.fragment)),y}function _(y){const f=[];if(y.userinfo!==void 0&&(f.push(y.userinfo),f.push("@")),y.host!==void 0){let h=unescape(y.host);const c=n(h);if(c.isIPV4)h=c.host;else{const g=s(c.host);g.isIPV6===!0?h=`[${g.escapedHost}]`:h=y.host}f.push(h)}return(typeof y.port=="number"||typeof y.port=="string")&&(f.push(":"),f.push(String(y.port))),f.length?f.join(""):void 0}return dr={recomposeAuthority:_,normalizeComponentEncoding:v,removeDotSegments:p,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},dr}var fr,ks;function Di(){if(ks)return fr;ks=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(c){return typeof c.secure=="boolean"?c.secure:String(c.scheme).toLowerCase()==="wss"}function r(c){return c.host||(c.error=c.error||"HTTP URIs must have a host."),c}function o(c){const g=String(c.scheme).toLowerCase()==="https";return(c.port===(g?443:80)||c.port==="")&&(c.port=void 0),c.path||(c.path="/"),c}function s(c){return c.secure=n(c),c.resourceName=(c.path||"/")+(c.query?"?"+c.query:""),c.path=void 0,c.query=void 0,c}function i(c){if((c.port===(n(c)?443:80)||c.port==="")&&(c.port=void 0),typeof c.secure=="boolean"&&(c.scheme=c.secure?"wss":"ws",c.secure=void 0),c.resourceName){const[g,$]=c.resourceName.split("?");c.path=g&&g!=="/"?g:void 0,c.query=$,c.resourceName=void 0}return c.fragment=void 0,c}function a(c,g){if(!c.path)return c.error="URN can not be parsed",c;const $=c.path.match(t);if($){const b=g.scheme||c.scheme||"urn";c.nid=$[1].toLowerCase(),c.nss=$[2];const w=`${b}:${g.nid||c.nid}`,C=h[w];c.path=void 0,C&&(c=C.parse(c,g))}else c.error=c.error||"URN can not be parsed.";return c}function l(c,g){const $=g.scheme||c.scheme||"urn",b=c.nid.toLowerCase(),w=`${$}:${g.nid||b}`,C=h[w];C&&(c=C.serialize(c,g));const P=c,A=c.nss;return P.path=`${b||g.nid}:${A}`,g.skipEscape=!0,P}function d(c,g){const $=c;return $.uuid=$.nss,$.nss=void 0,!g.tolerant&&(!$.uuid||!e.test($.uuid))&&($.error=$.error||"UUID is not valid."),$}function u(c){const g=c;return g.nss=(c.uuid||"").toLowerCase(),g}const m={scheme:"http",domainHost:!0,parse:r,serialize:o},p={scheme:"https",domainHost:m.domainHost,parse:r,serialize:o},v={scheme:"ws",domainHost:!0,parse:s,serialize:i},_={scheme:"wss",domainHost:v.domainHost,parse:v.parse,serialize:v.serialize},h={http:m,https:p,ws:v,wss:_,urn:{scheme:"urn",parse:a,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:d,serialize:u,skipNormalize:!0}};return fr=h,fr}var Os;function Mi(){if(Os)return St.exports;Os=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:o}=qi(),s=Di();function i(f,h){return typeof f=="string"?f=u(_(f,h),h):typeof f=="object"&&(f=_(u(f,h),h)),f}function a(f,h,c){const g=Object.assign({scheme:"null"},c),$=l(_(f,g),_(h,g),g,!0);return u($,{...g,skipEscape:!0})}function l(f,h,c,g){const $={};return g||(f=_(u(f,c),c),h=_(u(h,c),c)),c=c||{},!c.tolerant&&h.scheme?($.scheme=h.scheme,$.userinfo=h.userinfo,$.host=h.host,$.port=h.port,$.path=n(h.path||""),$.query=h.query):(h.userinfo!==void 0||h.host!==void 0||h.port!==void 0?($.userinfo=h.userinfo,$.host=h.host,$.port=h.port,$.path=n(h.path||""),$.query=h.query):(h.path?(h.path.charAt(0)==="/"?$.path=n(h.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?$.path="/"+h.path:f.path?$.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+h.path:$.path=h.path,$.path=n($.path)),$.query=h.query):($.path=f.path,h.query!==void 0?$.query=h.query:$.query=f.query),$.userinfo=f.userinfo,$.host=f.host,$.port=f.port),$.scheme=f.scheme),$.fragment=h.fragment,$}function d(f,h,c){return typeof f=="string"?(f=unescape(f),f=u(o(_(f,c),!0),{...c,skipEscape:!0})):typeof f=="object"&&(f=u(o(f,!0),{...c,skipEscape:!0})),typeof h=="string"?(h=unescape(h),h=u(o(_(h,c),!0),{...c,skipEscape:!0})):typeof h=="object"&&(h=u(o(h,!0),{...c,skipEscape:!0})),f.toLowerCase()===h.toLowerCase()}function u(f,h){const c={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},g=Object.assign({},h),$=[],b=s[(g.scheme||c.scheme||"").toLowerCase()];b&&b.serialize&&b.serialize(c,g),c.path!==void 0&&(g.skipEscape?c.path=unescape(c.path):(c.path=escape(c.path),c.scheme!==void 0&&(c.path=c.path.split("%3A").join(":")))),g.reference!=="suffix"&&c.scheme&&$.push(c.scheme,":");const w=r(c);if(w!==void 0&&(g.reference!=="suffix"&&$.push("//"),$.push(w),c.path&&c.path.charAt(0)!=="/"&&$.push("/")),c.path!==void 0){let C=c.path;!g.absolutePath&&(!b||!b.absolutePath)&&(C=n(C)),w===void 0&&(C=C.replace(/^\/\//u,"/%2F")),$.push(C)}return c.query!==void 0&&$.push("?",c.query),c.fragment!==void 0&&$.push("#",c.fragment),$.join("")}const m=Array.from({length:127},(f,h)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(h)));function p(f){let h=0;for(let c=0,g=f.length;c<g;++c)if(h=f.charCodeAt(c),h>126||m[h])return!0;return!1}const v=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(f,h){const c=Object.assign({},h),g={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},$=f.indexOf("%")!==-1;let b=!1;c.reference==="suffix"&&(f=(c.scheme?c.scheme+":":"")+"//"+f);const w=f.match(v);if(w){if(g.scheme=w[1],g.userinfo=w[3],g.host=w[4],g.port=parseInt(w[5],10),g.path=w[6]||"",g.query=w[7],g.fragment=w[8],isNaN(g.port)&&(g.port=w[5]),g.host){const P=t(g.host);if(P.isIPV4===!1){const A=e(P.host);g.host=A.host.toLowerCase(),b=A.isIPV6}else g.host=P.host,b=!0}g.scheme===void 0&&g.userinfo===void 0&&g.host===void 0&&g.port===void 0&&g.query===void 0&&!g.path?g.reference="same-document":g.scheme===void 0?g.reference="relative":g.fragment===void 0?g.reference="absolute":g.reference="uri",c.reference&&c.reference!=="suffix"&&c.reference!==g.reference&&(g.error=g.error||"URI is not a "+c.reference+" reference.");const C=s[(c.scheme||g.scheme||"").toLowerCase()];if(!c.unicodeSupport&&(!C||!C.unicodeSupport)&&g.host&&(c.domainHost||C&&C.domainHost)&&b===!1&&p(g.host))try{g.host=URL.domainToASCII(g.host.toLowerCase())}catch(P){g.error=g.error||"Host's domain name can not be converted to ASCII: "+P}(!C||C&&!C.skipNormalize)&&($&&g.scheme!==void 0&&(g.scheme=unescape(g.scheme)),$&&g.host!==void 0&&(g.host=unescape(g.host)),g.path&&(g.path=escape(unescape(g.path))),g.fragment&&(g.fragment=encodeURI(decodeURIComponent(g.fragment)))),C&&C.parse&&C.parse(g,c)}else g.error=g.error||"URI can not be parsed.";return g}const y={SCHEMES:s,normalize:i,resolve:a,resolveComponents:l,equal:d,serialize:u,parse:_};return St.exports=y,St.exports.default=y,St.exports.fastUri=y,St.exports}var Rs;function Vi(){if(Rs)return Ht;Rs=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=Mi();return e.code='require("ajv/dist/runtime/uri").default',Ht.default=e,Ht}var Ns;function Fi(){return Ns||(Ns=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Bn();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=re();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Lr(),o=Jn(),s=Bo(),i=Ar(),a=re(),l=Wn(),d=Vn(),u=ue(),m=Ti,p=Vi(),v=(F,O)=>new RegExp(F,O);v.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},c=200;function g(F){var O,q,L,S,E,x,B,Q,de,ie,k,I,M,K,G,te,_e,Te,ke,Oe,we,lt,Le,Qn,Xn;const bt=F.strict,Yn=(O=F.code)===null||O===void 0?void 0:O.optimize,Dr=Yn===!0||Yn===void 0?1:Yn||0,Mr=(L=(q=F.code)===null||q===void 0?void 0:q.regExp)!==null&&L!==void 0?L:v,pa=(S=F.uriResolver)!==null&&S!==void 0?S:p.default;return{strictSchema:(x=(E=F.strictSchema)!==null&&E!==void 0?E:bt)!==null&&x!==void 0?x:!0,strictNumbers:(Q=(B=F.strictNumbers)!==null&&B!==void 0?B:bt)!==null&&Q!==void 0?Q:!0,strictTypes:(ie=(de=F.strictTypes)!==null&&de!==void 0?de:bt)!==null&&ie!==void 0?ie:"log",strictTuples:(I=(k=F.strictTuples)!==null&&k!==void 0?k:bt)!==null&&I!==void 0?I:"log",strictRequired:(K=(M=F.strictRequired)!==null&&M!==void 0?M:bt)!==null&&K!==void 0?K:!1,code:F.code?{...F.code,optimize:Dr,regExp:Mr}:{optimize:Dr,regExp:Mr},loopRequired:(G=F.loopRequired)!==null&&G!==void 0?G:c,loopEnum:(te=F.loopEnum)!==null&&te!==void 0?te:c,meta:(_e=F.meta)!==null&&_e!==void 0?_e:!0,messages:(Te=F.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(ke=F.inlineRefs)!==null&&ke!==void 0?ke:!0,schemaId:(Oe=F.schemaId)!==null&&Oe!==void 0?Oe:"$id",addUsedSchema:(we=F.addUsedSchema)!==null&&we!==void 0?we:!0,validateSchema:(lt=F.validateSchema)!==null&&lt!==void 0?lt:!0,validateFormats:(Le=F.validateFormats)!==null&&Le!==void 0?Le:!0,unicodeRegExp:(Qn=F.unicodeRegExp)!==null&&Qn!==void 0?Qn:!0,int32range:(Xn=F.int32range)!==null&&Xn!==void 0?Xn:!0,uriResolver:pa}}class ${constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...g(O)};const{es5:q,lines:L}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:y,es5:q,lines:L}),this.logger=V(O.logger);const S=O.validateFormats;O.validateFormats=!1,this.RULES=(0,s.getRules)(),b.call(this,f,O,"NOT SUPPORTED"),b.call(this,h,O,"DEPRECATED","warn"),this._metaOpts=R.call(this),O.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&A.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),C.call(this),O.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:q,schemaId:L}=this.opts;let S=m;L==="id"&&(S={...m},S.id=S.$id,delete S.$id),q&&O&&this.addMetaSchema(S,S[L],!1)}defaultMeta(){const{meta:O,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[q]||O:void 0}validate(O,q){let L;if(typeof O=="string"){if(L=this.getSchema(O),!L)throw new Error(`no schema with key or ref "${O}"`)}else L=this.compile(O);const S=L(q);return"$async"in L||(this.errors=L.errors),S}compile(O,q){const L=this._addSchema(O,q);return L.validate||this._compileSchemaEnv(L)}compileAsync(O,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return S.call(this,O,q);async function S(ie,k){await E.call(this,ie.$schema);const I=this._addSchema(ie,k);return I.validate||x.call(this,I)}async function E(ie){ie&&!this.getSchema(ie)&&await S.call(this,{$ref:ie},!0)}async function x(ie){try{return this._compileSchemaEnv(ie)}catch(k){if(!(k instanceof o.default))throw k;return B.call(this,k),await Q.call(this,k.missingSchema),x.call(this,ie)}}function B({missingSchema:ie,missingRef:k}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${k} cannot be resolved`)}async function Q(ie){const k=await de.call(this,ie);this.refs[ie]||await E.call(this,k.$schema),this.refs[ie]||this.addSchema(k,ie,q)}async function de(ie){const k=this._loading[ie];if(k)return k;try{return await(this._loading[ie]=L(ie))}finally{delete this._loading[ie]}}}addSchema(O,q,L,S=this.opts.validateSchema){if(Array.isArray(O)){for(const x of O)this.addSchema(x,void 0,L,S);return this}let E;if(typeof O=="object"){const{schemaId:x}=this.opts;if(E=O[x],E!==void 0&&typeof E!="string")throw new Error(`schema ${x} must be string`)}return q=(0,l.normalizeId)(q||E),this._checkUnique(q),this.schemas[q]=this._addSchema(O,L,q,S,!0),this}addMetaSchema(O,q,L=this.opts.validateSchema){return this.addSchema(O,q,!0,L),this}validateSchema(O,q){if(typeof O=="boolean")return!0;let L;if(L=O.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(L,O);if(!S&&q){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return S}getSchema(O){let q;for(;typeof(q=w.call(this,O))=="string";)O=q;if(q===void 0){const{schemaId:L}=this.opts,S=new i.SchemaEnv({schema:{},schemaId:L});if(q=i.resolveSchema.call(this,S,O),!q)return;this.refs[O]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=w.call(this,O);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const q=O;this._cache.delete(q);let L=O[this.opts.schemaId];return L&&(L=(0,l.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const q of O)this.addKeyword(q);return this}addKeyword(O,q){let L;if(typeof O=="string")L=O,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=L);else if(typeof O=="object"&&q===void 0){if(q=O,L=q.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,L,q),!q)return(0,u.eachItem)(L,E=>H.call(this,E)),this;me.call(this,q);const S={...q,type:(0,d.getJSONTypes)(q.type),schemaType:(0,d.getJSONTypes)(q.schemaType)};return(0,u.eachItem)(L,S.type.length===0?E=>H.call(this,E,S):E=>S.type.forEach(x=>H.call(this,E,S,x))),this}getKeyword(O){const q=this.RULES.all[O];return typeof q=="object"?q.definition:!!q}removeKeyword(O){const{RULES:q}=this;delete q.keywords[O],delete q.all[O];for(const L of q.rules){const S=L.rules.findIndex(E=>E.keyword===O);S>=0&&L.rules.splice(S,1)}return this}addFormat(O,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[O]=q,this}errorsText(O=this.errors,{separator:q=", ",dataVar:L="data"}={}){return!O||O.length===0?"No errors":O.map(S=>`${L}${S.instancePath} ${S.message}`).reduce((S,E)=>S+q+E)}$dataMetaSchema(O,q){const L=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const S of q){const E=S.split("/").slice(1);let x=O;for(const B of E)x=x[B];for(const B in L){const Q=L[B];if(typeof Q!="object")continue;const{$data:de}=Q.definition,ie=x[B];de&&ie&&(x[B]=ce(ie))}}return O}_removeAllSchemas(O,q){for(const L in O){const S=O[L];(!q||q.test(L))&&(typeof S=="string"?delete O[L]:S&&!S.meta&&(this._cache.delete(S.schema),delete O[L]))}}_addSchema(O,q,L,S=this.opts.validateSchema,E=this.opts.addUsedSchema){let x;const{schemaId:B}=this.opts;if(typeof O=="object")x=O[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let Q=this._cache.get(O);if(Q!==void 0)return Q;L=(0,l.normalizeId)(x||L);const de=l.getSchemaRefs.call(this,O,L);return Q=new i.SchemaEnv({schema:O,schemaId:B,meta:q,baseId:L,localRefs:de}),this._cache.set(Q.schema,Q),E&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=Q),S&&this.validateSchema(O,!0),Q}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):i.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const q=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,O)}finally{this.opts=q}}}$.ValidationError=r.default,$.MissingRefError=o.default,e.default=$;function b(F,O,q,L="error"){for(const S in F){const E=S;E in O&&this.logger[L](`${q}: option ${S}. ${F[E]}`)}}function w(F){return F=(0,l.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const O in F)this.addSchema(F[O],O)}function P(){for(const F in this.opts.formats){const O=this.opts.formats[F];O&&this.addFormat(F,O)}}function A(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in F){const q=F[O];q.keyword||(q.keyword=O),this.addKeyword(q)}}function R(){const F={...this.opts};for(const O of _)delete F[O];return F}const N={log(){},warn(){},error(){}};function V(F){if(F===!1)return N;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function U(F,O){const{RULES:q}=this;if((0,u.eachItem)(F,L=>{if(q.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!z.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function H(F,O,q){var L;const S=O?.post;if(q&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let x=S?E.post:E.rules.find(({type:Q})=>Q===q);if(x||(x={type:q,rules:[]},E.rules.push(x)),E.keywords[F]=!0,!O)return;const B={keyword:F,definition:{...O,type:(0,d.getJSONTypes)(O.type),schemaType:(0,d.getJSONTypes)(O.schemaType)}};O.before?ne.call(this,x,B,O.before):x.rules.push(B),E.all[F]=B,(L=O.implements)===null||L===void 0||L.forEach(Q=>this.addKeyword(Q))}function ne(F,O,q){const L=F.rules.findIndex(S=>S.keyword===q);L>=0?F.rules.splice(L,0,O):(F.rules.push(O),this.logger.warn(`rule ${q} is not defined`))}function me(F){let{metaSchema:O}=F;O!==void 0&&(F.$data&&this.opts.$data&&(O=ce(O)),F.validateSchema=this.compile(O,!0))}const se={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ce(F){return{anyOf:[F,se]}}}(rr)),rr}var Wt={},Bt={},Jt={},Is;function Ui(){if(Is)return Jt;Is=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Jt.default=e,Jt}var Qe={},Ls;function Ki(){if(Ls)return Qe;Ls=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.callRef=Qe.getValidate=void 0;const e=Jn(),t=qe(),n=re(),r=Ye(),o=Ar(),s=ue(),i={keyword:"$ref",schemaType:"string",code(d){const{gen:u,schema:m,it:p}=d,{baseId:v,schemaEnv:_,validateName:y,opts:f,self:h}=p,{root:c}=_;if((m==="#"||m==="#/")&&v===c.baseId)return $();const g=o.resolveRef.call(h,c,v,m);if(g===void 0)throw new e.default(p.opts.uriResolver,v,m);if(g instanceof o.SchemaEnv)return b(g);return w(g);function $(){if(_===c)return l(d,y,_,_.$async);const C=u.scopeValue("root",{ref:c});return l(d,(0,n._)`${C}.validate`,c,c.$async)}function b(C){const P=a(d,C);l(d,P,C,C.$async)}function w(C){const P=u.scopeValue("schema",f.code.source===!0?{ref:C,code:(0,n.stringify)(C)}:{ref:C}),A=u.name("valid"),R=d.subschema({schema:C,dataTypes:[],schemaPath:n.nil,topSchemaRef:P,errSchemaPath:m},A);d.mergeEvaluated(R),d.ok(A)}}};function a(d,u){const{gen:m}=d;return u.validate?m.scopeValue("validate",{ref:u.validate}):(0,n._)`${m.scopeValue("wrapper",{ref:u})}.validate`}Qe.getValidate=a;function l(d,u,m,p){const{gen:v,it:_}=d,{allErrors:y,schemaEnv:f,opts:h}=_,c=h.passContext?r.default.this:n.nil;p?g():$();function g(){if(!f.$async)throw new Error("async schema referenced by sync schema");const C=v.let("valid");v.try(()=>{v.code((0,n._)`await ${(0,t.callValidateCode)(d,u,c)}`),w(u),y||v.assign(C,!0)},P=>{v.if((0,n._)`!(${P} instanceof ${_.ValidationError})`,()=>v.throw(P)),b(P),y||v.assign(C,!1)}),d.ok(C)}function $(){d.result((0,t.callValidateCode)(d,u,c),()=>w(u),()=>b(u))}function b(C){const P=(0,n._)`${C}.errors`;v.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${P} : ${r.default.vErrors}.concat(${P})`),v.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function w(C){var P;if(!_.opts.unevaluated)return;const A=(P=m?.validate)===null||P===void 0?void 0:P.evaluated;if(_.props!==!0)if(A&&!A.dynamicProps)A.props!==void 0&&(_.props=s.mergeEvaluated.props(v,A.props,_.props));else{const R=v.var("props",(0,n._)`${C}.evaluated.props`);_.props=s.mergeEvaluated.props(v,R,_.props,n.Name)}if(_.items!==!0)if(A&&!A.dynamicItems)A.items!==void 0&&(_.items=s.mergeEvaluated.items(v,A.items,_.items));else{const R=v.var("items",(0,n._)`${C}.evaluated.items`);_.items=s.mergeEvaluated.items(v,R,_.items,n.Name)}}}return Qe.callRef=l,Qe.default=i,Qe}var As;function zi(){if(As)return Bt;As=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=Ui(),t=Ki(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Bt.default=n,Bt}var Gt={},Qt={},js;function Hi(){if(js)return Qt;js=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=re(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:i})=>(0,e.str)`must be ${n[s].okStr} ${i}`,params:({keyword:s,schemaCode:i})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${i}}`},o={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:i,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${n[i].fail} ${l} || isNaN(${a})`)}};return Qt.default=o,Qt}var Xt={},Ts;function Wi(){if(Ts)return Xt;Ts=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=re(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:o,data:s,schemaCode:i,it:a}=r,l=a.opts.multipleOfPrecision,d=o.let("res"),u=l?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${l}`:(0,e._)`${d} !== parseInt(${d})`;r.fail$data((0,e._)`(${i} === 0 || (${d} = ${s}/${i}, ${u}))`)}};return Xt.default=n,Xt}var Yt={},Zt={},xs;function Bi(){if(xs)return Zt;xs=1,Object.defineProperty(Zt,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,o=0,s;for(;o<n;)r++,s=t.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=t.charCodeAt(o),(s&64512)===56320&&o++);return r}return Zt.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Zt}var qs;function Ji(){if(qs)return Yt;qs=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=re(),t=ue(),n=Bi(),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:i}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:i,data:a,schemaCode:l,it:d}=s,u=i==="maxLength"?e.operators.GT:e.operators.LT,m=d.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${m} ${u} ${l}`)}};return Yt.default=o,Yt}var en={},Ds;function Gi(){if(Ds)return en;Ds=1,Object.defineProperty(en,"__esModule",{value:!0});const e=qe(),t=re(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,t.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,t._)`{pattern: ${o}}`},code(o){const{data:s,$data:i,schema:a,schemaCode:l,it:d}=o,u=d.opts.unicodeRegExp?"u":"",m=i?(0,t._)`(new RegExp(${l}, ${u}))`:(0,e.usePattern)(o,a);o.fail$data((0,t._)`!${m}.test(${s})`)}};return en.default=r,en}var tn={},Ms;function Qi(){if(Ms)return tn;Ms=1,Object.defineProperty(tn,"__esModule",{value:!0});const e=re(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:i}=r,a=o==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${i}`)}};return tn.default=n,tn}var nn={},Vs;function Xi(){if(Vs)return nn;Vs=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=qe(),t=re(),n=ue(),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:i,schema:a,schemaCode:l,data:d,$data:u,it:m}=s,{opts:p}=m;if(!u&&a.length===0)return;const v=a.length>=p.loopRequired;if(m.allErrors?_():y(),p.strictRequired){const c=s.parentSchema.properties,{definedProperties:g}=s.it;for(const $ of a)if(c?.[$]===void 0&&!g.has($)){const b=m.schemaEnv.baseId+m.errSchemaPath,w=`required property "${$}" is not defined at "${b}" (strictRequired)`;(0,n.checkStrictMode)(m,w,m.opts.strictRequired)}}function _(){if(v||u)s.block$data(t.nil,f);else for(const c of a)(0,e.checkReportMissingProp)(s,c)}function y(){const c=i.let("missing");if(v||u){const g=i.let("valid",!0);s.block$data(g,()=>h(c,g)),s.ok(g)}else i.if((0,e.checkMissingProp)(s,a,c)),(0,e.reportMissingProp)(s,c),i.else()}function f(){i.forOf("prop",l,c=>{s.setParams({missingProperty:c}),i.if((0,e.noPropertyInData)(i,d,c,p.ownProperties),()=>s.error())})}function h(c,g){s.setParams({missingProperty:c}),i.forOf(c,l,()=>{i.assign(g,(0,e.propertyInData)(i,d,c,p.ownProperties)),i.if((0,t.not)(g),()=>{s.error(),i.break()})},t.nil)}}};return nn.default=o,nn}var rn={},Fs;function Yi(){if(Fs)return rn;Fs=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=re(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:i}=r,a=o==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${i}`)}};return rn.default=n,rn}var sn={},on={},Us;function jr(){if(Us)return on;Us=1,Object.defineProperty(on,"__esModule",{value:!0});const e=Go();return e.code='require("ajv/dist/runtime/equal").default',on.default=e,on}var Ks;function Zi(){if(Ks)return sn;Ks=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=Vn(),t=re(),n=ue(),r=jr(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${i} are identical)`,params:({params:{i,j:a}})=>(0,t._)`{i: ${i}, j: ${a}}`},code(i){const{gen:a,data:l,$data:d,schema:u,parentSchema:m,schemaCode:p,it:v}=i;if(!d&&!u)return;const _=a.let("valid"),y=m.items?(0,e.getSchemaTypes)(m.items):[];i.block$data(_,f,(0,t._)`${p} === false`),i.ok(_);function f(){const $=a.let("i",(0,t._)`${l}.length`),b=a.let("j");i.setParams({i:$,j:b}),a.assign(_,!0),a.if((0,t._)`${$} > 1`,()=>(h()?c:g)($,b))}function h(){return y.length>0&&!y.some($=>$==="object"||$==="array")}function c($,b){const w=a.name("item"),C=(0,e.checkDataTypes)(y,w,v.opts.strictNumbers,e.DataType.Wrong),P=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${$}--;`,()=>{a.let(w,(0,t._)`${l}[${$}]`),a.if(C,(0,t._)`continue`),y.length>1&&a.if((0,t._)`typeof ${w} == "string"`,(0,t._)`${w} += "_"`),a.if((0,t._)`typeof ${P}[${w}] == "number"`,()=>{a.assign(b,(0,t._)`${P}[${w}]`),i.error(),a.assign(_,!1).break()}).code((0,t._)`${P}[${w}] = ${$}`)})}function g($,b){const w=(0,n.useFunc)(a,r.default),C=a.name("outer");a.label(C).for((0,t._)`;${$}--;`,()=>a.for((0,t._)`${b} = ${$}; ${b}--;`,()=>a.if((0,t._)`${w}(${l}[${$}], ${l}[${b}])`,()=>{i.error(),a.assign(_,!1).break(C)})))}}};return sn.default=s,sn}var an={},zs;function el(){if(zs)return an;zs=1,Object.defineProperty(an,"__esModule",{value:!0});const e=re(),t=ue(),n=jr(),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:i,data:a,$data:l,schemaCode:d,schema:u}=s;l||u&&typeof u=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(i,n.default)}(${a}, ${d})`):s.fail((0,e._)`${u} !== ${a}`)}};return an.default=o,an}var ln={},Hs;function tl(){if(Hs)return ln;Hs=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=re(),t=ue(),n=jr(),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:i,data:a,$data:l,schema:d,schemaCode:u,it:m}=s;if(!l&&d.length===0)throw new Error("enum must have non-empty array");const p=d.length>=m.opts.loopEnum;let v;const _=()=>v??(v=(0,t.useFunc)(i,n.default));let y;if(p||l)y=i.let("valid"),s.block$data(y,f);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const c=i.const("vSchema",u);y=(0,e.or)(...d.map((g,$)=>h(c,$)))}s.pass(y);function f(){i.assign(y,!1),i.forOf("v",u,c=>i.if((0,e._)`${_()}(${a}, ${c})`,()=>i.assign(y,!0).break()))}function h(c,g){const $=d[g];return typeof $=="object"&&$!==null?(0,e._)`${_()}(${a}, ${c}[${g}])`:(0,e._)`${a} === ${$}`}}};return ln.default=o,ln}var Ws;function nl(){if(Ws)return Gt;Ws=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=Hi(),t=Wi(),n=Ji(),r=Gi(),o=Qi(),s=Xi(),i=Yi(),a=Zi(),l=el(),d=tl(),u=[e.default,t.default,n.default,r.default,o.default,s.default,i.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,d.default];return Gt.default=u,Gt}var cn={},ft={},Bs;function Qo(){if(Bs)return ft;Bs=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.validateAdditionalItems=void 0;const e=re(),t=ue(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:i,it:a}=s,{items:l}=i;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(s,l)}};function o(s,i){const{gen:a,schema:l,data:d,keyword:u,it:m}=s;m.items=!0;const p=a.const("len",(0,e._)`${d}.length`);if(l===!1)s.setParams({len:i.length}),s.pass((0,e._)`${p} <= ${i.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(m,l)){const _=a.var("valid",(0,e._)`${p} <= ${i.length}`);a.if((0,e.not)(_),()=>v(_)),s.ok(_)}function v(_){a.forRange("i",i.length,p,y=>{s.subschema({keyword:u,dataProp:y,dataPropType:t.Type.Num},_),m.allErrors||a.if((0,e.not)(_),()=>a.break())})}}return ft.validateAdditionalItems=o,ft.default=r,ft}var un={},ht={},Js;function Xo(){if(Js)return ht;Js=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.validateTuple=void 0;const e=re(),t=ue(),n=qe(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:i,it:a}=s;if(Array.isArray(i))return o(s,"additionalItems",i);a.items=!0,!(0,t.alwaysValidSchema)(a,i)&&s.ok((0,n.validateArray)(s))}};function o(s,i,a=s.schema){const{gen:l,parentSchema:d,data:u,keyword:m,it:p}=s;y(d),p.opts.unevaluated&&a.length&&p.items!==!0&&(p.items=t.mergeEvaluated.items(l,a.length,p.items));const v=l.name("valid"),_=l.const("len",(0,e._)`${u}.length`);a.forEach((f,h)=>{(0,t.alwaysValidSchema)(p,f)||(l.if((0,e._)`${_} > ${h}`,()=>s.subschema({keyword:m,schemaProp:h,dataProp:h},v)),s.ok(v))});function y(f){const{opts:h,errSchemaPath:c}=p,g=a.length,$=g===f.minItems&&(g===f.maxItems||f[i]===!1);if(h.strictTuples&&!$){const b=`"${m}" is ${g}-tuple, but minItems or maxItems/${i} are not specified or different at path "${c}"`;(0,t.checkStrictMode)(p,b,h.strictTuples)}}}return ht.validateTuple=o,ht.default=r,ht}var Gs;function rl(){if(Gs)return un;Gs=1,Object.defineProperty(un,"__esModule",{value:!0});const e=Xo(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return un.default=t,un}var dn={},Qs;function sl(){if(Qs)return dn;Qs=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=re(),t=ue(),n=qe(),r=Qo(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{schema:a,parentSchema:l,it:d}=i,{prefixItems:u}=l;d.items=!0,!(0,t.alwaysValidSchema)(d,a)&&(u?(0,r.validateAdditionalItems)(i,u):i.ok((0,n.validateArray)(i)))}};return dn.default=s,dn}var fn={},Xs;function ol(){if(Xs)return fn;Xs=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:s}})=>s===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${s} valid item(s)`,params:({params:{min:o,max:s}})=>s===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${s}}`},code(o){const{gen:s,schema:i,parentSchema:a,data:l,it:d}=o;let u,m;const{minContains:p,maxContains:v}=a;d.opts.next?(u=p===void 0?1:p,m=v):u=1;const _=s.const("len",(0,e._)`${l}.length`);if(o.setParams({min:u,max:m}),m===void 0&&u===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&u>m){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,t.alwaysValidSchema)(d,i)){let g=(0,e._)`${_} >= ${u}`;m!==void 0&&(g=(0,e._)`${g} && ${_} <= ${m}`),o.pass(g);return}d.items=!0;const y=s.name("valid");m===void 0&&u===1?h(y,()=>s.if(y,()=>s.break())):u===0?(s.let(y,!0),m!==void 0&&s.if((0,e._)`${l}.length > 0`,f)):(s.let(y,!1),f()),o.result(y,()=>o.reset());function f(){const g=s.name("_valid"),$=s.let("count",0);h(g,()=>s.if(g,()=>c($)))}function h(g,$){s.forRange("i",0,_,b=>{o.subschema({keyword:"contains",dataProp:b,dataPropType:t.Type.Num,compositeRule:!0},g),$()})}function c(g){s.code((0,e._)`${g}++`),m===void 0?s.if((0,e._)`${g} >= ${u}`,()=>s.assign(y,!0).break()):(s.if((0,e._)`${g} > ${m}`,()=>s.assign(y,!1).break()),u===1?s.assign(y,!0):s.if((0,e._)`${g} >= ${u}`,()=>s.assign(y,!0)))}}};return fn.default=r,fn}var hr={},Ys;function al(){return Ys||(Ys=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=re(),n=ue(),r=qe();e.error={message:({params:{property:l,depsCount:d,deps:u}})=>{const m=d===1?"property":"properties";return(0,t.str)`must have ${m} ${u} when property ${l} is present`},params:({params:{property:l,depsCount:d,deps:u,missingProperty:m}})=>(0,t._)`{property: ${l},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${u}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[d,u]=s(l);i(l,d),a(l,u)}};function s({schema:l}){const d={},u={};for(const m in l){if(m==="__proto__")continue;const p=Array.isArray(l[m])?d:u;p[m]=l[m]}return[d,u]}function i(l,d=l.schema){const{gen:u,data:m,it:p}=l;if(Object.keys(d).length===0)return;const v=u.let("missing");for(const _ in d){const y=d[_];if(y.length===0)continue;const f=(0,r.propertyInData)(u,m,_,p.opts.ownProperties);l.setParams({property:_,depsCount:y.length,deps:y.join(", ")}),p.allErrors?u.if(f,()=>{for(const h of y)(0,r.checkReportMissingProp)(l,h)}):(u.if((0,t._)`${f} && (${(0,r.checkMissingProp)(l,y,v)})`),(0,r.reportMissingProp)(l,v),u.else())}}e.validatePropertyDeps=i;function a(l,d=l.schema){const{gen:u,data:m,keyword:p,it:v}=l,_=u.name("valid");for(const y in d)(0,n.alwaysValidSchema)(v,d[y])||(u.if((0,r.propertyInData)(u,m,y,v.opts.ownProperties),()=>{const f=l.subschema({keyword:p,schemaProp:y},_);l.mergeValidEvaluated(f,_)},()=>u.var(_,!0)),l.ok(_))}e.validateSchemaDeps=a,e.default=o}(hr)),hr}var hn={},Zs;function il(){if(Zs)return hn;Zs=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:s,schema:i,data:a,it:l}=o;if((0,t.alwaysValidSchema)(l,i))return;const d=s.name("valid");s.forIn("key",a,u=>{o.setParams({propertyName:u}),o.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},d),s.if((0,e.not)(d),()=>{o.error(!0),l.allErrors||s.break()})}),o.ok(d)}};return hn.default=r,hn}var mn={},eo;function Yo(){if(eo)return mn;eo=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=qe(),t=re(),n=Ye(),r=ue(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:i})=>(0,t._)`{additionalProperty: ${i.additionalProperty}}`},code(i){const{gen:a,schema:l,parentSchema:d,data:u,errsCount:m,it:p}=i;if(!m)throw new Error("ajv implementation error");const{allErrors:v,opts:_}=p;if(p.props=!0,_.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(p,l))return;const y=(0,e.allSchemaProperties)(d.properties),f=(0,e.allSchemaProperties)(d.patternProperties);h(),i.ok((0,t._)`${m} === ${n.default.errors}`);function h(){a.forIn("key",u,w=>{!y.length&&!f.length?$(w):a.if(c(w),()=>$(w))})}function c(w){let C;if(y.length>8){const P=(0,r.schemaRefOrVal)(p,d.properties,"properties");C=(0,e.isOwnProperty)(a,P,w)}else y.length?C=(0,t.or)(...y.map(P=>(0,t._)`${w} === ${P}`)):C=t.nil;return f.length&&(C=(0,t.or)(C,...f.map(P=>(0,t._)`${(0,e.usePattern)(i,P)}.test(${w})`))),(0,t.not)(C)}function g(w){a.code((0,t._)`delete ${u}[${w}]`)}function $(w){if(_.removeAdditional==="all"||_.removeAdditional&&l===!1){g(w);return}if(l===!1){i.setParams({additionalProperty:w}),i.error(),v||a.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(p,l)){const C=a.name("valid");_.removeAdditional==="failing"?(b(w,C,!1),a.if((0,t.not)(C),()=>{i.reset(),g(w)})):(b(w,C),v||a.if((0,t.not)(C),()=>a.break()))}}function b(w,C,P){const A={keyword:"additionalProperties",dataProp:w,dataPropType:r.Type.Str};P===!1&&Object.assign(A,{compositeRule:!0,createErrors:!1,allErrors:!1}),i.subschema(A,C)}}};return mn.default=s,mn}var gn={},to;function ll(){if(to)return gn;to=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=Bn(),t=qe(),n=ue(),r=Yo(),o={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:i,schema:a,parentSchema:l,data:d,it:u}=s;u.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(u,r.default,"additionalProperties"));const m=(0,t.allSchemaProperties)(a);for(const f of m)u.definedProperties.add(f);u.opts.unevaluated&&m.length&&u.props!==!0&&(u.props=n.mergeEvaluated.props(i,(0,n.toHash)(m),u.props));const p=m.filter(f=>!(0,n.alwaysValidSchema)(u,a[f]));if(p.length===0)return;const v=i.name("valid");for(const f of p)_(f)?y(f):(i.if((0,t.propertyInData)(i,d,f,u.opts.ownProperties)),y(f),u.allErrors||i.else().var(v,!0),i.endIf()),s.it.definedProperties.add(f),s.ok(v);function _(f){return u.opts.useDefaults&&!u.compositeRule&&a[f].default!==void 0}function y(f){s.subschema({keyword:"properties",schemaProp:f,dataProp:f},v)}}};return gn.default=o,gn}var pn={},no;function cl(){if(no)return pn;no=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=qe(),t=re(),n=ue(),r=ue(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:i,schema:a,data:l,parentSchema:d,it:u}=s,{opts:m}=u,p=(0,e.allSchemaProperties)(a),v=p.filter($=>(0,n.alwaysValidSchema)(u,a[$]));if(p.length===0||v.length===p.length&&(!u.opts.unevaluated||u.props===!0))return;const _=m.strictSchema&&!m.allowMatchingProperties&&d.properties,y=i.name("valid");u.props!==!0&&!(u.props instanceof t.Name)&&(u.props=(0,r.evaluatedPropsToName)(i,u.props));const{props:f}=u;h();function h(){for(const $ of p)_&&c($),u.allErrors?g($):(i.var(y,!0),g($),i.if(y))}function c($){for(const b in _)new RegExp($).test(b)&&(0,n.checkStrictMode)(u,`property ${b} matches pattern ${$} (use allowMatchingProperties)`)}function g($){i.forIn("key",l,b=>{i.if((0,t._)`${(0,e.usePattern)(s,$)}.test(${b})`,()=>{const w=v.includes($);w||s.subschema({keyword:"patternProperties",schemaProp:$,dataProp:b,dataPropType:r.Type.Str},y),u.opts.unevaluated&&f!==!0?i.assign((0,t._)`${f}[${b}]`,!0):!w&&!u.allErrors&&i.if((0,t.not)(y),()=>i.break())})})}}};return pn.default=o,pn}var yn={},ro;function ul(){if(ro)return yn;ro=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=ue(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:o,it:s}=n;if((0,e.alwaysValidSchema)(s,o)){n.fail();return}const i=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),n.failResult(i,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return yn.default=t,yn}var vn={},so;function dl(){if(so)return vn;so=1,Object.defineProperty(vn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qe().validateUnion,error:{message:"must match a schema in anyOf"}};return vn.default=t,vn}var $n={},oo;function fl(){if(oo)return $n;oo=1,Object.defineProperty($n,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:s,schema:i,parentSchema:a,it:l}=o;if(!Array.isArray(i))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const d=i,u=s.let("valid",!1),m=s.let("passing",null),p=s.name("_valid");o.setParams({passing:m}),s.block(v),o.result(u,()=>o.reset(),()=>o.error(!0));function v(){d.forEach((_,y)=>{let f;(0,t.alwaysValidSchema)(l,_)?s.var(p,!0):f=o.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},p),y>0&&s.if((0,e._)`${p} && ${u}`).assign(u,!1).assign(m,(0,e._)`[${m}, ${y}]`).else(),s.if(p,()=>{s.assign(u,!0),s.assign(m,y),f&&o.mergeEvaluated(f,e.Name)})})}}};return $n.default=r,$n}var bn={},ao;function hl(){if(ao)return bn;ao=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=ue(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:o,it:s}=n;if(!Array.isArray(o))throw new Error("ajv implementation error");const i=r.name("valid");o.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const d=n.subschema({keyword:"allOf",schemaProp:l},i);n.ok(i),n.mergeEvaluated(d)})}};return bn.default=t,bn}var _n={},io;function ml(){if(io)return _n;io=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:i,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const d=o(l,"then"),u=o(l,"else");if(!d&&!u)return;const m=i.let("valid",!0),p=i.name("_valid");if(v(),s.reset(),d&&u){const y=i.let("ifClause");s.setParams({ifClause:y}),i.if(p,_("then",y),_("else",y))}else d?i.if(p,_("then")):i.if((0,e.not)(p),_("else"));s.pass(m,()=>s.error(!0));function v(){const y=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},p);s.mergeEvaluated(y)}function _(y,f){return()=>{const h=s.subschema({keyword:y},p);i.assign(m,p),s.mergeValidEvaluated(h,m),f?i.assign(f,(0,e._)`${y}`):s.setParams({ifClause:y})}}}};function o(s,i){const a=s.schema[i];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return _n.default=r,_n}var wn={},lo;function gl(){if(lo)return wn;lo=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=ue(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:o}){r.if===void 0&&(0,e.checkStrictMode)(o,`"${n}" without "if" is ignored`)}};return wn.default=t,wn}var co;function pl(){if(co)return cn;co=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=Qo(),t=rl(),n=Xo(),r=sl(),o=ol(),s=al(),i=il(),a=Yo(),l=ll(),d=cl(),u=ul(),m=dl(),p=fl(),v=hl(),_=ml(),y=gl();function f(h=!1){const c=[u.default,m.default,p.default,v.default,_.default,y.default,i.default,a.default,s.default,l.default,d.default];return h?c.push(t.default,r.default):c.push(e.default,n.default),c.push(o.default),c}return cn.default=f,cn}var Sn={},Cn={},uo;function yl(){if(uo)return Cn;uo=1,Object.defineProperty(Cn,"__esModule",{value:!0});const e=re(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,o){const{gen:s,data:i,$data:a,schema:l,schemaCode:d,it:u}=r,{opts:m,errSchemaPath:p,schemaEnv:v,self:_}=u;if(!m.validateFormats)return;a?y():f();function y(){const h=s.scopeValue("formats",{ref:_.formats,code:m.code.formats}),c=s.const("fDef",(0,e._)`${h}[${d}]`),g=s.let("fType"),$=s.let("format");s.if((0,e._)`typeof ${c} == "object" && !(${c} instanceof RegExp)`,()=>s.assign(g,(0,e._)`${c}.type || "string"`).assign($,(0,e._)`${c}.validate`),()=>s.assign(g,(0,e._)`"string"`).assign($,c)),r.fail$data((0,e.or)(b(),w()));function b(){return m.strictSchema===!1?e.nil:(0,e._)`${d} && !${$}`}function w(){const C=v.$async?(0,e._)`(${c}.async ? await ${$}(${i}) : ${$}(${i}))`:(0,e._)`${$}(${i})`,P=(0,e._)`(typeof ${$} == "function" ? ${C} : ${$}.test(${i}))`;return(0,e._)`${$} && ${$} !== true && ${g} === ${o} && !${P}`}}function f(){const h=_.formats[l];if(!h){b();return}if(h===!0)return;const[c,g,$]=w(h);c===o&&r.pass(C());function b(){if(m.strictSchema===!1){_.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${l}" ignored in schema at path "${p}"`}}function w(P){const A=P instanceof RegExp?(0,e.regexpCode)(P):m.code.formats?(0,e._)`${m.code.formats}${(0,e.getProperty)(l)}`:void 0,R=s.scopeValue("formats",{key:l,ref:P,code:A});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,e._)`${R}.validate`]:["string",P,R]}function C(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!v.$async)throw new Error("async format in sync schema");return(0,e._)`await ${$}(${i})`}return typeof g=="function"?(0,e._)`${$}(${i})`:(0,e._)`${$}.test(${i})`}}}};return Cn.default=n,Cn}var fo;function vl(){if(fo)return Sn;fo=1,Object.defineProperty(Sn,"__esModule",{value:!0});const t=[yl().default];return Sn.default=t,Sn}var nt={},ho;function $l(){return ho||(ho=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.contentVocabulary=nt.metadataVocabulary=void 0,nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),nt}var mo;function bl(){if(mo)return Wt;mo=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=zi(),t=nl(),n=pl(),r=vl(),o=$l(),s=[e.default,t.default,(0,n.default)(),r.default,o.metadataVocabulary,o.contentVocabulary];return Wt.default=s,Wt}var En={},Ct={},go;function _l(){if(go)return Ct;go=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(Ct.DiscrError=e={})),Ct}var po;function wl(){if(po)return En;po=1,Object.defineProperty(En,"__esModule",{value:!0});const e=re(),t=_l(),n=Ar(),r=Jn(),o=ue(),i={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:d}})=>(0,e._)`{error: ${a}, tag: ${d}, tagValue: ${l}}`},code(a){const{gen:l,data:d,schema:u,parentSchema:m,it:p}=a,{oneOf:v}=m;if(!p.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=u.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(u.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const y=l.let("valid",!1),f=l.const("tag",(0,e._)`${d}${(0,e.getProperty)(_)}`);l.if((0,e._)`typeof ${f} == "string"`,()=>h(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:f,tagName:_})),a.ok(y);function h(){const $=g();l.if(!1);for(const b in $)l.elseIf((0,e._)`${f} === ${b}`),l.assign(y,c($[b]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:f,tagName:_}),l.endIf()}function c($){const b=l.name("valid"),w=a.subschema({keyword:"oneOf",schemaProp:$},b);return a.mergeEvaluated(w,e.Name),b}function g(){var $;const b={},w=P(m);let C=!0;for(let N=0;N<v.length;N++){let V=v[N];if(V?.$ref&&!(0,o.schemaHasRulesButRef)(V,p.self.RULES)){const U=V.$ref;if(V=n.resolveRef.call(p.self,p.schemaEnv.root,p.baseId,U),V instanceof n.SchemaEnv&&(V=V.schema),V===void 0)throw new r.default(p.opts.uriResolver,p.baseId,U)}const z=($=V?.properties)===null||$===void 0?void 0:$[_];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);C=C&&(w||P(V)),A(z,N)}if(!C)throw new Error(`discriminator: "${_}" must be required`);return b;function P({required:N}){return Array.isArray(N)&&N.includes(_)}function A(N,V){if(N.const)R(N.const,V);else if(N.enum)for(const z of N.enum)R(z,V);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function R(N,V){if(typeof N!="string"||N in b)throw new Error(`discriminator: "${_}" values must be unique strings`);b[N]=V}}}};return En.default=i,En}const Sl="http://json-schema.org/draft-07/schema#",Cl="http://json-schema.org/draft-07/schema#",El="Core schema meta-schema",Pl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},kl=["object","boolean"],Ol={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Rl={$schema:Sl,$id:Cl,title:El,definitions:Pl,type:kl,properties:Ol,default:!0};var yo;function Nl(){return yo||(yo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Fi(),r=bl(),o=wl(),s=Rl,i=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(s,i):s;this.addMetaSchema(_,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var d=Bn();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=re();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var m=Lr();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return m.default}});var p=Jn();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})}(Ft,Ft.exports)),Ft.exports}var Il=Nl();const Ll=Si(Il),Al="http://json-schema.org/draft-07/schema#",jl="object",Tl={title:{type:"string",description:"The title of the course."},description:{type:"string",description:"A short description of the course."},language:{type:"string",description:"The primary language of the course."},targetLanguage:{type:"string",description:"The language being taught in the course."},author:{type:"string",description:"The name of the course creator."},version:{type:"string",description:"Versioning for tracking updates to the course."},createdAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp when the course was created."},updatedAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp of the last course update."},tags:{type:"array",items:{type:"string"},description:"Keywords related to the course for searching and categorization."},lessons:{type:"array",items:{type:"object",properties:{title:{type:"string"},description:{type:"string"},cards:{type:"array",items:{oneOf:[{type:"object",properties:{class:{type:"string",enum:["vocab"]},qlang:{type:"string",enum:["default","target"]},vocab:{type:"object",additionalProperties:{type:"string"}}},required:["class","qlang","vocab"]},{type:"object",properties:{class:{type:"string",enum:["dynamic-vocab"]},qlang:{type:"string",enum:["default","target"]}},required:["class","qlang"]},{type:"object",properties:{class:{type:"string",enum:["multiple-choice"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answers:{type:"array",items:{type:"string"}},answer:{type:"string"}},required:["class","qlang","question","answers","answer"]},{type:"object",properties:{class:{type:"string",enum:["writing"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["writing-blocks"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"},options:{type:"array",items:{type:"string"}}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["blanks"]},qlang:{type:"string",enum:["default","target"]},alang:{type:"string",enum:["default","target"]},question:{type:"string"},words:{type:"array",items:{type:"object",minProperties:1,maxProperties:1,additionalProperties:{type:"boolean"}}}},required:["class","qlang","question","words"]}]}}},required:["title","cards"]}}},xl={$schema:Al,type:jl,properties:Tl};var ql=D('<div class=modal-bg><dialog class=confirm-dialog><h3></h3><footer><button class="cancel-button utf8-icon-close"></button><button class="next-button utf8-icon-tick">');const Zo=Lt(),Dl=e=>{const[t,n]=J(!1),[r,o]=J(()=>{}),[s,i]=J(""),a=(u,m)=>{i(u),o(()=>m),n(!0)},l=()=>{r()(),n(!1)},d=()=>{n(!1)};return j(Zo.Provider,{value:{showConfirm:a},get children(){return[W(()=>e.children),j(ae,{get when(){return t()},get children(){var u=ql(),m=u.firstChild,p=m.firstChild,v=p.nextSibling,_=v.firstChild,y=_.nextSibling;return T(p,s),_.$$click=d,y.$$click=l,Z(f=>{var h=t()?"flex":"none",c=t();return h!==f.e&&((f.e=h)!=null?u.style.setProperty("display",h):u.style.removeProperty("display")),c!==f.t&&(m.open=f.t=c),f},{e:void 0,t:void 0}),u}})]}})},Gn=()=>{const e=At(Zo);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e};le(["click"]);function Ml(){const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}function ea(){document.exitFullscreen&&document.exitFullscreen()}const Fn=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},Tt=async e=>{const t=await ve(),n=t.getSourceLang(),r=t.getTargetLang();return e.alang&&e.alang===e.qlang?{q:n,a:r}:{q:e.qlang==="default"?n:r,a:e.alang??(e.qlang==="default"?r:n)}};var Vl=D("<button id=action-button aria-label=action-button>");const xt=e=>{const{t}=be(),[n,r]=J(!1);ge(()=>{e.isCorrect===null&&r(!1)});const o=()=>{console.log("Action button click, props.isCorrect =",e.isCorrect),n()?e.isCorrect===!1&&e.onReset?(r(!1),e.onReset()):(console.log("AB other click: has checked, calling complete"),e.onComplete()):(console.log("AB first click: not yet checked, checking now"),e.onCheckAnswer(),r(!0))},s=i=>{e.isInputPresent&&e.isCorrect!==null&&(i.key==="Enter"||i.key===" "||i.key==="Spacebar")&&o()};return Pa(()=>document.addEventListener("keydown",s)),Je(()=>document.removeEventListener("keydown",s)),(()=>{var i=Vl();return i.$$click=o,T(i,(()=>{var a=W(()=>e.isCorrect===null);return()=>a()?t("check"):W(()=>e.isCorrect===!0)()?t("correct_next"):t("incorrect_next")})()),Z(a=>{var l=e.isCorrect===null?"next-button":e.isCorrect===!0?"correct-next-button":"incorrect-next-button",d=!e.isInputPresent;return l!==a.e&&Ne(i,a.e=l),d!==a.t&&(i.disabled=a.t=d),a},{e:void 0,t:void 0}),i})()};le(["click"]);var Fl=D('<section class="card multiple-choice"><h3 class=question></h3><div class=options>'),Ul=D("<p>Loading..."),Kl=D("<h4>"),zl=D("<button>");const Hl={class:"multiple-choice",question:"A Question",qlang:"default",answers:["An answer","Another answer"],answer:"An answer"},Wl=e=>{const{t}=be(),[n]=pe(()=>Tt(e.card)),[r,o]=J(null),[s,i]=J(!1),[a,l]=J(null),[d,u]=J(Fn(e.card.answers)),[m,p]=J(!1);ge(()=>{u(Fn(e.card.answers)),i(!1),o(null),l(null),p(!1)});const v=f=>{m()||o(f)},_=()=>{o(null),l(null),i(!1),p(!1)},y=()=>{s()?(o(null),l(null),i(!1),p(!1)):(p(!0),r()===e.card.answer?(l(!0),e.onCorrect()):(l(!1),e.onIncorrect()),i(!0))};return j(ae,{get when(){return n()},get fallback(){return Ul()},get children(){return[(()=>{var f=Fl(),h=f.firstChild,c=h.nextSibling;return T(f,(()=>{var g=W(()=>n().q!==n().q);return()=>g()&&(()=>{var $=Kl();return T($,()=>t("in_lang_how_do_you_say",{lang:t(n().a)})),Z(()=>Y($,"lang",n().q)),$})()})(),h),T(h,()=>e.card.question),T(c,j(at,{get each(){return d()},children:g=>(()=>{var $=zl();return $.$$click=()=>v(g),T($,g),Z(b=>{var w=n().a,C=`multiple-choice-button ${r()===g?"selected":""} ${s()&&r()===g?a()?"correct":"incorrect":""}`,P=m()?!0:void 0,A=s()?a()?`${g} (${t("correct")})`:`${g} (${t("incorrect")})`:`${t("select")} ${g}`;return w!==b.e&&Y($,"lang",b.e=w),C!==b.t&&Ne($,b.t=C),P!==b.a&&($.disabled=b.a=P),A!==b.o&&Y($,"aria-label",b.o=A),b},{e:void 0,t:void 0,a:void 0,o:void 0}),$})()})),Z(()=>Y(h,"lang",n().q)),f})(),j(xt,{get isCorrect(){return a()},get isInputPresent(){return r()!==null},onCheckAnswer:y,get onComplete(){return e.onComplete},onReset:_})]}})};le(["click"]);const ta=Lt(void 0),Bl=e=>j(ta.Provider,{get value(){return{config:e.config,isLoading:!1}},get children(){return e.children}}),qt=()=>{const e=At(ta);if(!e)throw new Error("useConfigContext must be used within ConfigProvider");return e};var Jl=D('<section class="vocab-match card"><h3></h3><table><tbody>'),Gl=D("<footer class=vocab-match-footer>"),Ql=D("<p>Loading..."),Xl=D("<tr><td><button></button></td><td><button>");const Yl={class:"vocab",qlang:"default",vocab:{word:"ord"}},na=e=>{const{t}=be(),[n]=pe(()=>Tt(e.card)),[r,o]=J([]),[s,i]=J([]),[a,l]=J(!1),[d,u]=J(null),[m,p]=J(null),{config:v}=qt();ge(()=>{const h=Object.values(e.card.vocab);o(Fn(h)),i(Object.keys(e.card.vocab).map((c,g)=>{const $=e.card.vocab[c];return{leftWord:c,rightWord:$,shuffledRightWord:r()[g],isLeftMatched:!1,isRightMatched:!1,isLeftDisabled:!1,isRightDisabled:!1,shakeIt:!1,shakeRight:!1}}))});const _=h=>{u(c=>c===h?null:h)},y=h=>{p(c=>c===h?null:h)},f=()=>{e.onCorrect(),e.onComplete()};return ge(()=>{if(!d()||!m())return;const h=d(),c=m();e.card.vocab[h]===c?(i($=>$.map(b=>{const w=b.leftWord===h&&b.rightWord===c,C=b.shuffledRightWord===c;return w||C?{...b,isLeftMatched:w?!0:b.isLeftMatched,isRightMatched:C?!0:b.isRightMatched,isLeftDisabled:w?!0:b.isLeftDisabled,isRightDisabled:C?!0:b.isRightDisabled}:b})),u(null),p(null)):(i($=>$.map(b=>b.leftWord===h||b.shuffledRightWord===c?{...b,shakeIt:b.leftWord===h,shakeRight:b.shuffledRightWord===c}:b)),setTimeout(()=>{i($=>$.map(b=>b.shakeIt||b.shakeRight?{...b,shakeIt:!1,shakeRight:!1}:b))},v.animationShakeMs),u(null),p(null))}),ge(()=>{s().every(h=>h.isLeftMatched&&h.isRightMatched)&&!a()&&l(!0)}),j(ae,{get when(){return n()},get fallback(){return Ql()},get children(){return[(()=>{var h=Jl(),c=h.firstChild,g=c.nextSibling,$=g.firstChild;return T(c,()=>e.card.question||t("match_the_words")),T($,j(at,{get each(){return s()},children:b=>(()=>{var w=Xl(),C=w.firstChild,P=C.firstChild,A=C.nextSibling,R=A.firstChild;return P.$$click=()=>_(b.leftWord),T(P,()=>b.leftWord),R.$$click=()=>y(b.shuffledRightWord),T(R,()=>b.shuffledRightWord),Z(N=>{var V=n().q,z=`vocab-match left-word ${b.isLeftMatched?"correct":""} ${d()===b.leftWord?"selected":""} ${b.shakeIt?"shake":""}`,U=b.isLeftDisabled,H=b.isLeftMatched?`${b.leftWord} (${t("matched")})`:`${t("select")} ${b.leftWord}`,ne=n().a,me=`vocab-match right-word ${b.isRightMatched?"correct":""} ${m()===b.shuffledRightWord?"selected":""} ${b.shakeRight?"shake":""}`,se=b.isRightDisabled,ce=b.isRightMatched?`${b.shuffledRightWord}  (${t("matched")})`:`${t("select")} ${b.shuffledRightWord}`;return V!==N.e&&Y(P,"lang",N.e=V),z!==N.t&&Ne(P,N.t=z),U!==N.a&&(P.disabled=N.a=U),H!==N.o&&Y(P,"aria-label",N.o=H),ne!==N.i&&Y(R,"lang",N.i=ne),me!==N.n&&Ne(R,N.n=me),se!==N.s&&(R.disabled=N.s=se),ce!==N.h&&Y(R,"aria-label",N.h=ce),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),w})()})),Z(()=>Y(c,"lang",n().q)),h})(),j(ae,{get when(){return a()},get children(){var h=Gl();return T(h,j(xt,{get isCorrect(){return a()===!1?null:!0},get isInputPresent(){return a()},onCheckAnswer:f,onComplete:f})),h}})]}})};le(["click"]);var Zl=D("<span>__"),ec=D("<span class=provided-word>"),tc=D("<span class=blank-correct>"),nc=D('<section class="card blanks-card"><h4></h4><h3 class=question></h3><div class=word-options>'),rc=D("<p>Loading..."),sc=D("<button>");const oc={class:"blanks",question:"Question",qlang:"default",words:[{answer:!0,other:!1}]},ac=e=>{const{t}=be(),[n]=pe(()=>Tt(e.card)),[r,o]=J([]),[s,i]=J([]),[a,l]=J(null),[d,u]=J([]),[m,p]=J(null);ge(()=>{o(Fn(e.card.words.map(f=>Object.keys(f)[0])));const y=e.card.question.split(/[\s\b]/).reduce((f,h)=>(/^_{2,}/.test(h)?f.push((()=>{var c=Zl();return Z(()=>Ne(c,d().includes(h)?"blank-correct":"blank")),c})()):f.push((()=>{var c=ec();return T(c,h),c})()),f),[]);u(y)});const v=y=>{const f=d().findIndex(c=>c instanceof HTMLElement&&c.classList.contains("blank"));if(f===-1)return;if(e.card.words.find(c=>c[y])){const c=[...d()];c[f]=(()=>{var g=tc();return T(g,y),g})(),u(c),i([...s(),y]),e.onCorrect()}else p(y),setTimeout(()=>p(null),1e3),e.onIncorrect()};ge(()=>{const y=e.card.words.filter(f=>Object.values(f)[0]).map(f=>Object.keys(f)[0]);s().length===y.length&&s().every((f,h)=>f===y[h])&&l(!0)});const _=()=>{a()&&e.onComplete()};return j(ae,{get when(){return n()},get fallback(){return rc()},get children(){return[(()=>{var y=nc(),f=y.firstChild,h=f.nextSibling,c=h.nextSibling;return T(f,()=>t("fill_in_the_blanks")),T(h,d),T(c,()=>r().map(g=>{const $=s().includes(g),b=e.card.words.some(A=>Object.keys(A)[0]===g&&Object.values(A)[0]),w=m()===g?"shake":"",C="word-option "+($?b?"correct":"incorrect":"")+w,P=$?`${g} (${t("selected")})`:`${t("select")} ${g}`;return(()=>{var A=sc();return A.$$click=()=>v(g),A.disabled=$,Ne(A,C),Y(A,"aria-label",P),T(A,g),Z(()=>Y(A,"lang",n().a)),A})()})),Z(()=>Y(h,"lang",n().q)),y})(),j(xt,{get isCorrect(){return a()},get isInputPresent(){return!!a()},onCheckAnswer:_,get onComplete(){return e.onComplete}})]}})};le(["click"]);var ic=D("<aside class=letter-buttons>"),lc=D("<button>");const cc=3,mr={ang:[{symbol:"æ",name:"Ash"},{symbol:"ø",name:"o-slash"},{symbol:"þ",name:"Thorn"},{symbol:"ð",name:"Eth"},{symbol:"ȝ",name:"Yogh"},{symbol:"œ",name:"o-e"},{symbol:"ſ",name:"long-s"},{symbol:"ƿ",name:"wynn"},{symbol:"ā",name:"long-a"},{symbol:"ē",name:"long-e"},{symbol:"ī",name:"long-i"},{symbol:"ō",name:"long-o"},{symbol:"ū",name:"long-u"},{symbol:"ȳ",name:"long-y"}],heb:[{symbol:"א",name:"Alef"},{symbol:"ב",name:"Bet"},{symbol:"ג",name:"Gimel"},{symbol:"ד",name:"Dalet"},{symbol:"ה",name:"He"},{symbol:"ו",name:"Vav"},{symbol:"ז",name:"Zayin"},{symbol:"ח",name:"Chet"},{symbol:"ט",name:"Tet"},{symbol:"י",name:"Yod"},{symbol:"כ",name:"Kaf"},{symbol:"ך",name:"Final Kaf"},{symbol:"ל",name:"Lamed"},{symbol:"מ",name:"Mem"},{symbol:"ם",name:"Final Mem"},{symbol:"נ",name:"Nun"},{symbol:"ן",name:"Final Nun"},{symbol:"ס",name:"Samekh"},{symbol:"ע",name:"Ayin"},{symbol:"פ",name:"Pe"},{symbol:"ף",name:"Final Pe"},{symbol:"צ",name:"Tsadi"},{symbol:"ץ",name:"Final Tsadi"},{symbol:"ק",name:"Qof"},{symbol:"ר",name:"Resh"},{symbol:"ש",name:"Shin"},{symbol:"ת",name:"Tav"}],hun:[{symbol:"á",name:"a-acute"},{symbol:"é",name:"e-acute"},{symbol:"í",name:"i-acute"},{symbol:"ó",name:"o-acute"},{symbol:"ö",name:"o-umlaut"},{symbol:"ő",name:"o-double-acute"},{symbol:"ú",name:"u-acute"},{symbol:"ü",name:"u-umlaut"},{symbol:"ű",name:"u-double-acute"}]},uc=e=>{if(!mr[e.lang])return console.warn(`No buttons exist for the supplied language, "${e.lang}".`),"";if(e.text.length===0)return"";let t=mr[e.lang].filter(n=>e.text.includes(n.symbol));if(t.length<3){const n=mr[e.lang].filter(r=>!t.some(o=>o.symbol===r.symbol));t=[...t,...n.slice(0,cc-t.length)]}return(()=>{var n=ic();return T(n,j(at,{each:t,children:r=>(()=>{var o=lc();return o.$$click=()=>e.onSelect(r.symbol),T(o,()=>r.symbol),Z(s=>{var i=r.name,a=r.name;return i!==s.e&&Y(o,"aria-label",s.e=i),a!==s.t&&Y(o,"title",s.t=a),s},{e:void 0,t:void 0}),o})()})),n})()};le(["click"]);var dc=D('<section class="card writing-card"><h3 class=question></h3><div class=input><textarea id=writing-input class=answer autofocus>'),fc=D("<p>Loading..."),hc=D("<h4>");const mc={class:"writing",qlang:"default",question:"Question",answer:"Answer"},vo=e=>e.trim().toLowerCase().replace(/\W+/g,"").replace(/\s+/g," "),gc=e=>{const[t]=pe(()=>Tt(e.card)),{t:n}=be(),[r,o]=J(""),[s,i]=J(null);let a=null;const l=W(()=>vo(e.card.answer)),d=v=>{i(null),o(v)},u=v=>{if(!a)return;const _=a,y=_.selectionStart??r().length,f=_.selectionEnd??r().length,h=r().slice(0,y)+v+r().slice(f);d(h),queueMicrotask(()=>{_.selectionStart=_.selectionEnd=y+v.length,_.focus()})},m=()=>{vo(r())===l()?(i(!0),e.onCorrect()):(i(!1),e.onIncorrect())},p=()=>{i(null),d(""),e.onComplete()};return j(ae,{get when(){return t()?.a},get fallback(){return fc()},get children(){return[(()=>{var v=dc(),_=v.firstChild,y=_.nextSibling,f=y.firstChild;return T(v,(()=>{var h=W(()=>t().q!==t().a);return()=>h()&&(()=>{var c=hc();return T(c,()=>n("translate_to_lang",{lang:n(t().a)})),c})()})(),_),T(_,()=>e.card.question),f.$$input=h=>d(h.target.value),ot(h=>a=h,f),T(y,j(uc,{get lang(){return t().a},onSelect:u,get text(){return e.card.answer}}),null),Z(h=>{var c=t().q,g=n("type_in")+" "+n(t().a)+"...",$=t().a,b=n("enter_answer");return c!==h.e&&Y(_,"lang",h.e=c),g!==h.t&&Y(f,"placeholder",h.t=g),$!==h.a&&Y(f,"lang",h.a=$),b!==h.o&&Y(f,"aria-label",h.o=b),h},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>f.value=r()),v})(),j(xt,{get isCorrect(){return s()},get isInputPresent(){return r().length>0},onCheckAnswer:m,onComplete:p})]}})};le(["input"]);var pc=D('<section class="writing-blocks-card card"><h3 class=question></h3><div class=selected-words></div><hr><div class=options>'),yc=D("<p>Loading..."),vc=D("<button class=selected-word>"),$c=D("<button class=option-button>");const bc={class:"writing-blocks",qlang:"default",question:"Question",answer:"Answer",options:["Answer","Another"]},gr=e=>e.trim().toLowerCase().replace(/[^\s\w]+/g,"").replace(/\s+/g," "),_c=e=>{let t="";const{t:n}=be(),[r]=pe(()=>Tt(e.card)),[o,s]=J(null),[i,a]=J([]),l=W(()=>gr(e.card.answer)),d=p=>{s(null),a(v=>[...v,p])},u=p=>{s(null),a(v=>v.filter((_,y)=>y!==p))},m=()=>{console.log("WritingBlocks handleCheckAnswer");const p=gr(i().join(" "));console.log(`WritingBlocks normalizedUserInput = ${p} vs ${l()}`),p===l()?(console.log("WritingBlocks CORRECT"),s(!0),e.onCorrect()):(console.log("WritingBlocks INCORRECT"),s(!1),e.onIncorrect())};return ge(()=>{a([]),s(null)}),ge(()=>{const p=gr(i().join(" "));o()!==null&&p!==t&&(s(null),a([]))}),j(ae,{get when(){return r()},get fallback(){return yc()},get children(){return[(()=>{var p=pc(),v=p.firstChild,_=v.nextSibling,y=_.nextSibling,f=y.nextSibling;return T(v,()=>e.card.question),T(_,j(at,{get each(){return i()},children:(h,c)=>(()=>{var g=vc();return g.$$click=()=>u(c()),Y(g,"aria-label",`Remove word: ${h}`),T(g,h),g})()})),T(f,j(at,{get each(){return e.card.options},children:h=>(()=>{var c=$c();return c.$$click=()=>d(h),T(c,h),Z(g=>{var $=i().includes(h),b=i().includes(h)?`${h} (${n("selected")})`:`${n("select")} ${h}`;return $!==g.e&&(c.disabled=g.e=$),b!==g.t&&Y(c,"aria-label",g.t=b),g},{e:void 0,t:void 0}),c})()})),Z(()=>Y(v,"lang",r().q)),p})(),j(xt,{get isCorrect(){return o()},get isInputPresent(){return i().length>0},onCheckAnswer:m,get onComplete(){return e.onComplete}})]}})};le(["click"]);const wc={class:"dynamic-vocab",question:"Question",qlang:"default"},Sc=e=>{const t=W(()=>{const r={};for(const o of e.lesson.cards.filter(s=>["vocab","blanks"].includes(s.class)))if(o.class==="blanks"&&o.qlang===e.card.qlang)o.words.forEach(s=>{const i=Object.keys(s)[0],a=s[i];r[i]=a?i:""});else if(o.class==="vocab")if(o.qlang===e.card.qlang)Object.assign(r,o.vocab);else{const s=Object.fromEntries(Object.entries(o.vocab).map(([i,a])=>[a,i]));Object.assign(r,s)}return r}),n={class:"vocab",qlang:e.card.qlang,vocab:t()};return j(na,{card:n,get onCorrect(){return e.onCorrect},get onIncorrect(){return e.onIncorrect},get onComplete(){return e.onComplete}})},Cc={blanks:oc,"dynamic-vocab":wc,"multiple-choice":Hl,vocab:Yl,"writing-blocks":bc,writing:mc},Ec=e=>structuredClone(Cc[e]),Pc=["blanks","dynamic-vocab","multiple-choice","vocab","writing-blocks","writing"];function kc(e){return typeof e=="object"&&e!==null&&"answer"in e}var Oc=D("<p>"),Rc=D("<div>"),Nc=D("<p>Unknown lesson card...");function ra(e){const{t}=be();return(()=>{var n=Rc();return Rt(n,"dblclick",e.ondblclick),T(n,j(Fa,{get fallback(){return Nc()},get children(){return[j(Ze,{get when(){return!e.card},get children(){var r=Oc();return T(r,()=>t("lesson_complete")),r}}),j(Ze,{get when(){return e.card?.class==="dynamic-vocab"},get children(){return j(Sc,{get card(){return e.card},get lesson(){return e.lesson},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),j(Ze,{get when(){return e.card?.class==="writing"},get children(){return j(gc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),j(Ze,{get when(){return e.card?.class==="writing-blocks"},get children(){return j(_c,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),j(Ze,{get when(){return e.card?.class==="multiple-choice"},get children(){return j(Wl,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),j(Ze,{get when(){return e.card?.class==="vocab"},get children(){return j(na,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),j(Ze,{get when(){return e.card?.class==="blanks"},get children(){return j(ac,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}})]}})),n})()}le(["dblclick"]);var Ic=D("<article class=lesson><h2><em></em><button class=close-button></button></h2><progress>");const $o={title:"A Lesson",description:"A lesson description",cards:[]},Lc=e=>{const{t}=be(),{showConfirm:n}=Gn(),[r,o]=J([]),s=W(()=>(r()&&r()[0])??null);let i=null;ge(()=>{e.lesson&&e.lesson.cards&&o(e.lesson.cards)});const a=()=>{n(t("confirm_leave_lesson"),()=>{ea(),e.onCancel()})},l=v=>{v.key==="Escape"&&a()},d=v=>{const _=t("confirm_leave_app");return v.preventDefault(),_};window.addEventListener("keyup",l),window.addEventListener("beforeunload",d),Je(()=>{window.removeEventListener("keyup",l),window.removeEventListener("beforeunload",d)});const u=()=>{if(i){if(o(v=>v.slice(1)),r().length===0){e.onLessonComplete();return}}else o(v=>[...v.slice(1),v[0]])},m=()=>{i=!1;const v=e.lesson.cards.indexOf(r()[0]);e.onAnswer(v,"bad_answer_goes_here")},p=()=>{i=!0;const v=e.lesson.cards.indexOf(r()[0]);e.onAnswer(v)};return!e.lesson||!e.lesson.cards?"Loading lesson cards...":(()=>{var v=Ic(),_=v.firstChild,y=_.firstChild,f=y.nextSibling,h=_.nextSibling;return T(y,()=>e.lesson.title),f.$$click=a,T(v,j(ra,{get card(){return s()},get lesson(){return e.lesson},onComplete:u,onCorrect:p,onIncorrect:m}),null),Z(c=>{var g=t("cancel_lesson"),$=e.lesson.cards.length,b=t("lesson_progress"),w=`${e.lesson.cards.length-r().length+1} / ${e.lesson.cards.length}`;return g!==c.e&&Y(f,"aria-label",c.e=g),$!==c.t&&Y(h,"max",c.t=$),b!==c.a&&Y(h,"aria-label",c.a=b),w!==c.o&&Y(h,"title",c.o=w),c},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>h.value=r().length===0?1:e.lesson.cards.length-r().length+1),v})()};le(["click"]);const Pn="oe_",mt={CURRENT_LESSON_INDEX:e=>`${Pn}current_lesson_index_${e}`,ANSWERS:e=>`${Pn}answers_${e}`,LESSONS:e=>`${Pn}course_${e}`,CURRENT_COURSE_INDEX:`${Pn}course`,STORE_NAME:"oe-courses",EDITING_MODE:"oe-editing"},Ac=()=>Object.assign({"../../lessons/alefbet.json":()=>rt(()=>import("./alefbet-C6XhjyBZ.js"),[]),"../../lessons/lessons.json":()=>rt(()=>import("./lessons-C8xK8RN5.js"),[]),"../../lessons/lessons.old.json":()=>rt(()=>import("./lessons.old-Bh74MdUW.js"),[]),"../../lessons/test.json":()=>rt(()=>import("./test-RFqtRmtW.js"),[]),"../../lessons/uk-constitution.json":()=>rt(()=>import("./uk-constitution-2T_E9-3M.js"),[])}),jc={title:"New Course",description:"A description",language:"en",targetLanguage:"en",level:"level",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[]},Tc=[];let pr;const kn=e=>[...e.courses.map(t=>t.title)],ve=async()=>(pr||(pr=await xc()),pr),xc=async()=>{const[e,t]=Wo(Ho({courseMetadata:null,lessons:[],loading:!1}),{name:mt.STORE_NAME,storage:localStorage});let n=null;const r=()=>(n||(n=qo()),n),o=async R=>{const N=await r();if(isNaN(R)||R<0||R>=N.courses.length)throw new Error(`Invalid course index for deletion: ${R}`);b(R),await d(0)},s=({lessons:R,courseMetadata:N})=>{t({lessons:R,courseMetadata:N})},i=R=>{const V=new Ll().compile(xl);if(!V(R))throw console.error(JSON.stringify(V.errors,null,4)),console.debug("courseData",R),new TypeError("Invalid course data",R)},a=async R=>{const N=`../../lessons/${R}.json`;console.info(`Loading course ${R} from ${N}`);const V=await Ac();if(!V[N])throw new Error("Lesson not found: "+N);const U=(await V[N]()).default;return console.info(`Loaded course ${R} from ${N}`),U},l=R=>{console.log("loadCourseFromFile"),t("loading",!0);try{const N=JSON.parse(R);i(N);const{lessons:V,...z}=N;t({lessons:V,courseMetadata:z})}catch(N){console.error("Invalid course file:",N)}finally{t("loading",!1)}},d=async R=>{if(console.info("loadCourseFromFile enter with",R),isNaN(R))return;const N=await r();if(R===N.courses.length){console.log("loadCourseFromFile Shall use the pre-loaded course from storage");return}if(R<0)throw console.warn("loadCourseFromFile Invalid course index:",R),new Error("loadCourseFromFile: Negative course index? "+R);t("loading",!0);try{let V;const{fileBasename:z}=N.courses[R];V=await a(z),i(V);const{lessons:U,...H}=V;s({lessons:U,courseMetadata:H}),t({loading:!1}),console.info("loadCourseFromFile OK")}catch(V){console.error("loadCourseFromFile Error loading lessons:",V),t("loading",!1)}console.info("loadCourseFromFile leave")},u=W(()=>e.lessons||[]),m=async R=>{if(!e.lessons||e.lessons.length===0){if(!Number.isFinite(R))throw new Error("No lessons loaded and no courseIdx supplied?");await d(R),console.debug("getCourseData loaded course",R)}return{...e.courseMetadata,lessons:e.lessons}},p=()=>e.courseMetadata?.language||"",v=()=>e.courseMetadata?.targetLanguage||"",_=R=>t({lessons:R}),y=W(()=>e.lessons&&e.lessons.length),f=R=>{t("lessons",N=>{const V={...$o};if(N){if(R===void 0||R>N.length)return[...N,V];if(R<=0)return[V,...N]}else return[V];return[...N.slice(0,R),{...$o},...N.slice(R)]})},h=R=>{console.trace("initNewCourse enter");const N=kn(R).length;return t({loading:!0}),s({lessons:[...Tc],courseMetadata:{...jc}}),t({loading:!1}),console.log("initNewCourse leave with",N),N},c=()=>e.lessons.map((R,N)=>({title:R.title,index:N})),g=(R,N,V)=>{console.debug("Enter saveCard");const z=e.lessons.map((U,H)=>H===N?{...U,cards:U.cards.map((ne,me)=>me===V?R:ne)}:U);_(z),console.log("saved card in",mt.STORE_NAME)},$=(R,N)=>{const V=e.lessons.map((z,U)=>U===R?{...z,cards:z.cards.filter((H,ne)=>ne!==N)}:z);_(V)},b=R=>{console.log("reset course",R);const N=R;localStorage.removeItem(mt.CURRENT_LESSON_INDEX(N)),localStorage.removeItem(mt.CURRENT_COURSE_INDEX),localStorage.removeItem(mt.ANSWERS(N)),localStorage.removeItem(mt.STORE_NAME),t({courseMetadata:null,lessons:[],loading:!1})};return{store:e,setTitle:R=>t("courseMetadata","title",R),getTitle:()=>e.courseMetadata?.title??"",setDescription:R=>{t("courseMetadata","description",R),console.log("set courseMetadata description",R)},getDescription:()=>(console.log("get courseMetadata description",e.courseMetadata?.description),e.courseMetadata?.description??""),initNewCourse:h,saveCourseToStorage:l,loadCourseFromFile:d,setCourse:s,deleteCourse:o,saveCard:g,deleteCard:$,setLessons:_,getLessons:u,getCourseData:m,getTargetLang:v,getSourceLang:p,getTotalLessonsCount:y,addLesson:f,lessonTitles2Indicies:c,reset:b,assertValidCourseData:i}};function sa(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const i={to:o,options:s,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const a of e)a.listener({...i,from:a.location,retry:l=>{l&&(n=!0),a.navigate(o,{...s,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:r}}let Or;function Tr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Or=window.history.state._depth}Tr();function qc(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Dc(e,t){let n=!1;return()=>{const r=Or;Tr();const o=r==null?null:Or-r;if(n){n=!1;return}o&&t(o)?(n=!0,window.history.go(-o)):e()}}const Mc=/^(?:[a-z0-9]+:)?\/\//i,Vc=/^\/+|(\/)\/+$/g,oa="http://sr";function kt(e,t=!1){const n=e.replace(Vc,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function On(e,t,n){if(Mc.test(t))return;const r=kt(e),o=n&&kt(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+kt(t,!s)}function Fc(e,t){if(e==null)throw new Error(t);return e}function Uc(e,t){return kt(e).replace(/\/*(\*.*)?$/g,"")+kt(t)}function aa(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Kc(e,t,n){const[r,o]=e.split("/*",2),s=r.split("/").filter(Boolean),i=s.length;return a=>{const l=a.split("/").filter(Boolean),d=l.length-i;if(d<0||d>0&&o===void 0&&!t)return null;const u={path:i?"":"/",params:{}},m=p=>n===void 0?void 0:n[p];for(let p=0;p<i;p++){const v=s[p],_=v[0]===":",y=_?l[p]:l[p].toLowerCase(),f=_?v.slice(1):v.toLowerCase();if(_&&yr(y,m(f)))u.params[f]=y;else if(_||!yr(y,f))return null;u.path+=`/${y}`}if(o){const p=d?l.slice(-d).join("/"):"";if(yr(p,m(o)))u.params[o]=p;else return null}return u}}function yr(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function zc(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function ia(e){const t=new Map,n=Ro();return new Proxy({},{get(r,o){return t.has(o)||No(n,()=>t.set(o,W(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Hc(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(o):s instanceof Array?(n.delete(o),s.forEach(i=>{n.append(o,String(i))})):n.set(o,String(s))});const r=n.toString();return r?`?${r}`:""}function la(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return la(r).reduce((s,i)=>[...s,...o.map(a=>a+i)],[])}const Wc=100,ca=Lt(),ua=Lt(),xr=()=>Fc(At(ca),"<A> and 'use' router primitives can be only used inside a Route."),Ce=()=>xr().navigatorFactory(),qr=()=>xr().location,je=()=>xr().params,Bc=()=>{const e=qr(),t=Ce(),n=(r,o)=>{const s=$e(()=>Hc(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...o})};return[e.query,n]};function Jc(e,t=""){const{component:n,preload:r,load:o,children:s,info:i}=e,a=!s||Array.isArray(s)&&!s.length,l={key:e,component:n,preload:r||o,info:i};return da(e.path).reduce((d,u)=>{for(const m of la(u)){const p=Uc(t,m);let v=a?p:p.split("/*",1)[0];v=v.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),d.push({...l,originalPath:u,pattern:v,matcher:Kc(v,!a,e.matchFilters)})}return d},[])}function Gc(e,t=0){return{routes:e,score:zc(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],i=s.matcher(n);if(!i)return null;r.unshift({...i,route:s})}return r}}}function da(e){return Array.isArray(e)?e:[e]}function fa(e,t="",n=[],r=[]){const o=da(e);for(let s=0,i=o.length;s<i;s++){const a=o[s];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Jc(a,t);for(const d of l){n.push(d);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)fa(a.children,d.pattern,n,r);else{const m=Gc([...n],r.length);r.push(m)}n.pop()}}}return n.length?r:r.sort((s,i)=>i.score-s.score)}function vr(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function Qc(e,t,n){const r=new URL(oa),o=W(u=>{const m=e();try{return new URL(m,r)}catch{return console.error(`Invalid path ${m}`),u}},r,{equals:(u,m)=>u.href===m.href}),s=W(()=>o().pathname),i=W(()=>o().search,!0),a=W(()=>o().hash),l=()=>"",d=Rr(i,()=>aa(o()));return{get pathname(){return s()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return l()},query:n?n(d):ia(d)}}let st;function Xc(){return st}function Yc(e,t,n,r={}){const{signal:[o,s],utils:i={}}=e,a=i.parsePath||(U=>U),l=i.renderPath||(U=>U),d=i.beforeLeave||sa(),u=On("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!o().value&&s({value:u,replace:!0,scroll:!1});const[m,p]=J(!1);let v;const _=(U,H)=>{H.value===y()&&H.state===h()||(v===void 0&&p(!0),st=U,v=H,ka(()=>{v===H&&(f(v.value),c(v.state),b[1](ne=>ne.filter(me=>me.pending)))}).finally(()=>{v===H&&Oo(()=>{st=void 0,U==="navigate"&&V(v),p(!1),v=void 0})}))},[y,f]=J(o().value),[h,c]=J(o().state),g=Qc(y,h,i.queryWrapper),$=[],b=J([]),w=W(()=>typeof r.transformUrl=="function"?vr(t(),r.transformUrl(g.pathname)):vr(t(),g.pathname)),C=()=>{const U=w(),H={};for(let ne=0;ne<U.length;ne++)Object.assign(H,U[ne].params);return H},P=i.paramsWrapper?i.paramsWrapper(C,t):ia(C),A={pattern:u,path:()=>u,outlet:()=>null,resolvePath(U){return On(u,U)}};return Z(Rr(o,U=>_("native",U),{defer:!0})),{base:A,location:g,params:P,isRouting:m,renderPath:l,parsePath:a,navigatorFactory:N,matches:w,beforeLeave:d,preloadRoute:z,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:b};function R(U,H,ne){$e(()=>{if(typeof H=="number"){H&&(i.go?i.go(H):console.warn("Router integration does not support relative routing"));return}const me=!H||H[0]==="?",{replace:se,resolve:ce,scroll:F,state:O}={replace:!1,resolve:!me,scroll:!0,...ne},q=ce?U.resolvePath(H):On(me&&g.pathname||"",H);if(q===void 0)throw new Error(`Path '${H}' is not a routable path`);if($.length>=Wc)throw new Error("Too many redirects");const L=y();(q!==L||O!==h())&&(Wa||d.confirm(q,ne)&&($.push({value:L,replace:se,scroll:F,state:h()}),_("navigate",{value:q,state:O})))})}function N(U){return U=U||At(ua)||A,(H,ne)=>R(U,H,ne)}function V(U){const H=$[0];H&&(s({...U,replace:H.replace,scroll:H.scroll}),$.length=0)}function z(U,H){const ne=vr(t(),U.pathname),me=st;st="preload";for(let se in ne){const{route:ce,params:F}=ne[se];ce.component&&ce.component.preload&&ce.component.preload();const{preload:O}=ce;H&&O&&No(n(),()=>O({params:F,location:{pathname:U.pathname,search:U.search,hash:U.hash,query:aa(U),state:null,key:""},intent:"preload"}))}st=me}}function Zc(e,t,n,r){const{base:o,location:s,params:i}=e,{pattern:a,component:l,preload:d}=r().route,u=W(()=>r().path);l&&l.preload&&l.preload();const m=d?d({params:i,location:s,intent:st||"initial"}):void 0;return{parent:t,pattern:a,path:u,outlet:()=>l?j(l,{params:i,location:s,data:m,get children(){return n()}}):n(),resolvePath(v){return On(o.path(),v,u())}}}const eu=e=>t=>{const{base:n}=t,r=$t(()=>t.children),o=W(()=>fa(r(),t.base||""));let s;const i=Yc(e,o,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),j(ca.Provider,{value:i,get children(){return j(tu,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[W(()=>(s=Ro())&&null),j(nu,{routerState:i,get branches(){return o()}})]}})}})};function tu(e){const t=e.routerState.location,n=e.routerState.params,r=W(()=>e.preload&&$e(()=>{e.preload({params:n,location:t,intent:Xc()||"initial"})}));return j(ae,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>j(o,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function nu(e){const t=[];let n;const r=W(Rr(e.routerState.matches,(o,s,i)=>{let a=s&&o.length===s.length;const l=[];for(let d=0,u=o.length;d<u;d++){const m=s&&s[d],p=o[d];i&&m&&p.route.key===m.route.key?l[d]=i[d]:(a=!1,t[d]&&t[d](),pt(v=>{t[d]=v,l[d]=Zc(e.routerState,l[d-1]||e.routerState.base,bo(()=>r()[d+1]),()=>e.routerState.matches()[d])}))}return t.splice(o.length).forEach(d=>d()),i&&a?i:(n=l[0],l)}));return bo(()=>r()&&n)()}const bo=e=>()=>j(ae,{get when(){return e()},keyed:!0,children:t=>j(ua.Provider,{value:t,get children(){return t.outlet()}})}),Re=e=>{const t=$t(()=>e.children);return Da(e,{get children(){return t()}})};function ru([e,t],n,r){return[e,r?o=>t(r(o)):t]}function su(e){let t=!1;const n=o=>typeof o=="string"?{value:o}:o,r=ru(J(n(e.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&e.set(o),o));return e.init&&Je(e.init((o=e.get())=>{t=!0,r[1](n(o)),t=!1})),eu({signal:r,create:e.create,utils:e.utils})}function ou(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function au(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const iu=new Map;function lu(e=!0,t=!1,n="/_server",r){return o=>{const s=o.base.path(),i=o.navigatorFactory(o.base);let a,l;function d(y){return y.namespaceURI==="http://www.w3.org/2000/svg"}function u(y){if(y.defaultPrevented||y.button!==0||y.metaKey||y.altKey||y.ctrlKey||y.shiftKey)return;const f=y.composedPath().find(w=>w instanceof Node&&w.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const h=d(f),c=h?f.href.baseVal:f.href;if((h?f.target.baseVal:f.target)||!c&&!f.hasAttribute("state"))return;const $=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||$&&$.includes("external"))return;const b=h?new URL(c,document.baseURI):new URL(c);if(!(b.origin!==window.location.origin||s&&b.pathname&&!b.pathname.toLowerCase().startsWith(s.toLowerCase())))return[f,b]}function m(y){const f=u(y);if(!f)return;const[h,c]=f,g=o.parsePath(c.pathname+c.search+c.hash),$=h.getAttribute("state");y.preventDefault(),i(g,{resolve:!1,replace:h.hasAttribute("replace"),scroll:!h.hasAttribute("noscroll"),state:$?JSON.parse($):void 0})}function p(y){const f=u(y);if(!f)return;const[h,c]=f;o.preloadRoute(c,h.getAttribute("preload")!=="false")}function v(y){clearTimeout(a);const f=u(y);if(!f)return l=null;const[h,c]=f;l!==h&&(a=setTimeout(()=>{o.preloadRoute(c,h.getAttribute("preload")!=="false"),l=h},20))}function _(y){if(y.defaultPrevented)return;let f=y.submitter&&y.submitter.hasAttribute("formaction")?y.submitter.getAttribute("formaction"):y.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const c=new URL(f,oa);if(f=o.parsePath(c.pathname+c.search),!f.startsWith(n))return}if(y.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const h=iu.get(f);if(h){y.preventDefault();const c=new FormData(y.target,y.submitter);h.call({r:o,f:y.target},y.target.enctype==="multipart/form-data"?c:new URLSearchParams(c))}}le(["click","submit"]),document.addEventListener("click",m),e&&(document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("focusin",p,{passive:!0}),document.addEventListener("touchstart",p,{passive:!0})),document.addEventListener("submit",_),Je(()=>{document.removeEventListener("click",m),e&&(document.removeEventListener("mousemove",v),document.removeEventListener("focusin",p),document.removeEventListener("touchstart",p)),document.removeEventListener("submit",_)})}}function cu(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function uu(e){const t=()=>window.location.hash.slice(1),n=sa();return su({get:t,set({value:r,replace:o,scroll:s,state:i}){o?window.history.replaceState(qc(i),"","#"+r):window.history.pushState(i,"","#"+r);const a=r.indexOf("#"),l=a>=0?r.slice(a+1):"";au(l,s),Tr()},init:r=>ou(window,"hashchange",Dc(r,o=>!n.confirm(o&&o<0?o:t()))),create:lu(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:cu,beforeLeave:n}})(e)}function $r(e){const t=Ce(),n=qr(),{href:r,state:o}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:o}),null}var du=D("<article id=main>");const fu=e=>{const t=$t(()=>e.children);return(()=>{var n=du();return T(n,t),n})()},Ge=e=>{const t=`answers-store-${e}`,[n,r]=Wo(Ho({currentLessonIdx:-1,answers:{}}),{name:t,storage:localStorage}),o=$=>(n.answers[$]||r("answers",$,[]),n.answers[$]),s=($,b)=>{const w=o($);if(!w[b])for(let C=w.length;C<=b;C++)r("answers",$,C,{wrongAnswers:[],correct:!1});return n.answers[$][b]},i=$=>r("currentLessonIdx",$),a=()=>n.currentLessonIdx===-1?0:n.currentLessonIdx,l=()=>r("currentLessonIdx",a()+1),d=($,b,w="")=>{o($),s($,b),r("answers",$,b,C=>w===""?{...C,correct:!0}:{...C,wrongAnswers:[...C.wrongAnswers,w]})},u=$=>n.answers[$]??[],m=$=>{r("answers",$,[])},p=()=>Object.keys(n.answers).length,v=()=>Object.values(n.answers).reduce(($,b)=>$+b.length,0),_=()=>Object.values(n.answers).reduce(($,b)=>$+b.filter(w=>w.correct).length,0),y=()=>Object.values(n.answers).reduce(($,b)=>$+b.reduce((w,C)=>w+C.wrongAnswers.length,0),0),f=$=>u($).length,h=$=>u($).filter(b=>b.correct).length;return{getCurrentLessonIdx:a,setCurrentLessonIdx:i,incrementCurrentLessonIdx:l,saveAnswer:d,getLessonAnswers:u,resetLesson:m,getTotalTakenLessons:p,getTotalQuestionsAnswered:v,getTotalCorrectAnswers:_,getTotalIncorrectAnswers:y,getLessonQuestionsAnsweredCorrectly:h,getLessonQuestionCount:f,getLessonQuestionsAnsweredIncorrectly:$=>u($).reduce((b,w)=>b+w.wrongAnswers.length,0),isLessonDone:$=>{const b=f($);return b>0&&h($)===b}}};var hu=D("<button class=large-icon-button><i class=utf8-icon-reset>");const ha=e=>{const{t}=be(),n=Ce(),{showConfirm:r}=Gn(),[o]=pe(ve),s=Ge(e.courseIdx),i=W(()=>s.getTotalQuestionsAnswered()),a=()=>{o.loading||(o().reset(e.courseIdx),n("/course/"+e.courseIdx))};return i()===0?"":(()=>{var l=hu(),d=l.firstChild;return l.$$click=()=>r(t("lose_progress",{totalAnswered:i()}),a),Z(()=>Y(d,"title",t("reset_course"))),l})()};le(["click"]);var mu=D("<ol>"),gu=D('<section class="card lesson-list">'),pu=D("<div>Loading lesson list..."),yu=D("<p class=card>No lessons are available for this course."),vu=D("<li><button>");const ma=e=>{const[t]=pe(ve),n=Ge(e.courseIndex);return j(ae,{get when(){return!t.loading},get fallback(){return pu()},get children(){var r=gu();return T(r,()=>e.children,null),T(r,j(ae,{get when(){return(t()?.getLessons()?.length??0)>0},get fallback(){return yu()},get children(){var o=mu();return T(o,j(at,{get each(){return t()?.getLessons()??[]},children:(s,i)=>{const a=i(),l=n.getCurrentLessonIdx(),d=n.isLessonDone(a);return console.log("xxx",a,l,d),(()=>{var u=vu(),m=u.firstChild;return m.$$click=()=>{(a<=l||d)&&e.onLessonSelected(a)},m.disabled=a!==l&&!d,m.classList.toggle("current",a===l&&!d),m.classList.toggle("todo",a!==l&&!d),T(m,()=>s.title),Z(p=>{var v=!!n.isLessonDone(a),_=s.description||"";return v!==p.e&&m.classList.toggle("completed",p.e=v),_!==p.t&&Y(m,"title",p.t=_),p},{e:void 0,t:void 0}),u})()}})),o}}),null),r}})};le(["click"]);var $u=D('<section class="completed-all-lessons card"><h2></h2><div class=stats>');const bu=e=>{const{t}=be(),n=Ce(),r=je(),o=s=>{n(`/course/${r.courseIdx}/${s}/intro`)};return(()=>{var s=$u(),i=s.firstChild,a=i.nextSibling;return T(i,()=>t("all_lessons_done")),T(s,j(ma,{onLessonSelected:o,get courseIndex(){return Number(r.courseIdx)}}),a),T(s,()=>e.children&&e.children,null),T(s,j(ha,{get courseIdx(){return Number(r.courseIdx||-1)}}),null),s})()};var _u=D('<section class="stats-component card"><h2></h2><table><tbody><tr class=correct-answers><th class=correct-answers-alt></th><td class=value></td></tr><tr class=incorrect-answers><th class=incorrect-answers-alt></th><td class=value></td></tr><tr class=questions-answered><th class=questions-answered-alt></th><td class=value>');const wu=e=>{const{t}=be(),n=Ge(e.courseIdx);return!n||!n.getTotalQuestionsAnswered()?"":(()=>{var r=_u(),o=r.firstChild,s=o.nextSibling,i=s.firstChild,a=i.firstChild,l=a.firstChild,d=l.nextSibling,u=a.nextSibling,m=u.firstChild,p=m.nextSibling,v=u.nextSibling,_=v.firstChild,y=_.nextSibling;return T(o,()=>t("progress")),T(l,()=>t("correct_answer_count_alt")),T(d,()=>n.getTotalCorrectAnswers()),T(m,()=>t("incorrect_answer_count_alt")),T(p,()=>n.getTotalQuestionsAnswered()),T(_,()=>t("questions_answered_count_alt")),T(y,()=>n.getTotalQuestionsAnswered()),Z(f=>{var h=t("corect_answers_alt"),c=t("incorrect_answer_count_alt"),g=t("questions_answered_count_alt");return h!==f.e&&Y(a,"title",f.e=h),c!==f.t&&Y(u,"title",f.t=c),g!==f.a&&Y(v,"title",f.a=g),f},{e:void 0,t:void 0,a:void 0}),r})()};var Su=D("<p>"),Cu=D('<section class="card no-border no-set-height"><h2>'),Eu=D("<article id=home>"),Pu=D("<div>Loading lessons ...");const ku=()=>{const e=je(),t=Ce(),[n,r]=J(null),[o]=pe(ve),[s,i]=J(null);ge(()=>{const d=Number(e.courseIdx);Number.isFinite(d)?(console.log("Course home screen set courseIdx",d),r(d)):(console.log("Course home screen has no courseIdx"),r(null))}),ge(()=>{if(o()&&!o.loading&&n()!==null){const u=o()?.store.courseMetadata;i(u)}});const a=W(()=>{const d=n();return d!==null?Ge(d):null}),l=d=>{t(`/course/${n()}/${d}/intro`)};return j(ae,{get when(){return W(()=>!!(!o.loading&&o()))()&&a()},get fallback(){return Pu()},get children(){var d=Eu();return T(d,j(wu,{get courseIdx(){return n()}}),null),T(d,j(ma,{get courseIndex(){return n()},onLessonSelected:l,get children(){return j(ae,{get when(){return s()},get children(){var u=Cu(),m=u.firstChild;return T(m,()=>s().title),T(u,j(ae,{get when(){return s().description},get children(){var p=Su();return T(p,()=>s().description),p}}),null),u}})}}),null),d}})};var Ou=D("<div class=form-field><label>"),Ru=D("<textarea class=text-input>"),Nu=D("<input class=text-input>");const Me=e=>(()=>{var t=Ou(),n=t.firstChild;return T(n,()=>e.label),T(t,(()=>{var r=W(()=>!!e.multiline);return()=>r()?(()=>{var o=Ru();return Rt(o,"input",e.onInput),Z(()=>Y(o,"placeholder",e.placeholder)),Z(()=>o.value=e.value),o})():(()=>{var o=Nu();return Rt(o,"input",e.onInput),Z(s=>{var i=e.placeholder,a=e.type||"text";return i!==s.e&&Y(o,"placeholder",s.e=i),a!==s.t&&Y(o,"type",s.t=a),s},{e:void 0,t:void 0}),Z(()=>o.value=e.value),o})()})(),null),t})();le(["input"]);var Iu=D('<section class="boolean-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Lu=D('<div class=answer-row><button title="Click to mark as correct answer"><span></span></button><button type=button title="Remove this answer"><span class=utf8-icon-close>');function Au(e){const[t,n]=J(""),[r,o]=J(!1),s=(d,u)=>{const m=[...e.list],p=Object.keys(m[d])[0];m[d]={[u]:m[d][p]},e.onUpdate(m)},i=d=>{const u=[...e.list],m=Object.keys(u[d])[0];u[d]={[m]:!u[d][m]},e.onUpdate(u)},a=d=>{const u=[...e.list];u.splice(d,1),e.onUpdate(u)},l=()=>{if(!t())return;const d=[...e.list,{[t()]:r()}];e.onUpdate(d),n(""),o(!1)};return(()=>{var d=Iu(),u=d.firstChild,m=u.firstChild;return T(d,()=>e.list.map((p,v)=>{const _=Object.keys(p)[0],y=p[_];return(()=>{var f=Lu(),h=f.firstChild,c=h.firstChild,g=h.nextSibling;return T(f,j(Me,{label:`Option ${v+1}`,value:_,onInput:$=>s(v,$.target.value),placeholder:"Enter answer"}),h),h.$$click=()=>i(v),Ne(h,`checkmark ${y?"selected":""}`),Ne(c,`utf8-icon-${y?"tick":"not-tick"}`),g.$$click=()=>a(v),f})()}),u),T(u,j(Me,{label:"New Option",get value(){return t()},onInput:p=>n(p.target.value),placeholder:"Enter new option"}),m),m.$$click=l,d})()}le(["click"]);var ju=D('<section class="answer-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Tu=D('<div class=answer-row><button title="Select as the correct answer"><span></span></button><button class=large-icon-button type=button title="Remove this answer"><span class=utf8-icon-close>');function _o(e){const[t,n]=J(""),[r,o]=J([]);ge(()=>{o([...e.list])});const s=(d,u)=>{const m=[...r()];m[d]=u,o(m),e.onUpdate(m,e.answer)},i=d=>{const u=[...r()];u.splice(d,1),o(u),e.onUpdate(u,e.answer)},a=()=>{const d=t().trim();if(!d)return;const u=[...r(),d];o(u),n(""),e.onUpdate(u,e.answer)},l=d=>{const u=e.answer===d?"":d;e.onUpdate(r(),u)};return(()=>{var d=ju(),u=d.firstChild,m=u.firstChild;return T(d,()=>r().map((p,v)=>(()=>{var _=Tu(),y=_.firstChild,f=y.firstChild,h=y.nextSibling;return T(_,j(Me,{label:`Option ${v+1}`,value:p,onInput:c=>s(v,c.target.value),placeholder:"Enter answer"}),y),y.$$click=()=>l(p),h.$$click=()=>i(v),Z(c=>{var g=`large-icon-button checkmark ${e.answer===p?"selected":""}`,$=`utf8-icon-${e.answer===p?"tick":"not-tick"}`;return g!==c.e&&Ne(y,c.e=g),$!==c.t&&Ne(f,c.t=$),c},{e:void 0,t:void 0}),_})()),u),T(u,j(Me,{label:"New Option",get value(){return t()},onInput:p=>n(p.target.value),placeholder:"Enter new option"}),m),m.$$click=a,d})()}le(["click"]);var xu=D('<section class="vocab-text answer-list"><div class="answer-row add-new"><button type=button title="Add this entry"><span class=utf8-icon-add>'),qu=D('<div class=answer-row><button type=button title="Remove this entry"><span class=utf8-icon-close>');function Du(e){const[t,n]=J(""),[r,o]=J(""),s=W(()=>Object.entries(e.list)),i=(u,m)=>{const p={...e.list},v=s()[u][0],_=p[v];delete p[v],p[m]=_,e.onUpdate(p)},a=(u,m)=>{const p={...e.list},v=s()[u][0];p[v]=m,e.onUpdate(p)},l=u=>{const m={...e.list},p=s()[u][0];delete m[p],e.onUpdate(m)},d=()=>{if(!t()||!r())return;const u={...e.list,[t()]:r()};e.onUpdate(u),n(""),o("")};return(()=>{var u=xu(),m=u.firstChild,p=m.firstChild;return T(u,()=>s().map(([v,_],y)=>(()=>{var f=qu(),h=f.firstChild;return T(f,j(Me,{label:`Prompt ${y+1}`,value:v,onInput:c=>i(y,c.target.value),placeholder:"Enter prompt"}),h),T(f,j(Me,{label:`Answer ${y+1}`,value:_,onInput:c=>a(y,c.target.value),placeholder:"Enter answer"}),h),h.$$click=()=>l(y),f})()),m),T(m,j(Me,{label:"New Prompt",get value(){return t()},onInput:v=>n(v.target.value),placeholder:"Enter new prompt"}),p),T(m,j(Me,{label:"New Answer",get value(){return r()},onInput:v=>o(v.target.value),placeholder:"Enter new answer"}),p),p.$$click=d,u})()}le(["click"]);var Mu=D("<p>Loading card..."),Vu=D('<aside class="card-editor card"><section><h2>Editing <!> Card<button class="close-editor large-icon-button"><span class=utf8-icon-close></span></button></h2></section><footer class=modal-actions><button>Cancel</button><button>Save'),Fu=D("<section class=question>");const Uu=e=>{const{t}=be(),[n,r]=J([]),[o,s]=J(""),[i,a]=J(""),[l,d]=J({}),[u,m]=J([]),[p,v]=J([]);ge(()=>{if(!e.card){console.warn("No card!");return}"answer"in e.card&&s(e.card.answer||""),"answers"in e.card&&r(e.card.answers||[]),"options"in e.card&&m(e.card.options),"question"in e.card&&a(e.card.question),"words"in e.card&&v(e.card.words),"vocab"in e.card&&d(e.card.vocab)});const _=()=>{if(!e.card)return;const f={...e.card};"answers"in f&&(f.answers=n()),"answer"in f&&(f.answer=o()),"options"in f&&(f.options=u()),"question"in e.card&&(f.question=i()),"words"in f&&(f.words=p()),"vocab"in f&&(f.vocab=l()),e.onSave(f)};function y(f,h,c){f(h),c&&kc(e.card)&&s(c)}return j(ae,{get when(){return e.card},get fallback(){return Mu()},children:f=>(()=>{var h=Vu(),c=h.firstChild,g=c.firstChild,$=g.firstChild,b=$.nextSibling,w=b.nextSibling,C=w.nextSibling,P=c.nextSibling,A=P.firstChild,R=A.nextSibling;return h.$$click=N=>N.stopPropagation(),T(g,()=>t("card-class."+e.card?.class),b),Rt(C,"click",e.onCancel),T(c,(()=>{var N=W(()=>!!i());return()=>N()&&(()=>{var V=Fu();return T(V,j(Me,{multiline:!0,label:"Question",get value(){return i()??"Question"},onInput:z=>a(z.target.value),placeholder:"Option: enter a question"})),V})()})(),null),T(c,(()=>{var N=W(()=>!!(f().answer&&f().class!=="writing-blocks"&&f().class!=="multiple-choice"));return()=>N()&&j(Me,{label:"Answer",get value(){return f().answer},onInput:V=>s(V.target.value),placeholder:"Enter answer"})})(),null),T(c,(()=>{var N=W(()=>"words"in f());return()=>N()&&j(Au,{get list(){return p()},onUpdate:(...V)=>y(v,...V)})})(),null),T(c,(()=>{var N=W(()=>"answers"in f());return()=>N()&&j(_o,{get answer(){return o()},get list(){return n()},onUpdate:(...V)=>y(r,...V)})})(),null),T(c,(()=>{var N=W(()=>"options"in f());return()=>N()&&j(_o,{get answer(){return o()},get list(){return u()},onUpdate:(...V)=>y(m,...V)})})(),null),T(c,(()=>{var N=W(()=>"vocab"in f());return()=>N()&&j(Du,{get list(){return l()},onUpdate:(...V)=>y(d,...V)})})(),null),Rt(A,"click",e.onCancel),R.$$click=_,Z(()=>Y(C,"title",t("cacnel"))),h})()})};le(["click"]);var Ku=D("<article>"),zu=D("<p>Loading editor...");const Hu=()=>{const e=je(),t=Ce(),[n]=pe(ve),r=()=>Number(e.courseIdx??-1),o=()=>Number(e.lessonIdx??-1),s=()=>Number(e.cardIdx??-1),i=W(()=>n()?.getLessons()??[]),a=W(()=>{const u=o();if(typeof o>"u"||!i().length)return;const m=i()[u];if(!m||!Array.isArray(m.cards))return console.warn("Invalid lesson:",u,m),null;const p=s();if(s()>=m.cards.length){console.warn("cardId is >= lesson.cards length"),t("/course/"+r());return}return m.cards[p]??null}),l=W(()=>i().length>0&&o()>=0&&s()>=0&&a()!==null);ge(()=>{n()});const d=u=>{const m=n();m&&(m.saveCard(u,o(),s()),t(-1))};return j(ae,{get when(){return W(()=>!!l())()&&a()},get fallback(){return zu()},get children(){var u=Ku();return T(u,j(Uu,{get card(){return a()},onSave:d,onCancel:()=>t(`/editor/${r()}`)})),u}})},Wu=(e,t)=>{const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=t%60;let s="";return n>0&&(s+=`${n} ${e("hours")}`),(r>0||n>0)&&(s&&(s+=" "),s+=`${r} ${e("minutes")}`),s&&(s+=", "),s+=`${o} ${e("seconds")}`,s};var Bu=D('<section class="lesson-completed card"><h2></h2><p>'),Ju=D("<footer class=lesson-completed-footer><button class=next-button>");const Gu=e=>{const{t}=be(),n=je(),r=Ge(Number(n.courseIdx||-1)),o=r.getCurrentLessonIdx(),s=r.getLessonQuestionsAnsweredIncorrectly(o),i=r.getLessonQuestionCount(o),a=()=>{ea(),e.onNext()};return[(()=>{var l=Bu(),d=l.firstChild,u=d.nextSibling;return T(d,()=>t("lesson_completed")),T(u,()=>t("lesson_completed_counts",{questionCount:i,incorrectAnswerCount:s,duration:Wu(t,e.durationInSeconds)})),l})(),(()=>{var l=Ju(),d=l.firstChild;return d.$$click=a,T(d,()=>t("continue")),l})()]};le(["click"]);const Qu=()=>{const[e]=pe(ve),t=je(),[n]=Bc(),r=Ce(),o=W(()=>Number(t.courseIdx)),s=W(()=>Number(t.lessonIdx)),i=W(()=>Number(n.duration)||-1),a=W(()=>s()+1),l=()=>{const d=e();d&&(a()<d.getLessons().length?r(`/course/${o()}/${a()}/intro`):r(`/course/${o()}/finished`))};return j(ae,{get when(){return e()},get children(){return j(Gu,{onNext:l,get durationInSeconds(){return i()}})}})};var Xu=D("<div>Loading Lesson Data...");const Yu=()=>{const[e]=pe(ve),t=je(),n=W(()=>Number(t.courseIdx||-1)),r=W(()=>Number(t.lessonIdx||-1)),o=Ce(),s=Ge(n()),[i,a]=J(null),[l,d]=J(Date.now());ge(()=>{if(e.loading)return;const v=e();if(!v)return;const _=r(),y=v?.getLessons();y[_]&&(a(y[_]),d(Date.now()))});const u=()=>{o(`/course/${n()}`)},m=(v,_)=>{s.saveAnswer(r(),v,_||"")},p=()=>{const v=Math.floor((Date.now()-l())/1e3);o(`/course/${n()}/${r()}/completed?duration=${v}`)};return j(ae,{get when(){return i()},get fallback(){return Xu()},children:v=>j(Lc,{get lesson(){return v()},onCancel:u,onAnswer:m,onLessonComplete:p})})};var Zu=D("<div>Loading Lesson Data..."),ed=D('<article class="lesson-intro card"><header><h2> </h2><h3>'),td=D("<footer class=lesson-intro-footer><button class=next-button>"),nd=D("<p class=description>");const wo=()=>{const[e]=pe(ve),t=je(),n=Ce(),{t:r}=be(),o=W(()=>Number(t.courseIdx)),s=W(()=>Number(t.lessonIdx)),i=W(()=>Ge(o())),a=W(()=>{const d=e();if(!(!d||!d.store))return d.getLessons()?.[s()]}),l=()=>{Ml(),i()?.resetLesson(s()),n(`/course/${o()}/${s()}/in-progress`)};return j(ae,{get when(){return a()},get fallback(){return Zu()},children:d=>[(()=>{var u=ed(),m=u.firstChild,p=m.firstChild,v=p.firstChild,_=p.nextSibling;return T(p,()=>r("lesson"),v),T(p,()=>s()+1,null),T(_,()=>d().title),T(u,(()=>{var y=W(()=>!!d().description);return()=>y()&&(()=>{var f=nd();return T(f,()=>d().description),f})()})(),null),u})(),(()=>{var u=td(),m=u.firstChild;return m.$$click=l,T(m,()=>r("begin")),u})()]})};le(["click"]);const rd="0.2.3",sd="https://leegee.github.io/learning-oe-solidjs",ga={version:rd,homepage:sd};var od=D("<h1 class=animated-text>");const ad=e=>{const[t,n]=J(!1);let r;return ge(()=>{if(r){let o;requestAnimationFrame(()=>{o=new IntersectionObserver(i=>{i[0].isIntersecting&&(n(!0),o.unobserve(r))},{threshold:.1}),o.observe(r)}),Je(()=>{o?.disconnect()})}}),(()=>{var o=od(),s=r;return typeof s=="function"?ot(s,o):r=o,T(o,()=>e.title),Z(()=>o.classList.toggle("visible",!!t())),o})()};var id=D("<button class=large-icon-button><i class=icon-cog>");const So=e=>{const t=Ce();return(()=>{var n=id();return n.$$click=()=>t("/editor/"+e.courseIdx),n})()};le(["click"]);var ld=D('<button title="Download this course"class="icon-download large-icon-button">'),cd=D('<dialog class=dialog-error><header><h3>Error saving lessons</h3></header><footer><button class="large-icon-button utf8-icon-close">');const Co=e=>{const[t]=pe(ve);let n=null;const r=async()=>{if(t.loading)return;const o="lessons.lson.json",s=await t().getCourseData(e.courseIdx);if(!s)throw new Error("Lessons not loaded?");try{const i=new Blob([JSON.stringify(s,null,2)],{type:"text/plain"}),a=URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=o,l.click(),URL.revokeObjectURL(a)}catch(i){i.name!=="AbortError"&&(console.error("Error saving file:",i),n?.showModal())}};return[(()=>{var o=ld();return o.$$click=()=>r(),o})(),(()=>{var o=cd(),s=o.firstChild,i=s.nextSibling,a=i.firstChild;return ot(l=>n=l,o),a.$$click=()=>n?.close(),o})()]};le(["click"]);var ud=D('<button title="Create a blank course"class="large-icon-button utf8-icon-new">');const dd=()=>{const e=Ce(),{config:t}=qt(),[n]=pe(ve),r=async()=>{if(n.loading)return;const o=n().initNewCourse(t);o?(Ge(o),e(`/editor/${o}`)):alert("Error creating new course")};return j(ae,{get when(){return!n.loading},get children(){var o=ud();return o.$$click=r,o}})};le(["click"]);var fd=D('<button title="Load a course from a file"class=large-icon-button><i class=icon-upload>'),hd=D("<input type=file accept=.json>"),md=D("<dialog class=dialog-error><header><h3>Error loading course</h3></header><footer><button class=large-icon-button><span class=utf8-icon-close>"),gd=D('<dialog class=dialog-ok><header><h3>Course Loaded</h3></header><footer><button class="large-icon-button utf8-icon-tick">');const pd=()=>{const[e]=pe(ve);let t=null,n=null,r=null;const o=()=>{n?.close(),t?.close()},s=()=>r?.click(),i=async a=>{if(console.log("loadCourseFromFile enter"),e.loading)return;const d=a.target.files?.[0];if(d)try{console.log("Selected file:",d.name);const u=await d.text();console.log(u),await e()?.saveCourseToStorage(u),n?.showModal()}catch(u){u.name!=="AbortError"&&(console.error("Error loading file:",u),t?.showModal())}finally{r&&(r.value="")}};return[(()=>{var a=fd();return a.$$click=s,a})(),(()=>{var a=hd();return a.addEventListener("change",i),ot(l=>r=l,a),a.style.setProperty("display","none"),a})(),(()=>{var a=md(),l=a.firstChild,d=l.nextSibling,u=d.firstChild;return ot(m=>t=m,a),u.$$click=o,a})(),(()=>{var a=gd(),l=a.firstChild,d=l.nextSibling,u=d.firstChild;return ot(m=>n=m,a),u.$$click=o,a})()]};le(["click"]);var Eo=D("<span class=course-action-buttons>"),yd=D('<aside aria-roledescription="Toggle menu"class=hamburger-menu><section class=card><menu><li><a>Custom Course</a></li></menu><footer><small><button>Edit Courses </button></small></footer></section><footer><small>Version '),vd=D("<p>Loading..."),$d=D("<li><a>");const bd=()=>{const[e]=pe(ve),[t,n]=J(!1),r=Ce(),{config:o}=qt(),[s,i]=J(0),a=l=>{i(l),r("/course/"+l)};return ge(()=>{if(!e.loading&&isNaN(s())){console.debug("local course index is NaN?");return}}),j(ae,{get when(){return!e.loading},get fallback(){return vd()},get children(){var l=yd(),d=l.firstChild,u=d.firstChild,m=u.firstChild,p=m.firstChild,v=u.nextSibling,_=v.firstChild,y=_.firstChild,f=d.nextSibling,h=f.firstChild;return h.firstChild,T(d,j(ad,{get title(){return o.menuTitle||o.appTitle}}),u),T(u,()=>kn(o).map((c,g)=>(()=>{var $=$d(),b=$.firstChild;return Y($,"tabindex",g+1),b.$$click=()=>a(g),T(b,c),T($,j(ae,{get when(){return t()},get children(){var w=Eo();return T(w,j(ha,{courseIdx:g}),null),T(w,j(Co,{courseIdx:g}),null),T(w,j(So,{courseIdx:g}),null),w}}),null),Z(()=>Ne($,s()===g?"selected":"")),$})()),m),p.$$click=()=>{r("/course/"+o.courses.length)},T(m,j(ae,{get when(){return t()},get children(){var c=Eo();return T(c,j(dd,{}),null),T(c,j(pd,{}),null),T(c,j(Co,{get courseIdx(){return kn(o).length}}),null),T(c,j(So,{get courseIdx(){return kn(o).length}}),null),c}}),null),y.$$click=()=>n(!t()),T(h,()=>ga.version,null),Z(()=>Ne(u,"course-menu "+(t()?"editing":""))),l}})};le(["click"]);var _d=D("<span contenteditable>");function Un(e){let t,n=e.value;const r=o=>o.replace(/[\r\n]+/g,"").trim();return ge(()=>{t&&document.activeElement!==t&&(t.innerText=e.value)}),(()=>{var o=_d();return o.addEventListener("blur",s=>{const i=r(s.currentTarget.innerText);i!==e.value&&e.onChange(i)}),o.$$keydown=s=>{const i=s.currentTarget;s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),i.blur()):s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),i.innerText=n,i.blur())},o.addEventListener("focus",()=>{n=e.value}),ot(s=>t=s,o),Z(s=>{var i=e.placeholder,a=`${e.class??""} ${e.value.trim()===""?"placeholder":""}`;return i!==s.e&&Y(o,"aria-placeholder",s.e=i),a!==s.t&&Ne(o,s.t=a),s},{e:void 0,t:void 0}),o})()}le(["keydown"]);var wd=D('<button class=add-card title="Add a new card to this lesson"><span class=utf8-icon-add>'),Sd=D("<div class=card-class-picker><button class=delete-button><span class=utf8-icon-close>"),Cd=D("<div class=add-card>"),Ed=D("<p>Loading..."),Pd=D("<button>");function kd(e){const[t]=pe(ve),n=je(),r=Ce(),[o,s]=J(!1),i=a=>{const l=t();if(!l)return;const d=Number(n.courseIdx),u=l.getLessons();if(!Array.isArray(u)||e.lessonIdx<0||e.lessonIdx>=u.length){console.error("Invalid lesson index or malformed lessons:",u,e.lessonIdx);return}const m=Ec(a),p=u.map((_,y)=>y===e.lessonIdx?{..._,cards:[..._.cards,m]}:_);l.setLessons(p);const v=p[e.lessonIdx]?.cards?.length-1;if(v==null||v<0){console.error("Failed to calculate newCardIdx");return}r(`/editor/${d}/${e.lessonIdx}/${v}`)};return j(ae,{get when(){return!t.loading},get fallback(){return Ed()},get children(){var a=Cd();return T(a,j(ae,{get when(){return!o()},get children(){var l=wd();return l.$$click=()=>s(!0),l}}),null),T(a,j(ae,{get when(){return o()},get children(){var l=Sd(),d=l.firstChild;return d.$$click=()=>s(!1),T(l,j(at,{each:Pc,children:u=>(()=>{var m=Pd();return m.$$click=()=>{i(u),s(!1)},T(m,u),m})()}),null),l}}),null),a}})}le(["click"]);var Od=D('<button class="large-icon-button icon-up-fat"title="Add a new lesson above this">'),Rd=D('<button class="large-icon-button icon-down-fat"title="Add a new lesson beneath this">'),Nd=D("<aside class=add-lesson-overlay>"),Id=D('<div class=add-lesson-button-component><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course">'),Ld=D("<p>Loading...");function Ad(e){const[t]=pe(ve),[n,r]=J(!1),o=s=>{s.target.closest(".add-lesson-button-component")||r(!1)};return document.addEventListener("click",o),Je(()=>document.removeEventListener("click",o)),j(ae,{get when(){return!t.loading},get fallback(){return Ld()},get children(){var s=Id(),i=s.firstChild;return i.$$click=()=>r(a=>!a),T(s,j(ae,{get when(){return n()},get children(){var a=Nd();return T(a,j(ae,{get when(){return e.above||!e.above&&!e.below},get children(){var l=Od();return l.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)-1),r(!1)},l}}),null),T(a,j(ae,{get when(){return e.below||!e.above&&!e.below},get children(){var l=Rd();return l.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)+1),r(!1)},l}}),null),a}}),null),s}})}le(["click"]);var jd=D('<div class=card-holder><div class="vertical-controls top-controls"><button title="Move up to the previous lesson"class="move-card-button icon-up-fat"></button></div><div class=horizontal-controls><button title="Swap with the card on the left"class="move-card-button icon-left-fat"></button><div class=card-overlay-wrapper><div class=card-overlay><button title=Delete class="control small-control"><span class=icon-trash></span></button><button title=Edit class=control><span class=icon-pencil></span></button></div></div><button title="Swap with the card to the right"class="move-card-button icon-right-fat"></button></div><div class="vertical-controls bottom-controls"><button title="Move to the next lesson"class="move-card-button icon-down-fat">'),Td=D("<p>Loading...?!");function xd(e){const[t]=pe(ve),{showConfirm:n}=Gn(),{t:r}=be(),o=Ce(),s=je(),i=u=>({...u,cards:[...u.cards]}),a=()=>{t.loading||n(r("confirm_delete_card"),()=>t().deleteCard(Number(e.lessonIdx),Number(e.cardIdx)))},l=(u,m,p)=>{const _=[...t().getLessons()],y=i(_[u]),f=[...y.cards],h=m+p;if(h<0||h>=f.length)return;const[c]=f.splice(m,1);f.splice(h,0,c),y.cards=f,_[u]=y,t().setLessons(_)},d=(u,m,p)=>{if(t.loading)return"Loading...";const v=t().getLessons(),_=u+p;if(_<0||_>=v.length||m<0||m>=v[u].cards.length)return;const y=[...v],f=i(y[u]),h=i(y[_]),c=[...f.cards],g=[...h.cards],[$]=c.splice(m,1);g.push($),f.cards=c,h.cards=g,y[u]=f,y[_]=h,t().setLessons(y)};return j(ae,{get when(){return!t.loading},get fallback(){return Td()},get children(){var u=jd(),m=u.firstChild,p=m.firstChild,v=m.nextSibling,_=v.firstChild,y=_.nextSibling,f=y.firstChild,h=f.firstChild,c=h.nextSibling,g=y.nextSibling,$=v.nextSibling,b=$.firstChild;return p.$$click=()=>d(e.lessonIdx,e.cardIdx,-1),_.$$click=()=>l(e.lessonIdx,e.cardIdx,-1),T(y,j(ra,{tabindex:-1,get card(){return e.card},get lesson(){return e.lesson},ondblclick:()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`)}),f),h.$$click=()=>a(),c.$$click=()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`),g.$$click=()=>l(e.lessonIdx,e.cardIdx,1),b.$$click=()=>d(e.lessonIdx,e.cardIdx,1),Z(w=>{var C=e.lessonIdx===0,P=e.cardIdx===0,A=e.cardIdx===e.lesson.cards.length-1,R=e.lessonIdx===t().getLessons().length-1;return C!==w.e&&(p.disabled=w.e=C),P!==w.t&&(_.disabled=w.t=P),A!==w.a&&(g.disabled=w.a=A),R!==w.o&&(b.disabled=w.o=R),w},{e:void 0,t:void 0,a:void 0,o:void 0}),u}})}le(["click"]);var qd=D('<article class="card no-set-height no-lessons"><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course"></button><p>Click above to create your first lesson</p><p>Click titles and descriptions to edit them'),Dd=D("<p>..."),Md=D("<section class=lesson><header><h3><span>: &nbsp;</span></h3><h4></h4></header><div class=cards>"),Vd=D("<div class=card-holder>");function Fd(){const[e]=pe(ve),{t}=be();ge(()=>{document.body.classList.add("editing-card"),Je(()=>{document.body.classList.remove("editing-card")})});const n=(r,o)=>{const s=[...e().getLessons()];s[r]=o(s[r]),e().setLessons(s)};return j(ae,{get when(){return e()},get fallback(){return(()=>{var r=Dd(),o=r.firstChild;return T(r,()=>t("loading"),o),r})()},get children(){return[W(()=>e().getLessons().map((r,o)=>(()=>{var s=Md(),i=s.firstChild,a=i.firstChild,l=a.firstChild,d=l.firstChild,u=a.nextSibling,m=i.nextSibling;return Y(s,"id",`lesson-${o}`),T(l,o+1,d),T(l,j(Un,{get value(){return r.title},onChange:p=>n(o,v=>({...v,title:p}))}),null),T(a,j(Ad,{lessonIdx:o}),null),T(u,j(Un,{get value(){return r.description??""},onChange:p=>n(o,v=>({...v,description:p}))})),T(m,()=>r.cards.map((p,v)=>(()=>{var _=Vd();return T(_,j(xd,{lesson:r,lessonIdx:o,card:p,cardIdx:v})),_})()),null),T(m,j(kd,{lessonIdx:o}),null),s})())),j(ae,{get when(){return e().getLessons().length===0},get children(){var r=qd(),o=r.firstChild;return o.$$click=()=>e()?.addLesson(0),r}})]}})}le(["click"]);var Ud=D('<button class="large-icon-button icon-trash">');function Kd(e){const[t]=pe(ve),{t:n}=be(),r=Ce(),{showConfirm:o}=Gn(),s=async()=>{try{await t().deleteCourse(e.courseIdx),r("/")}catch(a){console.error("Failed to delete course:",a)}},i=async()=>{if(e.courseIdx==null){console.warn("No course selected.");return}t.loading||o(n("confirm_delete_course"),s)};return(()=>{var a=Ud();return a.$$click=i,Z(()=>Y(a,"title",n("delete_course"))),a})()}le(["click"]);var zd=D("<p>..."),Hd=D("<nav class=coourse-action-buttons>"),Wd=D("<article class=course-editor role=dialog aria-modal=true><header><h2>:&nbsp;<q></q></h2><h3><q>"),Bd=D("<nav class=lesson-pager>"),Jd=D("<button class=pager-link>: ");function Gd(){const[e]=pe(ve),{t}=be(),n=Ce(),r=je(),{config:o}=qt();return ge(()=>{console.log("editor course idx:",r.courseIdx)}),ge(()=>{document.body.classList.add("editing-card"),Je(()=>{document.body.classList.remove("editing-card")})}),j(ae,{get when(){return e()},get fallback(){return(()=>{var s=zd(),i=s.firstChild;return T(s,()=>t("loading"),i),s})()},children:s=>{const i=s().getLessons();return(()=>{var a=Wd(),l=a.firstChild,d=l.firstChild,u=d.firstChild,m=u.nextSibling,p=d.nextSibling,v=p.firstChild;return T(d,()=>t("course"),u),T(m,j(Un,{get value(){return s().getTitle()??""},onChange:_=>s().setTitle(_)})),T(d,j(ae,{get when(){return Number(r.courseIdx)<o.courses.length},get children(){var _=Hd();return T(_,j(Kd,{get courseIdx(){return Number(r.courseIdx)}})),_}}),null),T(v,j(Un,{get value(){return s().getDescription()??"Description"},onChange:_=>s().setDescription(_)})),T(l,(()=>{var _=W(()=>!!(i&&i.length>1));return()=>_()&&(()=>{var y=Bd();return T(y,()=>i.map((f,h)=>(()=>{var c=Jd(),g=c.firstChild;return c.$$click=()=>n(`#lesson-${h}`),T(c,h+1,g),T(c,()=>f.title,null),Z(()=>Y(c,"aria-label",`Go to lesson ${h+1}: ${f.title}`)),c})())),y})()})(),null),T(a,j(Fd,{}),null),a})()}})}le(["click"]);var Qd=D("<h1>The specified resource is unavailable.");const Xd=()=>[j(Re,{path:"/editor/:courseIdx/:lessonIdx/:cardIdx",component:Hu}),j(Re,{path:"/editor/:courseIdx?",component:Gd}),j(Re,{path:"/course/:courseIdx",component:fu,get children(){return[j(Re,{path:"/",component:ku}),j(Re,{path:":lessonIdx",component:wo}),j(Re,{path:":lessonIdx/intro",component:wo}),j(Re,{path:":lessonIdx/in-progress",component:Yu}),j(Re,{path:":lessonIdx/completed",component:Qu}),j(Re,{path:"finished",component:bu})]}}),j(Re,{path:"/editor",component:()=>j($r,{href:"/menu"})}),j(Re,{path:"/course",component:()=>j($r,{href:"/menu"})}),j(Re,{path:"/menu",component:bd}),j(Re,{path:"/",component:()=>j($r,{href:"/menu"})}),j(Re,{path:"*",component:()=>Qd()})],Yd=ga.homepage,Zd=()=>new URL(Yd).pathname.replace(/\/?$/,"");var ef=D('<button class="hamburger-button large-icon-button"aria-label="Toggle menu"><span>');const tf=()=>{const e=qr(),t=Ce(),[n,r]=J("/"),o=Zd(),s=()=>e.pathname.replace(o,"")||"/",i=()=>/\/menu(\/|$)/.test(e.pathname),a=()=>{if(i()){const l=s(),d=n();d===l||d==="/menu"||!d?t("/"):window.history.back()}else r(s()),t("/menu")};return ge(()=>{i()?document.body.classList.add("menu-shown"):document.body.classList.remove("menu-shown")}),(()=>{var l=ef(),d=l.firstChild;return l.$$click=a,Z(()=>Ne(d,`utf8-icon-${i()?"close":"menu"}`)),l})()};le(["click"]);var nf=D("<p>Loading..."),rf=D("<header class=header-component><aside class=header-progress><progress class=course-progress></progress></aside><div class=header-text><h1>");const sf=()=>{const{t:e}=be(),{config:t}=qt(),n=je(),r=Ge(Number(n.courseIdx||-1)),[o]=pe(ve);return j(ae,{get when(){return o()},get fallback(){return nf()},children:s=>{const i=r.getTotalQuestionsAnswered(),a=s().getTotalLessonsCount();return(()=>{var l=rf(),d=l.firstChild,u=d.firstChild,m=d.nextSibling,p=m.firstChild;return u.value=i,Y(u,"max",a),T(p,()=>t.appTitle),T(m,j(tf,{}),null),Z(v=>{var _=e("course_progress"),y=`${e("all_lessons")} ${i+1} / ${a}`,f=t.targetLanguage;return _!==v.e&&Y(u,"aria-label",v.e=_),y!==v.t&&Y(u,"title",v.t=y),f!==v.a&&Y(p,"lang",v.a=f),v},{e:void 0,t:void 0,a:void 0}),l})()}})},Po=new Set;function of(){const[e]=pe(ve),t=je();return ge(async()=>{if(e.loading)return;const n=t.courseIdx;if(!n)return;const r=Number(n);!isNaN(r)&&!Po.has(n)&&(Po.add(n),await e()?.loadCourseFromFile(r),console.log("Loaded course by route"))}),null}var af=D("<main id=main>");const lf=e=>j(uu,{root:n=>j(Bl,{get config(){return e.config},get children(){return[j(of,{}),j(yi,{get children(){return j(Dl,{get children(){var r=af();return T(r,j(sf,{}),null),T(r,()=>n.children,null),r}})}})]}}),get children(){return j(Xd,{})}}),cf=async()=>{try{return await qo()}catch(e){return console.error("Error loading configuration:",e),null}},uf=async()=>{const e=await cf();if(!e)throw new Error("Failed to load config. App will not start.");await Promise.allSettled([ve(),pi(e)]);const t=j(lf,{config:e}),n=document.getElementById("root");n?(n.innerHTML="",za(()=>t,n)):pt(()=>t)};await uf();

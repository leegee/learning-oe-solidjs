(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const ki=!0,Oi=(e,t)=>e===t,qe=Symbol("solid-proxy"),jo=typeof Proxy=="function",Er=Symbol("solid-track"),Ri=Symbol("solid-dev-component"),Dn={equals:Oi};let To=Fo;const Qe=1,Mn=2,Ni={},lr={};var se=null;let cr=null,Ii=null,me=null,Ee=null,Je=null,Xn=0;const Li={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function Nt(e,t){const n=me,r=se,o=e.length===0,s=t===void 0?r:t,i=o?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?()=>e(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>e(()=>$e(()=>jt(i)));se=i,me=null;try{return Ue(a,!0)}finally{me=n,se=r}}function W(e,t){t=t?Object.assign({},Dn,t):Dn;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0};t.name&&(n.name=t.name),t.internal?n.internal=!0:Mo(n);const r=o=>(typeof o=="function"&&(o=o(n.value)),qr(n,o));return[Vo.bind(n),r]}function Ai(e,t,n){const r=Vt(e,t,!0,Qe,n);ct(r)}function Z(e,t,n){const r=Vt(e,t,!1,Qe,n);ct(r)}function pe(e,t,n){To=Vi;const r=Vt(e,t,!1,Qe,n);r.user=!0,Je?Je.push(r):ct(r)}function Q(e,t,n){n=n?Object.assign({},Dn,n):Dn;const r=Vt(e,t,!0,0,n);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ct(r),Vo.bind(r)}function ji(e){return e&&typeof e=="object"&&"then"in e}function Dt(e,t,n){let r,o,s;r=!0,o=e,s={};let i=null,a=lr,l=!1,u="initialValue"in s,c=typeof r=="function"&&Q(r);const h=new Set,[d,g]=(s.storage||W)(s.initialValue),[$,b]=W(void 0),[m,p]=W(void 0,{equals:!1}),[f,v]=W(u?"ready":"unresolved");function _(T,q,P,A){return i===T&&(i=null,A!==void 0&&(u=!0),(T===a||q===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(A,{value:q})),a=lr,y(q,P)),q}function y(T,q){Ue(()=>{q===void 0&&g(()=>T),v(q!==void 0?"errored":u?"ready":"unresolved"),b(q);for(const P of h.keys())P.decrement();h.clear()},!1)}function w(){const T=qi,q=d(),P=$();if(P!==void 0&&!i)throw P;return me&&me.user,q}function C(T=!0){if(T!==!1&&l)return;l=!1;const q=c?c():r;if(q==null||q===!1){_(i,$e(d));return}let P;const A=a!==lr?a:$e(()=>{try{return o(q,{value:d(),refetching:T})}catch(U){P=U}});if(P!==void 0){_(i,void 0,An(P),q);return}else if(!ji(A))return _(i,A,void 0,q),A;return i=A,"v"in A?(A.s===1?_(i,A.v,void 0,q):_(i,void 0,An(A.v),q),A):(l=!0,queueMicrotask(()=>l=!1),Ue(()=>{v(u?"refreshing":"pending"),p()},!1),A.then(U=>_(A,U,void 0,q),U=>_(A,void 0,An(U),q)))}Object.defineProperties(w,{state:{get:()=>f()},error:{get:()=>$()},loading:{get(){const T=f();return T==="pending"||T==="refreshing"}},latest:{get(){if(!u)return w();const T=$();if(T&&!i)throw T;return d()}}});let O=se;return c?Ai(()=>(O=se,C(!1))):C(!1),[w,{refetch:T=>xr(O,()=>C(T)),mutate:g}]}function xo(e){return Ue(e,!1)}function $e(e){if(me===null)return e();const t=me;me=null;try{return e()}finally{me=t}}function Tr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let u=0;u<e.length;u++)a[u]=e[u]()}else a=e();if(s)return s=!1,i;const l=$e(()=>t(a,o,i));return o=a,l}}function qo(e){pe(()=>$e(e))}function Ke(e){return se===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):se.cleanups===null?se.cleanups=[e]:se.cleanups.push(e),e}function Pr(){return me}function Do(){return se}function xr(e,t){const n=se,r=me;se=e,me=null;try{return Ue(t,!0)}catch(o){Dr(o)}finally{se=n,me=r}}function Ti(e){const t=me,n=se;return Promise.resolve().then(()=>{me=t,se=n;let r;return Ue(e,!1),me=se=null,r?r.done:void 0})}const[xf,qf]=W(!1);function xi(e,t){const n=Vt(()=>$e(()=>(Object.assign(e,{[Ri]:!0}),e(t))),void 0,!0,0);return n.props=t,n.observers=null,n.observerSlots=null,n.name=e.name,n.component=e,ct(n),n.tValue!==void 0?n.tValue:n.value}function Mo(e){se&&(se.sourceMap?se.sourceMap.push(e):se.sourceMap=[e],e.graph=se)}function Mt(e,t){const n=Symbol("context");return{id:n,Provider:Fi(n,t),defaultValue:e}}function _t(e){let t;return se&&se.context&&(t=se.context[e.id])!==void 0?t:e.defaultValue}function wt(e){const t=Q(e),n=Q(()=>kr(t()),void 0,{name:"children"});return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let qi;function Vo(){if(this.sources&&this.state)if(this.state===Qe)ct(this);else{const e=Ee;Ee=null,Ue(()=>Fn(this),!1),Ee=e}if(me){const e=this.observers?this.observers.length:0;me.sources?(me.sources.push(this),me.sourceSlots.push(e)):(me.sources=[this],me.sourceSlots=[e]),this.observers?(this.observers.push(me),this.observerSlots.push(me.sources.length-1)):(this.observers=[me],this.observerSlots=[me.sources.length-1])}return this.value}function qr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Ue(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=cr&&cr.running;i&&cr.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?Ee.push(s):Je.push(s),s.observers&&Uo(s)),i||(s.state=Qe)}if(Ee.length>1e6)throw Ee=[],ki?new Error("Potential Infinite Loop Detected."):new Error},!1)),t}function ct(e){if(!e.fn)return;jt(e);const t=Xn;Di(e,e.value,t)}function Di(e,t,n){let r;const o=se,s=me;me=se=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=Qe,e.owned&&e.owned.forEach(jt),e.owned=null),e.updatedAt=n+1,Dr(i)}finally{me=s,se=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?qr(e,r):e.value=r,e.updatedAt=n)}function Vt(e,t,n,r=Qe,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:se,context:se?se.context:null,pure:n};return se===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):se!==Ni&&(se.owned?se.owned.push(s):se.owned=[s]),o&&o.name&&(s.name=o.name),s}function Vn(e){if(e.state===0)return;if(e.state===Mn)return Fn(e);if(e.suspense&&$e(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Xn);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Qe)ct(e);else if(e.state===Mn){const r=Ee;Ee=null,Ue(()=>Fn(e,t[0]),!1),Ee=r}}function Ue(e,t){if(Ee)return e();let n=!1;t||(Ee=[]),Je?n=!0:Je=[],Xn++;try{const r=e();return Mi(n),r}catch(r){n||(Je=null),Ee=null,Dr(r)}}function Mi(e){if(Ee&&(Fo(Ee),Ee=null),e)return;const t=Je;Je=null,t.length&&Ue(()=>To(t),!1)}function Fo(e){for(let t=0;t<e.length;t++)Vn(e[t])}function Vi(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Vn(r)}for(t=0;t<n;t++)Vn(e[t])}function Fn(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===Qe?r!==t&&(!r.updatedAt||r.updatedAt<Xn)&&Vn(r):o===Mn&&Fn(r,t)}}}function Uo(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Mn,n.pure?Ee.push(n):Je.push(n),n.observers&&Uo(n))}}function jt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)jt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)jt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,delete e.sourceMap}function An(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Dr(e,t=se){throw An(e)}function kr(e){if(typeof e=="function"&&!e.length)return kr(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=kr(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Fi(e,t){return function(r){let o;return Z(()=>o=$e(()=>(se.context={...se.context,[e]:r.value},wt(()=>r.children))),void 0,t),o}}const Ui=Symbol("fallback");function Br(e){for(let t=0;t<e.length;t++)e[t]()}function Ki(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return Ke(()=>Br(s)),()=>{let l=e()||[],u=l.length,c,h;return l[Er],$e(()=>{let g,$,b,m,p,f,v,_,y;if(u===0)i!==0&&(Br(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[Ui],o[0]=Nt(w=>(s[0]=w,n.fallback())),i=1);else if(i===0){for(o=new Array(u),h=0;h<u;h++)r[h]=l[h],o[h]=Nt(d);i=u}else{for(b=new Array(u),m=new Array(u),a&&(p=new Array(u)),f=0,v=Math.min(i,u);f<v&&r[f]===l[f];f++);for(v=i-1,_=u-1;v>=f&&_>=f&&r[v]===l[_];v--,_--)b[_]=o[v],m[_]=s[v],a&&(p[_]=a[v]);for(g=new Map,$=new Array(_+1),h=_;h>=f;h--)y=l[h],c=g.get(y),$[h]=c===void 0?-1:c,g.set(y,h);for(c=f;c<=v;c++)y=r[c],h=g.get(y),h!==void 0&&h!==-1?(b[h]=o[c],m[h]=s[c],a&&(p[h]=a[c]),h=$[h],g.set(y,h)):s[c]();for(h=f;h<u;h++)h in b?(o[h]=b[h],s[h]=m[h],a&&(a[h]=p[h],a[h](h))):o[h]=Nt(d);o=o.slice(0,i=u),r=l.slice(0)}return o});function d(g){if(s[h]=g,a){const[$,b]=W(h,{name:"index"});return a[h]=b,t(l[h],$)}return t(l[h])}}}function N(e,t){return xi(e,t||{})}function zt(){return!0}const Or={get(e,t,n){return t===qe?n:e.get(t)},has(e,t){return t===qe?!0:e.has(t)},set:zt,deleteProperty:zt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:zt,deleteProperty:zt}},ownKeys(e){return e.keys()}};function ur(e){return(e=typeof e=="function"?e():e)?e:{}}function zi(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Rr(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&qe in a,e[i]=typeof a=="function"?(t=!0,Q(a)):a}if(jo&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const l=ur(e[a])[i];if(l!==void 0)return l}},has(i){for(let a=e.length-1;a>=0;a--)if(i in ur(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(ur(e[a])));return[...new Set(i)]}},Or);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let u=l.length-1;u>=0;u--){const c=l[u];if(c==="__proto__"||c==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,c);if(!r[c])r[c]=h.get?{enumerable:!0,configurable:!0,get:zi.bind(n[c]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const d=n[c];d&&(h.get?d.push(h.get.bind(a)):h.value!==void 0&&d.push(()=>h.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],l=r[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}function Hi(e,...t){const n=t.length;if(jo&&qe in e){const o=n>1?t.flat():t[0],s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},Or));return s.push(new Proxy({get(i){return o.includes(i)?void 0:e[i]},has(i){return o.includes(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.includes(i))}},Or)),s}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let l=0;l<t.length;l++)if(t[l].includes(o)){s=l;break}const i=Object.getOwnPropertyDescriptor(e,o);!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable?r[s][o]=i.value:Object.defineProperty(r[s],o,i)}return r}let Wi=0;function Bi(){return`cl-${Wi++}`}const Ko=e=>`Attempting to access a stale value from <${e}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function et(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Q(Ki(()=>e.each,e.children,t||void 0),void 0,{name:"value"})}function ce(e){const t=e.keyed,n=Q(()=>e.when,void 0,{name:"condition value"}),r=t?n:Q(n,void 0,{equals:(o,s)=>!o==!s,name:"condition"});return Q(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?$e(()=>s(t?o:()=>{if(!$e(r))throw Ko("Show");return n()})):s}return e.fallback},void 0,{name:"value"})}function zo(e){const t=wt(()=>e.children),n=Q(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<o.length;i++){const a=i,l=o[i],u=s,c=Q(()=>u()?void 0:l.when,void 0,{name:"condition value"}),h=l.keyed?c:Q(c,void 0,{equals:(d,g)=>!d==!g,name:"condition"});s=()=>u()||(h()?[a,c,l]:void 0)}return s});return Q(()=>{const r=n()();if(!r)return e.fallback;const[o,s,i]=r,a=i.children;return typeof a=="function"&&a.length>0?$e(()=>a(i.keyed?s():()=>{if($e(n)()?.[0]!==o)throw Ko("Match");return s()})):a},void 0,{name:"eval conditions"})}function Be(e){return e}const Gi={hooks:Li,writeSignal:qr,registerGraph:Mo};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);const Ji=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Qi=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Ji]),Xi=new Set(["innerHTML","textContent","innerText","children"]),Yi=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Zi=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function ea(e,t){const n=Zi[e];return typeof n=="object"?n[t]?n.$:void 0:n}const ta=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),oe=e=>Q(()=>e());function na(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,l=t[o-1].nextSibling,u=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const c=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],c)}else if(s===a)for(;i<o;)(!u||!u.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const c=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],c),t[o]=n[s]}else{if(!u){u=new Map;let h=a;for(;h<s;)u.set(n[h],h++)}const c=u.get(t[i]);if(c!=null)if(a<c&&c<s){let h=i,d=1,g;for(;++h<o&&h<s&&!((g=u.get(t[h]))==null||g!==c+d);)d++;if(d>c-a){const $=t[i];for(;a<c;)e.insertBefore(n[a++],$)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Gr="_$DX_DELEGATE";function ra(e,t,n,r={}){if(!t)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let o;return Nt(s=>{o=s,t===document?e():j(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function M(e,t,n,r){let o;const s=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function le(e,t=window.document){const n=t[Gr]||(t[Gr]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,da))}}function X(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function sa(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function Pe(e,t){t==null?e.removeAttribute("class"):e.className=t}function $t(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function oa(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(Jr(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(Jr(e,a,!0),n[a]=l)}return n}function ia(e,t,n){if(!t)return n?X(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function aa(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function la(e,t={},n,r){const o={};return Z(()=>o.children=Tt(e,t.children,o.children)),Z(()=>typeof t.ref=="function"&&Ze(t.ref,e)),Z(()=>ca(e,t,n,!0,o,!0)),o}function Ze(e,t,n){return $e(()=>e(t,n))}function j(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Tt(e,t,r,n);Z(o=>Tt(e,t(),o,n),r)}function ca(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=Qr(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children")continue;const a=t[i];o[i]=Qr(e,i,a,o[i],n,s,t)}}function ua(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Jr(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function Qr(e,t,n,r,o,s,i){let a,l,u,c,h;if(t==="style")return ia(e,n,r);if(t==="classList")return oa(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const d=t.slice(3);r&&e.removeEventListener(d,r,typeof r!="function"&&r),n&&e.addEventListener(d,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const d=t.slice(10);r&&e.removeEventListener(d,r,!0),n&&e.addEventListener(d,n,!0)}else if(t.slice(0,2)==="on"){const d=t.slice(2).toLowerCase(),g=ta.has(d);if(!g&&r){const $=Array.isArray(r)?r[0]:r;e.removeEventListener(d,$)}(g||n)&&($t(e,d,n,g),g&&le([d]))}else t.slice(0,5)==="attr:"?X(e,t.slice(5),n):t.slice(0,5)==="bool:"?sa(e,t.slice(5),n):(h=t.slice(0,5)==="prop:")||(u=Xi.has(t))||(c=ea(t,e.tagName))||(l=Qi.has(t))||(a=e.nodeName.includes("-")||"is"in i)?(h&&(t=t.slice(5),l=!0),t==="class"||t==="className"?Pe(e,n):a&&!l&&!u?e[ua(t)]=n:e[c||t]=n):X(e,Yi[t]||t,n);return n}function da(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[n];if(l&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?l.call(t,u,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();s(l[0]);for(let u=0;u<l.length-2&&(t=l[u],!!i());u++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function Tt(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(i){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=dt(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=dt(e,n,r);else{if(s==="function")return Z(()=>{let a=t();for(;typeof a=="function";)a=a();n=Tt(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(Nr(a,t,n,o))return Z(()=>n=Tt(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=dt(e,n,r),i)return n}else l?n.length===0?Xr(e,a,r):na(e,n,a):(n&&dt(e),Xr(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=dt(e,n,r,t);dt(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Nr(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],l=n&&n[e.length],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Nr(e,a,l)||o;else if(u==="function")if(r){for(;typeof a=="function";)a=a();o=Nr(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||o}else e.push(a),o=!0;else{const c=String(a);l&&l.nodeType===3&&l.data===c?e.push(l):e.push(document.createTextNode(c))}}return o}function Xr(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function dt(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const l=a.parentNode===e;!s&&!i?l?e.replaceChild(o,a):e.insertBefore(o,n):l&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const fa=!1,ha="modulepreload",ma=function(e){return"/learning-oe-solidjs/"+e},Yr={},Ye=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");o=i(n.map(u=>{if(u=ma(u),u in Yr)return;Yr[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":ha,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((g,$)=>{d.addEventListener("load",g),d.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},ga=["targetLanguage","defaultLanguage","appTitle","i18n"];let Ht;const Ho=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;for(const n in t)t[n]&&typeof t[n]=="object"&&!Array.isArray(t[n])?((!e[n]||typeof e[n]!="object")&&(e[n]={}),Ho(e[n],t[n])):e[n]=t[n];return e},Wo=async()=>Ht||(Ht=(async()=>{let e,t;try{e=(await Ye(async()=>{const{default:o}=await import("./default.config-C_vo2OXT.js");return{default:o}},[])).default}catch{throw new Error("Default config file did not properly load")}try{t=(await Ye(async()=>{const{default:o}=await import("./app.config-B5bLrnPA.js");return{default:o}},[])).default}catch{throw new Error('Config file "app.config.json" did not properly load')}const n=Ho(e,t);let r=!0;if(ga.forEach(o=>{n[o]||(console.warn(`app.config.json should contain the "${o}" key`),r=!1)}),!r)throw new Error("Invalid configuration file JSON.");return n})(),Ht),Y=e=>typeof e=="string",Ct=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},Zr=e=>e==null?"":""+e,pa=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},ya=/###/g,es=e=>e&&e.indexOf("###")>-1?e.replace(ya,"."):e,ts=e=>!e||Y(e),It=(e,t,n)=>{const r=Y(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(ts(e))return{};const s=es(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return ts(e)?{}:{obj:e,k:es(r[o])}},ns=(e,t,n)=>{const{obj:r,k:o}=It(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],i=t.slice(0,t.length-1),a=It(e,i,Object);for(;a.obj===void 0&&i.length;)s=`${i[i.length-1]}.${s}`,i=i.slice(0,i.length-1),a=It(e,i,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},va=(e,t,n,r)=>{const{obj:o,k:s}=It(e,t,Object);o[s]=o[s]||[],o[s].push(n)},Un=(e,t)=>{const{obj:n,k:r}=It(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},$a=(e,t,n)=>{const r=Un(e,n);return r!==void 0?r:Un(t,n)},Bo=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?Y(e[r])||e[r]instanceof String||Y(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Bo(e[r],t[r],n):e[r]=t[r]);return e},ft=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ba={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _a=e=>Y(e)?e.replace(/[&<>"'\/]/g,t=>ba[t]):e;class wa{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Sa=[" ",",","?","!",";"],Ca=new wa(20),Ea=(e,t,n)=>{t=t||"",n=n||"";const r=Sa.filter(i=>t.indexOf(i)<0&&n.indexOf(i)<0);if(r.length===0)return!0;const o=Ca.getRegExp(`(${r.map(i=>i==="?"?"\\?":i).join("|")})`);let s=!o.test(e);if(!s){const i=e.indexOf(n);i>0&&!o.test(e.substring(0,i))&&(s=!0)}return s},Ir=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let i,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],i=o[a],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&l<r.length-1)continue;s+=l-s+1;break}o=i}return o},Kn=e=>e?.replace("_","-"),Pa={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class zn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Pa,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(Y(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new zn(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new zn(this.logger,t)}}var Ve=new zn;class Yn{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(i=>{let[a,l]=i;for(let u=0;u<l;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[a,l]=i;for(let u=0;u<l;u++)a.apply(a,[t,...r])})}}class rs extends Yn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,i=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):Y(r)&&s?a.push(...r.split(s)):a.push(r)));const l=Un(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!i||!Y(r)?l:Ir(this.data?.[t]?.[n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(i?r.split(i):r)),t.indexOf(".")>-1&&(a=t.split("."),o=n,n=a[1]),this.addNamespaces(n),ns(this.data,a,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Y(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),o=r,r=n,n=a[1]),this.addNamespaces(n);let l=Un(this.data,a)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Bo(l,r,s):l={...l,...r},ns(this.data,a,l),i.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var Go={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{t=this.processors[s]?.process(t,n,r,o)??t}),t}};const ss={},os=e=>!Y(e)&&typeof e!="boolean"&&typeof e!="number";class Hn extends Yn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),pa(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ve.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const i=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Ea(t,r,o);if(i&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:Y(s)?[s]:s};const u=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),t=u.join(o)}return{key:t,namespaces:Y(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u?.toLowerCase()==="cimode"){if(c){const P=n.nsSeparator||this.options.nsSeparator;return o?{res:`${l}${P}${i}`,usedKey:i,exactUsedKey:i,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${P}${i}`}return o?{res:i,usedKey:i,exactUsedKey:i,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:i}const h=this.resolve(t,n);let d=h?.res;const g=h?.usedKey||i,$=h?.exactUsedKey||i,b=["[object Number]","[object Function]","[object RegExp]"],m=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,p=!this.i18nFormat||this.i18nFormat.handleAsObject,f=n.count!==void 0&&!Y(n.count),v=Hn.hasDefaultValue(n),_=f?this.pluralResolver.getSuffix(u,n.count,n):"",y=n.ordinal&&f?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",w=f&&!n.ordinal&&n.count===0,C=w&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${y}`]||n.defaultValue;let O=d;p&&!d&&v&&(O=C);const T=os(O),q=Object.prototype.toString.apply(O);if(p&&O&&T&&b.indexOf(q)<0&&!(Y(m)&&Array.isArray(O))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,O,{...n,ns:a}):`key '${i} (${this.language})' returned an object instead of string.`;return o?(h.res=P,h.usedParams=this.getUsedParamsDetails(n),h):P}if(s){const P=Array.isArray(O),A=P?[]:{},U=P?$:g;for(const K in O)if(Object.prototype.hasOwnProperty.call(O,K)){const H=`${U}${s}${K}`;v&&!d?A[K]=this.translate(H,{...n,defaultValue:os(C)?C[K]:void 0,joinArrays:!1,ns:a}):A[K]=this.translate(H,{...n,joinArrays:!1,ns:a}),A[K]===H&&(A[K]=O[K])}d=A}}else if(p&&Y(m)&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,t,n,r));else{let P=!1,A=!1;!this.isValidLookup(d)&&v&&(P=!0,d=C),this.isValidLookup(d)||(A=!0,d=i);const K=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:d,H=v&&C!==d&&this.options.updateMissing;if(A||P||H){if(this.logger.log(H?"updateKey":"missingKey",u,l,i,H?C:d),s){const ue=this.resolve(i,{...n,keySeparator:!1});ue&&ue.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let te=[];const ge=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ge&&ge[0])for(let ue=0;ue<ge.length;ue++)te.push(ge[ue]);else this.options.saveMissingTo==="all"?te=this.languageUtils.toResolveHierarchy(n.lng||this.language):te.push(n.lng||this.language);const ne=(ue,F,R)=>{const D=v&&R!==d?R:K;this.options.missingKeyHandler?this.options.missingKeyHandler(ue,l,F,D,H,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ue,l,F,D,H,n),this.emit("missingKey",ue,l,F,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&f?te.forEach(ue=>{const F=this.pluralResolver.getSuffixes(ue,n);w&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(R=>{ne([ue],i+R,n[`defaultValue${R}`]||C)})}):ne(te,i,C))}d=this.extendTranslation(d,t,n,h,r),A&&d===i&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${i}`),(A||P)&&this.options.parseMissingKeyHandler&&(d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${i}`:i,P?d:void 0))}return o?(h.res=d,h.usedParams=this.getUsedParamsDetails(n),h):d}extendTranslation(t,n,r,o,s){var i=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=Y(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const d=t.match(this.interpolator.nestingRegexp);c=d&&d.length}let h=r.replace&&!Y(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,r.lng||this.language||o.usedLng,r),u){const d=t.match(this.interpolator.nestingRegexp),g=d&&d.length;c<g&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,g=new Array(d),$=0;$<d;$++)g[$]=arguments[$];return s?.[0]===g[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):i.translate(...g,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=Y(a)?[a]:a;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=Go.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,i,a;return Y(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;o=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=n.count!==void 0&&!Y(n.count),g=d&&!n.ordinal&&n.count===0,$=n.context!==void 0&&(Y(n.context)||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(m=>{this.isValidLookup(r)||(a=m,!ss[`${b[0]}-${m}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(ss[`${b[0]}-${m}`]=!0,this.logger.warn(`key "${o}" for languages "${b.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(p=>{if(this.isValidLookup(r))return;i=p;const f=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(f,c,p,m,n);else{let _;d&&(_=this.pluralResolver.getSuffix(p,n.count,n));const y=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(f.push(c+_),n.ordinal&&_.indexOf(w)===0&&f.push(c+_.replace(w,this.options.pluralSeparator)),g&&f.push(c+y)),$){const C=`${c}${this.options.contextSeparator}${n.context}`;f.push(C),d&&(f.push(C+_),n.ordinal&&_.indexOf(w)===0&&f.push(C+_.replace(w,this.options.pluralSeparator)),g&&f.push(C+y))}}let v;for(;v=f.pop();)this.isValidLookup(r)||(s=v,r=this.getResource(p,m,v,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:i,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!Y(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class is{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ve.create("languageUtils")}getScriptPartFromCode(t){if(t=Kn(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Kn(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(Y(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),Y(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=i=>{i&&(this.isSupportedCode(i)?o.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return Y(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):Y(t)&&s(this.formatLanguageCode(t)),r.forEach(i=>{o.indexOf(i)<0&&s(this.formatLanguageCode(i))}),o}}const as={zero:0,one:1,two:2,few:3,many:4,other:5},ls={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ka{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=Ve.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Kn(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ls;if(!t.match(/-|_/))return ls;const l=this.languageUtils.getLanguagePartFromCode(t);i=this.getRule(l,n)}return this.pluralRulesCache[s]=i,i}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>as[o]-as[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const cs=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=$a(e,t,n);return!s&&o&&Y(n)&&(s=Ir(e,n,r),s===void 0&&(s=Ir(t,n,r))),s},dr=e=>e.replace(/\$/g,"$$$$");class Oa{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ve.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:i,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:g,nestingSuffix:$,nestingSuffixEscaped:b,nestingOptionsSeparator:m,maxReplaces:p,alwaysFormat:f}=t.interpolation;this.escape=n!==void 0?n:_a,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ft(s):i||"{{",this.suffix=a?ft(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?ft(d):g||ft("$t("),this.nestingSuffix=$?ft($):b||ft(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=p||1e3,this.alwaysFormat=f!==void 0?f:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,i,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const p=cs(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(p,void 0,r,{...o,...n,interpolationkey:g}):p}const $=g.split(this.formatSeparator),b=$.shift().trim(),m=$.join(this.formatSeparator).trim();return this.format(cs(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...o,...n,interpolationkey:b})};this.resetRegExp();const c=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>dr(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?dr(this.escape(g)):dr(g)}].forEach(g=>{for(a=0;s=g.regex.exec(t);){const $=s[1].trim();if(i=u($),i===void 0)if(typeof c=="function"){const m=c(t,s,o);i=Y(m)?m:""}else if(o&&Object.prototype.hasOwnProperty.call(o,$))i="";else if(h){i=s[0];continue}else this.logger.warn(`missed to pass in variable ${$} for interpolating ${t}`),i="";else!Y(i)&&!this.useRawValueToEscape&&(i=Zr(i));const b=g.safeValue(i);if(t=t.replace(s[0],b),h?(g.regex.lastIndex+=i.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,i;const a=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let d=`{${h[1]}`;l=h[0],d=this.interpolate(d,i);const g=d.match(/'/g),$=d.match(/"/g);((g?.length??0)%2===0&&!$||$.length%2!==0)&&(d=d.replace(/'/g,'"'));try{i=JSON.parse(d),u&&(i={...u,...i})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,b),`${l}${c}${d}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,l};for(;o=this.nestingRegexp.exec(t);){let l=[];i={...r},i=i.replace&&!Y(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const c=o[1].split(this.formatSeparator).map(h=>h.trim());o[1]=c.shift(),l=c,u=!0}if(s=n(a.call(this,o[1].trim(),i),i),s&&o[0]===t&&!Y(s))return s;Y(s)||(s=Zr(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),u&&(s=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const Ra=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(i=>{if(i){const[a,...l]=i.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},ht=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const i=r+JSON.stringify(s);let a=t[i];return a||(a=e(Kn(r),o),t[i]=a),a(n)}};class Na{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ve.create("formatter"),this.options=t,this.formats={number:ht((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:ht((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:ht((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:ht((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:ht((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=ht(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:u,formatOptions:c}=Ra(l);if(this.formats[u]){let h=a;try{const d=o?.formatParams?.[o.interpolationkey]||{},g=d.locale||d.lng||o.locale||o.lng||r;h=this.formats[u](a,g,{...c,...o,...d})}catch(d){this.logger.warn(d)}return h}else this.logger.warn(`there was no format function for ${u}`);return a},t)}}const Ia=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class La extends Yn{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=Ve.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(t,n,r,o){const s={},i={},a={},l={};return t.forEach(u=>{let c=!0;n.forEach(h=>{const d=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?i[d]===void 0&&(i[d]=!0):(this.state[d]=1,c=!1,i[d]===void 0&&(i[d]=!0),s[d]===void 0&&(s[d]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(a[u]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const o=t.split("|"),s=o[0],i=o[1];n&&this.emit("failedLoading",s,i,n),!n&&r&&this.store.addResourceBundle(s,i,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{va(l.loaded,[s],i),Ia(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{a[u][h]===void 0&&(a[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!t.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:i});return}this.readingCalls++;const a=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,i)},s);return}i(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(c=>a(null,c)).catch(a):a(null,u)}catch(u){a(u)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();Y(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Y(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(i=>{this.loadOne(i)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(i,a)=>{i&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,i),!i&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,a),this.loaded(t,i,a)})}saveMissing(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const l={...i,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,n,r,o,l):c=u(t,n,r,o),c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}else u(t,n,r,o,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const us=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Y(e[1])&&(t.defaultValue=e[1]),Y(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ds=e=>(Y(e.ns)&&(e.ns=[e.ns]),Y(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Y(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Wt=()=>{},Aa=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class xt extends Yn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ds(t),this.services={},this.logger=Ve,this.modules={external:[]},Aa(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(Y(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=us();this.options={...o,...this.options,...ds(n)},this.options.interpolation={...o.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Ve.init(s(this.modules.logger),this.options):Ve.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=Na;const h=new is(this.options);this.store=new rs(this.options.resources,this.options);const d=this.services;d.logger=Ve,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new ka(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(d.formatter=s(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Oa(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new La(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(g){for(var $=arguments.length,b=new Array($>1?$-1:0),m=1;m<$;m++)b[m-1]=arguments[m];t.emit(g,...b)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Hn(this.services,this.options),this.translator.on("*",function(g){for(var $=arguments.length,b=new Array($>1?$-1:0),m=1;m<$;m++)b[m-1]=arguments[m];t.emit(g,...b)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Wt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=Ct(),u=()=>{const c=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),r(h,d)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wt;const o=Y(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],i=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};o?i(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>i(l)),this.options.preload?.forEach?.(a=>i(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const o=Ct();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Wt),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Go.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=Ct();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=Y(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,c=>{i(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),o}getFixedT(t,n,r){var o=this;const s=function(i,a){let l;if(typeof a!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),h=2;h<u;h++)c[h-2]=arguments[h];l=o.options.overloadTranslationOptionHandler([i,a].concat(c))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const d=o.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(i)?g=i.map($=>`${l.keyPrefix}${d}${$}`):g=l.keyPrefix?`${l.keyPrefix}${d}${i}`:i,o.t(g,l)};return Y(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,i);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(r,t)&&(!o||i(s,t)))}loadNamespaces(t,n){const r=Ct();return this.options.ns?(Y(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Ct();Y(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(i=>o.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return s.length?(this.options.preload=o.concat(s),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new is(us());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new xt(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wt;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new xt(o);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},Object.keys(l[u]).reduce((c,h)=>(c[h]={...l[u][h]},c),{})),{});s.store=new rs(a,o),s.services.resourceStore=s.store}return s.translator=new Hn(s.services,o),s.translator.on("*",function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];s.emit(a,...u)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=xt.createInstance();ye.createInstance=xt.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;var ja=M("<div>Loading i18n...");const Ta={t:(...e)=>ye.t(...e),language:()=>ye.language,setLanguage:e=>ye.changeLanguage(e)},Jo=Mt(Ta),xa=async e=>{const t=Object.fromEntries(Object.entries(e.i18n.availableLanguages).map(([n,r])=>[n,{translation:r}]));await ye.init({resources:t,lng:e.uiLanguage||e.targetLanguage||e.defaultLanguage,fallbackLng:e.defaultLanguage,interpolation:{escapeValue:!1}})},qa=e=>{const t=wt(()=>e.children),[n,r]=W(ye.language),[o,s]=W(!1),i=ye.t;return pe(()=>{r(ye.language),ye.on("languageChanged",r),s(!0)}),o()?N(Jo.Provider,{value:{t:i,language:n,setLanguage:r},get children(){return t()}}):ja()},be=()=>{const e=_t(Jo);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},Lr=Symbol("store-raw"),vt=Symbol("store-node"),Ge=Symbol("store-has"),Qo=Symbol("store-self");function Xo(e){let t=e[qe];if(!t&&(Object.defineProperty(e,qe,{value:t=new Proxy(e,Va)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function tt(e){let t;return e!=null&&typeof e=="object"&&(e[qe]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function bt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[Lr])return n;if(!tt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)o=e[i],(r=bt(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,u=i.length;l<u;l++)s=i[l],!a[s].get&&(o=e[s],(r=bt(o,t))!==o&&(e[s]=r))}return e}function Wn(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function qt(e,t,n){if(e[t])return e[t];const[r,o]=W(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Da(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===qe||t===vt||(delete n.value,delete n.writable,n.get=()=>e[qe][t]),n}function Yo(e){Pr()&&qt(Wn(e,vt),Qo)()}function Ma(e){return Yo(e),Reflect.ownKeys(e)}const Va={get(e,t,n){if(t===Lr)return e;if(t===qe)return n;if(t===Er)return Yo(e),n;const r=Wn(e,vt),o=r[t];let s=o?o():e[t];if(t===vt||t===Ge||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);Pr()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=qt(r,t,s)())}return tt(s)?Xo(s):s},has(e,t){return t===Lr||t===qe||t===Er||t===vt||t===Ge||t==="__proto__"?!0:(Pr()&&qt(Wn(e,Ge),t)(),t in e)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:Ma,getOwnPropertyDescriptor:Da};function Ae(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[Ge]&&e[Ge][t]&&o!==void 0&&e[Ge][t].$()):(e[t]=n,e[Ge]&&e[Ge][t]&&o===void 0&&e[Ge][t].$());let i=Wn(e,vt),a;if((a=qt(i,t,o))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(a=i[l])&&a.$();(a=qt(i,"length",s))&&a.$(e.length)}(a=i[Qo])&&a.$()}function Zo(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ae(e,o,t[o])}}function Fa(e,t){if(typeof t=="function"&&(t=t(e)),t=bt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Ae(e,n,o)}Ae(e,"length",r)}else Zo(e,t)}function Rt(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Rt(e,[r[l]].concat(t),n);return}else if(a&&i==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Rt(e,[l].concat(t),n);return}else if(a&&i==="object"){const{from:l=0,to:u=e.length-1,by:c=1}=r;for(let h=l;h<=u;h+=c)Rt(e,[h].concat(t),n);return}else if(t.length>1){Rt(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=bt(s),r===void 0||tt(o)&&tt(s)&&!Array.isArray(s)?Zo(o,s):Ae(e,r,s))}function ei(...[e,t]){const n=bt(e||{}),r=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const o=Xo(n);Gi.registerGraph({value:n,name:t&&t.name});function s(...i){xo(()=>{r&&i.length===1?Fa(n,i[0]):Rt(n,i)})}return[o,s]}const Ar=Symbol("store-root");function yt(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==Ar&&(!tt(e)||!tt(s)||i!==Array.isArray(s)||o&&e[o]!==s[o])){Ae(t,n,e);return}if(i){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let u,c,h,d,g,$,b,m;for(h=0,d=Math.min(s.length,e.length);h<d&&(s[h]===e[h]||o&&s[h]&&e[h]&&s[h][o]&&s[h][o]===e[h][o]);h++)yt(e[h],s,h,r,o);const p=new Array(e.length),f=new Map;for(d=s.length-1,g=e.length-1;d>=h&&g>=h&&(s[d]===e[g]||o&&s[d]&&e[g]&&s[d][o]&&s[d][o]===e[g][o]);d--,g--)p[g]=s[d];if(h>g||h>d){for(c=h;c<=g;c++)Ae(s,c,e[c]);for(;c<e.length;c++)Ae(s,c,p[c]),yt(e[c],s,c,r,o);s.length>e.length&&Ae(s,"length",e.length);return}for(b=new Array(g+1),c=g;c>=h;c--)$=e[c],m=o&&$?$[o]:$,u=f.get(m),b[c]=u===void 0?-1:u,f.set(m,c);for(u=h;u<=d;u++)$=s[u],m=o&&$?$[o]:$,c=f.get(m),c!==void 0&&c!==-1&&(p[c]=s[u],c=b[c],f.set(m,c));for(c=h;c<e.length;c++)c in p?(Ae(s,c,p[c]),yt(e[c],s,c,r,o)):Ae(s,c,e[c])}else for(let u=0,c=e.length;u<c;u++)yt(e[u],s,u,r,o);s.length>e.length&&Ae(s,"length",e.length);return}const a=Object.keys(e);for(let u=0,c=a.length;u<c;u++)yt(e[a[u]],s,a[u],r,o);const l=Object.keys(s);for(let u=0,c=l.length;u<c;u++)e[l[u]]===void 0&&Ae(s,l[u],void 0)}function Ua(e,t={}){const{merge:n,key:r="id"}=t,o=bt(e);return s=>{if(!tt(s)||!tt(o))return o;const i=yt(o,{[Ar]:s},Ar,n,r);return i===void 0?s:i}}function ti(e,t={}){const n=t.storage||globalThis.localStorage,r=t.name||`storage-${Bi()}`;if(!n)return[e[0],e[1],null];const o=t.storageOptions,s=t.serialize||JSON.stringify.bind(JSON),i=t.deserialize||JSON.parse.bind(JSON),a=n.getItem(r,o),l=typeof e[0]=="function"?c=>{try{const h=i(c);e[1](()=>h)}catch(h){console.warn(h)}}:c=>{try{const h=i(c);e[1](Ua(h))}catch(h){console.warn(h)}};let u=!0;if(a instanceof Promise?a.then(c=>u&&c&&l(c)):a&&l(a),typeof t.sync?.[0]=="function"){const c=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](h=>{h.key!==r||(h.url||globalThis.location.href)!==globalThis.location.href||h.newValue===s($e(c))||l(h.newValue)})}return[e[0],typeof e[0]=="function"?c=>{const h=e[1](c),d=c!=null?s(h):c;return t.sync?.[1](r,d),d!=null?n.setItem(r,d,o):n.removeItem(r,o),u=!1,h}:(...c)=>{e[1](...c);const h=s($e(()=>e[0]));t.sync?.[1](r,h),n.setItem(r,h,o),u=!1},a]}function Ka(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bt={exports:{}},fr={},ze={},st={},hr={},mr={},gr={},fs;function Bn(){return fs||(fs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(f){if(super(),!e.IDENTIFIER.test(f))throw new Error("CodeGen: name must be a valid identifier");this.str=f}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(f){super(),this._items=typeof f=="string"?[f]:f}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const f=this._items[0];return f===""||f==='""'}get str(){var f;return(f=this._str)!==null&&f!==void 0?f:this._str=this._items.reduce((v,_)=>`${v}${_}`,"")}get names(){var f;return(f=this._names)!==null&&f!==void 0?f:this._names=this._items.reduce((v,_)=>(_ instanceof n&&(v[_.str]=(v[_.str]||0)+1),v),{})}}e._Code=r,e.nil=new r("");function o(p,...f){const v=[p[0]];let _=0;for(;_<f.length;)a(v,f[_]),v.push(p[++_]);return new r(v)}e._=o;const s=new r("+");function i(p,...f){const v=[g(p[0])];let _=0;for(;_<f.length;)v.push(s),a(v,f[_]),v.push(s,g(p[++_]));return l(v),new r(v)}e.str=i;function a(p,f){f instanceof r?p.push(...f._items):f instanceof n?p.push(f):p.push(h(f))}e.addCodeArg=a;function l(p){let f=1;for(;f<p.length-1;){if(p[f]===s){const v=u(p[f-1],p[f+1]);if(v!==void 0){p.splice(f-1,3,v);continue}p[f++]="+"}f++}}function u(p,f){if(f==='""')return p;if(p==='""')return f;if(typeof p=="string")return f instanceof n||p[p.length-1]!=='"'?void 0:typeof f!="string"?`${p.slice(0,-1)}${f}"`:f[0]==='"'?p.slice(0,-1)+f.slice(1):void 0;if(typeof f=="string"&&f[0]==='"'&&!(p instanceof n))return`"${p}${f.slice(1)}`}function c(p,f){return f.emptyStr()?p:p.emptyStr()?f:i`${p}${f}`}e.strConcat=c;function h(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:g(Array.isArray(p)?p.join(","):p)}function d(p){return new r(g(p))}e.stringify=d;function g(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=g;function $(p){return typeof p=="string"&&e.IDENTIFIER.test(p)?new r(`.${p}`):o`[${p}]`}e.getProperty=$;function b(p){if(typeof p=="string"&&e.IDENTIFIER.test(p))return new r(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}e.getEsmExportName=b;function m(p){return new r(p.toString())}e.regexpCode=m})(gr)),gr}var pr={},hs;function ms(){return hs||(hs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Bn();class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,h;if(!((h=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||h===void 0)&&h.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=o;class s extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:h}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${h}]`}}e.ValueScopeName=s;const i=(0,t._)`\n`;class a extends o{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?i:t.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var h;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(u),{prefix:g}=d,$=(h=c.key)!==null&&h!==void 0?h:c.ref;let b=this._values[g];if(b){const f=b.get($);if(f)return f}else b=this._values[g]=new Map;b.set($,d);const m=this._scope[g]||(this._scope[g]=[]),p=m.length;return m[p]=c.ref,d.setValue(c,{property:g,itemIndex:p}),d}getValue(u,c){const h=this._values[u];if(h)return h.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,t._)`${u}${h.scopePath}`})}scopeCode(u=this._values,c,h){return this._reduceValues(u,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,h)}_reduceValues(u,c,h={},d){let g=t.nil;for(const $ in u){const b=u[$];if(!b)continue;const m=h[$]=h[$]||new Map;b.forEach(p=>{if(m.has(p))return;m.set(p,r.Started);let f=c(p);if(f){const v=this.opts.es5?e.varKinds.var:e.varKinds.const;g=(0,t._)`${g}${v} ${p} = ${f};${this.opts._n}`}else if(f=d?.(p))g=(0,t._)`${g}${f}${this.opts._n}`;else throw new n(p);m.set(p,r.Completed)})}return g}}e.ValueScope=a})(pr)),pr}var gs;function ie(){return gs||(gs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Bn(),n=ms();var r=Bn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=ms();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,E){return this}}class i extends s{constructor(S,E,x){super(),this.varKind=S,this.name=E,this.rhs=x}render({es5:S,_n:E}){const x=S?n.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${B};`+E}optimizeNames(S,E){if(S[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,S,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(S,E,x){super(),this.lhs=S,this.rhs=E,this.sideEffects=x}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,E){if(!(this.lhs instanceof t.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=K(this.rhs,S,E),this}get names(){const S=this.lhs instanceof t.Name?{}:{...this.lhs.names};return U(S,this.rhs)}}class l extends a{constructor(S,E,x,B){super(S,x,B),this.op=E}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class u extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class c extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class h extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class d extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,E){return this.code=K(this.code,S,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class g extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((E,x)=>E+x.render(S),"")}optimizeNodes(){const{nodes:S}=this;let E=S.length;for(;E--;){const x=S[E].optimizeNodes();Array.isArray(x)?S.splice(E,1,...x):x?S[E]=x:S.splice(E,1)}return S.length>0?this:void 0}optimizeNames(S,E){const{nodes:x}=this;let B=x.length;for(;B--;){const J=x[B];J.optimizeNames(S,E)||(H(S,J.names),x.splice(B,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((S,E)=>A(S,E.names),{})}}class $ extends g{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class b extends g{}class m extends ${}m.kind="else";class p extends ${constructor(S,E){super(E),this.condition=S}render(S){let E=`if(${this.condition})`+super.render(S);return this.else&&(E+="else "+this.else.render(S)),E}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let E=this.else;if(E){const x=E.optimizeNodes();E=this.else=Array.isArray(x)?new m(x):x}if(E)return S===!1?E instanceof p?E:E.nodes:this.nodes.length?this:new p(te(S),E instanceof p?[E]:E.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,E){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(S,E),!!(super.optimizeNames(S,E)||this.else))return this.condition=K(this.condition,S,E),this}get names(){const S=super.names;return U(S,this.condition),this.else&&A(S,this.else.names),S}}p.kind="if";class f extends ${}f.kind="for";class v extends f{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iteration=K(this.iteration,S,E),this}get names(){return A(super.names,this.iteration.names)}}class _ extends f{constructor(S,E,x,B){super(),this.varKind=S,this.name=E,this.from=x,this.to=B}render(S){const E=S.es5?n.varKinds.var:this.varKind,{name:x,from:B,to:J}=this;return`for(${E} ${x}=${B}; ${x}<${J}; ${x}++)`+super.render(S)}get names(){const S=U(super.names,this.from);return U(S,this.to)}}class y extends f{constructor(S,E,x,B){super(),this.loop=S,this.varKind=E,this.name=x,this.iterable=B}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iterable=K(this.iterable,S,E),this}get names(){return A(super.names,this.iterable.names)}}class w extends ${constructor(S,E,x){super(),this.name=S,this.args=E,this.async=x}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}w.kind="func";class C extends g{render(S){return"return "+super.render(S)}}C.kind="return";class O extends ${render(S){let E="try"+super.render(S);return this.catch&&(E+=this.catch.render(S)),this.finally&&(E+=this.finally.render(S)),E}optimizeNodes(){var S,E;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(S,E){var x,B;return super.optimizeNames(S,E),(x=this.catch)===null||x===void 0||x.optimizeNames(S,E),(B=this.finally)===null||B===void 0||B.optimizeNames(S,E),this}get names(){const S=super.names;return this.catch&&A(S,this.catch.names),this.finally&&A(S,this.finally.names),S}}class T extends ${constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}T.kind="catch";class q extends ${render(S){return"finally"+super.render(S)}}q.kind="finally";class P{constructor(S,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=S,this._scope=new n.Scope({parent:S}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,E){const x=this._extScope.value(S,E);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(S,E){return this._extScope.getValue(S,E)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,E,x,B){const J=this._scope.toName(E);return x!==void 0&&B&&(this._constants[J.str]=x),this._leafNode(new i(S,J,x)),J}const(S,E,x){return this._def(n.varKinds.const,S,E,x)}let(S,E,x){return this._def(n.varKinds.let,S,E,x)}var(S,E,x){return this._def(n.varKinds.var,S,E,x)}assign(S,E,x){return this._leafNode(new a(S,E,x))}add(S,E){return this._leafNode(new l(S,e.operators.ADD,E))}code(S){return typeof S=="function"?S():S!==t.nil&&this._leafNode(new d(S)),this}object(...S){const E=["{"];for(const[x,B]of S)E.length>1&&E.push(","),E.push(x),(x!==B||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,B));return E.push("}"),new t._Code(E)}if(S,E,x){if(this._blockNode(new p(S)),E&&x)this.code(E).else().code(x).endIf();else if(E)this.code(E).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new p(S))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(p,m)}_for(S,E){return this._blockNode(S),E&&this.code(E).endFor(),this}for(S,E){return this._for(new v(S),E)}forRange(S,E,x,B,J=this.opts.es5?n.varKinds.var:n.varKinds.let){const fe=this._scope.toName(S);return this._for(new _(J,fe,E,x),()=>B(fe))}forOf(S,E,x,B=n.varKinds.const){const J=this._scope.toName(S);if(this.opts.es5){const fe=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${fe}.length`,ae=>{this.var(J,(0,t._)`${fe}[${ae}]`),x(J)})}return this._for(new y("of",B,J,E),()=>x(J))}forIn(S,E,x,B=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,t._)`Object.keys(${E})`,x);const J=this._scope.toName(S);return this._for(new y("in",B,J,E),()=>x(J))}endFor(){return this._endBlockNode(f)}label(S){return this._leafNode(new u(S))}break(S){return this._leafNode(new c(S))}return(S){const E=new C;if(this._blockNode(E),this.code(S),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,E,x){if(!E&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new O;if(this._blockNode(B),this.code(S),E){const J=this.name("e");this._currNode=B.catch=new T(J),E(J)}return x&&(this._currNode=B.finally=new q,this.code(x)),this._endBlockNode(T,q)}throw(S){return this._leafNode(new h(S))}block(S,E){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(E),this}endBlock(S){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-E;if(x<0||S!==void 0&&x!==S)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${S} expected`);return this._nodes.length=E,this}func(S,E=t.nil,x,B){return this._blockNode(new w(S,E,x)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,E){const x=this._currNode;if(x instanceof S||E&&x instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${S.kind}/${E.kind}`:S.kind}"`)}_elseNode(S){const E=this._currNode;if(!(E instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const E=this._nodes;E[E.length-1]=S}}e.CodeGen=P;function A(L,S){for(const E in S)L[E]=(L[E]||0)+(S[E]||0);return L}function U(L,S){return S instanceof t._CodeOrName?A(L,S.names):L}function K(L,S,E){if(L instanceof t.Name)return x(L);if(!B(L))return L;return new t._Code(L._items.reduce((J,fe)=>(fe instanceof t.Name&&(fe=x(fe)),fe instanceof t._Code?J.push(...fe._items):J.push(fe),J),[]));function x(J){const fe=E[J.str];return fe===void 0||S[J.str]!==1?J:(delete S[J.str],fe)}function B(J){return J instanceof t._Code&&J._items.some(fe=>fe instanceof t.Name&&S[fe.str]===1&&E[fe.str]!==void 0)}}function H(L,S){for(const E in S)L[E]=(L[E]||0)-(S[E]||0)}function te(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${D(L)}`}e.not=te;const ge=R(e.operators.AND);function ne(...L){return L.reduce(ge)}e.and=ne;const ue=R(e.operators.OR);function F(...L){return L.reduce(ue)}e.or=F;function R(L){return(S,E)=>S===t.nil?E:E===t.nil?S:(0,t._)`${D(S)} ${L} ${D(E)}`}function D(L){return L instanceof t.Name?L:(0,t._)`(${L})`}})(mr)),mr}var ee={},ps;function de(){if(ps)return ee;ps=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.checkStrictMode=ee.getErrorPath=ee.Type=ee.useFunc=ee.setEvaluated=ee.evaluatedPropsToName=ee.mergeEvaluated=ee.eachItem=ee.unescapeJsonPointer=ee.escapeJsonPointer=ee.escapeFragment=ee.unescapeFragment=ee.schemaRefOrVal=ee.schemaHasRulesButRef=ee.schemaHasRules=ee.checkUnknownRules=ee.alwaysValidSchema=ee.toHash=void 0;const e=ie(),t=Bn();function n(y){const w={};for(const C of y)w[C]=!0;return w}ee.toHash=n;function r(y,w){return typeof w=="boolean"?w:Object.keys(w).length===0?!0:(o(y,w),!s(w,y.self.RULES.all))}ee.alwaysValidSchema=r;function o(y,w=y.schema){const{opts:C,self:O}=y;if(!C.strictSchema||typeof w=="boolean")return;const T=O.RULES.keywords;for(const q in w)T[q]||_(y,`unknown keyword: "${q}"`)}ee.checkUnknownRules=o;function s(y,w){if(typeof y=="boolean")return!y;for(const C in y)if(w[C])return!0;return!1}ee.schemaHasRules=s;function i(y,w){if(typeof y=="boolean")return!y;for(const C in y)if(C!=="$ref"&&w.all[C])return!0;return!1}ee.schemaHasRulesButRef=i;function a({topSchemaRef:y,schemaPath:w},C,O,T){if(!T){if(typeof C=="number"||typeof C=="boolean")return C;if(typeof C=="string")return(0,e._)`${C}`}return(0,e._)`${y}${w}${(0,e.getProperty)(O)}`}ee.schemaRefOrVal=a;function l(y){return h(decodeURIComponent(y))}ee.unescapeFragment=l;function u(y){return encodeURIComponent(c(y))}ee.escapeFragment=u;function c(y){return typeof y=="number"?`${y}`:y.replace(/~/g,"~0").replace(/\//g,"~1")}ee.escapeJsonPointer=c;function h(y){return y.replace(/~1/g,"/").replace(/~0/g,"~")}ee.unescapeJsonPointer=h;function d(y,w){if(Array.isArray(y))for(const C of y)w(C);else w(y)}ee.eachItem=d;function g({mergeNames:y,mergeToName:w,mergeValues:C,resultToName:O}){return(T,q,P,A)=>{const U=P===void 0?q:P instanceof e.Name?(q instanceof e.Name?y(T,q,P):w(T,q,P),P):q instanceof e.Name?(w(T,P,q),q):C(q,P);return A===e.Name&&!(U instanceof e.Name)?O(T,U):U}}ee.mergeEvaluated={props:g({mergeNames:(y,w,C)=>y.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>{y.if((0,e._)`${w} === true`,()=>y.assign(C,!0),()=>y.assign(C,(0,e._)`${C} || {}`).code((0,e._)`Object.assign(${C}, ${w})`))}),mergeToName:(y,w,C)=>y.if((0,e._)`${C} !== true`,()=>{w===!0?y.assign(C,!0):(y.assign(C,(0,e._)`${C} || {}`),b(y,C,w))}),mergeValues:(y,w)=>y===!0?!0:{...y,...w},resultToName:$}),items:g({mergeNames:(y,w,C)=>y.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>y.assign(C,(0,e._)`${w} === true ? true : ${C} > ${w} ? ${C} : ${w}`)),mergeToName:(y,w,C)=>y.if((0,e._)`${C} !== true`,()=>y.assign(C,w===!0?!0:(0,e._)`${C} > ${w} ? ${C} : ${w}`)),mergeValues:(y,w)=>y===!0?!0:Math.max(y,w),resultToName:(y,w)=>y.var("items",w)})};function $(y,w){if(w===!0)return y.var("props",!0);const C=y.var("props",(0,e._)`{}`);return w!==void 0&&b(y,C,w),C}ee.evaluatedPropsToName=$;function b(y,w,C){Object.keys(C).forEach(O=>y.assign((0,e._)`${w}${(0,e.getProperty)(O)}`,!0))}ee.setEvaluated=b;const m={};function p(y,w){return y.scopeValue("func",{ref:w,code:m[w.code]||(m[w.code]=new t._Code(w.code))})}ee.useFunc=p;var f;(function(y){y[y.Num=0]="Num",y[y.Str=1]="Str"})(f||(ee.Type=f={}));function v(y,w,C){if(y instanceof e.Name){const O=w===f.Num;return C?O?(0,e._)`"[" + ${y} + "]"`:(0,e._)`"['" + ${y} + "']"`:O?(0,e._)`"/" + ${y}`:(0,e._)`"/" + ${y}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return C?(0,e.getProperty)(y).toString():"/"+c(y)}ee.getErrorPath=v;function _(y,w,C=y.opts.strictSchema){if(C){if(w=`strict mode: ${w}`,C===!0)throw new Error(w);y.self.logger.warn(w)}}return ee.checkStrictMode=_,ee}var Gt={},ys;function nt(){if(ys)return Gt;ys=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=ie(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Gt.default=t,Gt}var vs;function Zn(){return vs||(vs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ie(),n=de(),r=nt();e.keywordError={message:({keyword:m})=>(0,t.str)`must pass "${m}" keyword validation`},e.keyword$DataError={message:({keyword:m,schemaType:p})=>p?(0,t.str)`"${m}" keyword must be ${p} ($data)`:(0,t.str)`"${m}" keyword is invalid ($data)`};function o(m,p=e.keywordError,f,v){const{it:_}=m,{gen:y,compositeRule:w,allErrors:C}=_,O=h(m,p,f);v??(w||C)?l(y,O):u(_,(0,t._)`[${O}]`)}e.reportError=o;function s(m,p=e.keywordError,f){const{it:v}=m,{gen:_,compositeRule:y,allErrors:w}=v,C=h(m,p,f);l(_,C),y||w||u(v,r.default.vErrors)}e.reportExtraError=s;function i(m,p){m.assign(r.default.errors,p),m.if((0,t._)`${r.default.vErrors} !== null`,()=>m.if(p,()=>m.assign((0,t._)`${r.default.vErrors}.length`,p),()=>m.assign(r.default.vErrors,null)))}e.resetErrorsCount=i;function a({gen:m,keyword:p,schemaValue:f,data:v,errsCount:_,it:y}){if(_===void 0)throw new Error("ajv implementation error");const w=m.name("err");m.forRange("i",_,r.default.errors,C=>{m.const(w,(0,t._)`${r.default.vErrors}[${C}]`),m.if((0,t._)`${w}.instancePath === undefined`,()=>m.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,y.errorPath))),m.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${y.errSchemaPath}/${p}`),y.opts.verbose&&(m.assign((0,t._)`${w}.schema`,f),m.assign((0,t._)`${w}.data`,v))})}e.extendErrors=a;function l(m,p){const f=m.const("err",p);m.if((0,t._)`${r.default.vErrors} === null`,()=>m.assign(r.default.vErrors,(0,t._)`[${f}]`),(0,t._)`${r.default.vErrors}.push(${f})`),m.code((0,t._)`${r.default.errors}++`)}function u(m,p){const{gen:f,validateName:v,schemaEnv:_}=m;_.$async?f.throw((0,t._)`new ${m.ValidationError}(${p})`):(f.assign((0,t._)`${v}.errors`,p),f.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function h(m,p,f){const{createErrors:v}=m.it;return v===!1?(0,t._)`{}`:d(m,p,f)}function d(m,p,f={}){const{gen:v,it:_}=m,y=[g(_,f),$(m,f)];return b(m,p,y),v.object(...y)}function g({errorPath:m},{instancePath:p}){const f=p?(0,t.str)`${m}${(0,n.getErrorPath)(p,n.Type.Str)}`:m;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,f)]}function $({keyword:m,it:{errSchemaPath:p}},{schemaPath:f,parentSchema:v}){let _=v?p:(0,t.str)`${p}/${m}`;return f&&(_=(0,t.str)`${_}${(0,n.getErrorPath)(f,n.Type.Str)}`),[c.schemaPath,_]}function b(m,{params:p,message:f},v){const{keyword:_,data:y,schemaValue:w,it:C}=m,{opts:O,propertyName:T,topSchemaRef:q,schemaPath:P}=C;v.push([c.keyword,_],[c.params,typeof p=="function"?p(m):p||(0,t._)`{}`]),O.messages&&v.push([c.message,typeof f=="function"?f(m):f]),O.verbose&&v.push([c.schema,w],[c.parentSchema,(0,t._)`${q}${P}`],[r.default.data,y]),T&&v.push([c.propertyName,T])}})(hr)),hr}var $s;function za(){if($s)return st;$s=1,Object.defineProperty(st,"__esModule",{value:!0}),st.boolOrEmptySchema=st.topBoolOrEmptySchema=void 0;const e=Zn(),t=ie(),n=nt(),r={message:"boolean schema is false"};function o(a){const{gen:l,schema:u,validateName:c}=a;u===!1?i(a,!1):typeof u=="object"&&u.$async===!0?l.return(n.default.data):(l.assign((0,t._)`${c}.errors`,null),l.return(!0))}st.topBoolOrEmptySchema=o;function s(a,l){const{gen:u,schema:c}=a;c===!1?(u.var(l,!1),i(a)):u.var(l,!0)}st.boolOrEmptySchema=s;function i(a,l){const{gen:u,data:c}=a,h={gen:u,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(h,r,void 0,l)}return st}var Se={},ot={},bs;function ni(){if(bs)return ot;bs=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.getRules=ot.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(o){return typeof o=="string"&&t.has(o)}ot.isJSONType=n;function r(){const o={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...o,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},o.number,o.string,o.array,o.object],post:{rules:[]},all:{},keywords:{}}}return ot.getRules=r,ot}var He={},_s;function ri(){if(_s)return He;_s=1,Object.defineProperty(He,"__esModule",{value:!0}),He.shouldUseRule=He.shouldUseGroup=He.schemaHasRulesForType=void 0;function e({schema:r,self:o},s){const i=o.RULES.types[s];return i&&i!==!0&&t(r,i)}He.schemaHasRulesForType=e;function t(r,o){return o.rules.some(s=>n(r,s))}He.shouldUseGroup=t;function n(r,o){var s;return r[o.keyword]!==void 0||((s=o.definition.implements)===null||s===void 0?void 0:s.some(i=>r[i]!==void 0))}return He.shouldUseRule=n,He}var ws;function Gn(){if(ws)return Se;ws=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.reportTypeError=Se.checkDataTypes=Se.checkDataType=Se.coerceAndCheckDataType=Se.getJSONTypes=Se.getSchemaTypes=Se.DataType=void 0;const e=ni(),t=ri(),n=Zn(),r=ie(),o=de();var s;(function(f){f[f.Correct=0]="Correct",f[f.Wrong=1]="Wrong"})(s||(Se.DataType=s={}));function i(f){const v=a(f.type);if(v.includes("null")){if(f.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!v.length&&f.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');f.nullable===!0&&v.push("null")}return v}Se.getSchemaTypes=i;function a(f){const v=Array.isArray(f)?f:f?[f]:[];if(v.every(e.isJSONType))return v;throw new Error("type must be JSONType or JSONType[]: "+v.join(","))}Se.getJSONTypes=a;function l(f,v){const{gen:_,data:y,opts:w}=f,C=c(v,w.coerceTypes),O=v.length>0&&!(C.length===0&&v.length===1&&(0,t.schemaHasRulesForType)(f,v[0]));if(O){const T=$(v,y,w.strictNumbers,s.Wrong);_.if(T,()=>{C.length?h(f,v,C):m(f)})}return O}Se.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function c(f,v){return v?f.filter(_=>u.has(_)||v==="array"&&_==="array"):[]}function h(f,v,_){const{gen:y,data:w,opts:C}=f,O=y.let("dataType",(0,r._)`typeof ${w}`),T=y.let("coerced",(0,r._)`undefined`);C.coerceTypes==="array"&&y.if((0,r._)`${O} == 'object' && Array.isArray(${w}) && ${w}.length == 1`,()=>y.assign(w,(0,r._)`${w}[0]`).assign(O,(0,r._)`typeof ${w}`).if($(v,w,C.strictNumbers),()=>y.assign(T,w))),y.if((0,r._)`${T} !== undefined`);for(const P of _)(u.has(P)||P==="array"&&C.coerceTypes==="array")&&q(P);y.else(),m(f),y.endIf(),y.if((0,r._)`${T} !== undefined`,()=>{y.assign(w,T),d(f,T)});function q(P){switch(P){case"string":y.elseIf((0,r._)`${O} == "number" || ${O} == "boolean"`).assign(T,(0,r._)`"" + ${w}`).elseIf((0,r._)`${w} === null`).assign(T,(0,r._)`""`);return;case"number":y.elseIf((0,r._)`${O} == "boolean" || ${w} === null
              || (${O} == "string" && ${w} && ${w} == +${w})`).assign(T,(0,r._)`+${w}`);return;case"integer":y.elseIf((0,r._)`${O} === "boolean" || ${w} === null
              || (${O} === "string" && ${w} && ${w} == +${w} && !(${w} % 1))`).assign(T,(0,r._)`+${w}`);return;case"boolean":y.elseIf((0,r._)`${w} === "false" || ${w} === 0 || ${w} === null`).assign(T,!1).elseIf((0,r._)`${w} === "true" || ${w} === 1`).assign(T,!0);return;case"null":y.elseIf((0,r._)`${w} === "" || ${w} === 0 || ${w} === false`),y.assign(T,null);return;case"array":y.elseIf((0,r._)`${O} === "string" || ${O} === "number"
              || ${O} === "boolean" || ${w} === null`).assign(T,(0,r._)`[${w}]`)}}}function d({gen:f,parentData:v,parentDataProperty:_},y){f.if((0,r._)`${v} !== undefined`,()=>f.assign((0,r._)`${v}[${_}]`,y))}function g(f,v,_,y=s.Correct){const w=y===s.Correct?r.operators.EQ:r.operators.NEQ;let C;switch(f){case"null":return(0,r._)`${v} ${w} null`;case"array":C=(0,r._)`Array.isArray(${v})`;break;case"object":C=(0,r._)`${v} && typeof ${v} == "object" && !Array.isArray(${v})`;break;case"integer":C=O((0,r._)`!(${v} % 1) && !isNaN(${v})`);break;case"number":C=O();break;default:return(0,r._)`typeof ${v} ${w} ${f}`}return y===s.Correct?C:(0,r.not)(C);function O(T=r.nil){return(0,r.and)((0,r._)`typeof ${v} == "number"`,T,_?(0,r._)`isFinite(${v})`:r.nil)}}Se.checkDataType=g;function $(f,v,_,y){if(f.length===1)return g(f[0],v,_,y);let w;const C=(0,o.toHash)(f);if(C.array&&C.object){const O=(0,r._)`typeof ${v} != "object"`;w=C.null?O:(0,r._)`!${v} || ${O}`,delete C.null,delete C.array,delete C.object}else w=r.nil;C.number&&delete C.integer;for(const O in C)w=(0,r.and)(w,g(O,v,_,y));return w}Se.checkDataTypes=$;const b={message:({schema:f})=>`must be ${f}`,params:({schema:f,schemaValue:v})=>typeof f=="string"?(0,r._)`{type: ${f}}`:(0,r._)`{type: ${v}}`};function m(f){const v=p(f);(0,n.reportError)(v,b)}Se.reportTypeError=m;function p(f){const{gen:v,data:_,schema:y}=f,w=(0,o.schemaRefOrVal)(f,y,"type");return{gen:v,keyword:"type",data:_,schema:y.type,schemaCode:w,schemaValue:w,parentSchema:y,params:{},it:f}}return Se}var Et={},Ss;function Ha(){if(Ss)return Et;Ss=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.assignDefaults=void 0;const e=ie(),t=de();function n(o,s){const{properties:i,items:a}=o.schema;if(s==="object"&&i)for(const l in i)r(o,l,i[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,u)=>r(o,u,l.default))}Et.assignDefaults=n;function r(o,s,i){const{gen:a,compositeRule:l,data:u,opts:c}=o;if(i===void 0)return;const h=(0,e._)`${u}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(o,`default is ignored for: ${h}`);return}let d=(0,e._)`${h} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${h} === null || ${h} === ""`),a.if(d,(0,e._)`${h} = ${(0,e.stringify)(i)}`)}return Et}var xe={},he={},Cs;function De(){if(Cs)return he;Cs=1,Object.defineProperty(he,"__esModule",{value:!0}),he.validateUnion=he.validateArray=he.usePattern=he.callValidateCode=he.schemaProperties=he.allSchemaProperties=he.noPropertyInData=he.propertyInData=he.isOwnProperty=he.hasPropFunc=he.reportMissingProp=he.checkMissingProp=he.checkReportMissingProp=void 0;const e=ie(),t=de(),n=nt(),r=de();function o(f,v){const{gen:_,data:y,it:w}=f;_.if(c(_,y,v,w.opts.ownProperties),()=>{f.setParams({missingProperty:(0,e._)`${v}`},!0),f.error()})}he.checkReportMissingProp=o;function s({gen:f,data:v,it:{opts:_}},y,w){return(0,e.or)(...y.map(C=>(0,e.and)(c(f,v,C,_.ownProperties),(0,e._)`${w} = ${C}`)))}he.checkMissingProp=s;function i(f,v){f.setParams({missingProperty:v},!0),f.error()}he.reportMissingProp=i;function a(f){return f.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}he.hasPropFunc=a;function l(f,v,_){return(0,e._)`${a(f)}.call(${v}, ${_})`}he.isOwnProperty=l;function u(f,v,_,y){const w=(0,e._)`${v}${(0,e.getProperty)(_)} !== undefined`;return y?(0,e._)`${w} && ${l(f,v,_)}`:w}he.propertyInData=u;function c(f,v,_,y){const w=(0,e._)`${v}${(0,e.getProperty)(_)} === undefined`;return y?(0,e.or)(w,(0,e.not)(l(f,v,_))):w}he.noPropertyInData=c;function h(f){return f?Object.keys(f).filter(v=>v!=="__proto__"):[]}he.allSchemaProperties=h;function d(f,v){return h(v).filter(_=>!(0,t.alwaysValidSchema)(f,v[_]))}he.schemaProperties=d;function g({schemaCode:f,data:v,it:{gen:_,topSchemaRef:y,schemaPath:w,errorPath:C},it:O},T,q,P){const A=P?(0,e._)`${f}, ${v}, ${y}${w}`:v,U=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,C)],[n.default.parentData,O.parentData],[n.default.parentDataProperty,O.parentDataProperty],[n.default.rootData,n.default.rootData]];O.opts.dynamicRef&&U.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const K=(0,e._)`${A}, ${_.object(...U)}`;return q!==e.nil?(0,e._)`${T}.call(${q}, ${K})`:(0,e._)`${T}(${K})`}he.callValidateCode=g;const $=(0,e._)`new RegExp`;function b({gen:f,it:{opts:v}},_){const y=v.unicodeRegExp?"u":"",{regExp:w}=v.code,C=w(_,y);return f.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,e._)`${w.code==="new RegExp"?$:(0,r.useFunc)(f,w)}(${_}, ${y})`})}he.usePattern=b;function m(f){const{gen:v,data:_,keyword:y,it:w}=f,C=v.name("valid");if(w.allErrors){const T=v.let("valid",!0);return O(()=>v.assign(T,!1)),T}return v.var(C,!0),O(()=>v.break()),C;function O(T){const q=v.const("len",(0,e._)`${_}.length`);v.forRange("i",0,q,P=>{f.subschema({keyword:y,dataProp:P,dataPropType:t.Type.Num},C),v.if((0,e.not)(C),T)})}}he.validateArray=m;function p(f){const{gen:v,schema:_,keyword:y,it:w}=f;if(!Array.isArray(_))throw new Error("ajv implementation error");if(_.some(q=>(0,t.alwaysValidSchema)(w,q))&&!w.opts.unevaluated)return;const O=v.let("valid",!1),T=v.name("_valid");v.block(()=>_.forEach((q,P)=>{const A=f.subschema({keyword:y,schemaProp:P,compositeRule:!0},T);v.assign(O,(0,e._)`${O} || ${T}`),f.mergeValidEvaluated(A,T)||v.if((0,e.not)(O))})),f.result(O,()=>f.reset(),()=>f.error(!0))}return he.validateUnion=p,he}var Es;function Wa(){if(Es)return xe;Es=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.validateKeywordUsage=xe.validSchemaType=xe.funcKeywordCode=xe.macroKeywordCode=void 0;const e=ie(),t=nt(),n=De(),r=Zn();function o(d,g){const{gen:$,keyword:b,schema:m,parentSchema:p,it:f}=d,v=g.macro.call(f.self,m,p,f),_=u($,b,v);f.opts.validateSchema!==!1&&f.self.validateSchema(v,!0);const y=$.name("valid");d.subschema({schema:v,schemaPath:e.nil,errSchemaPath:`${f.errSchemaPath}/${b}`,topSchemaRef:_,compositeRule:!0},y),d.pass(y,()=>d.error(!0))}xe.macroKeywordCode=o;function s(d,g){var $;const{gen:b,keyword:m,schema:p,parentSchema:f,$data:v,it:_}=d;l(_,g);const y=!v&&g.compile?g.compile.call(_.self,p,f,_):g.validate,w=u(b,m,y),C=b.let("valid");d.block$data(C,O),d.ok(($=g.valid)!==null&&$!==void 0?$:C);function O(){if(g.errors===!1)P(),g.modifying&&i(d),A(()=>d.error());else{const U=g.async?T():q();g.modifying&&i(d),A(()=>a(d,U))}}function T(){const U=b.let("ruleErrs",null);return b.try(()=>P((0,e._)`await `),K=>b.assign(C,!1).if((0,e._)`${K} instanceof ${_.ValidationError}`,()=>b.assign(U,(0,e._)`${K}.errors`),()=>b.throw(K))),U}function q(){const U=(0,e._)`${w}.errors`;return b.assign(U,null),P(e.nil),U}function P(U=g.async?(0,e._)`await `:e.nil){const K=_.opts.passContext?t.default.this:t.default.self,H=!("compile"in g&&!v||g.schema===!1);b.assign(C,(0,e._)`${U}${(0,n.callValidateCode)(d,w,K,H)}`,g.modifying)}function A(U){var K;b.if((0,e.not)((K=g.valid)!==null&&K!==void 0?K:C),U)}}xe.funcKeywordCode=s;function i(d){const{gen:g,data:$,it:b}=d;g.if(b.parentData,()=>g.assign($,(0,e._)`${b.parentData}[${b.parentDataProperty}]`))}function a(d,g){const{gen:$}=d;$.if((0,e._)`Array.isArray(${g})`,()=>{$.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${g} : ${t.default.vErrors}.concat(${g})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function l({schemaEnv:d},g){if(g.async&&!d.$async)throw new Error("async keyword in sync schema")}function u(d,g,$){if($===void 0)throw new Error(`keyword "${g}" failed to compile`);return d.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,e.stringify)($)})}function c(d,g,$=!1){return!g.length||g.some(b=>b==="array"?Array.isArray(d):b==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==b||$&&typeof d>"u")}xe.validSchemaType=c;function h({schema:d,opts:g,self:$,errSchemaPath:b},m,p){if(Array.isArray(m.keyword)?!m.keyword.includes(p):m.keyword!==p)throw new Error("ajv implementation error");const f=m.dependencies;if(f?.some(v=>!Object.prototype.hasOwnProperty.call(d,v)))throw new Error(`parent schema must have dependencies of ${p}: ${f.join(",")}`);if(m.validateSchema&&!m.validateSchema(d[p])){const _=`keyword "${p}" value is invalid at path "${b}": `+$.errorsText(m.validateSchema.errors);if(g.validateSchema==="log")$.logger.error(_);else throw new Error(_)}}return xe.validateKeywordUsage=h,xe}var We={},Ps;function Ba(){if(Ps)return We;Ps=1,Object.defineProperty(We,"__esModule",{value:!0}),We.extendSubschemaMode=We.extendSubschemaData=We.getSubschema=void 0;const e=ie(),t=de();function n(s,{keyword:i,schemaProp:a,schema:l,schemaPath:u,errSchemaPath:c,topSchemaRef:h}){if(i!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(i!==void 0){const d=s.schema[i];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(i)}`,errSchemaPath:`${s.errSchemaPath}/${i}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(i)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${i}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(u===void 0||c===void 0||h===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:u,topSchemaRef:h,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}We.getSubschema=n;function r(s,i,{dataProp:a,dataPropType:l,data:u,dataTypes:c,propertyName:h}){if(u!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=i;if(a!==void 0){const{errorPath:$,dataPathArr:b,opts:m}=i,p=d.let("data",(0,e._)`${i.data}${(0,e.getProperty)(a)}`,!0);g(p),s.errorPath=(0,e.str)`${$}${(0,t.getErrorPath)(a,l,m.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...b,s.parentDataProperty]}if(u!==void 0){const $=u instanceof e.Name?u:d.let("data",u,!0);g($),h!==void 0&&(s.propertyName=h)}c&&(s.dataTypes=c);function g($){s.data=$,s.dataLevel=i.dataLevel+1,s.dataTypes=[],i.definedProperties=new Set,s.parentData=i.data,s.dataNames=[...i.dataNames,$]}}We.extendSubschemaData=r;function o(s,{jtdDiscriminator:i,jtdMetadata:a,compositeRule:l,createErrors:u,allErrors:c}){l!==void 0&&(s.compositeRule=l),u!==void 0&&(s.createErrors=u),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=i,s.jtdMetadata=a}return We.extendSubschemaMode=o,We}var ke={},yr,ks;function si(){return ks||(ks=1,yr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),yr}var vr={exports:{}},Os;function Ga(){if(Os)return vr.exports;Os=1;var e=vr.exports=function(r,o,s){typeof o=="function"&&(s=o,o={}),s=o.cb||s;var i=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(o,i,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,o,s,i,a,l,u,c,h,d){if(i&&typeof i=="object"&&!Array.isArray(i)){o(i,a,l,u,c,h,d);for(var g in i){var $=i[g];if(Array.isArray($)){if(g in e.arrayKeywords)for(var b=0;b<$.length;b++)t(r,o,s,$[b],a+"/"+g+"/"+b,l,a,g,i,b)}else if(g in e.propsKeywords){if($&&typeof $=="object")for(var m in $)t(r,o,s,$[m],a+"/"+g+"/"+n(m),l,a,g,i,m)}else(g in e.keywords||r.allKeys&&!(g in e.skipKeywords))&&t(r,o,s,$,a+"/"+g,l,a,g,i)}s(i,a,l,u,c,h,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return vr.exports}var Rs;function er(){if(Rs)return ke;Rs=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.getSchemaRefs=ke.resolveUrl=ke.normalizeId=ke._getFullPath=ke.getFullPath=ke.inlineRef=void 0;const e=de(),t=si(),n=Ga(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(b,m=!0){return typeof b=="boolean"?!0:m===!0?!i(b):m?a(b)<=m:!1}ke.inlineRef=o;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function i(b){for(const m in b){if(s.has(m))return!0;const p=b[m];if(Array.isArray(p)&&p.some(i)||typeof p=="object"&&i(p))return!0}return!1}function a(b){let m=0;for(const p in b){if(p==="$ref")return 1/0;if(m++,!r.has(p)&&(typeof b[p]=="object"&&(0,e.eachItem)(b[p],f=>m+=a(f)),m===1/0))return 1/0}return m}function l(b,m="",p){p!==!1&&(m=h(m));const f=b.parse(m);return u(b,f)}ke.getFullPath=l;function u(b,m){return b.serialize(m).split("#")[0]+"#"}ke._getFullPath=u;const c=/#\/?$/;function h(b){return b?b.replace(c,""):""}ke.normalizeId=h;function d(b,m,p){return p=h(p),b.resolve(m,p)}ke.resolveUrl=d;const g=/^[a-z_][-a-z0-9._]*$/i;function $(b,m){if(typeof b=="boolean")return{};const{schemaId:p,uriResolver:f}=this.opts,v=h(b[p]||m),_={"":v},y=l(f,v,!1),w={},C=new Set;return n(b,{allKeys:!0},(q,P,A,U)=>{if(U===void 0)return;const K=y+P;let H=_[U];typeof q[p]=="string"&&(H=te.call(this,q[p])),ge.call(this,q.$anchor),ge.call(this,q.$dynamicAnchor),_[P]=H;function te(ne){const ue=this.opts.uriResolver.resolve;if(ne=h(H?ue(H,ne):ne),C.has(ne))throw T(ne);C.add(ne);let F=this.refs[ne];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?O(q,F.schema,ne):ne!==h(K)&&(ne[0]==="#"?(O(q,w[ne],ne),w[ne]=q):this.refs[ne]=K),ne}function ge(ne){if(typeof ne=="string"){if(!g.test(ne))throw new Error(`invalid anchor "${ne}"`);te.call(this,`#${ne}`)}}}),w;function O(q,P,A){if(P!==void 0&&!t(q,P))throw T(A)}function T(q){return new Error(`reference "${q}" resolves to more than one schema`)}}return ke.getSchemaRefs=$,ke}var Ns;function tr(){if(Ns)return ze;Ns=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.getData=ze.KeywordCxt=ze.validateFunctionCode=void 0;const e=za(),t=Gn(),n=ri(),r=Gn(),o=Ha(),s=Wa(),i=Ba(),a=ie(),l=nt(),u=er(),c=de(),h=Zn();function d(k){if(y(k)&&(C(k),_(k))){m(k);return}g(k,()=>(0,e.topBoolOrEmptySchema)(k))}ze.validateFunctionCode=d;function g({gen:k,validateName:I,schema:V,schemaEnv:z,opts:G},re){G.code.es5?k.func(I,(0,a._)`${l.default.data}, ${l.default.valCxt}`,z.$async,()=>{k.code((0,a._)`"use strict"; ${f(V,G)}`),b(k,G),k.code(re)}):k.func(I,(0,a._)`${l.default.data}, ${$(G)}`,z.$async,()=>k.code(f(V,G)).code(re))}function $(k){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${k.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function b(k,I){k.if(l.default.valCxt,()=>{k.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),k.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),k.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),k.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),I.dynamicRef&&k.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{k.var(l.default.instancePath,(0,a._)`""`),k.var(l.default.parentData,(0,a._)`undefined`),k.var(l.default.parentDataProperty,(0,a._)`undefined`),k.var(l.default.rootData,l.default.data),I.dynamicRef&&k.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function m(k){const{schema:I,opts:V,gen:z}=k;g(k,()=>{V.$comment&&I.$comment&&U(k),q(k),z.let(l.default.vErrors,null),z.let(l.default.errors,0),V.unevaluated&&p(k),O(k),K(k)})}function p(k){const{gen:I,validateName:V}=k;k.evaluated=I.const("evaluated",(0,a._)`${V}.evaluated`),I.if((0,a._)`${k.evaluated}.dynamicProps`,()=>I.assign((0,a._)`${k.evaluated}.props`,(0,a._)`undefined`)),I.if((0,a._)`${k.evaluated}.dynamicItems`,()=>I.assign((0,a._)`${k.evaluated}.items`,(0,a._)`undefined`))}function f(k,I){const V=typeof k=="object"&&k[I.schemaId];return V&&(I.code.source||I.code.process)?(0,a._)`/*# sourceURL=${V} */`:a.nil}function v(k,I){if(y(k)&&(C(k),_(k))){w(k,I);return}(0,e.boolOrEmptySchema)(k,I)}function _({schema:k,self:I}){if(typeof k=="boolean")return!k;for(const V in k)if(I.RULES.all[V])return!0;return!1}function y(k){return typeof k.schema!="boolean"}function w(k,I){const{schema:V,gen:z,opts:G}=k;G.$comment&&V.$comment&&U(k),P(k),A(k);const re=z.const("_errs",l.default.errors);O(k,re),z.var(I,(0,a._)`${re} === ${l.default.errors}`)}function C(k){(0,c.checkUnknownRules)(k),T(k)}function O(k,I){if(k.opts.jtd)return te(k,[],!1,I);const V=(0,t.getSchemaTypes)(k.schema),z=(0,t.coerceAndCheckDataType)(k,V);te(k,V,!z,I)}function T(k){const{schema:I,errSchemaPath:V,opts:z,self:G}=k;I.$ref&&z.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(I,G.RULES)&&G.logger.warn(`$ref: keywords ignored in schema at path "${V}"`)}function q(k){const{schema:I,opts:V}=k;I.default!==void 0&&V.useDefaults&&V.strictSchema&&(0,c.checkStrictMode)(k,"default is ignored in the schema root")}function P(k){const I=k.schema[k.opts.schemaId];I&&(k.baseId=(0,u.resolveUrl)(k.opts.uriResolver,k.baseId,I))}function A(k){if(k.schema.$async&&!k.schemaEnv.$async)throw new Error("async schema in sync schema")}function U({gen:k,schemaEnv:I,schema:V,errSchemaPath:z,opts:G}){const re=V.$comment;if(G.$comment===!0)k.code((0,a._)`${l.default.self}.logger.log(${re})`);else if(typeof G.$comment=="function"){const _e=(0,a.str)`${z}/$comment`,Te=k.scopeValue("root",{ref:I.root});k.code((0,a._)`${l.default.self}.opts.$comment(${re}, ${_e}, ${Te}.schema)`)}}function K(k){const{gen:I,schemaEnv:V,validateName:z,ValidationError:G,opts:re}=k;V.$async?I.if((0,a._)`${l.default.errors} === 0`,()=>I.return(l.default.data),()=>I.throw((0,a._)`new ${G}(${l.default.vErrors})`)):(I.assign((0,a._)`${z}.errors`,l.default.vErrors),re.unevaluated&&H(k),I.return((0,a._)`${l.default.errors} === 0`))}function H({gen:k,evaluated:I,props:V,items:z}){V instanceof a.Name&&k.assign((0,a._)`${I}.props`,V),z instanceof a.Name&&k.assign((0,a._)`${I}.items`,z)}function te(k,I,V,z){const{gen:G,schema:re,data:_e,allErrors:Te,opts:Oe,self:Re}=k,{RULES:we}=Re;if(re.$ref&&(Oe.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(re,we))){G.block(()=>B(k,"$ref",we.all.$ref.definition));return}Oe.jtd||ne(k,I),G.block(()=>{for(const Le of we.rules)ut(Le);ut(we.post)});function ut(Le){(0,n.shouldUseGroup)(re,Le)&&(Le.type?(G.if((0,r.checkDataType)(Le.type,_e,Oe.strictNumbers)),ge(k,Le),I.length===1&&I[0]===Le.type&&V&&(G.else(),(0,r.reportTypeError)(k)),G.endIf()):ge(k,Le),Te||G.if((0,a._)`${l.default.errors} === ${z||0}`))}}function ge(k,I){const{gen:V,schema:z,opts:{useDefaults:G}}=k;G&&(0,o.assignDefaults)(k,I.type),V.block(()=>{for(const re of I.rules)(0,n.shouldUseRule)(z,re)&&B(k,re.keyword,re.definition,I.type)})}function ne(k,I){k.schemaEnv.meta||!k.opts.strictTypes||(ue(k,I),k.opts.allowUnionTypes||F(k,I),R(k,k.dataTypes))}function ue(k,I){if(I.length){if(!k.dataTypes.length){k.dataTypes=I;return}I.forEach(V=>{L(k.dataTypes,V)||E(k,`type "${V}" not allowed by context "${k.dataTypes.join(",")}"`)}),S(k,I)}}function F(k,I){I.length>1&&!(I.length===2&&I.includes("null"))&&E(k,"use allowUnionTypes to allow union type keyword")}function R(k,I){const V=k.self.RULES.all;for(const z in V){const G=V[z];if(typeof G=="object"&&(0,n.shouldUseRule)(k.schema,G)){const{type:re}=G.definition;re.length&&!re.some(_e=>D(I,_e))&&E(k,`missing type "${re.join(",")}" for keyword "${z}"`)}}}function D(k,I){return k.includes(I)||I==="number"&&k.includes("integer")}function L(k,I){return k.includes(I)||I==="integer"&&k.includes("number")}function S(k,I){const V=[];for(const z of k.dataTypes)L(I,z)?V.push(z):I.includes("integer")&&z==="number"&&V.push("integer");k.dataTypes=V}function E(k,I){const V=k.schemaEnv.baseId+k.errSchemaPath;I+=` at "${V}" (strictTypes)`,(0,c.checkStrictMode)(k,I,k.opts.strictTypes)}class x{constructor(I,V,z){if((0,s.validateKeywordUsage)(I,V,z),this.gen=I.gen,this.allErrors=I.allErrors,this.keyword=z,this.data=I.data,this.schema=I.schema[z],this.$data=V.$data&&I.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(I,this.schema,z,this.$data),this.schemaType=V.schemaType,this.parentSchema=I.schema,this.params={},this.it=I,this.def=V,this.$data)this.schemaCode=I.gen.const("vSchema",ae(this.$data,I));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,V.schemaType,V.allowUndefined))throw new Error(`${z} value must be ${JSON.stringify(V.schemaType)}`);("code"in V?V.trackErrors:V.errors!==!1)&&(this.errsCount=I.gen.const("_errs",l.default.errors))}result(I,V,z){this.failResult((0,a.not)(I),V,z)}failResult(I,V,z){this.gen.if(I),z?z():this.error(),V?(this.gen.else(),V(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(I,V){this.failResult((0,a.not)(I),void 0,V)}fail(I){if(I===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(I),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(I){if(!this.$data)return this.fail(I);const{schemaCode:V}=this;this.fail((0,a._)`${V} !== undefined && (${(0,a.or)(this.invalid$data(),I)})`)}error(I,V,z){if(V){this.setParams(V),this._error(I,z),this.setParams({});return}this._error(I,z)}_error(I,V){(I?h.reportExtraError:h.reportError)(this,this.def.error,V)}$dataError(){(0,h.reportError)(this,this.def.$dataError||h.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,h.resetErrorsCount)(this.gen,this.errsCount)}ok(I){this.allErrors||this.gen.if(I)}setParams(I,V){V?Object.assign(this.params,I):this.params=I}block$data(I,V,z=a.nil){this.gen.block(()=>{this.check$data(I,z),V()})}check$data(I=a.nil,V=a.nil){if(!this.$data)return;const{gen:z,schemaCode:G,schemaType:re,def:_e}=this;z.if((0,a.or)((0,a._)`${G} === undefined`,V)),I!==a.nil&&z.assign(I,!0),(re.length||_e.validateSchema)&&(z.elseIf(this.invalid$data()),this.$dataError(),I!==a.nil&&z.assign(I,!1)),z.else()}invalid$data(){const{gen:I,schemaCode:V,schemaType:z,def:G,it:re}=this;return(0,a.or)(_e(),Te());function _e(){if(z.length){if(!(V instanceof a.Name))throw new Error("ajv implementation error");const Oe=Array.isArray(z)?z:[z];return(0,a._)`${(0,r.checkDataTypes)(Oe,V,re.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Te(){if(G.validateSchema){const Oe=I.scopeValue("validate$data",{ref:G.validateSchema});return(0,a._)`!${Oe}(${V})`}return a.nil}}subschema(I,V){const z=(0,i.getSubschema)(this.it,I);(0,i.extendSubschemaData)(z,this.it,I),(0,i.extendSubschemaMode)(z,I);const G={...this.it,...z,items:void 0,props:void 0};return v(G,V),G}mergeEvaluated(I,V){const{it:z,gen:G}=this;z.opts.unevaluated&&(z.props!==!0&&I.props!==void 0&&(z.props=c.mergeEvaluated.props(G,I.props,z.props,V)),z.items!==!0&&I.items!==void 0&&(z.items=c.mergeEvaluated.items(G,I.items,z.items,V)))}mergeValidEvaluated(I,V){const{it:z,gen:G}=this;if(z.opts.unevaluated&&(z.props!==!0||z.items!==!0))return G.if(V,()=>this.mergeEvaluated(I,a.Name)),!0}}ze.KeywordCxt=x;function B(k,I,V,z){const G=new x(k,V,I);"code"in V?V.code(G,z):G.$data&&V.validate?(0,s.funcKeywordCode)(G,V):"macro"in V?(0,s.macroKeywordCode)(G,V):(V.compile||V.validate)&&(0,s.funcKeywordCode)(G,V)}const J=/^\/(?:[^~]|~0|~1)*$/,fe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ae(k,{dataLevel:I,dataNames:V,dataPathArr:z}){let G,re;if(k==="")return l.default.rootData;if(k[0]==="/"){if(!J.test(k))throw new Error(`Invalid JSON-pointer: ${k}`);G=k,re=l.default.rootData}else{const Re=fe.exec(k);if(!Re)throw new Error(`Invalid JSON-pointer: ${k}`);const we=+Re[1];if(G=Re[2],G==="#"){if(we>=I)throw new Error(Oe("property/index",we));return z[I-we]}if(we>I)throw new Error(Oe("data",we));if(re=V[I-we],!G)return re}let _e=re;const Te=G.split("/");for(const Re of Te)Re&&(re=(0,a._)`${re}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Re))}`,_e=(0,a._)`${_e} && ${re}`);return _e;function Oe(Re,we){return`Cannot access ${Re} ${we} levels up, current level is ${I}`}}return ze.getData=ae,ze}var Jt={},Is;function Mr(){if(Is)return Jt;Is=1,Object.defineProperty(Jt,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return Jt.default=e,Jt}var Qt={},Ls;function nr(){if(Ls)return Qt;Ls=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=er();class t extends Error{constructor(r,o,s,i){super(i||`can't resolve reference ${s} from id ${o}`),this.missingRef=(0,e.resolveUrl)(r,o,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return Qt.default=t,Qt}var Ie={},As;function Vr(){if(As)return Ie;As=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;const e=ie(),t=Mr(),n=nt(),r=er(),o=de(),s=tr();class i{constructor(p){var f;this.refs={},this.dynamicAnchors={};let v;typeof p.schema=="object"&&(v=p.schema),this.schema=p.schema,this.schemaId=p.schemaId,this.root=p.root||this,this.baseId=(f=p.baseId)!==null&&f!==void 0?f:(0,r.normalizeId)(v?.[p.schemaId||"$id"]),this.schemaPath=p.schemaPath,this.localRefs=p.localRefs,this.meta=p.meta,this.$async=v?.$async,this.refs={}}}Ie.SchemaEnv=i;function a(m){const p=c.call(this,m);if(p)return p;const f=(0,r.getFullPath)(this.opts.uriResolver,m.root.baseId),{es5:v,lines:_}=this.opts.code,{ownProperties:y}=this.opts,w=new e.CodeGen(this.scope,{es5:v,lines:_,ownProperties:y});let C;m.$async&&(C=w.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const O=w.scopeName("validate");m.validateName=O;const T={gen:w,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:w.scopeValue("schema",this.opts.code.source===!0?{ref:m.schema,code:(0,e.stringify)(m.schema)}:{ref:m.schema}),validateName:O,ValidationError:C,schema:m.schema,schemaEnv:m,rootId:f,baseId:m.baseId||f,schemaPath:e.nil,errSchemaPath:m.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let q;try{this._compilations.add(m),(0,s.validateFunctionCode)(T),w.optimize(this.opts.code.optimize);const P=w.toString();q=`${w.scopeRefs(n.default.scope)}return ${P}`,this.opts.code.process&&(q=this.opts.code.process(q,m));const U=new Function(`${n.default.self}`,`${n.default.scope}`,q)(this,this.scope.get());if(this.scope.value(O,{ref:U}),U.errors=null,U.schema=m.schema,U.schemaEnv=m,m.$async&&(U.$async=!0),this.opts.code.source===!0&&(U.source={validateName:O,validateCode:P,scopeValues:w._values}),this.opts.unevaluated){const{props:K,items:H}=T;U.evaluated={props:K instanceof e.Name?void 0:K,items:H instanceof e.Name?void 0:H,dynamicProps:K instanceof e.Name,dynamicItems:H instanceof e.Name},U.source&&(U.source.evaluated=(0,e.stringify)(U.evaluated))}return m.validate=U,m}catch(P){throw delete m.validate,delete m.validateName,q&&this.logger.error("Error compiling schema, function code:",q),P}finally{this._compilations.delete(m)}}Ie.compileSchema=a;function l(m,p,f){var v;f=(0,r.resolveUrl)(this.opts.uriResolver,p,f);const _=m.refs[f];if(_)return _;let y=d.call(this,m,f);if(y===void 0){const w=(v=m.localRefs)===null||v===void 0?void 0:v[f],{schemaId:C}=this.opts;w&&(y=new i({schema:w,schemaId:C,root:m,baseId:p}))}if(y!==void 0)return m.refs[f]=u.call(this,y)}Ie.resolveRef=l;function u(m){return(0,r.inlineRef)(m.schema,this.opts.inlineRefs)?m.schema:m.validate?m:a.call(this,m)}function c(m){for(const p of this._compilations)if(h(p,m))return p}Ie.getCompilingSchema=c;function h(m,p){return m.schema===p.schema&&m.root===p.root&&m.baseId===p.baseId}function d(m,p){let f;for(;typeof(f=this.refs[p])=="string";)p=f;return f||this.schemas[p]||g.call(this,m,p)}function g(m,p){const f=this.opts.uriResolver.parse(p),v=(0,r._getFullPath)(this.opts.uriResolver,f);let _=(0,r.getFullPath)(this.opts.uriResolver,m.baseId,void 0);if(Object.keys(m.schema).length>0&&v===_)return b.call(this,f,m);const y=(0,r.normalizeId)(v),w=this.refs[y]||this.schemas[y];if(typeof w=="string"){const C=g.call(this,m,w);return typeof C?.schema!="object"?void 0:b.call(this,f,C)}if(typeof w?.schema=="object"){if(w.validate||a.call(this,w),y===(0,r.normalizeId)(p)){const{schema:C}=w,{schemaId:O}=this.opts,T=C[O];return T&&(_=(0,r.resolveUrl)(this.opts.uriResolver,_,T)),new i({schema:C,schemaId:O,root:m,baseId:_})}return b.call(this,f,w)}}Ie.resolveSchema=g;const $=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b(m,{baseId:p,schema:f,root:v}){var _;if(((_=m.fragment)===null||_===void 0?void 0:_[0])!=="/")return;for(const C of m.fragment.slice(1).split("/")){if(typeof f=="boolean")return;const O=f[(0,o.unescapeFragment)(C)];if(O===void 0)return;f=O;const T=typeof f=="object"&&f[this.opts.schemaId];!$.has(C)&&T&&(p=(0,r.resolveUrl)(this.opts.uriResolver,p,T))}let y;if(typeof f!="boolean"&&f.$ref&&!(0,o.schemaHasRulesButRef)(f,this.RULES)){const C=(0,r.resolveUrl)(this.opts.uriResolver,p,f.$ref);y=g.call(this,v,C)}const{schemaId:w}=this.opts;if(y=y||new i({schema:f,schemaId:w,root:v,baseId:p}),y.schema!==y.root.schema)return y}return Ie}const Ja="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Qa="Meta-schema for $data reference (JSON AnySchema extension proposal)",Xa="object",Ya=["$data"],Za={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},el=!1,tl={$id:Ja,description:Qa,type:Xa,required:Ya,properties:Za,additionalProperties:el};var Xt={},Pt={exports:{}},$r,js;function oi(){if(js)return $r;js=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function n(d){let g="",$=0,b=0;for(b=0;b<d.length;b++)if($=d[b].charCodeAt(0),$!==48){if(!($>=48&&$<=57||$>=65&&$<=70||$>=97&&$<=102))return"";g+=d[b];break}for(b+=1;b<d.length;b++){if($=d[b].charCodeAt(0),!($>=48&&$<=57||$>=65&&$<=70||$>=97&&$<=102))return"";g+=d[b]}return g}const r=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function o(d){return d.length=0,!0}function s(d,g,$){if(d.length){const b=n(d);if(b!=="")g.push(b);else return $.error=!0,!1;d.length=0}return!0}function i(d){let g=0;const $={error:!1,address:"",zone:""},b=[],m=[];let p=!1,f=!1,v=s;for(let _=0;_<d.length;_++){const y=d[_];if(!(y==="["||y==="]"))if(y===":"){if(p===!0&&(f=!0),!v(m,b,$))break;if(++g>7){$.error=!0;break}_>0&&d[_-1]===":"&&(p=!0),b.push(":");continue}else if(y==="%"){if(!v(m,b,$))break;v=o}else{m.push(y);continue}}return m.length&&(v===o?$.zone=m.join(""):f?b.push(m.join("")):b.push(n(m))),$.address=b.join(""),$}function a(d){if(l(d,":")<2)return{host:d,isIPV6:!1};const g=i(d);if(g.error)return{host:d,isIPV6:!1};{let $=g.address,b=g.address;return g.zone&&($+="%"+g.zone,b+="%25"+g.zone),{host:$,isIPV6:!0,escapedHost:b}}}function l(d,g){let $=0;for(let b=0;b<d.length;b++)d[b]===g&&$++;return $}function u(d){let g=d;const $=[];let b=-1,m=0;for(;m=g.length;){if(m===1){if(g===".")break;if(g==="/"){$.push("/");break}else{$.push(g);break}}else if(m===2){if(g[0]==="."){if(g[1]===".")break;if(g[1]==="/"){g=g.slice(2);continue}}else if(g[0]==="/"&&(g[1]==="."||g[1]==="/")){$.push("/");break}}else if(m===3&&g==="/.."){$.length!==0&&$.pop(),$.push("/");break}if(g[0]==="."){if(g[1]==="."){if(g[2]==="/"){g=g.slice(3);continue}}else if(g[1]==="/"){g=g.slice(2);continue}}else if(g[0]==="/"&&g[1]==="."){if(g[2]==="/"){g=g.slice(2);continue}else if(g[2]==="."&&g[3]==="/"){g=g.slice(3),$.length!==0&&$.pop();continue}}if((b=g.indexOf("/",1))===-1){$.push(g);break}else $.push(g.slice(0,b)),g=g.slice(b)}return $.join("")}function c(d,g){const $=g!==!0?escape:unescape;return d.scheme!==void 0&&(d.scheme=$(d.scheme)),d.userinfo!==void 0&&(d.userinfo=$(d.userinfo)),d.host!==void 0&&(d.host=$(d.host)),d.path!==void 0&&(d.path=$(d.path)),d.query!==void 0&&(d.query=$(d.query)),d.fragment!==void 0&&(d.fragment=$(d.fragment)),d}function h(d){const g=[];if(d.userinfo!==void 0&&(g.push(d.userinfo),g.push("@")),d.host!==void 0){let $=unescape(d.host);if(!t($)){const b=a($);b.isIPV6===!0?$=`[${b.escapedHost}]`:$=d.host}g.push($)}return(typeof d.port=="number"||typeof d.port=="string")&&(g.push(":"),g.push(String(d.port))),g.length?g.join(""):void 0}return $r={nonSimpleDomain:r,recomposeAuthority:h,normalizeComponentEncoding:c,removeDotSegments:u,isIPv4:t,isUUID:e,normalizeIPv6:a,stringArrayToHexStripped:n},$r}var br,Ts;function nl(){if(Ts)return br;Ts=1;const{isUUID:e}=oi(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,n=["http","https","ws","wss","urn","urn:uuid"];function r(y){return n.indexOf(y)!==-1}function o(y){return y.secure===!0?!0:y.secure===!1?!1:y.scheme?y.scheme.length===3&&(y.scheme[0]==="w"||y.scheme[0]==="W")&&(y.scheme[1]==="s"||y.scheme[1]==="S")&&(y.scheme[2]==="s"||y.scheme[2]==="S"):!1}function s(y){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y}function i(y){const w=String(y.scheme).toLowerCase()==="https";return(y.port===(w?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y}function a(y){return y.secure=o(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y}function l(y){if((y.port===(o(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){const[w,C]=y.resourceName.split("?");y.path=w&&w!=="/"?w:void 0,y.query=C,y.resourceName=void 0}return y.fragment=void 0,y}function u(y,w){if(!y.path)return y.error="URN can not be parsed",y;const C=y.path.match(t);if(C){const O=w.scheme||y.scheme||"urn";y.nid=C[1].toLowerCase(),y.nss=C[2];const T=`${O}:${w.nid||y.nid}`,q=_(T);y.path=void 0,q&&(y=q.parse(y,w))}else y.error=y.error||"URN can not be parsed.";return y}function c(y,w){if(y.nid===void 0)throw new Error("URN without nid cannot be serialized");const C=w.scheme||y.scheme||"urn",O=y.nid.toLowerCase(),T=`${C}:${w.nid||O}`,q=_(T);q&&(y=q.serialize(y,w));const P=y,A=y.nss;return P.path=`${O||w.nid}:${A}`,w.skipEscape=!0,P}function h(y,w){const C=y;return C.uuid=C.nss,C.nss=void 0,!w.tolerant&&(!C.uuid||!e(C.uuid))&&(C.error=C.error||"UUID is not valid."),C}function d(y){const w=y;return w.nss=(y.uuid||"").toLowerCase(),w}const g={scheme:"http",domainHost:!0,parse:s,serialize:i},$={scheme:"https",domainHost:g.domainHost,parse:s,serialize:i},b={scheme:"ws",domainHost:!0,parse:a,serialize:l},m={scheme:"wss",domainHost:b.domainHost,parse:b.parse,serialize:b.serialize},v={http:g,https:$,ws:b,wss:m,urn:{scheme:"urn",parse:u,serialize:c,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:h,serialize:d,skipNormalize:!0}};Object.setPrototypeOf(v,null);function _(y){return y&&(v[y]||v[y.toLowerCase()])||void 0}return br={wsIsSecure:o,SCHEMES:v,isValidSchemeName:r,getSchemeHandler:_},br}var xs;function rl(){if(xs)return Pt.exports;xs=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:n,normalizeComponentEncoding:r,isIPv4:o,nonSimpleDomain:s}=oi(),{SCHEMES:i,getSchemeHandler:a}=nl();function l(m,p){return typeof m=="string"?m=d($(m,p),p):typeof m=="object"&&(m=$(d(m,p),p)),m}function u(m,p,f){const v=f?Object.assign({scheme:"null"},f):{scheme:"null"},_=c($(m,v),$(p,v),v,!0);return v.skipEscape=!0,d(_,v)}function c(m,p,f,v){const _={};return v||(m=$(d(m,f),f),p=$(d(p,f),f)),f=f||{},!f.tolerant&&p.scheme?(_.scheme=p.scheme,_.userinfo=p.userinfo,_.host=p.host,_.port=p.port,_.path=t(p.path||""),_.query=p.query):(p.userinfo!==void 0||p.host!==void 0||p.port!==void 0?(_.userinfo=p.userinfo,_.host=p.host,_.port=p.port,_.path=t(p.path||""),_.query=p.query):(p.path?(p.path[0]==="/"?_.path=t(p.path):((m.userinfo!==void 0||m.host!==void 0||m.port!==void 0)&&!m.path?_.path="/"+p.path:m.path?_.path=m.path.slice(0,m.path.lastIndexOf("/")+1)+p.path:_.path=p.path,_.path=t(_.path)),_.query=p.query):(_.path=m.path,p.query!==void 0?_.query=p.query:_.query=m.query),_.userinfo=m.userinfo,_.host=m.host,_.port=m.port),_.scheme=m.scheme),_.fragment=p.fragment,_}function h(m,p,f){return typeof m=="string"?(m=unescape(m),m=d(r($(m,f),!0),{...f,skipEscape:!0})):typeof m=="object"&&(m=d(r(m,!0),{...f,skipEscape:!0})),typeof p=="string"?(p=unescape(p),p=d(r($(p,f),!0),{...f,skipEscape:!0})):typeof p=="object"&&(p=d(r(p,!0),{...f,skipEscape:!0})),m.toLowerCase()===p.toLowerCase()}function d(m,p){const f={host:m.host,scheme:m.scheme,userinfo:m.userinfo,port:m.port,path:m.path,query:m.query,nid:m.nid,nss:m.nss,uuid:m.uuid,fragment:m.fragment,reference:m.reference,resourceName:m.resourceName,secure:m.secure,error:""},v=Object.assign({},p),_=[],y=a(v.scheme||f.scheme);y&&y.serialize&&y.serialize(f,v),f.path!==void 0&&(v.skipEscape?f.path=unescape(f.path):(f.path=escape(f.path),f.scheme!==void 0&&(f.path=f.path.split("%3A").join(":")))),v.reference!=="suffix"&&f.scheme&&_.push(f.scheme,":");const w=n(f);if(w!==void 0&&(v.reference!=="suffix"&&_.push("//"),_.push(w),f.path&&f.path[0]!=="/"&&_.push("/")),f.path!==void 0){let C=f.path;!v.absolutePath&&(!y||!y.absolutePath)&&(C=t(C)),w===void 0&&C[0]==="/"&&C[1]==="/"&&(C="/%2F"+C.slice(2)),_.push(C)}return f.query!==void 0&&_.push("?",f.query),f.fragment!==void 0&&_.push("#",f.fragment),_.join("")}const g=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function $(m,p){const f=Object.assign({},p),v={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let _=!1;f.reference==="suffix"&&(f.scheme?m=f.scheme+":"+m:m="//"+m);const y=m.match(g);if(y){if(v.scheme=y[1],v.userinfo=y[3],v.host=y[4],v.port=parseInt(y[5],10),v.path=y[6]||"",v.query=y[7],v.fragment=y[8],isNaN(v.port)&&(v.port=y[5]),v.host)if(o(v.host)===!1){const O=e(v.host);v.host=O.host.toLowerCase(),_=O.isIPV6}else _=!0;v.scheme===void 0&&v.userinfo===void 0&&v.host===void 0&&v.port===void 0&&v.query===void 0&&!v.path?v.reference="same-document":v.scheme===void 0?v.reference="relative":v.fragment===void 0?v.reference="absolute":v.reference="uri",f.reference&&f.reference!=="suffix"&&f.reference!==v.reference&&(v.error=v.error||"URI is not a "+f.reference+" reference.");const w=a(f.scheme||v.scheme);if(!f.unicodeSupport&&(!w||!w.unicodeSupport)&&v.host&&(f.domainHost||w&&w.domainHost)&&_===!1&&s(v.host))try{v.host=URL.domainToASCII(v.host.toLowerCase())}catch(C){v.error=v.error||"Host's domain name can not be converted to ASCII: "+C}(!w||w&&!w.skipNormalize)&&(m.indexOf("%")!==-1&&(v.scheme!==void 0&&(v.scheme=unescape(v.scheme)),v.host!==void 0&&(v.host=unescape(v.host))),v.path&&(v.path=escape(unescape(v.path))),v.fragment&&(v.fragment=encodeURI(decodeURIComponent(v.fragment)))),w&&w.parse&&w.parse(v,f)}else v.error=v.error||"URI can not be parsed.";return v}const b={SCHEMES:i,normalize:l,resolve:u,resolveComponent:c,equal:h,serialize:d,parse:$};return Pt.exports=b,Pt.exports.default=b,Pt.exports.fastUri=b,Pt.exports}var qs;function sl(){if(qs)return Xt;qs=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=rl();return e.code='require("ajv/dist/runtime/uri").default',Xt.default=e,Xt}var Ds;function ol(){return Ds||(Ds=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=tr();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=ie();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Mr(),o=nr(),s=ni(),i=Vr(),a=ie(),l=er(),u=Gn(),c=de(),h=tl,d=sl(),g=(F,R)=>new RegExp(F,R);g.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},f=200;function v(F){var R,D,L,S,E,x,B,J,fe,ae,k,I,V,z,G,re,_e,Te,Oe,Re,we,ut,Le,or,ir;const St=F.strict,ar=(R=F.code)===null||R===void 0?void 0:R.optimize,Hr=ar===!0||ar===void 0?1:ar||0,Wr=(L=(D=F.code)===null||D===void 0?void 0:D.regExp)!==null&&L!==void 0?L:g,Pi=(S=F.uriResolver)!==null&&S!==void 0?S:d.default;return{strictSchema:(x=(E=F.strictSchema)!==null&&E!==void 0?E:St)!==null&&x!==void 0?x:!0,strictNumbers:(J=(B=F.strictNumbers)!==null&&B!==void 0?B:St)!==null&&J!==void 0?J:!0,strictTypes:(ae=(fe=F.strictTypes)!==null&&fe!==void 0?fe:St)!==null&&ae!==void 0?ae:"log",strictTuples:(I=(k=F.strictTuples)!==null&&k!==void 0?k:St)!==null&&I!==void 0?I:"log",strictRequired:(z=(V=F.strictRequired)!==null&&V!==void 0?V:St)!==null&&z!==void 0?z:!1,code:F.code?{...F.code,optimize:Hr,regExp:Wr}:{optimize:Hr,regExp:Wr},loopRequired:(G=F.loopRequired)!==null&&G!==void 0?G:f,loopEnum:(re=F.loopEnum)!==null&&re!==void 0?re:f,meta:(_e=F.meta)!==null&&_e!==void 0?_e:!0,messages:(Te=F.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(Oe=F.inlineRefs)!==null&&Oe!==void 0?Oe:!0,schemaId:(Re=F.schemaId)!==null&&Re!==void 0?Re:"$id",addUsedSchema:(we=F.addUsedSchema)!==null&&we!==void 0?we:!0,validateSchema:(ut=F.validateSchema)!==null&&ut!==void 0?ut:!0,validateFormats:(Le=F.validateFormats)!==null&&Le!==void 0?Le:!0,unicodeRegExp:(or=F.unicodeRegExp)!==null&&or!==void 0?or:!0,int32range:(ir=F.int32range)!==null&&ir!==void 0?ir:!0,uriResolver:Pi}}class _{constructor(R={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,R=this.opts={...R,...v(R)};const{es5:D,lines:L}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:b,es5:D,lines:L}),this.logger=A(R.logger);const S=R.validateFormats;R.validateFormats=!1,this.RULES=(0,s.getRules)(),y.call(this,m,R,"NOT SUPPORTED"),y.call(this,p,R,"DEPRECATED","warn"),this._metaOpts=q.call(this),R.formats&&O.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),R.keywords&&T.call(this,R.keywords),typeof R.meta=="object"&&this.addMetaSchema(R.meta),C.call(this),R.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:R,meta:D,schemaId:L}=this.opts;let S=h;L==="id"&&(S={...h},S.id=S.$id,delete S.$id),D&&R&&this.addMetaSchema(S,S[L],!1)}defaultMeta(){const{meta:R,schemaId:D}=this.opts;return this.opts.defaultMeta=typeof R=="object"?R[D]||R:void 0}validate(R,D){let L;if(typeof R=="string"){if(L=this.getSchema(R),!L)throw new Error(`no schema with key or ref "${R}"`)}else L=this.compile(R);const S=L(D);return"$async"in L||(this.errors=L.errors),S}compile(R,D){const L=this._addSchema(R,D);return L.validate||this._compileSchemaEnv(L)}compileAsync(R,D){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return S.call(this,R,D);async function S(ae,k){await E.call(this,ae.$schema);const I=this._addSchema(ae,k);return I.validate||x.call(this,I)}async function E(ae){ae&&!this.getSchema(ae)&&await S.call(this,{$ref:ae},!0)}async function x(ae){try{return this._compileSchemaEnv(ae)}catch(k){if(!(k instanceof o.default))throw k;return B.call(this,k),await J.call(this,k.missingSchema),x.call(this,ae)}}function B({missingSchema:ae,missingRef:k}){if(this.refs[ae])throw new Error(`AnySchema ${ae} is loaded but ${k} cannot be resolved`)}async function J(ae){const k=await fe.call(this,ae);this.refs[ae]||await E.call(this,k.$schema),this.refs[ae]||this.addSchema(k,ae,D)}async function fe(ae){const k=this._loading[ae];if(k)return k;try{return await(this._loading[ae]=L(ae))}finally{delete this._loading[ae]}}}addSchema(R,D,L,S=this.opts.validateSchema){if(Array.isArray(R)){for(const x of R)this.addSchema(x,void 0,L,S);return this}let E;if(typeof R=="object"){const{schemaId:x}=this.opts;if(E=R[x],E!==void 0&&typeof E!="string")throw new Error(`schema ${x} must be string`)}return D=(0,l.normalizeId)(D||E),this._checkUnique(D),this.schemas[D]=this._addSchema(R,L,D,S,!0),this}addMetaSchema(R,D,L=this.opts.validateSchema){return this.addSchema(R,D,!0,L),this}validateSchema(R,D){if(typeof R=="boolean")return!0;let L;if(L=R.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(L,R);if(!S&&D){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return S}getSchema(R){let D;for(;typeof(D=w.call(this,R))=="string";)R=D;if(D===void 0){const{schemaId:L}=this.opts,S=new i.SchemaEnv({schema:{},schemaId:L});if(D=i.resolveSchema.call(this,S,R),!D)return;this.refs[R]=D}return D.validate||this._compileSchemaEnv(D)}removeSchema(R){if(R instanceof RegExp)return this._removeAllSchemas(this.schemas,R),this._removeAllSchemas(this.refs,R),this;switch(typeof R){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const D=w.call(this,R);return typeof D=="object"&&this._cache.delete(D.schema),delete this.schemas[R],delete this.refs[R],this}case"object":{const D=R;this._cache.delete(D);let L=R[this.opts.schemaId];return L&&(L=(0,l.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(R){for(const D of R)this.addKeyword(D);return this}addKeyword(R,D){let L;if(typeof R=="string")L=R,typeof D=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),D.keyword=L);else if(typeof R=="object"&&D===void 0){if(D=R,L=D.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K.call(this,L,D),!D)return(0,c.eachItem)(L,E=>H.call(this,E)),this;ge.call(this,D);const S={...D,type:(0,u.getJSONTypes)(D.type),schemaType:(0,u.getJSONTypes)(D.schemaType)};return(0,c.eachItem)(L,S.type.length===0?E=>H.call(this,E,S):E=>S.type.forEach(x=>H.call(this,E,S,x))),this}getKeyword(R){const D=this.RULES.all[R];return typeof D=="object"?D.definition:!!D}removeKeyword(R){const{RULES:D}=this;delete D.keywords[R],delete D.all[R];for(const L of D.rules){const S=L.rules.findIndex(E=>E.keyword===R);S>=0&&L.rules.splice(S,1)}return this}addFormat(R,D){return typeof D=="string"&&(D=new RegExp(D)),this.formats[R]=D,this}errorsText(R=this.errors,{separator:D=", ",dataVar:L="data"}={}){return!R||R.length===0?"No errors":R.map(S=>`${L}${S.instancePath} ${S.message}`).reduce((S,E)=>S+D+E)}$dataMetaSchema(R,D){const L=this.RULES.all;R=JSON.parse(JSON.stringify(R));for(const S of D){const E=S.split("/").slice(1);let x=R;for(const B of E)x=x[B];for(const B in L){const J=L[B];if(typeof J!="object")continue;const{$data:fe}=J.definition,ae=x[B];fe&&ae&&(x[B]=ue(ae))}}return R}_removeAllSchemas(R,D){for(const L in R){const S=R[L];(!D||D.test(L))&&(typeof S=="string"?delete R[L]:S&&!S.meta&&(this._cache.delete(S.schema),delete R[L]))}}_addSchema(R,D,L,S=this.opts.validateSchema,E=this.opts.addUsedSchema){let x;const{schemaId:B}=this.opts;if(typeof R=="object")x=R[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof R!="boolean")throw new Error("schema must be object or boolean")}let J=this._cache.get(R);if(J!==void 0)return J;L=(0,l.normalizeId)(x||L);const fe=l.getSchemaRefs.call(this,R,L);return J=new i.SchemaEnv({schema:R,schemaId:B,meta:D,baseId:L,localRefs:fe}),this._cache.set(J.schema,J),E&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=J),S&&this.validateSchema(R,!0),J}_checkUnique(R){if(this.schemas[R]||this.refs[R])throw new Error(`schema with key or id "${R}" already exists`)}_compileSchemaEnv(R){if(R.meta?this._compileMetaSchema(R):i.compileSchema.call(this,R),!R.validate)throw new Error("ajv implementation error");return R.validate}_compileMetaSchema(R){const D=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,R)}finally{this.opts=D}}}_.ValidationError=r.default,_.MissingRefError=o.default,e.default=_;function y(F,R,D,L="error"){for(const S in F){const E=S;E in R&&this.logger[L](`${D}: option ${S}. ${F[E]}`)}}function w(F){return F=(0,l.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const R in F)this.addSchema(F[R],R)}function O(){for(const F in this.opts.formats){const R=this.opts.formats[F];R&&this.addFormat(F,R)}}function T(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const R in F){const D=F[R];D.keyword||(D.keyword=R),this.addKeyword(D)}}function q(){const F={...this.opts};for(const R of $)delete F[R];return F}const P={log(){},warn(){},error(){}};function A(F){if(F===!1)return P;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const U=/^[a-z_$][a-z0-9_$:-]*$/i;function K(F,R){const{RULES:D}=this;if((0,c.eachItem)(F,L=>{if(D.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!U.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!R&&R.$data&&!("code"in R||"validate"in R))throw new Error('$data keyword must have "code" or "validate" function')}function H(F,R,D){var L;const S=R?.post;if(D&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let x=S?E.post:E.rules.find(({type:J})=>J===D);if(x||(x={type:D,rules:[]},E.rules.push(x)),E.keywords[F]=!0,!R)return;const B={keyword:F,definition:{...R,type:(0,u.getJSONTypes)(R.type),schemaType:(0,u.getJSONTypes)(R.schemaType)}};R.before?te.call(this,x,B,R.before):x.rules.push(B),E.all[F]=B,(L=R.implements)===null||L===void 0||L.forEach(J=>this.addKeyword(J))}function te(F,R,D){const L=F.rules.findIndex(S=>S.keyword===D);L>=0?F.rules.splice(L,0,R):(F.rules.push(R),this.logger.warn(`rule ${D} is not defined`))}function ge(F){let{metaSchema:R}=F;R!==void 0&&(F.$data&&this.opts.$data&&(R=ue(R)),F.validateSchema=this.compile(R,!0))}const ne={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(F){return{anyOf:[F,ne]}}})(fr)),fr}var Yt={},Zt={},en={},Ms;function il(){if(Ms)return en;Ms=1,Object.defineProperty(en,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return en.default=e,en}var Xe={},Vs;function al(){if(Vs)return Xe;Vs=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.callRef=Xe.getValidate=void 0;const e=nr(),t=De(),n=ie(),r=nt(),o=Vr(),s=de(),i={keyword:"$ref",schemaType:"string",code(u){const{gen:c,schema:h,it:d}=u,{baseId:g,schemaEnv:$,validateName:b,opts:m,self:p}=d,{root:f}=$;if((h==="#"||h==="#/")&&g===f.baseId)return _();const v=o.resolveRef.call(p,f,g,h);if(v===void 0)throw new e.default(d.opts.uriResolver,g,h);if(v instanceof o.SchemaEnv)return y(v);return w(v);function _(){if($===f)return l(u,b,$,$.$async);const C=c.scopeValue("root",{ref:f});return l(u,(0,n._)`${C}.validate`,f,f.$async)}function y(C){const O=a(u,C);l(u,O,C,C.$async)}function w(C){const O=c.scopeValue("schema",m.code.source===!0?{ref:C,code:(0,n.stringify)(C)}:{ref:C}),T=c.name("valid"),q=u.subschema({schema:C,dataTypes:[],schemaPath:n.nil,topSchemaRef:O,errSchemaPath:h},T);u.mergeEvaluated(q),u.ok(T)}}};function a(u,c){const{gen:h}=u;return c.validate?h.scopeValue("validate",{ref:c.validate}):(0,n._)`${h.scopeValue("wrapper",{ref:c})}.validate`}Xe.getValidate=a;function l(u,c,h,d){const{gen:g,it:$}=u,{allErrors:b,schemaEnv:m,opts:p}=$,f=p.passContext?r.default.this:n.nil;d?v():_();function v(){if(!m.$async)throw new Error("async schema referenced by sync schema");const C=g.let("valid");g.try(()=>{g.code((0,n._)`await ${(0,t.callValidateCode)(u,c,f)}`),w(c),b||g.assign(C,!0)},O=>{g.if((0,n._)`!(${O} instanceof ${$.ValidationError})`,()=>g.throw(O)),y(O),b||g.assign(C,!1)}),u.ok(C)}function _(){u.result((0,t.callValidateCode)(u,c,f),()=>w(c),()=>y(c))}function y(C){const O=(0,n._)`${C}.errors`;g.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${O} : ${r.default.vErrors}.concat(${O})`),g.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function w(C){var O;if(!$.opts.unevaluated)return;const T=(O=h?.validate)===null||O===void 0?void 0:O.evaluated;if($.props!==!0)if(T&&!T.dynamicProps)T.props!==void 0&&($.props=s.mergeEvaluated.props(g,T.props,$.props));else{const q=g.var("props",(0,n._)`${C}.evaluated.props`);$.props=s.mergeEvaluated.props(g,q,$.props,n.Name)}if($.items!==!0)if(T&&!T.dynamicItems)T.items!==void 0&&($.items=s.mergeEvaluated.items(g,T.items,$.items));else{const q=g.var("items",(0,n._)`${C}.evaluated.items`);$.items=s.mergeEvaluated.items(g,q,$.items,n.Name)}}}return Xe.callRef=l,Xe.default=i,Xe}var Fs;function ll(){if(Fs)return Zt;Fs=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=il(),t=al(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Zt.default=n,Zt}var tn={},nn={},Us;function cl(){if(Us)return nn;Us=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=ie(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:i})=>(0,e.str)`must be ${n[s].okStr} ${i}`,params:({keyword:s,schemaCode:i})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${i}}`},o={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:i,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${n[i].fail} ${l} || isNaN(${a})`)}};return nn.default=o,nn}var rn={},Ks;function ul(){if(Ks)return rn;Ks=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=ie(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:o,data:s,schemaCode:i,it:a}=r,l=a.opts.multipleOfPrecision,u=o.let("res"),c=l?(0,e._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${l}`:(0,e._)`${u} !== parseInt(${u})`;r.fail$data((0,e._)`(${i} === 0 || (${u} = ${s}/${i}, ${c}))`)}};return rn.default=n,rn}var sn={},on={},zs;function dl(){if(zs)return on;zs=1,Object.defineProperty(on,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,o=0,s;for(;o<n;)r++,s=t.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=t.charCodeAt(o),(s&64512)===56320&&o++);return r}return on.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',on}var Hs;function fl(){if(Hs)return sn;Hs=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=ie(),t=de(),n=dl(),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:i}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:i,data:a,schemaCode:l,it:u}=s,c=i==="maxLength"?e.operators.GT:e.operators.LT,h=u.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${h} ${c} ${l}`)}};return sn.default=o,sn}var an={},Ws;function hl(){if(Ws)return an;Ws=1,Object.defineProperty(an,"__esModule",{value:!0});const e=De(),t=ie(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,t.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,t._)`{pattern: ${o}}`},code(o){const{data:s,$data:i,schema:a,schemaCode:l,it:u}=o,c=u.opts.unicodeRegExp?"u":"",h=i?(0,t._)`(new RegExp(${l}, ${c}))`:(0,e.usePattern)(o,a);o.fail$data((0,t._)`!${h}.test(${s})`)}};return an.default=r,an}var ln={},Bs;function ml(){if(Bs)return ln;Bs=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=ie(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:i}=r,a=o==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${i}`)}};return ln.default=n,ln}var cn={},Gs;function gl(){if(Gs)return cn;Gs=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=De(),t=ie(),n=de(),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:i,schema:a,schemaCode:l,data:u,$data:c,it:h}=s,{opts:d}=h;if(!c&&a.length===0)return;const g=a.length>=d.loopRequired;if(h.allErrors?$():b(),d.strictRequired){const f=s.parentSchema.properties,{definedProperties:v}=s.it;for(const _ of a)if(f?.[_]===void 0&&!v.has(_)){const y=h.schemaEnv.baseId+h.errSchemaPath,w=`required property "${_}" is not defined at "${y}" (strictRequired)`;(0,n.checkStrictMode)(h,w,h.opts.strictRequired)}}function $(){if(g||c)s.block$data(t.nil,m);else for(const f of a)(0,e.checkReportMissingProp)(s,f)}function b(){const f=i.let("missing");if(g||c){const v=i.let("valid",!0);s.block$data(v,()=>p(f,v)),s.ok(v)}else i.if((0,e.checkMissingProp)(s,a,f)),(0,e.reportMissingProp)(s,f),i.else()}function m(){i.forOf("prop",l,f=>{s.setParams({missingProperty:f}),i.if((0,e.noPropertyInData)(i,u,f,d.ownProperties),()=>s.error())})}function p(f,v){s.setParams({missingProperty:f}),i.forOf(f,l,()=>{i.assign(v,(0,e.propertyInData)(i,u,f,d.ownProperties)),i.if((0,t.not)(v),()=>{s.error(),i.break()})},t.nil)}}};return cn.default=o,cn}var un={},Js;function pl(){if(Js)return un;Js=1,Object.defineProperty(un,"__esModule",{value:!0});const e=ie(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:i}=r,a=o==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${i}`)}};return un.default=n,un}var dn={},fn={},Qs;function Fr(){if(Qs)return fn;Qs=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=si();return e.code='require("ajv/dist/runtime/equal").default',fn.default=e,fn}var Xs;function yl(){if(Xs)return dn;Xs=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=Gn(),t=ie(),n=de(),r=Fr(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${i} are identical)`,params:({params:{i,j:a}})=>(0,t._)`{i: ${i}, j: ${a}}`},code(i){const{gen:a,data:l,$data:u,schema:c,parentSchema:h,schemaCode:d,it:g}=i;if(!u&&!c)return;const $=a.let("valid"),b=h.items?(0,e.getSchemaTypes)(h.items):[];i.block$data($,m,(0,t._)`${d} === false`),i.ok($);function m(){const _=a.let("i",(0,t._)`${l}.length`),y=a.let("j");i.setParams({i:_,j:y}),a.assign($,!0),a.if((0,t._)`${_} > 1`,()=>(p()?f:v)(_,y))}function p(){return b.length>0&&!b.some(_=>_==="object"||_==="array")}function f(_,y){const w=a.name("item"),C=(0,e.checkDataTypes)(b,w,g.opts.strictNumbers,e.DataType.Wrong),O=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${_}--;`,()=>{a.let(w,(0,t._)`${l}[${_}]`),a.if(C,(0,t._)`continue`),b.length>1&&a.if((0,t._)`typeof ${w} == "string"`,(0,t._)`${w} += "_"`),a.if((0,t._)`typeof ${O}[${w}] == "number"`,()=>{a.assign(y,(0,t._)`${O}[${w}]`),i.error(),a.assign($,!1).break()}).code((0,t._)`${O}[${w}] = ${_}`)})}function v(_,y){const w=(0,n.useFunc)(a,r.default),C=a.name("outer");a.label(C).for((0,t._)`;${_}--;`,()=>a.for((0,t._)`${y} = ${_}; ${y}--;`,()=>a.if((0,t._)`${w}(${l}[${_}], ${l}[${y}])`,()=>{i.error(),a.assign($,!1).break(C)})))}}};return dn.default=s,dn}var hn={},Ys;function vl(){if(Ys)return hn;Ys=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=ie(),t=de(),n=Fr(),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:i,data:a,$data:l,schemaCode:u,schema:c}=s;l||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(i,n.default)}(${a}, ${u})`):s.fail((0,e._)`${c} !== ${a}`)}};return hn.default=o,hn}var mn={},Zs;function $l(){if(Zs)return mn;Zs=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=ie(),t=de(),n=Fr(),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:i,data:a,$data:l,schema:u,schemaCode:c,it:h}=s;if(!l&&u.length===0)throw new Error("enum must have non-empty array");const d=u.length>=h.opts.loopEnum;let g;const $=()=>g??(g=(0,t.useFunc)(i,n.default));let b;if(d||l)b=i.let("valid"),s.block$data(b,m);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const f=i.const("vSchema",c);b=(0,e.or)(...u.map((v,_)=>p(f,_)))}s.pass(b);function m(){i.assign(b,!1),i.forOf("v",c,f=>i.if((0,e._)`${$()}(${a}, ${f})`,()=>i.assign(b,!0).break()))}function p(f,v){const _=u[v];return typeof _=="object"&&_!==null?(0,e._)`${$()}(${a}, ${f}[${v}])`:(0,e._)`${a} === ${_}`}}};return mn.default=o,mn}var eo;function bl(){if(eo)return tn;eo=1,Object.defineProperty(tn,"__esModule",{value:!0});const e=cl(),t=ul(),n=fl(),r=hl(),o=ml(),s=gl(),i=pl(),a=yl(),l=vl(),u=$l(),c=[e.default,t.default,n.default,r.default,o.default,s.default,i.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,u.default];return tn.default=c,tn}var gn={},mt={},to;function ii(){if(to)return mt;to=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.validateAdditionalItems=void 0;const e=ie(),t=de(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:i,it:a}=s,{items:l}=i;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(s,l)}};function o(s,i){const{gen:a,schema:l,data:u,keyword:c,it:h}=s;h.items=!0;const d=a.const("len",(0,e._)`${u}.length`);if(l===!1)s.setParams({len:i.length}),s.pass((0,e._)`${d} <= ${i.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(h,l)){const $=a.var("valid",(0,e._)`${d} <= ${i.length}`);a.if((0,e.not)($),()=>g($)),s.ok($)}function g($){a.forRange("i",i.length,d,b=>{s.subschema({keyword:c,dataProp:b,dataPropType:t.Type.Num},$),h.allErrors||a.if((0,e.not)($),()=>a.break())})}}return mt.validateAdditionalItems=o,mt.default=r,mt}var pn={},gt={},no;function ai(){if(no)return gt;no=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.validateTuple=void 0;const e=ie(),t=de(),n=De(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:i,it:a}=s;if(Array.isArray(i))return o(s,"additionalItems",i);a.items=!0,!(0,t.alwaysValidSchema)(a,i)&&s.ok((0,n.validateArray)(s))}};function o(s,i,a=s.schema){const{gen:l,parentSchema:u,data:c,keyword:h,it:d}=s;b(u),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(l,a.length,d.items));const g=l.name("valid"),$=l.const("len",(0,e._)`${c}.length`);a.forEach((m,p)=>{(0,t.alwaysValidSchema)(d,m)||(l.if((0,e._)`${$} > ${p}`,()=>s.subschema({keyword:h,schemaProp:p,dataProp:p},g)),s.ok(g))});function b(m){const{opts:p,errSchemaPath:f}=d,v=a.length,_=v===m.minItems&&(v===m.maxItems||m[i]===!1);if(p.strictTuples&&!_){const y=`"${h}" is ${v}-tuple, but minItems or maxItems/${i} are not specified or different at path "${f}"`;(0,t.checkStrictMode)(d,y,p.strictTuples)}}}return gt.validateTuple=o,gt.default=r,gt}var ro;function _l(){if(ro)return pn;ro=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=ai(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return pn.default=t,pn}var yn={},so;function wl(){if(so)return yn;so=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=ie(),t=de(),n=De(),r=ii(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{schema:a,parentSchema:l,it:u}=i,{prefixItems:c}=l;u.items=!0,!(0,t.alwaysValidSchema)(u,a)&&(c?(0,r.validateAdditionalItems)(i,c):i.ok((0,n.validateArray)(i)))}};return yn.default=s,yn}var vn={},oo;function Sl(){if(oo)return vn;oo=1,Object.defineProperty(vn,"__esModule",{value:!0});const e=ie(),t=de(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:s}})=>s===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${s} valid item(s)`,params:({params:{min:o,max:s}})=>s===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${s}}`},code(o){const{gen:s,schema:i,parentSchema:a,data:l,it:u}=o;let c,h;const{minContains:d,maxContains:g}=a;u.opts.next?(c=d===void 0?1:d,h=g):c=1;const $=s.const("len",(0,e._)`${l}.length`);if(o.setParams({min:c,max:h}),h===void 0&&c===0){(0,t.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(h!==void 0&&c>h){(0,t.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,t.alwaysValidSchema)(u,i)){let v=(0,e._)`${$} >= ${c}`;h!==void 0&&(v=(0,e._)`${v} && ${$} <= ${h}`),o.pass(v);return}u.items=!0;const b=s.name("valid");h===void 0&&c===1?p(b,()=>s.if(b,()=>s.break())):c===0?(s.let(b,!0),h!==void 0&&s.if((0,e._)`${l}.length > 0`,m)):(s.let(b,!1),m()),o.result(b,()=>o.reset());function m(){const v=s.name("_valid"),_=s.let("count",0);p(v,()=>s.if(v,()=>f(_)))}function p(v,_){s.forRange("i",0,$,y=>{o.subschema({keyword:"contains",dataProp:y,dataPropType:t.Type.Num,compositeRule:!0},v),_()})}function f(v){s.code((0,e._)`${v}++`),h===void 0?s.if((0,e._)`${v} >= ${c}`,()=>s.assign(b,!0).break()):(s.if((0,e._)`${v} > ${h}`,()=>s.assign(b,!1).break()),c===1?s.assign(b,!0):s.if((0,e._)`${v} >= ${c}`,()=>s.assign(b,!0)))}}};return vn.default=r,vn}var _r={},io;function Cl(){return io||(io=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ie(),n=de(),r=De();e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const h=u===1?"property":"properties";return(0,t.str)`must have ${h} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:h}})=>(0,t._)`{property: ${l},
    missingProperty: ${h},
    depsCount: ${u},
    deps: ${c}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=s(l);i(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const h in l){if(h==="__proto__")continue;const d=Array.isArray(l[h])?u:c;d[h]=l[h]}return[u,c]}function i(l,u=l.schema){const{gen:c,data:h,it:d}=l;if(Object.keys(u).length===0)return;const g=c.let("missing");for(const $ in u){const b=u[$];if(b.length===0)continue;const m=(0,r.propertyInData)(c,h,$,d.opts.ownProperties);l.setParams({property:$,depsCount:b.length,deps:b.join(", ")}),d.allErrors?c.if(m,()=>{for(const p of b)(0,r.checkReportMissingProp)(l,p)}):(c.if((0,t._)`${m} && (${(0,r.checkMissingProp)(l,b,g)})`),(0,r.reportMissingProp)(l,g),c.else())}}e.validatePropertyDeps=i;function a(l,u=l.schema){const{gen:c,data:h,keyword:d,it:g}=l,$=c.name("valid");for(const b in u)(0,n.alwaysValidSchema)(g,u[b])||(c.if((0,r.propertyInData)(c,h,b,g.opts.ownProperties),()=>{const m=l.subschema({keyword:d,schemaProp:b},$);l.mergeValidEvaluated(m,$)},()=>c.var($,!0)),l.ok($))}e.validateSchemaDeps=a,e.default=o})(_r)),_r}var $n={},ao;function El(){if(ao)return $n;ao=1,Object.defineProperty($n,"__esModule",{value:!0});const e=ie(),t=de(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:s,schema:i,data:a,it:l}=o;if((0,t.alwaysValidSchema)(l,i))return;const u=s.name("valid");s.forIn("key",a,c=>{o.setParams({propertyName:c}),o.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},u),s.if((0,e.not)(u),()=>{o.error(!0),l.allErrors||s.break()})}),o.ok(u)}};return $n.default=r,$n}var bn={},lo;function li(){if(lo)return bn;lo=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=De(),t=ie(),n=nt(),r=de(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:i})=>(0,t._)`{additionalProperty: ${i.additionalProperty}}`},code(i){const{gen:a,schema:l,parentSchema:u,data:c,errsCount:h,it:d}=i;if(!h)throw new Error("ajv implementation error");const{allErrors:g,opts:$}=d;if(d.props=!0,$.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,l))return;const b=(0,e.allSchemaProperties)(u.properties),m=(0,e.allSchemaProperties)(u.patternProperties);p(),i.ok((0,t._)`${h} === ${n.default.errors}`);function p(){a.forIn("key",c,w=>{!b.length&&!m.length?_(w):a.if(f(w),()=>_(w))})}function f(w){let C;if(b.length>8){const O=(0,r.schemaRefOrVal)(d,u.properties,"properties");C=(0,e.isOwnProperty)(a,O,w)}else b.length?C=(0,t.or)(...b.map(O=>(0,t._)`${w} === ${O}`)):C=t.nil;return m.length&&(C=(0,t.or)(C,...m.map(O=>(0,t._)`${(0,e.usePattern)(i,O)}.test(${w})`))),(0,t.not)(C)}function v(w){a.code((0,t._)`delete ${c}[${w}]`)}function _(w){if($.removeAdditional==="all"||$.removeAdditional&&l===!1){v(w);return}if(l===!1){i.setParams({additionalProperty:w}),i.error(),g||a.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(d,l)){const C=a.name("valid");$.removeAdditional==="failing"?(y(w,C,!1),a.if((0,t.not)(C),()=>{i.reset(),v(w)})):(y(w,C),g||a.if((0,t.not)(C),()=>a.break()))}}function y(w,C,O){const T={keyword:"additionalProperties",dataProp:w,dataPropType:r.Type.Str};O===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),i.subschema(T,C)}}};return bn.default=s,bn}var _n={},co;function Pl(){if(co)return _n;co=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=tr(),t=De(),n=de(),r=li(),o={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:i,schema:a,parentSchema:l,data:u,it:c}=s;c.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const h=(0,t.allSchemaProperties)(a);for(const m of h)c.definedProperties.add(m);c.opts.unevaluated&&h.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(i,(0,n.toHash)(h),c.props));const d=h.filter(m=>!(0,n.alwaysValidSchema)(c,a[m]));if(d.length===0)return;const g=i.name("valid");for(const m of d)$(m)?b(m):(i.if((0,t.propertyInData)(i,u,m,c.opts.ownProperties)),b(m),c.allErrors||i.else().var(g,!0),i.endIf()),s.it.definedProperties.add(m),s.ok(g);function $(m){return c.opts.useDefaults&&!c.compositeRule&&a[m].default!==void 0}function b(m){s.subschema({keyword:"properties",schemaProp:m,dataProp:m},g)}}};return _n.default=o,_n}var wn={},uo;function kl(){if(uo)return wn;uo=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=De(),t=ie(),n=de(),r=de(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:i,schema:a,data:l,parentSchema:u,it:c}=s,{opts:h}=c,d=(0,e.allSchemaProperties)(a),g=d.filter(_=>(0,n.alwaysValidSchema)(c,a[_]));if(d.length===0||g.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const $=h.strictSchema&&!h.allowMatchingProperties&&u.properties,b=i.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(i,c.props));const{props:m}=c;p();function p(){for(const _ of d)$&&f(_),c.allErrors?v(_):(i.var(b,!0),v(_),i.if(b))}function f(_){for(const y in $)new RegExp(_).test(y)&&(0,n.checkStrictMode)(c,`property ${y} matches pattern ${_} (use allowMatchingProperties)`)}function v(_){i.forIn("key",l,y=>{i.if((0,t._)`${(0,e.usePattern)(s,_)}.test(${y})`,()=>{const w=g.includes(_);w||s.subschema({keyword:"patternProperties",schemaProp:_,dataProp:y,dataPropType:r.Type.Str},b),c.opts.unevaluated&&m!==!0?i.assign((0,t._)`${m}[${y}]`,!0):!w&&!c.allErrors&&i.if((0,t.not)(b),()=>i.break())})})}}};return wn.default=o,wn}var Sn={},fo;function Ol(){if(fo)return Sn;fo=1,Object.defineProperty(Sn,"__esModule",{value:!0});const e=de(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:o,it:s}=n;if((0,e.alwaysValidSchema)(s,o)){n.fail();return}const i=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),n.failResult(i,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return Sn.default=t,Sn}var Cn={},ho;function Rl(){if(ho)return Cn;ho=1,Object.defineProperty(Cn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:De().validateUnion,error:{message:"must match a schema in anyOf"}};return Cn.default=t,Cn}var En={},mo;function Nl(){if(mo)return En;mo=1,Object.defineProperty(En,"__esModule",{value:!0});const e=ie(),t=de(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:s,schema:i,parentSchema:a,it:l}=o;if(!Array.isArray(i))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const u=i,c=s.let("valid",!1),h=s.let("passing",null),d=s.name("_valid");o.setParams({passing:h}),s.block(g),o.result(c,()=>o.reset(),()=>o.error(!0));function g(){u.forEach(($,b)=>{let m;(0,t.alwaysValidSchema)(l,$)?s.var(d,!0):m=o.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},d),b>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(h,(0,e._)`[${h}, ${b}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(h,b),m&&o.mergeEvaluated(m,e.Name)})})}}};return En.default=r,En}var Pn={},go;function Il(){if(go)return Pn;go=1,Object.defineProperty(Pn,"__esModule",{value:!0});const e=de(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:o,it:s}=n;if(!Array.isArray(o))throw new Error("ajv implementation error");const i=r.name("valid");o.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const u=n.subschema({keyword:"allOf",schemaProp:l},i);n.ok(i),n.mergeEvaluated(u)})}};return Pn.default=t,Pn}var kn={},po;function Ll(){if(po)return kn;po=1,Object.defineProperty(kn,"__esModule",{value:!0});const e=ie(),t=de(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:i,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const u=o(l,"then"),c=o(l,"else");if(!u&&!c)return;const h=i.let("valid",!0),d=i.name("_valid");if(g(),s.reset(),u&&c){const b=i.let("ifClause");s.setParams({ifClause:b}),i.if(d,$("then",b),$("else",b))}else u?i.if(d,$("then")):i.if((0,e.not)(d),$("else"));s.pass(h,()=>s.error(!0));function g(){const b=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(b)}function $(b,m){return()=>{const p=s.subschema({keyword:b},d);i.assign(h,d),s.mergeValidEvaluated(p,h),m?i.assign(m,(0,e._)`${b}`):s.setParams({ifClause:b})}}}};function o(s,i){const a=s.schema[i];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return kn.default=r,kn}var On={},yo;function Al(){if(yo)return On;yo=1,Object.defineProperty(On,"__esModule",{value:!0});const e=de(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:o}){r.if===void 0&&(0,e.checkStrictMode)(o,`"${n}" without "if" is ignored`)}};return On.default=t,On}var vo;function jl(){if(vo)return gn;vo=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=ii(),t=_l(),n=ai(),r=wl(),o=Sl(),s=Cl(),i=El(),a=li(),l=Pl(),u=kl(),c=Ol(),h=Rl(),d=Nl(),g=Il(),$=Ll(),b=Al();function m(p=!1){const f=[c.default,h.default,d.default,g.default,$.default,b.default,i.default,a.default,s.default,l.default,u.default];return p?f.push(t.default,r.default):f.push(e.default,n.default),f.push(o.default),f}return gn.default=m,gn}var Rn={},Nn={},$o;function Tl(){if($o)return Nn;$o=1,Object.defineProperty(Nn,"__esModule",{value:!0});const e=ie(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,o){const{gen:s,data:i,$data:a,schema:l,schemaCode:u,it:c}=r,{opts:h,errSchemaPath:d,schemaEnv:g,self:$}=c;if(!h.validateFormats)return;a?b():m();function b(){const p=s.scopeValue("formats",{ref:$.formats,code:h.code.formats}),f=s.const("fDef",(0,e._)`${p}[${u}]`),v=s.let("fType"),_=s.let("format");s.if((0,e._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>s.assign(v,(0,e._)`${f}.type || "string"`).assign(_,(0,e._)`${f}.validate`),()=>s.assign(v,(0,e._)`"string"`).assign(_,f)),r.fail$data((0,e.or)(y(),w()));function y(){return h.strictSchema===!1?e.nil:(0,e._)`${u} && !${_}`}function w(){const C=g.$async?(0,e._)`(${f}.async ? await ${_}(${i}) : ${_}(${i}))`:(0,e._)`${_}(${i})`,O=(0,e._)`(typeof ${_} == "function" ? ${C} : ${_}.test(${i}))`;return(0,e._)`${_} && ${_} !== true && ${v} === ${o} && !${O}`}}function m(){const p=$.formats[l];if(!p){y();return}if(p===!0)return;const[f,v,_]=w(p);f===o&&r.pass(C());function y(){if(h.strictSchema===!1){$.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${l}" ignored in schema at path "${d}"`}}function w(O){const T=O instanceof RegExp?(0,e.regexpCode)(O):h.code.formats?(0,e._)`${h.code.formats}${(0,e.getProperty)(l)}`:void 0,q=s.scopeValue("formats",{key:l,ref:O,code:T});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,e._)`${q}.validate`]:["string",O,q]}function C(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!g.$async)throw new Error("async format in sync schema");return(0,e._)`await ${_}(${i})`}return typeof v=="function"?(0,e._)`${_}(${i})`:(0,e._)`${_}.test(${i})`}}}};return Nn.default=n,Nn}var bo;function xl(){if(bo)return Rn;bo=1,Object.defineProperty(Rn,"__esModule",{value:!0});const t=[Tl().default];return Rn.default=t,Rn}var it={},_o;function ql(){return _o||(_o=1,Object.defineProperty(it,"__esModule",{value:!0}),it.contentVocabulary=it.metadataVocabulary=void 0,it.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],it.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),it}var wo;function Dl(){if(wo)return Yt;wo=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=ll(),t=bl(),n=jl(),r=xl(),o=ql(),s=[e.default,t.default,(0,n.default)(),r.default,o.metadataVocabulary,o.contentVocabulary];return Yt.default=s,Yt}var In={},kt={},So;function Ml(){if(So)return kt;So=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(kt.DiscrError=e={})),kt}var Co;function Vl(){if(Co)return In;Co=1,Object.defineProperty(In,"__esModule",{value:!0});const e=ie(),t=Ml(),n=Vr(),r=nr(),o=de(),i={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:u}})=>(0,e._)`{error: ${a}, tag: ${u}, tagValue: ${l}}`},code(a){const{gen:l,data:u,schema:c,parentSchema:h,it:d}=a,{oneOf:g}=h;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const $=c.propertyName;if(typeof $!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!g)throw new Error("discriminator: requires oneOf keyword");const b=l.let("valid",!1),m=l.const("tag",(0,e._)`${u}${(0,e.getProperty)($)}`);l.if((0,e._)`typeof ${m} == "string"`,()=>p(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:m,tagName:$})),a.ok(b);function p(){const _=v();l.if(!1);for(const y in _)l.elseIf((0,e._)`${m} === ${y}`),l.assign(b,f(_[y]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:m,tagName:$}),l.endIf()}function f(_){const y=l.name("valid"),w=a.subschema({keyword:"oneOf",schemaProp:_},y);return a.mergeEvaluated(w,e.Name),y}function v(){var _;const y={},w=O(h);let C=!0;for(let P=0;P<g.length;P++){let A=g[P];if(A?.$ref&&!(0,o.schemaHasRulesButRef)(A,d.self.RULES)){const K=A.$ref;if(A=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,K),A instanceof n.SchemaEnv&&(A=A.schema),A===void 0)throw new r.default(d.opts.uriResolver,d.baseId,K)}const U=(_=A?.properties)===null||_===void 0?void 0:_[$];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${$}"`);C=C&&(w||O(A)),T(U,P)}if(!C)throw new Error(`discriminator: "${$}" must be required`);return y;function O({required:P}){return Array.isArray(P)&&P.includes($)}function T(P,A){if(P.const)q(P.const,A);else if(P.enum)for(const U of P.enum)q(U,A);else throw new Error(`discriminator: "properties/${$}" must have "const" or "enum"`)}function q(P,A){if(typeof P!="string"||P in y)throw new Error(`discriminator: "${$}" values must be unique strings`);y[P]=A}}}};return In.default=i,In}const Fl="http://json-schema.org/draft-07/schema#",Ul="http://json-schema.org/draft-07/schema#",Kl="Core schema meta-schema",zl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Hl=["object","boolean"],Wl={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Bl={$schema:Fl,$id:Ul,title:Kl,definitions:zl,type:Hl,properties:Wl,default:!0};var Eo;function Gl(){return Eo||(Eo=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=ol(),r=Dl(),o=Vl(),s=Bl,i=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(s,i):s;this.addMetaSchema($,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=tr();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=ie();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var h=Mr();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var d=nr();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Bt,Bt.exports)),Bt.exports}var Jl=Gl();const Ql=Ka(Jl),Xl="http://json-schema.org/draft-07/schema#",Yl="object",Zl={title:{type:"string",description:"The title of the course."},description:{type:"string",description:"A short description of the course."},language:{type:"string",description:"The primary language of the course."},targetLanguage:{type:"string",description:"The language being taught in the course."},author:{type:"string",description:"The name of the course creator."},version:{type:"string",description:"Versioning for tracking updates to the course."},createdAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp when the course was created."},updatedAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp of the last course update."},tags:{type:"array",items:{type:"string"},description:"Keywords related to the course for searching and categorization."},lessons:{type:"array",items:{type:"object",properties:{title:{type:"string"},description:{type:"string"},cards:{type:"array",items:{oneOf:[{type:"object",properties:{class:{type:"string",enum:["vocab"]},qlang:{type:"string",enum:["default","target"]},vocab:{type:"object",additionalProperties:{type:"string"}}},required:["class","qlang","vocab"]},{type:"object",properties:{class:{type:"string",enum:["dynamic-vocab"]},qlang:{type:"string",enum:["default","target"]}},required:["class","qlang"]},{type:"object",properties:{class:{type:"string",enum:["multiple-choice"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answers:{type:"array",items:{type:"string"}},answer:{type:"string"}},required:["class","qlang","question","answers","answer"]},{type:"object",properties:{class:{type:"string",enum:["writing"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["writing-blocks"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"},options:{type:"array",items:{type:"string"}}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["blanks"]},qlang:{type:"string",enum:["default","target"]},alang:{type:"string",enum:["default","target"]},question:{type:"string"},words:{type:"array",items:{type:"object",minProperties:1,maxProperties:1,additionalProperties:{type:"boolean"}}}},required:["class","qlang","question","words"]}]}}},required:["title","cards"]}}},ec={$schema:Xl,type:Yl,properties:Zl};var tc=M('<div class=modal-bg><dialog class=confirm-dialog><h3></h3><footer><button class="cancel-button utf8-icon-close"></button><button class="next-button utf8-icon-tick">');const ci=Mt(),nc=e=>{const[t,n]=W(!1),[r,o]=W(()=>{}),[s,i]=W(""),a=(c,h)=>{i(c),o(()=>h),n(!0)},l=()=>{r()(),n(!1)},u=()=>{n(!1)};return N(ci.Provider,{value:{showConfirm:a},get children(){return[oe(()=>e.children),N(ce,{get when(){return t()},get children(){var c=tc(),h=c.firstChild,d=h.firstChild,g=d.nextSibling,$=g.firstChild,b=$.nextSibling;return j(d,s),$.$$click=u,b.$$click=l,Z(m=>{var p=t()?"flex":"none",f=t();return p!==m.e&&aa(c,"display",m.e=p),f!==m.t&&(h.open=m.t=f),m},{e:void 0,t:void 0}),c}})]}})},rr=()=>{const e=_t(ci);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e};le(["click"]);function rc(){const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}function Ur(){document.fullscreenElement&&document.exitFullscreen()}const Jn=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},Ft=async e=>{const t=ve(),n=t.getSourceLang(),r=t.getTargetLang();return e.alang&&e.alang===e.qlang?{q:n,a:r}:{q:e.qlang==="default"?n:r,a:e.alang??(e.qlang==="default"?r:n)}};var sc=M("<button id=action-button aria-label=action-button>");const Ut=e=>{const{t}=be(),[n,r]=W(!1);pe(()=>{e.isCorrect===null&&r(!1)});const o=()=>{n()?e.isCorrect===!1&&e.onReset?(r(!1),e.onReset()):e.onComplete():(e.onCheckAnswer(),r(!0))},s=i=>{e.isInputPresent&&e.isCorrect!==null&&(i.key==="Enter"||i.key===" "||i.key==="Spacebar")&&o()};return qo(()=>document.addEventListener("keydown",s)),Ke(()=>document.removeEventListener("keydown",s)),(()=>{var i=sc();return i.$$click=o,j(i,(()=>{var a=oe(()=>e.isCorrect===null);return()=>a()?t("check"):oe(()=>e.isCorrect===!0)()?t("correct_next"):t("incorrect_next")})()),Z(a=>{var l=e.isCorrect===null?"next-button":e.isCorrect===!0?"correct-next-button":"incorrect-next-button",u=!e.isInputPresent;return l!==a.e&&Pe(i,a.e=l),u!==a.t&&(i.disabled=a.t=u),a},{e:void 0,t:void 0}),i})()};le(["click"]);let jn;window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices(),jn=speechSynthesis.getVoices().find(e=>e.lang.startsWith("en")&&e.localService)});const oc={heb:{langTag:"en-GB",letters:{:"aleph",:"bet",:"gimmel",:"dalet",:"he",:"vav",:"zayin",:"chet",:"tet",:"yod",:"kaf",:"kaf",:"lamed",:"mem",:"mem",:"nun",:"nun",:"samekh",:"ayin",:"pe",:"pe",:"tsadi",:"tsadi",:"qof",:"resh",:"shin",:"tav"}},ang:{langTag:"en-GB",letters:{:"ash",:"thorn",:"eth",:"wynn",:"wynn",:"yogh"}}};function ui(e,t){if(!jn)return;if(!e||!t){console.warn("Missing letter or language code");return}const n=oc[t];if(!n){console.warn("Unsupported language code:",t);return}const r=e.toLocaleLowerCase(),o=n.letters[r];if(!o){console.warn(`Letter name not found for '${e}' in language '${t}'`);return}const s=new SpeechSynthesisUtterance(o);s.lang=n.langTag,s.rate=.75,jn&&(s.voice=jn),speechSynthesis.cancel(),speechSynthesis.speak(s),console.log(s)}var ic=M('<section class="card multiple-choice"><h3 class=question></h3><div class=options>'),ac=M("<p>Loading..."),lc=M("<h4>"),cc=M("<button>");const uc={class:"multiple-choice",question:"A Question",qlang:"default",answers:["An answer","Another answer"],answer:"An answer"},dc=e=>{const{t}=be(),[n]=Dt(()=>Ft(e.card)),[r,o]=W(null),[s,i]=W(!1),[a,l]=W(null),[u,c]=W(Jn(e.card.answers)),[h,d]=W(!1);pe(()=>{c(Jn(e.card.answers)),i(!1),o(null),l(null),d(!1)});const g=m=>{h()||(o(m),m.length===1&&ui(m,n().a))},$=()=>{o(null),l(null),i(!1),d(!1)},b=()=>{s()?(o(null),l(null),i(!1),d(!1)):(d(!0),r()===e.card.answer?(l(!0),e.onCorrect()):(l(!1),e.onIncorrect()),i(!0))};return N(ce,{get when(){return n()},get fallback(){return ac()},get children(){return[(()=>{var m=ic(),p=m.firstChild,f=p.nextSibling;return j(m,(()=>{var v=oe(()=>n().q!==n().q);return()=>v()&&(()=>{var _=lc();return j(_,()=>t("in_lang_how_do_you_say",{lang:t(n().a)})),Z(()=>X(_,"lang",n().q)),_})()})(),p),j(p,()=>e.card.question),j(f,N(et,{get each(){return u()},children:v=>(()=>{var _=cc();return _.$$click=()=>g(v),j(_,v),Z(y=>{var w=n().a,C=`multiple-choice-button ${r()===v?"selected":""} ${s()&&r()===v?a()?"correct":"incorrect":""}`,O=h()?!0:void 0,T=s()?a()?`${v} (${t("correct")})`:`${v} (${t("incorrect")})`:`${t("select")} ${v}`;return w!==y.e&&X(_,"lang",y.e=w),C!==y.t&&Pe(_,y.t=C),O!==y.a&&(_.disabled=y.a=O),T!==y.o&&X(_,"aria-label",y.o=T),y},{e:void 0,t:void 0,a:void 0,o:void 0}),_})()})),Z(()=>X(p,"lang",n().q)),m})(),N(Ut,{get isCorrect(){return a()},get isInputPresent(){return r()!==null},onCheckAnswer:b,get onComplete(){return e.onComplete},onReset:$})]}})};le(["click"]);const di=Mt(void 0),fc=e=>N(di.Provider,{get value(){return{config:e.config,isLoading:!1}},get children(){return e.children}}),Me=()=>{const e=_t(di);if(!e)throw new Error("useConfigContext must be used within ConfigProvider");return e};var hc=M('<section class="vocab-match card"><h3></h3><table><tbody>'),mc=M("<footer class=vocab-match-footer>"),gc=M("<p>Loading..."),pc=M("<tr><td><button></button></td><td><button>");const yc={class:"vocab",qlang:"default",vocab:{word:"ord"}},fi=e=>{const{t}=be(),[n]=Dt(()=>Ft(e.card)),[r,o]=W([]),[s,i]=W([]),[a,l]=W(!1),[u,c]=W(null),[h,d]=W(null),{config:g}=Me();pe(()=>{const p=Object.values(e.card.vocab);o(Jn(p)),i(Object.keys(e.card.vocab).map((f,v)=>{const _=e.card.vocab[f];return{leftWord:f,rightWord:_,shuffledRightWord:r()[v],isLeftMatched:!1,isRightMatched:!1,isLeftDisabled:!1,isRightDisabled:!1,shakeIt:!1,shakeRight:!1}}))});const $=p=>{c(f=>f===p?null:p)},b=p=>{d(f=>f===p?null:p)},m=()=>{e.onCorrect(),e.onComplete()};return pe(()=>{if(!u()||!h())return;const p=u(),f=h();e.card.vocab[p]===f?(i(_=>_.map(y=>{const w=y.leftWord===p&&y.rightWord===f,C=y.shuffledRightWord===f;return w||C?{...y,isLeftMatched:w?!0:y.isLeftMatched,isRightMatched:C?!0:y.isRightMatched,isLeftDisabled:w?!0:y.isLeftDisabled,isRightDisabled:C?!0:y.isRightDisabled}:y})),c(null),d(null)):(i(_=>_.map(y=>y.leftWord===p||y.shuffledRightWord===f?{...y,shakeIt:y.leftWord===p,shakeRight:y.shuffledRightWord===f}:y)),setTimeout(()=>{i(_=>_.map(y=>y.shakeIt||y.shakeRight?{...y,shakeIt:!1,shakeRight:!1}:y))},g.animationShakeMs),c(null),d(null))}),pe(()=>{s().every(p=>p.isLeftMatched&&p.isRightMatched)&&!a()&&l(!0)}),N(ce,{get when(){return n()},get fallback(){return gc()},get children(){return[(()=>{var p=hc(),f=p.firstChild,v=f.nextSibling,_=v.firstChild;return j(f,()=>e.card.question||t("match_the_words")),j(_,N(et,{get each(){return s()},children:y=>(()=>{var w=pc(),C=w.firstChild,O=C.firstChild,T=C.nextSibling,q=T.firstChild;return O.$$click=()=>$(y.leftWord),j(O,()=>y.leftWord),q.$$click=()=>b(y.shuffledRightWord),j(q,()=>y.shuffledRightWord),Z(P=>{var A=n().q,U=`vocab-match left-word ${y.isLeftMatched?"correct":""} ${u()===y.leftWord?"selected":""} ${y.shakeIt?"shake":""}`,K=y.isLeftDisabled,H=y.isLeftMatched?`${y.leftWord} (${t("matched")})`:`${t("select")} ${y.leftWord}`,te=n().a,ge=`vocab-match right-word ${y.isRightMatched?"correct":""} ${h()===y.shuffledRightWord?"selected":""} ${y.shakeRight?"shake":""}`,ne=y.isRightDisabled,ue=y.isRightMatched?`${y.shuffledRightWord}  (${t("matched")})`:`${t("select")} ${y.shuffledRightWord}`;return A!==P.e&&X(O,"lang",P.e=A),U!==P.t&&Pe(O,P.t=U),K!==P.a&&(O.disabled=P.a=K),H!==P.o&&X(O,"aria-label",P.o=H),te!==P.i&&X(q,"lang",P.i=te),ge!==P.n&&Pe(q,P.n=ge),ne!==P.s&&(q.disabled=P.s=ne),ue!==P.h&&X(q,"aria-label",P.h=ue),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),w})()})),Z(()=>X(f,"lang",n().q)),p})(),N(ce,{get when(){return a()},get children(){var p=mc();return j(p,N(Ut,{get isCorrect(){return a()===!1?null:!0},get isInputPresent(){return a()},onCheckAnswer:m,onComplete:m})),p}})]}})};le(["click"]);var Po=M("<span>"),vc=M("<span class=provided-word>"),$c=M('<section class="card blanks-card"><h4></h4><h3 class=question></h3><div class=word-options>'),bc=M("<p>Loading..."),_c=M("<button>");const wc={class:"blanks",question:"Question",qlang:"default",words:[{answer:!0,other:!1}]},Sc=e=>{const{t}=be(),[n]=Dt(()=>Ft(e.card)),[r,o]=W([]),[s,i]=W([]),[a,l]=W(null),[u,c]=W(!1),[h,d]=W(null);pe(()=>{o(Jn(e.card.words.map(f=>Object.keys(f)[0])))});const g=f=>{s().includes(f)||(i([...s(),f]),c(!1))},$=()=>{const f=e.card.words.filter(_=>Object.values(_)[0]).map(_=>Object.keys(_)[0]);s().length===f.length&&s().every((_,y)=>_===f[y])?(c(!0),l(!0),e.onCorrect(s().length)):(c(!1),l(!1),e.onIncorrect(),d("incomplete"),setTimeout(()=>d(null),1e3))},b=()=>{a()&&e.onComplete()},m=()=>{i([]),l(null)},p=()=>{let f=0;const v=e.card.words.filter(_=>Object.values(_)[0]).map(_=>Object.keys(_)[0]);return e.card.question.split(/([\s\b])/).map(_=>{if(/^_{2,}/.test(_)){const y=s()[f],w=v[f];if(f++,u()){const C=y===w;return(()=>{var O=Po();return Pe(O,C?"blank-correct":"blank-incorrect"),j(O,y),O})()}else return(()=>{var C=Po();return Pe(C,y?"blank-filled":"blank"),j(C,y??"__"),C})()}else return(()=>{var y=vc();return j(y,_),y})()})};return N(ce,{get when(){return n()},get fallback(){return bc()},get children(){return[(()=>{var f=$c(),v=f.firstChild,_=v.nextSibling,y=_.nextSibling;return j(v,()=>t("fill_in_the_blanks")),j(_,p),j(y,()=>r().map(w=>{const C=s().includes(w),O=h()===w?"shake":"",T=C||a()===!0,q="word-option "+(C?"selected":"")+" "+O,P=C?`${w} (${t("selected")})`:`${t("select")} ${w}`;return(()=>{var A=_c();return A.$$click=()=>g(w),A.disabled=T,Pe(A,q),X(A,"aria-label",P),j(A,w),Z(()=>X(A,"lang",n().a)),A})()})),Z(w=>{var C=n().q,O=n().q==="heb"?"rtl":"ltr";return C!==w.e&&X(_,"lang",w.e=C),O!==w.t&&X(_,"dir",w.t=O),w},{e:void 0,t:void 0}),f})(),N(Ut,{get isCorrect(){return a()},get isInputPresent(){return s().length>0},onCheckAnswer:$,onComplete:b,onReset:m})]}})};le(["click"]);var Cc=M("<aside class=letter-buttons>"),Ec=M("<button>");const Pc=3,wr={ang:[{symbol:"",name:"Ash"},{symbol:"",name:"o-slash"},{symbol:"",name:"Thorn"},{symbol:"",name:"Eth"},{symbol:"",name:"Yogh"},{symbol:"",name:"o-e"},{symbol:"",name:"long-s"},{symbol:"",name:"wynn"},{symbol:"",name:"long-a"},{symbol:"",name:"long-e"},{symbol:"",name:"long-i"},{symbol:"",name:"long-o"},{symbol:"",name:"long-u"},{symbol:"",name:"long-y"}],heb:[{symbol:"",name:"Alef"},{symbol:"",name:"Bet"},{symbol:"",name:"Gimel"},{symbol:"",name:"Dalet"},{symbol:"",name:"He"},{symbol:"",name:"Vav"},{symbol:"",name:"Zayin"},{symbol:"",name:"Chet"},{symbol:"",name:"Tet"},{symbol:"",name:"Yod"},{symbol:"",name:"Kaf"},{symbol:"",name:"Final Kaf"},{symbol:"",name:"Lamed"},{symbol:"",name:"Mem"},{symbol:"",name:"Final Mem"},{symbol:"",name:"Nun"},{symbol:"",name:"Final Nun"},{symbol:"",name:"Samekh"},{symbol:"",name:"Ayin"},{symbol:"",name:"Pe"},{symbol:"",name:"Final Pe"},{symbol:"",name:"Tsadi"},{symbol:"",name:"Final Tsadi"},{symbol:"",name:"Qof"},{symbol:"",name:"Resh"},{symbol:"",name:"Shin"},{symbol:"",name:"Tav"}],hun:[{symbol:"",name:"a-acute"},{symbol:"",name:"e-acute"},{symbol:"",name:"i-acute"},{symbol:"",name:"o-acute"},{symbol:"",name:"o-umlaut"},{symbol:"",name:"o-double-acute"},{symbol:"",name:"u-acute"},{symbol:"",name:"u-umlaut"},{symbol:"",name:"u-double-acute"}]},kc=e=>{if(!wr[e.lang])return console.warn(`No buttons exist for the supplied language, "${e.lang}".`),"";if(e.text.length===0)return"";let t=wr[e.lang].filter(n=>e.text.includes(n.symbol));if(t.length<3){const n=wr[e.lang].filter(r=>!t.some(o=>o.symbol===r.symbol));t=[...t,...n.slice(0,Pc-t.length)]}return(()=>{var n=Cc();return j(n,N(et,{each:t,children:r=>(()=>{var o=Ec();return o.$$click=()=>e.onSelect(r.symbol),j(o,()=>r.symbol),Z(s=>{var i=r.name,a=r.name;return i!==s.e&&X(o,"aria-label",s.e=i),a!==s.t&&X(o,"title",s.t=a),s},{e:void 0,t:void 0}),o})()})),n})()};le(["click"]);const Lt=e=>e.trim().toLocaleLowerCase().replace(/[^\p{L}\p{N}\s]+/gu,"").replace(/\s+/g," ");var Oc=M('<section class="card writing-card"><h3 class=question></h3><div class=input><textarea id=writing-input class=answer>'),Rc=M("<p>Loading..."),Nc=M("<h4>");const Ic={class:"writing",qlang:"default",question:"Question",answer:"Answer"},Lc=e=>{const[t]=Dt(()=>Ft(e.card)),{t:n}=be(),[r,o]=W(""),[s,i]=W(null);let a=null;const l=Q(()=>Lt(e.card.answer)),u=g=>{i(null),o(g)},c=g=>{if(!a)return;ui(g,t().a);const $=a,b=$.selectionStart??r().length,m=$.selectionEnd??r().length,p=r().slice(0,b)+g+r().slice(m);u(p),queueMicrotask(()=>{$.selectionStart=$.selectionEnd=b+g.length,$.focus()})},h=()=>{Lt(r())===l()?(i(!0),e.onCorrect()):(i(!1),e.onIncorrect())},d=()=>{i(null),u(""),e.onComplete()};return N(ce,{get when(){return t()?.a},get fallback(){return Rc()},get children(){return[(()=>{var g=Oc(),$=g.firstChild,b=$.nextSibling,m=b.firstChild;return j(g,(()=>{var p=oe(()=>t().q!==t().a);return()=>p()&&(()=>{var f=Nc();return j(f,()=>n("translate_to_lang",{lang:n(t().a)})),f})()})(),$),j($,()=>e.card.question),m.$$input=p=>u(p.target.value),Ze(p=>a=p,m),m.autofocus=!0,j(b,N(kc,{get lang(){return t().a},onSelect:c,get text(){return e.card.answer}}),null),Z(p=>{var f=t().q,v=n("type_in")+" "+n(t().a)+"...",_=t().a,y=n("enter_answer");return f!==p.e&&X($,"lang",p.e=f),v!==p.t&&X(m,"placeholder",p.t=v),_!==p.a&&X(m,"lang",p.a=_),y!==p.o&&X(m,"aria-label",p.o=y),p},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>m.value=r()),g})(),N(Ut,{get isCorrect(){return s()},get isInputPresent(){return r().length>0},onCheckAnswer:h,onComplete:d})]}})};le(["input"]);var Ac=M('<section class="writing-blocks-card card"><h3 class=question></h3><div class=selected-words></div><hr><div class=options>'),jc=M("<p>Loading..."),Tc=M("<button class=selected-word>"),xc=M("<button class=option-button>");const qc={class:"writing-blocks",qlang:"default",question:"Question",answer:"Answer",options:["Answer","Another"]},Dc=e=>{let t="";const{t:n}=be(),[r]=Dt(()=>Ft(e.card)),[o,s]=W(null),[i,a]=W([]),l=Q(()=>Lt(e.card.answer)),u=d=>{s(null),a(g=>[...g,d])},c=d=>{s(null),a(g=>g.filter(($,b)=>b!==d))},h=()=>{console.log("WritingBlocks handleCheckAnswer");const d=Lt(i().join(" "));console.log(`WritingBlocks normalizedUserInput = ${d} vs ${l()}`),d===l()?(console.log("WritingBlocks CORRECT"),s(!0),e.onCorrect()):(console.log("WritingBlocks INCORRECT"),s(!1),e.onIncorrect())};return pe(()=>{a([]),s(null)}),pe(()=>{const d=Lt(i().join(" "));o()!==null&&d!==t&&(s(null),a([]))}),N(ce,{get when(){return r()},get fallback(){return jc()},get children(){return[(()=>{var d=Ac(),g=d.firstChild,$=g.nextSibling,b=$.nextSibling,m=b.nextSibling;return j(g,()=>e.card.question),j($,N(et,{get each(){return i()},children:(p,f)=>(()=>{var v=Tc();return v.$$click=()=>c(f()),X(v,"aria-label",`Remove word: ${p}`),j(v,p),v})()})),j(m,N(et,{get each(){return e.card.options},children:p=>(()=>{var f=xc();return f.$$click=()=>u(p),j(f,p),Z(v=>{var _=i().includes(p),y=i().includes(p)?`${p} (${n("selected")})`:`${n("select")} ${p}`;return _!==v.e&&(f.disabled=v.e=_),y!==v.t&&X(f,"aria-label",v.t=y),v},{e:void 0,t:void 0}),f})()})),Z(()=>X(g,"lang",r().q)),d})(),N(Ut,{get isCorrect(){return o()},get isInputPresent(){return i().length>0},onCheckAnswer:h,get onComplete(){return e.onComplete}})]}})};le(["click"]);const Mc={class:"dynamic-vocab",question:"Question",qlang:"default"},Vc=e=>{const t=Q(()=>{const r={};for(const o of e.lesson.cards.filter(s=>["vocab","blanks"].includes(s.class)))if(o.class==="blanks"&&o.qlang===e.card.qlang)o.words.forEach(s=>{const i=Object.keys(s)[0],a=s[i];r[i]=a?i:""});else if(o.class==="vocab")if(o.qlang===e.card.qlang)Object.assign(r,o.vocab);else{const s=Object.fromEntries(Object.entries(o.vocab).map(([i,a])=>[a,i]));Object.assign(r,s)}return r}),n={class:"vocab",qlang:e.card.qlang,vocab:t()};return N(fi,{card:n,get onCorrect(){return e.onCorrect},get onIncorrect(){return e.onIncorrect},get onComplete(){return e.onComplete}})},Fc={blanks:wc,"dynamic-vocab":Mc,"multiple-choice":uc,vocab:yc,"writing-blocks":qc,writing:Ic},Uc=e=>structuredClone(Fc[e]),Kc=["blanks","dynamic-vocab","multiple-choice","vocab","writing-blocks","writing"];function zc(e){return typeof e=="object"&&e!==null&&"answer"in e}var Hc=M("<p>"),Wc=M("<div>"),Bc=M("<p>Unknown lesson card...");function hi(e){const{t}=be();return(()=>{var n=Wc();return $t(n,"dblclick",e.ondblclick,!0),j(n,N(zo,{get fallback(){return Bc()},get children(){return[N(Be,{get when(){return!e.card},get children(){var r=Hc();return j(r,()=>t("lesson_complete")),r}}),N(Be,{get when(){return e.card?.class==="dynamic-vocab"},get children(){return N(Vc,{get card(){return e.card},get lesson(){return e.lesson},get onComplete(){return oe(()=>!!e.onComplete)()?e.onComplete:()=>{}},get onCorrect(){return oe(()=>!!e.onCorrect)()?e.onCorrect:()=>{}},get onIncorrect(){return oe(()=>!!e.onIncorrect)()?e.onIncorrect:()=>{}}})}}),N(Be,{get when(){return e.card?.class==="writing"},get children(){return N(Lc,{get card(){return e.card},get onComplete(){return oe(()=>!!e.onComplete)()?e.onComplete:()=>{}},get onCorrect(){return oe(()=>!!e.onCorrect)()?e.onCorrect:()=>{}},get onIncorrect(){return oe(()=>!!e.onIncorrect)()?e.onIncorrect:()=>{}}})}}),N(Be,{get when(){return e.card?.class==="writing-blocks"},get children(){return N(Dc,{get card(){return e.card},get onComplete(){return oe(()=>!!e.onComplete)()?e.onComplete:()=>{}},get onCorrect(){return oe(()=>!!e.onCorrect)()?e.onCorrect:()=>{}},get onIncorrect(){return oe(()=>!!e.onIncorrect)()?e.onIncorrect:()=>{}}})}}),N(Be,{get when(){return e.card?.class==="multiple-choice"},get children(){return N(dc,{get card(){return e.card},get onComplete(){return oe(()=>!!e.onComplete)()?e.onComplete:()=>{}},get onCorrect(){return oe(()=>!!e.onCorrect)()?e.onCorrect:()=>{}},get onIncorrect(){return oe(()=>!!e.onIncorrect)()?e.onIncorrect:()=>{}}})}}),N(Be,{get when(){return e.card?.class==="vocab"},get children(){return N(fi,{get card(){return e.card},get onComplete(){return oe(()=>!!e.onComplete)()?e.onComplete:()=>{}},get onCorrect(){return oe(()=>!!e.onCorrect)()?e.onCorrect:()=>{}},get onIncorrect(){return oe(()=>!!e.onIncorrect)()?e.onIncorrect:()=>{}}})}}),N(Be,{get when(){return e.card?.class==="blanks"},get children(){return N(Sc,{get card(){return e.card},get onComplete(){return oe(()=>!!e.onComplete)()?e.onComplete:()=>{}},get onCorrect(){return oe(()=>!!e.onCorrect)()?e.onCorrect:()=>{}},get onIncorrect(){return oe(()=>!!e.onIncorrect)()?e.onIncorrect:()=>{}}})}})]}})),n})()}le(["dblclick"]);var Gc=M("<progress class=leeson-progress-bar>");function Jc(e){const{t}=be();return(()=>{var n=Gc();return Z(r=>{var o=e.max,s=t("lesson_progress"),i=e.title;return o!==r.e&&X(n,"max",r.e=o),s!==r.t&&X(n,"aria-label",r.t=s),i!==r.a&&X(n,"title",r.a=i),r},{e:void 0,t:void 0,a:void 0}),Z(()=>n.value=e.value),n})()}var Qc=M("<article class=lesson><h2><em></em><button class=close-button>");const ko={title:"A Lesson",description:"A lesson description",cards:[]},Xc=e=>{const{t}=be(),{showConfirm:n}=rr(),[r,o]=W([]),s=Q(()=>(r()&&r()[0])??null);let i=null;pe(()=>{e.lesson&&e.lesson.cards&&o(e.lesson.cards)});const a=()=>{n(t("confirm_leave_lesson"),()=>{Ur(),e.onCancel()})},l=g=>{g.key==="Escape"&&a()},u=g=>{const $=t("confirm_leave_app");return g.preventDefault(),$};window.addEventListener("keyup",l),window.addEventListener("beforeunload",u),Ke(()=>{window.removeEventListener("keyup",l),window.removeEventListener("beforeunload",u)});const c=()=>{if(i){if(o(g=>g.slice(1)),r().length===0){e.onLessonComplete();return}}else o(g=>[...g.slice(1),g[0]])},h=()=>{i=!1;const g=e.lesson.cards.indexOf(r()[0]);e.onAnswer(g,"bad_answer_goes_here")},d=()=>{i=!0;const g=e.lesson.cards.indexOf(r()[0]);e.onAnswer(g)};return!e.lesson||!e.lesson.cards?"Loading lesson cards...":(()=>{var g=Qc(),$=g.firstChild,b=$.firstChild,m=b.nextSibling;return j(b,()=>e.lesson.title),m.$$click=a,j(g,N(Jc,{get value(){return oe(()=>r().length===0)()?1:e.lesson.cards.length-r().length+1},get max(){return e.lesson.cards.length},get title(){return`${e.lesson.cards.length-r().length+1} / ${e.lesson.cards.length}`}}),null),j(g,N(hi,{get card(){return s()},get lesson(){return e.lesson},onComplete:c,onCorrect:d,onIncorrect:h}),null),Z(()=>X(m,"aria-label",t("cancel_lesson"))),g})()};le(["click"]);const Ln="oe_",pt={CURRENT_LESSON_INDEX:e=>`${Ln}current_lesson_index_${e}`,ANSWERS:e=>`${Ln}answers_${e}`,LESSONS:e=>`${Ln}course_${e}`,CURRENT_COURSE_INDEX:`${Ln}course`,STORE_NAME:"oe-courses",EDITING_MODE:"oe-editing"},Yc=()=>Object.assign({"../../lessons/alefbet.json":()=>Ye(()=>import("./alefbet-Dy1J2l89.js"),[]),"../../lessons/lessons.json":()=>Ye(()=>import("./lessons-D_u74sUs.js"),[]),"../../lessons/lessons.old.json":()=>Ye(()=>import("./lessons.old-Bh74MdUW.js"),[]),"../../lessons/sanskrit.json":()=>Ye(()=>import("./sanskrit-DhBYCpQs.js"),[]),"../../lessons/test.json":()=>Ye(()=>import("./test-Cx5aI76C.js"),[]),"../../lessons/uk-constitution.json":()=>Ye(()=>import("./uk-constitution-Bm_o3yyS.js"),[])}),Zc={title:"New Course",description:"A description",language:"en",targetLanguage:"en",level:"level",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[]},eu=[];let At;const Tn=e=>[...e.courses.map(t=>t.title)],tu=async()=>(At||(At=await nu()),At),nu=async()=>{const[e,t]=ti(ei({courseMetadata:null,lessons:[],loading:!1}),{name:pt.STORE_NAME,storage:localStorage});let n=null;const r=()=>(n||(n=Wo()),n),o=async P=>{const A=await r();if(isNaN(P)||P<0||P>=A.courses.length)throw new Error(`Invalid course index for deletion: ${P}`);y(P),await u(0)},s=({lessons:P,courseMetadata:A})=>{t({lessons:P,courseMetadata:A})},i=P=>{const U=new Ql().compile(ec);if(!U(P))throw console.error(JSON.stringify(U.errors,null,4)),console.debug("courseData",P),new TypeError("Invalid course data",P)},a=async P=>{const A=`../../lessons/${P}.json`;console.info(`Loading course "${P}" from "${A}"`);const U=await Yc();if(!U[A])throw new Error("Lesson not found: "+A);const H=(await U[A]()).default;return console.info(`Loaded course ${P} from ${A}`),H},l=P=>{console.log("saveCourseToStorage"),t("loading",!0);try{const A=JSON.parse(P);i(A);const{lessons:U,...K}=A;t("lessons",U),t("courseMetadata",K)}catch(A){console.error("Invalid course file:",A)}finally{t("loading",!1)}},u=async P=>{if(console.info("loadCourseFromFile enter with",P),isNaN(P)){console.error("Course index is not a number",P);return}const A=await r();if(P===A.courses.length){console.log("loadCourseFromFile Shall use the pre-loaded course from storage");return}if(P<0)throw console.warn("loadCourseFromFile Invalid course index:",P),new Error("loadCourseFromFile: Negative course index? "+P);t("loading",!0);try{let U;const{fileBasename:K}=A.courses[P];U=await a(K),i(U);const{lessons:H,...te}=U;s({lessons:H,courseMetadata:te}),t({loading:!1}),console.info("loadCourseFromFile OK")}catch(U){console.error("loadCourseFromFile Error loading lessons:",U),t("loading",!1)}console.info("loadCourseFromFile leave")},c=Q(()=>e.lessons||[]),h=async P=>{if(!e.lessons||e.lessons.length===0){if(!Number.isFinite(P))throw new Error("No lessons loaded and no courseIdx supplied?");await u(P),console.debug("getCourseData loaded course",P)}return{...e.courseMetadata,lessons:e.lessons}},d=()=>e.courseMetadata?.language||"",g=()=>e.courseMetadata?.targetLanguage||"",$=P=>t("lessons",P),b=Q(()=>e.lessons&&e.lessons.length),m=P=>{t("lessons",A=>{const U={...ko};if(A){if(P===void 0||P>A.length)return[...A,U];if(P<=0)return[U,...A]}else return[U];return[...A.slice(0,P),{...ko},...A.slice(P)]})},p=P=>{console.trace("initNewCourse enter");const A=Tn(P).length;return t({loading:!0}),s({lessons:[...eu],courseMetadata:{...Zc}}),t({loading:!1}),console.log("initNewCourse leave with",A),A},f=()=>e.lessons.map((P,A)=>({title:P.title,index:A})),v=(P,A,U)=>{console.debug("Enter saveCard");const K=e.lessons.map((H,te)=>te===A?{...H,cards:H.cards.map((ge,ne)=>ne===U?P:ge)}:H);$(K),console.log("saved card in",pt.STORE_NAME)},_=(P,A)=>{const U=e.lessons.map((K,H)=>H===P?{...K,cards:K.cards.filter((te,ge)=>ge!==A)}:K);$(U)},y=P=>{console.log("reset course",P);const A=P;localStorage.removeItem(pt.CURRENT_LESSON_INDEX(A)),localStorage.removeItem(pt.CURRENT_COURSE_INDEX),localStorage.removeItem(pt.ANSWERS(A)),localStorage.removeItem(pt.STORE_NAME),t({courseMetadata:null,lessons:[],loading:!1})},w=P=>t("courseMetadata","title",P),C=()=>e.courseMetadata?.title??"",O=P=>{t("courseMetadata","description",P),console.log("set courseMetadata description",P)},T=()=>(console.log("get courseMetadata description",e.courseMetadata?.description),e.courseMetadata?.description??""),q=Q(()=>e.lessons.reduce((P,A)=>P+(A.cards?.length??0),0));return{store:e,setTitle:w,getTitle:C,setDescription:O,getDescription:T,initNewCourse:p,saveCourseToStorage:l,loadCourseFromFile:u,setCourse:s,deleteCourse:o,saveCard:v,deleteCard:_,setLessons:$,getLessons:c,getCourseData:h,getTargetLang:g,getSourceLang:d,getTotalLessonsCount:b,getTotalQuestionsCount:q,addLesson:m,lessonTitles2Indicies:f,reset:y,assertValidCourseData:i}},ve=()=>{if(!At)throw new Error("Course store not initialized. Call useCourseStore() first.");return At};function mi(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const i={to:o,options:s,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const a of e)a.listener({...i,from:a.location,retry:l=>{l&&(n=!0),a.navigate(o,{...s,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:r}}let jr;function Kr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),jr=window.history.state._depth}Kr();function ru(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function su(e,t){let n=!1;return()=>{const r=jr;Kr();const o=r==null?null:jr-r;if(n){n=!1;return}o&&t(o)?(n=!0,window.history.go(-o)):e()}}const ou=/^(?:[a-z0-9]+:)?\/\//i,iu=/^\/+|(\/)\/+$/g,gi="http://sr";function lt(e,t=!1){const n=e.replace(iu,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function xn(e,t,n){if(ou.test(t))return;const r=lt(e),o=n&&lt(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+lt(t,!s)}function au(e,t){if(e==null)throw new Error(t);return e}function lu(e,t){return lt(e).replace(/\/*(\*.*)?$/g,"")+lt(t)}function pi(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function cu(e,t,n){const[r,o]=e.split("/*",2),s=r.split("/").filter(Boolean),i=s.length;return a=>{const l=a.split("/").filter(Boolean),u=l.length-i;if(u<0||u>0&&o===void 0&&!t)return null;const c={path:i?"":"/",params:{}},h=d=>n===void 0?void 0:n[d];for(let d=0;d<i;d++){const g=s[d],$=g[0]===":",b=$?l[d]:l[d].toLowerCase(),m=$?g.slice(1):g.toLowerCase();if($&&Sr(b,h(m)))c.params[m]=b;else if($||!Sr(b,m))return null;c.path+=`/${b}`}if(o){const d=u?l.slice(-u).join("/"):"";if(Sr(d,h(o)))c.params[o]=d;else return null}return c}}function Sr(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function uu(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function yi(e){const t=new Map,n=Do();return new Proxy({},{get(r,o){return t.has(o)||xr(n,()=>t.set(o,Q(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,o){return o in e()}})}function du(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(o):s instanceof Array?(n.delete(o),s.forEach(i=>{n.append(o,String(i))})):n.set(o,String(s))});const r=n.toString();return r?`?${r}`:""}function vi(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return vi(r).reduce((s,i)=>[...s,...o.map(a=>a+i)],[])}const fu=100,$i=Mt(),zr=Mt(),Kt=()=>au(_t($i),"<A> and 'use' router primitives can be only used inside a Route."),hu=()=>_t(zr)||Kt().base,mu=e=>{const t=hu();return Q(()=>t.resolvePath(e()))},gu=e=>{const t=Kt();return Q(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Ce=()=>Kt().navigatorFactory(),sr=()=>Kt().location,je=()=>Kt().params,pu=()=>{const e=sr(),t=Ce(),n=(r,o)=>{const s=$e(()=>du(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...o})};return[e.query,n]};function yu(e,t=""){const{component:n,preload:r,load:o,children:s,info:i}=e,a=!s||Array.isArray(s)&&!s.length,l={key:e,component:n,preload:r||o,info:i};return bi(e.path).reduce((u,c)=>{for(const h of vi(c)){const d=lu(t,h);let g=a?d:d.split("/*",1)[0];g=g.split("/").map($=>$.startsWith(":")||$.startsWith("*")?$:encodeURIComponent($)).join("/"),u.push({...l,originalPath:c,pattern:g,matcher:cu(g,!a,e.matchFilters)})}return u},[])}function vu(e,t=0){return{routes:e,score:uu(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],i=s.matcher(n);if(!i)return null;r.unshift({...i,route:s})}return r}}}function bi(e){return Array.isArray(e)?e:[e]}function _i(e,t="",n=[],r=[]){const o=bi(e);for(let s=0,i=o.length;s<i;s++){const a=o[s];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=yu(a,t);for(const u of l){n.push(u);const c=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!c)_i(a.children,u.pattern,n,r);else{const h=vu([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((s,i)=>i.score-s.score)}function Cr(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function $u(e,t,n){const r=new URL(gi),o=Q(c=>{const h=e();try{return new URL(h,r)}catch{return console.error(`Invalid path ${h}`),c}},r,{equals:(c,h)=>c.href===h.href}),s=Q(()=>o().pathname),i=Q(()=>o().search,!0),a=Q(()=>o().hash),l=()=>"",u=Tr(i,()=>pi(o()));return{get pathname(){return s()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return l()},query:n?n(u):yi(u)}}let at;function bu(){return at}function _u(e,t,n,r={}){const{signal:[o,s],utils:i={}}=e,a=i.parsePath||(K=>K),l=i.renderPath||(K=>K),u=i.beforeLeave||mi(),c=xn("",r.base||"");if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!o().value&&s({value:c,replace:!0,scroll:!1});const[h,d]=W(!1);let g;const $=(K,H)=>{H.value===b()&&H.state===p()||(g===void 0&&d(!0),at=K,g=H,Ti(()=>{g===H&&(m(g.value),f(g.state),y[1](te=>te.filter(ge=>ge.pending)))}).finally(()=>{g===H&&xo(()=>{at=void 0,K==="navigate"&&A(g),d(!1),g=void 0})}))},[b,m]=W(o().value),[p,f]=W(o().state),v=$u(b,p,i.queryWrapper),_=[],y=W([]),w=Q(()=>typeof r.transformUrl=="function"?Cr(t(),r.transformUrl(v.pathname)):Cr(t(),v.pathname)),C=()=>{const K=w(),H={};for(let te=0;te<K.length;te++)Object.assign(H,K[te].params);return H},O=i.paramsWrapper?i.paramsWrapper(C,t):yi(C),T={pattern:c,path:()=>c,outlet:()=>null,resolvePath(K){return xn(c,K)}};return Z(Tr(o,K=>$("native",K),{defer:!0})),{base:T,location:v,params:O,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:P,matches:w,beforeLeave:u,preloadRoute:U,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:y};function q(K,H,te){$e(()=>{if(typeof H=="number"){H&&(i.go?i.go(H):console.warn("Router integration does not support relative routing"));return}const ge=!H||H[0]==="?",{replace:ne,resolve:ue,scroll:F,state:R}={replace:!1,resolve:!ge,scroll:!0,...te},D=ue?K.resolvePath(H):xn(ge&&v.pathname||"",H);if(D===void 0)throw new Error(`Path '${H}' is not a routable path`);if(_.length>=fu)throw new Error("Too many redirects");const L=b();(D!==L||R!==p())&&(fa||u.confirm(D,te)&&(_.push({value:L,replace:ne,scroll:F,state:p()}),$("navigate",{value:D,state:R})))})}function P(K){return K=K||_t(zr)||T,(H,te)=>q(K,H,te)}function A(K){const H=_[0];H&&(s({...K,replace:H.replace,scroll:H.scroll}),_.length=0)}function U(K,H){const te=Cr(t(),K.pathname),ge=at;at="preload";for(let ne in te){const{route:ue,params:F}=te[ne];ue.component&&ue.component.preload&&ue.component.preload();const{preload:R}=ue;H&&R&&xr(n(),()=>R({params:F,location:{pathname:K.pathname,search:K.search,hash:K.hash,query:pi(K),state:null,key:""},intent:"preload"}))}at=ge}}function wu(e,t,n,r){const{base:o,location:s,params:i}=e,{pattern:a,component:l,preload:u}=r().route,c=Q(()=>r().path);l&&l.preload&&l.preload();const h=u?u({params:i,location:s,intent:at||"initial"}):void 0;return{parent:t,pattern:a,path:c,outlet:()=>l?N(l,{params:i,location:s,data:h,get children(){return n()}}):n(),resolvePath(g){return xn(o.path(),g,c())}}}const Su=e=>t=>{const{base:n}=t,r=wt(()=>t.children),o=Q(()=>_i(r(),t.base||""));let s;const i=_u(e,o,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),N($i.Provider,{value:i,get children(){return N(Cu,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[oe(()=>(s=Do())&&null),N(Eu,{routerState:i,get branches(){return o()}})]}})}})};function Cu(e){const t=e.routerState.location,n=e.routerState.params,r=Q(()=>e.preload&&$e(()=>{e.preload({params:n,location:t,intent:bu()||"initial"})}));return N(ce,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>N(o,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Eu(e){const t=[];let n;const r=Q(Tr(e.routerState.matches,(o,s,i)=>{let a=s&&o.length===s.length;const l=[];for(let u=0,c=o.length;u<c;u++){const h=s&&s[u],d=o[u];i&&h&&d.route.key===h.route.key?l[u]=i[u]:(a=!1,t[u]&&t[u](),Nt(g=>{t[u]=g,l[u]=wu(e.routerState,l[u-1]||e.routerState.base,Oo(()=>r()[u+1]),()=>{const $=e.routerState.matches();return $[u]??$[0]})}))}return t.splice(o.length).forEach(u=>u()),i&&a?i:(n=l[0],l)}));return Oo(()=>r()&&n)()}const Oo=e=>()=>N(ce,{get when(){return e()},keyed:!0,children:t=>N(zr.Provider,{value:t,get children(){return t.outlet()}})}),Ne=e=>{const t=wt(()=>e.children);return Rr(e,{get children(){return t()}})};function Pu([e,t],n,r){return[e,r?o=>t(r(o)):t]}function ku(e){let t=!1;const n=o=>typeof o=="string"?{value:o}:o,r=Pu(W(n(e.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&e.set(o),o));return e.init&&Ke(e.init((o=e.get())=>{t=!0,r[1](n(o)),t=!1})),Su({signal:r,create:e.create,utils:e.utils})}function Ou(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Ru(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Nu=new Map;function Iu(e=!0,t=!1,n="/_server",r){return o=>{const s=o.base.path(),i=o.navigatorFactory(o.base);let a,l;function u(b){return b.namespaceURI==="http://www.w3.org/2000/svg"}function c(b){if(b.defaultPrevented||b.button!==0||b.metaKey||b.altKey||b.ctrlKey||b.shiftKey)return;const m=b.composedPath().find(w=>w instanceof Node&&w.nodeName.toUpperCase()==="A");if(!m||t&&!m.hasAttribute("link"))return;const p=u(m),f=p?m.href.baseVal:m.href;if((p?m.target.baseVal:m.target)||!f&&!m.hasAttribute("state"))return;const _=(m.getAttribute("rel")||"").split(/\s+/);if(m.hasAttribute("download")||_&&_.includes("external"))return;const y=p?new URL(f,document.baseURI):new URL(f);if(!(y.origin!==window.location.origin||s&&y.pathname&&!y.pathname.toLowerCase().startsWith(s.toLowerCase())))return[m,y]}function h(b){const m=c(b);if(!m)return;const[p,f]=m,v=o.parsePath(f.pathname+f.search+f.hash),_=p.getAttribute("state");b.preventDefault(),i(v,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:_?JSON.parse(_):void 0})}function d(b){const m=c(b);if(!m)return;const[p,f]=m;o.preloadRoute(f,p.getAttribute("preload")!=="false")}function g(b){clearTimeout(a);const m=c(b);if(!m)return l=null;const[p,f]=m;l!==p&&(a=setTimeout(()=>{o.preloadRoute(f,p.getAttribute("preload")!=="false"),l=p},20))}function $(b){if(b.defaultPrevented)return;let m=b.submitter&&b.submitter.hasAttribute("formaction")?b.submitter.getAttribute("formaction"):b.target.getAttribute("action");if(!m)return;if(!m.startsWith("https://action/")){const f=new URL(m,gi);if(m=o.parsePath(f.pathname+f.search),!m.startsWith(n))return}if(b.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=Nu.get(m);if(p){b.preventDefault();const f=new FormData(b.target,b.submitter);p.call({r:o,f:b.target},b.target.enctype==="multipart/form-data"?f:new URLSearchParams(f))}}le(["click","submit"]),document.addEventListener("click",h),e&&(document.addEventListener("mousemove",g,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",$),Ke(()=>{document.removeEventListener("click",h),e&&(document.removeEventListener("mousemove",g),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",$)})}}function Lu(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function Au(e){const t=()=>window.location.hash.slice(1),n=mi();return ku({get:t,set({value:r,replace:o,scroll:s,state:i}){o?window.history.replaceState(ru(i),"","#"+r):window.history.pushState(i,"","#"+r);const a=r.indexOf("#"),l=a>=0?r.slice(a+1):"";Ru(l,s),Kr()},init:r=>Ou(window,"hashchange",su(r,o=>!n.confirm(o&&o<0?o:t()))),create:Iu(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Lu,beforeLeave:n}})(e)}var ju=M("<a>");function wi(e){e=Rr({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Hi(e,["href","state","class","activeClass","inactiveClass","end"]),n=mu(()=>e.href),r=gu(n),o=sr(),s=Q(()=>{const i=n();if(i===void 0)return[!1,!1];const a=lt(i.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(lt(o.pathname).toLowerCase());return[e.end?a===l:l.startsWith(a+"/")||l===a,a===l]});return(()=>{var i=ju();return la(i,Rr(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1),i})()}function qn(e){const t=Ce(),n=sr(),{href:r,state:o}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:o}),null}var Tu=M("<div class=form-field><label>"),xu=M("<textarea class=text-input>"),qu=M("<input class=text-input>");const Fe=e=>(()=>{var t=Tu(),n=t.firstChild;return j(n,()=>e.label),j(t,(()=>{var r=oe(()=>!!e.multiline);return()=>r()?(()=>{var o=xu();return $t(o,"input",e.onInput,!0),Z(()=>X(o,"placeholder",e.placeholder)),Z(()=>o.value=e.value),o})():(()=>{var o=qu();return $t(o,"input",e.onInput,!0),Z(s=>{var i=e.placeholder,a=e.type||"text";return i!==s.e&&X(o,"placeholder",s.e=i),a!==s.t&&X(o,"type",s.t=a),s},{e:void 0,t:void 0}),Z(()=>o.value=e.value),o})()})(),null),t})();le(["input"]);var Du=M('<section class="boolean-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Mu=M('<div class=answer-row><button title="Click to mark as correct answer"><span></span></button><button type=button title="Remove this answer"><span class=utf8-icon-close>');function Vu(e){const[t,n]=W(""),[r,o]=W(!1),s=(u,c)=>{const h=[...e.list],d=Object.keys(h[u])[0];h[u]={[c]:h[u][d]},e.onUpdate(h)},i=u=>{const c=[...e.list],h=Object.keys(c[u])[0];c[u]={[h]:!c[u][h]},e.onUpdate(c)},a=u=>{const c=[...e.list];c.splice(u,1),e.onUpdate(c)},l=()=>{if(!t())return;const u=[...e.list,{[t()]:r()}];e.onUpdate(u),n(""),o(!1)};return(()=>{var u=Du(),c=u.firstChild,h=c.firstChild;return j(u,()=>e.list.map((d,g)=>{const $=Object.keys(d)[0],b=d[$];return(()=>{var m=Mu(),p=m.firstChild,f=p.firstChild,v=p.nextSibling;return j(m,N(Fe,{label:`Option ${g+1}`,value:$,onInput:_=>s(g,_.target.value),placeholder:"Enter answer"}),p),p.$$click=()=>i(g),Pe(p,`checkmark ${b?"selected":""}`),Pe(f,`utf8-icon-${b?"tick":"not-tick"}`),v.$$click=()=>a(g),m})()}),c),j(c,N(Fe,{label:"New Option",get value(){return t()},onInput:d=>n(d.target.value),placeholder:"Enter new option"}),h),h.$$click=l,u})()}le(["click"]);var Fu=M('<section class="answer-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Uu=M('<div class=answer-row><button title="Select as the correct answer"><span></span></button><button class=large-icon-button type=button title="Remove this answer"><span class=utf8-icon-close>');function Ro(e){const[t,n]=W(""),[r,o]=W([]);pe(()=>{o([...e.list])});const s=(u,c)=>{const h=[...r()];h[u]=c,o(h),e.onUpdate(h,e.answer)},i=u=>{const c=[...r()];c.splice(u,1),o(c),e.onUpdate(c,e.answer)},a=()=>{const u=t().trim();if(!u)return;const c=[...r(),u];o(c),n(""),e.onUpdate(c,e.answer)},l=u=>{const c=e.answer===u?"":u;e.onUpdate(r(),c)};return(()=>{var u=Fu(),c=u.firstChild,h=c.firstChild;return j(u,()=>r().map((d,g)=>(()=>{var $=Uu(),b=$.firstChild,m=b.firstChild,p=b.nextSibling;return j($,N(Fe,{label:`Option ${g+1}`,value:d,onInput:f=>s(g,f.target.value),placeholder:"Enter answer"}),b),b.$$click=()=>l(d),p.$$click=()=>i(g),Z(f=>{var v=`large-icon-button checkmark ${e.answer===d?"selected":""}`,_=`utf8-icon-${e.answer===d?"tick":"not-tick"}`;return v!==f.e&&Pe(b,f.e=v),_!==f.t&&Pe(m,f.t=_),f},{e:void 0,t:void 0}),$})()),c),j(c,N(Fe,{label:"New Option",get value(){return t()},onInput:d=>n(d.target.value),placeholder:"Enter new option"}),h),h.$$click=a,u})()}le(["click"]);var Ku=M('<section class="vocab-text answer-list"><div class="answer-row add-new"><button type=button title="Add this entry"><span class=utf8-icon-add>'),zu=M('<div class=answer-row><button type=button title="Remove this entry"><span class=utf8-icon-close>');function Hu(e){const[t,n]=W(""),[r,o]=W(""),s=Q(()=>Object.entries(e.list)),i=(c,h)=>{const d={...e.list},g=s()[c][0],$=d[g];delete d[g],d[h]=$,e.onUpdate(d)},a=(c,h)=>{const d={...e.list},g=s()[c][0];d[g]=h,e.onUpdate(d)},l=c=>{const h={...e.list},d=s()[c][0];delete h[d],e.onUpdate(h)},u=()=>{if(!t()||!r())return;const c={...e.list,[t()]:r()};e.onUpdate(c),n(""),o("")};return(()=>{var c=Ku(),h=c.firstChild,d=h.firstChild;return j(c,()=>s().map(([g,$],b)=>(()=>{var m=zu(),p=m.firstChild;return j(m,N(Fe,{label:`Prompt ${b+1}`,value:g,onInput:f=>i(b,f.target.value),placeholder:"Enter prompt"}),p),j(m,N(Fe,{label:`Answer ${b+1}`,value:$,onInput:f=>a(b,f.target.value),placeholder:"Enter answer"}),p),p.$$click=()=>l(b),m})()),h),j(h,N(Fe,{label:"New Prompt",get value(){return t()},onInput:g=>n(g.target.value),placeholder:"Enter new prompt"}),d),j(h,N(Fe,{label:"New Answer",get value(){return r()},onInput:g=>o(g.target.value),placeholder:"Enter new answer"}),d),d.$$click=u,c})()}le(["click"]);var Wu=M("<p>Loading card..."),Bu=M('<aside class="card-editor card"><section><h2>Editing <!> Card<button class="close-editor large-icon-button"><span class=utf8-icon-close></span></button></h2></section><footer class=modal-actions><button>Cancel</button><button>Save'),Gu=M("<section class=question>");const Ju=e=>{const{t}=be(),[n,r]=W([]),[o,s]=W(""),[i,a]=W(""),[l,u]=W({}),[c,h]=W([]),[d,g]=W([]);pe(()=>{if(!e.card){console.warn("No card!");return}"answer"in e.card&&s(e.card.answer||""),"answers"in e.card&&r(e.card.answers||[]),"options"in e.card&&h(e.card.options),"question"in e.card&&a(e.card.question),"words"in e.card&&g(e.card.words),"vocab"in e.card&&u(e.card.vocab)});const $=()=>{if(!e.card)return;const m={...e.card};"answers"in m&&(m.answers=n()),"answer"in m&&(m.answer=o()),"options"in m&&(m.options=c()),"question"in e.card&&(m.question=i()),"words"in m&&(m.words=d()),"vocab"in m&&(m.vocab=l()),e.onSave(m)};function b(m,p,f){m(p),f&&zc(e.card)&&s(f)}return N(ce,{get when(){return e.card},get fallback(){return Wu()},children:m=>(()=>{var p=Bu(),f=p.firstChild,v=f.firstChild,_=v.firstChild,y=_.nextSibling,w=y.nextSibling,C=w.nextSibling,O=f.nextSibling,T=O.firstChild,q=T.nextSibling;return p.$$click=P=>P.stopPropagation(),j(v,()=>t("card-class."+e.card?.class),y),$t(C,"click",e.onCancel,!0),j(f,(()=>{var P=oe(()=>!!i());return()=>P()&&(()=>{var A=Gu();return j(A,N(Fe,{multiline:!0,label:"Question",get value(){return i()??"Question"},onInput:U=>a(U.target.value),placeholder:"Option: enter a question"})),A})()})(),null),j(f,(()=>{var P=oe(()=>!!(m().answer&&m().class!=="writing-blocks"&&m().class!=="multiple-choice"));return()=>P()&&N(Fe,{label:"Answer",get value(){return m().answer},onInput:A=>s(A.target.value),placeholder:"Enter answer"})})(),null),j(f,(()=>{var P=oe(()=>"words"in m());return()=>P()&&N(Vu,{get list(){return d()},onUpdate:(...A)=>b(g,...A)})})(),null),j(f,(()=>{var P=oe(()=>"answers"in m());return()=>P()&&N(Ro,{get answer(){return o()},get list(){return n()},onUpdate:(...A)=>b(r,...A)})})(),null),j(f,(()=>{var P=oe(()=>"options"in m());return()=>P()&&N(Ro,{get answer(){return o()},get list(){return c()},onUpdate:(...A)=>b(h,...A)})})(),null),j(f,(()=>{var P=oe(()=>"vocab"in m());return()=>P()&&N(Hu,{get list(){return l()},onUpdate:(...A)=>b(u,...A)})})(),null),$t(T,"click",e.onCancel,!0),q.$$click=$,Z(()=>X(C,"title",t("cacnel"))),p})()})};le(["click"]);var Qu=M("<article>"),Xu=M("<p>Loading editor...");const Yu=()=>{const e=je(),t=Ce(),n=ve(),r=()=>Number(e.courseIdx??-1),o=()=>Number(e.lessonIdx??-1),s=()=>Number(e.cardIdx??-1),i=Q(()=>n?.getLessons()??[]),a=Q(()=>{const c=o();if(typeof c>"u"||!i().length)return;const h=i()[c];if(!h||!Array.isArray(h.cards))return console.warn("Invalid lesson:",c,h),null;const d=s();if(d>=h.cards.length){console.warn("cardId is >= lesson.cards length"),t("/course/"+r());return}return h.cards[d]??null}),l=Q(()=>i().length>0&&o()>=0&&s()>=0&&a()!==null);pe(()=>{});const u=c=>{n&&(n.saveCard(c,o(),s()),t(-1))};return N(ce,{get when(){return oe(()=>!!l())()&&a()},get fallback(){return Xu()},get children(){var c=Qu();return j(c,N(Ju,{get card(){return a()},onSave:u,onCancel:()=>t(`/editor/${r()}`)})),c}})},rt=e=>{const t=`answers-store-${e}`,[n,r]=ti(ei({currentLessonIdx:-1,answers:{}}),{name:t,storage:localStorage}),o=v=>(n.answers[v]||r("answers",v,[]),n.answers[v]),s=(v,_)=>{const y=o(v);if(!y[_])for(let w=y.length;w<=_;w++)r("answers",v,w,{wrongAnswers:[],correct:!1});return n.answers[v][_]},i=v=>r("currentLessonIdx",v),a=(v,_,y="")=>{console.log("calling lessonsStore.saveAnswer for",v),o(v),s(v,_),r("answers",v,_,w=>y===""?{...w,correct:!0}:{...w,wrongAnswers:[...w.wrongAnswers,y]})},l=v=>n.answers[v]??[],u=v=>{r("answers",v,[])},c=()=>{r("answers",{}),r("currentLessonIdx",-1)},h=()=>Object.keys(n.answers).length,d=()=>Object.values(n.answers).reduce((v,_)=>v+_.length,0),g=()=>Object.values(n.answers).reduce((v,_)=>v+_.filter(y=>y.correct).length,0),$=()=>Object.values(n.answers).reduce((v,_)=>v+_.reduce((y,w)=>y+w.wrongAnswers.length,0),0),b=v=>l(v).length,m=v=>l(v).filter(_=>_.correct).length;return{setCurrentLessonIdx:i,saveAnswer:a,getLessonAnswers:l,resetLesson:u,resetAllLessons:c,getTotalTakenLessons:h,getTotalQuestionsAnswered:d,getTotalCorrectAnswers:g,getTotalIncorrectAnswers:$,getLessonQuestionsAnsweredCorrectly:m,getLessonQuestionCount:b,getTotalWrongAttemptsInLesson:v=>l(v).reduce((_,y)=>_+y.wrongAnswers.length,0),isLessonDone:v=>{const _=b(v);return _>0&&m(v)===_}}};var Zu=M("<button class=large-icon-button><i class=utf8-icon-reset>");const Si=e=>{const{t}=be(),n=Ce(),{showConfirm:r}=rr(),o=ve(),s=rt(e.courseIdx),i=Q(()=>s.getTotalQuestionsAnswered()),a=()=>{o.reset(e.courseIdx),s.resetAllLessons(),n("/course/"+e.courseIdx)};return i()===0?"":(()=>{var l=Zu(),u=l.firstChild;return l.$$click=()=>r(t("lose_progress",{totalAnswered:i()}),a),Z(()=>X(u,"title",t("reset_course"))),l})()};le(["click"]);var ed=M("<ol>"),td=M('<section class="card lesson-list">'),nd=M("<div>Loading lesson list..."),rd=M("<p class=card>No lessons are available for this course."),sd=M("<li><button>");const Ci=e=>{const t=ve(),n=Q(()=>rt(e.courseIndex));return N(ce,{when:t,get fallback(){return nd()},get children(){var r=td();return j(r,()=>e.children,null),j(r,N(ce,{get when(){return(t.getLessons()?.length??0)>0},get fallback(){return rd()},get children(){var o=ed();return j(o,N(et,{get each(){return t.getLessons()??[]},children:(s,i)=>{const a=i(),l=n().isLessonDone(a),u=t.getLessons()??[],c=u.findIndex(($,b)=>!n().isLessonDone(b)),h=c===-1?u.length-1:c,d=a===h&&!l,g=a>h&&!l;return(()=>{var $=sd(),b=$.firstChild;return b.$$click=()=>e.onLessonSelected(a),b.classList.toggle("current",!!d),b.classList.toggle("todo",!!g),b.classList.toggle("completed",!!l),X(b,"aria-current",d?"step":void 0),j(b,()=>s.title),Z(()=>X(b,"title",s.description||"")),$})()}})),o}}),null),r}})};le(["click"]);var od=M('<section class="completed-all-lessons card"><h2></h2><div class=stats>');const id=e=>{const{t}=be(),n=Ce(),r=je(),o=s=>{n(`/course/${r.courseIdx}/${s}/intro`)};return(()=>{var s=od(),i=s.firstChild,a=i.nextSibling;return j(i,()=>t("all_lessons_done")),j(s,N(Ci,{onLessonSelected:o,get courseIndex(){return Number(r.courseIdx)}}),a),j(s,(()=>{var l=oe(()=>!!e.children);return()=>l()&&e.children})(),null),j(s,N(Si,{get courseIdx(){return Number(r.courseIdx||-1)}}),null),s})()};var ad=M("<span contenteditable>");function Qn(e){let t,n=e.value;const r=o=>o.replace(/[\r\n]+/g,"").trim();return pe(()=>{t&&document.activeElement!==t&&(t.innerText=e.value)}),(()=>{var o=ad();return o.addEventListener("blur",s=>{const i=r(s.currentTarget.innerText);i!==e.value&&e.onChange(i)}),o.$$keydown=s=>{const i=s.currentTarget;s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),i.blur()):s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),i.innerText=n,i.blur())},o.addEventListener("focus",()=>{n=e.value}),Ze(s=>t=s,o),Z(s=>{var i=e.placeholder,a=`${e.class??""} ${e.value.trim()===""?"placeholder":""}`;return i!==s.e&&X(o,"aria-placeholder",s.e=i),a!==s.t&&Pe(o,s.t=a),s},{e:void 0,t:void 0}),o})()}le(["keydown"]);var ld=M('<button class=add-card title="Add a new card to this lesson"><span class=utf8-icon-add>'),cd=M("<div class=card-class-picker><button class=delete-button><span class=utf8-icon-close>"),ud=M("<div class=add-card>"),dd=M("<button>");function fd(e){const t=ve(),n=je(),r=Ce(),[o,s]=W(!1),i=a=>{const l=Number(n.courseIdx),u=t.getLessons();if(!Array.isArray(u)||e.lessonIdx<0||e.lessonIdx>=u.length){console.error("Invalid lesson index or malformed lessons:",u,e.lessonIdx);return}const c=Uc(a),h=u.map((g,$)=>$===e.lessonIdx?{...g,cards:[...g.cards,c]}:g);t.setLessons(h);const d=h[e.lessonIdx]?.cards?.length-1;if(d==null||d<0){console.error("Failed to calculate newCardIdx");return}r(`/editor/${l}/${e.lessonIdx}/${d}`)};return(()=>{var a=ud();return j(a,N(ce,{get when(){return!o()},get children(){var l=ld();return l.$$click=()=>s(!0),l}}),null),j(a,N(ce,{get when(){return o()},get children(){var l=cd(),u=l.firstChild;return u.$$click=()=>s(!1),j(l,N(et,{each:Kc,children:c=>(()=>{var h=dd();return h.$$click=()=>{i(c),s(!1)},j(h,c),h})()}),null),l}}),null),a})()}le(["click"]);var hd=M('<button class="large-icon-button icon-up-fat"title="Add a new lesson above this">'),md=M('<button class="large-icon-button icon-down-fat"title="Add a new lesson beneath this">'),gd=M("<aside class=add-lesson-overlay>"),pd=M('<div class=add-lesson-button-component><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course">');function yd(e){const t=ve(),[n,r]=W(!1),o=s=>{s.target.closest(".add-lesson-button-component")||r(!1)};return document.addEventListener("click",o),Ke(()=>document.removeEventListener("click",o)),(()=>{var s=pd(),i=s.firstChild;return i.$$click=()=>r(a=>!a),j(s,N(ce,{get when(){return n()},get children(){var a=gd();return j(a,N(ce,{get when(){return e.above||!e.above&&!e.below},get children(){var l=hd();return l.$$click=()=>{t.addLesson(Number(e.lessonIdx)-1),r(!1)},l}}),null),j(a,N(ce,{get when(){return e.below||!e.above&&!e.below},get children(){var l=md();return l.$$click=()=>{t.addLesson(Number(e.lessonIdx)+1),r(!1)},l}}),null),a}}),null),s})()}le(["click"]);var vd=M('<div class=card-holder><div class="vertical-controls top-controls"><button title="Move up to the previous lesson"class="move-card-button icon-up-fat"></button></div><div class=horizontal-controls><button title="Swap with the card on the left"class="move-card-button icon-left-fat"></button><div class=card-overlay-wrapper><div class=card-overlay><button title=Delete class="control small-control"><span class=icon-trash></span></button><button title=Edit class=control><span class=icon-pencil></span></button></div></div><button title="Swap with the card to the right"class="move-card-button icon-right-fat"></button></div><div class="vertical-controls bottom-controls"><button title="Move to the next lesson"class="move-card-button icon-down-fat">');function $d(e){const t=ve(),{showConfirm:n}=rr(),{t:r}=be(),o=Ce(),s=je(),i=c=>({...c,cards:[...c.cards]}),a=()=>{n(r("confirm_delete_card"),()=>t.deleteCard(Number(e.lessonIdx),Number(e.cardIdx)))},l=(c,h,d)=>{const $=[...t.getLessons()],b=i($[c]),m=[...b.cards],p=h+d;if(p<0||p>=m.length)return;const[f]=m.splice(h,1);m.splice(p,0,f),b.cards=m,$[c]=b,t.setLessons($)},u=(c,h,d)=>{const g=t.getLessons(),$=c+d;if($<0||$>=g.length||h<0||h>=g[c].cards.length)return;const b=[...g],m=i(b[c]),p=i(b[$]),f=[...m.cards],v=[...p.cards],[_]=f.splice(h,1);v.push(_),m.cards=f,p.cards=v,b[c]=m,b[$]=p,t.setLessons(b)};return(()=>{var c=vd(),h=c.firstChild,d=h.firstChild,g=h.nextSibling,$=g.firstChild,b=$.nextSibling,m=b.firstChild,p=m.firstChild,f=p.nextSibling,v=b.nextSibling,_=g.nextSibling,y=_.firstChild;return d.$$click=()=>u(e.lessonIdx,e.cardIdx,-1),$.$$click=()=>l(e.lessonIdx,e.cardIdx,-1),j(b,N(hi,{tabindex:-1,get card(){return e.card},get lesson(){return e.lesson},ondblclick:()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`)}),m),p.$$click=()=>a(),f.$$click=()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`),v.$$click=()=>l(e.lessonIdx,e.cardIdx,1),y.$$click=()=>u(e.lessonIdx,e.cardIdx,1),Z(w=>{var C=e.lessonIdx===0,O=e.cardIdx===0,T=e.cardIdx===e.lesson.cards.length-1,q=e.lessonIdx===t.getLessons().length-1;return C!==w.e&&(d.disabled=w.e=C),O!==w.t&&($.disabled=w.t=O),T!==w.a&&(v.disabled=w.a=T),q!==w.o&&(y.disabled=w.o=q),w},{e:void 0,t:void 0,a:void 0,o:void 0}),c})()}le(["click"]);var bd=M('<article class="card no-set-height no-lessons"><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course"></button><p>Click above to create your first lesson</p><p>Click titles and descriptions to edit them'),_d=M("<section class=lesson><header><h3><span>: &nbsp;</span></h3><h4></h4></header><div class=cards>");function wd(){const e=ve();pe(()=>{document.body.classList.add("editing-card"),Ke(()=>{document.body.classList.remove("editing-card")})});const t=(n,r)=>{const o=[...e.getLessons()];o[n]=r(o[n]),e.setLessons(o)};return[oe(()=>e.getLessons().map((n,r)=>(()=>{var o=_d(),s=o.firstChild,i=s.firstChild,a=i.firstChild,l=a.firstChild,u=i.nextSibling,c=s.nextSibling;return X(o,"id",`lesson-${r}`),j(a,r+1,l),j(a,N(Qn,{get value(){return n.title},onChange:h=>t(r,d=>({...d,title:h}))}),null),j(i,N(yd,{lessonIdx:r}),null),j(u,N(Qn,{get value(){return n.description??""},onChange:h=>t(r,d=>({...d,description:h}))})),j(c,N(et,{get each(){return n.cards},children:(h,d)=>N($d,{lesson:n,lessonIdx:r,card:h,get cardIdx(){return d()}})}),null),j(c,N(fd,{lessonIdx:r}),null),o})())),N(ce,{get when(){return e.getLessons().length===0},get children(){var n=bd(),r=n.firstChild;return r.$$click=()=>e.addLesson(0),n}})]}le(["click"]);var Sd=M('<button class="large-icon-button icon-trash">');function Cd(e){const{t}=be(),n=Ce(),{showConfirm:r}=rr(),o=async()=>{const a=ve();if(a)try{await a.deleteCourse(e.courseIdx),n("/")}catch(l){console.error("Failed to delete course:",l)}},s=()=>{if(e.courseIdx==null){console.warn("No course selected.");return}r(t("confirm_delete_course"),o)},i=ve();return(()=>{var a=Sd();return a.$$click=s,a.disabled=!i,Z(()=>X(a,"title",t("delete_course"))),a})()}le(["click"]);var Ed=M("<nav class=coourse-action-buttons>"),Pd=M("<article class=course-editor role=dialog aria-modal=true><header><h2>:&nbsp;<q></q></h2><h3><q>"),kd=M("<nav class=lesson-pager>"),Od=M("<button class=pager-link>: ");function Rd(){const e=ve(),{t}=be(),n=Ce(),r=je(),{config:o}=Me();return pe(()=>{console.log("editor course idx:",r.courseIdx)}),pe(()=>{document.body.classList.add("editing-card"),Ke(()=>{document.body.classList.remove("editing-card")})}),(()=>{var s=Pd(),i=s.firstChild,a=i.firstChild,l=a.firstChild,u=l.nextSibling,c=a.nextSibling,h=c.firstChild;return j(a,()=>t("course"),l),j(u,N(Qn,{get value(){return e.getTitle()??""},onChange:d=>e.setTitle(d)})),j(a,N(ce,{get when(){return Number(r.courseIdx)<o.courses.length},get children(){var d=Ed();return j(d,N(Cd,{get courseIdx(){return Number(r.courseIdx)}})),d}}),null),j(h,N(Qn,{get value(){return e.getDescription()??"Description"},onChange:d=>e.setDescription(d)})),j(i,(()=>{var d=oe(()=>e.getLessons()?.length>1);return()=>d()&&(()=>{var g=kd();return j(g,()=>e.getLessons().map(($,b)=>(()=>{var m=Od(),p=m.firstChild;return m.$$click=()=>n(`#lesson-${b}`),j(m,b+1,p),j(m,()=>$.title,null),Z(()=>X(m,"aria-label",`Go to lesson ${b+1}: ${$.title}`)),m})())),g})()})(),null),j(s,N(wd,{}),null),s})()}le(["click"]);var Nd=M("<aside class=course-score-progress-component><progress class=course-score-progress-bar>/");const Id=e=>{const{t}=be(),r=ve().getTotalQuestionsCount();return(()=>{var o=Nd(),s=o.firstChild,i=s.firstChild;return X(s,"max",r),j(s,()=>e.correct,i),j(s,r,null),Z(()=>X(s,"aria-label",t("course_score_so_far"))),Z(()=>s.value=e.correct),o})()};var Ld=M('<section class="stats-component card"><h2></h2><table class=horizontal-stats><thead><tr><th class=correct-answers></th><th class=incorrect-answers></th><th class=questions-answered></th></tr></thead><tbody><tr><td></td><td></td><td>');const Ad=e=>{const{t}=be(),n=Q(()=>rt(e.courseIdx));if(!n()||!n().getTotalQuestionsAnswered())return null;const r=Q(()=>n().getTotalQuestionsAnswered());return(()=>{var o=Ld(),s=o.firstChild,i=s.nextSibling,a=i.firstChild,l=a.firstChild,u=l.firstChild,c=u.nextSibling,h=c.nextSibling,d=a.nextSibling,g=d.firstChild,$=g.firstChild,b=$.nextSibling,m=b.nextSibling;return j(s,()=>t("progress")),j(o,N(Id,{get correct(){return r()}}),i),j(u,()=>t("correct_answer_count_alt")),j(c,()=>t("incorrect_answer_count_alt")),j(h,()=>t("questions_answered_count_alt")),j($,()=>n().getTotalCorrectAnswers()),j(b,()=>n().getTotalIncorrectAnswers()),j(m,()=>n().getTotalQuestionsAnswered()),Z(p=>{var f=t("corect_answers_alt"),v=t("incorrect_answer_count_alt"),_=t("questions_answered_count_alt");return f!==p.e&&X(u,"title",p.e=f),v!==p.t&&X(c,"title",p.t=v),_!==p.a&&X(h,"title",p.a=_),p},{e:void 0,t:void 0,a:void 0}),o})()};var jd=M("<p>"),Td=M('<section class="card no-border no-set-height"><h2>'),xd=M("<article id=home>"),qd=M("<div>[1] Loading lessons ...");const Dd=()=>{const e=je(),t=Ce(),[n,r]=W(null),[o,s]=W(null),i=ve(),[a,l]=W(null);pe(()=>{const c=Number(e.courseIdx);Number.isFinite(c)?(console.log("Course home screen set courseIdx",c),s(c)):(console.log("Course home screen has no courseIdx"),s(null))}),pe(()=>{if(i&&o()!==null){const h=i.store.courseMetadata;l(h)}}),pe(()=>{const c=o();c!==null&&(console.log("Creating lessonStore for courseIdx",c),r(rt(c)))});const u=c=>{t(`/course/${o()}/${c}/intro`)};return N(ce,{get when(){return i&&n()},get fallback(){return qd()},get children(){var c=xd();return j(c,N(Ad,{get courseIdx(){return o()}}),null),j(c,N(Ci,{get courseIndex(){return o()},onLessonSelected:u,get children(){return N(ce,{get when(){return a()},get children(){var h=Td(),d=h.firstChild;return j(d,()=>a().title),j(h,N(ce,{get when(){return a().description},get children(){var g=jd();return j(g,()=>a().description),g}}),null),h}})}}),null),c}})};var Md=M("<article id=main>");const Vd=e=>{const t=wt(()=>e.children);return(()=>{var n=Md();return j(n,t),n})()},Fd=(e,t)=>{const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=t%60;let s="";return n>0&&(s+=`${n} ${e("hours")}`),(r>0||n>0)&&(s&&(s+=" "),s+=`${r} ${e("minutes")}`),s&&(s+=", "),s+=`${o} ${e("seconds")}`,s};var Ud=M('<section class="lesson-completed card"><h2></h2><p>'),Kd=M("<footer class=lesson-completed-footer><button class=next-button>");const zd=e=>{const{t}=be(),n=je(),r=rt(Number(n.courseIdx||-1)),o=Number(n.lessonIdx),s=r.getTotalWrongAttemptsInLesson(o),i=r.getLessonQuestionCount(o),a=()=>{Ur(),e.onNext()};return[(()=>{var l=Ud(),u=l.firstChild,c=u.nextSibling;return j(u,()=>t("lesson_completed")),j(c,()=>t("lesson_completed_counts",{questionCount:i,incorrectAnswerCount:s,duration:Fd(t,e.lessonDurationInSeconds)})),l})(),(()=>{var l=Kd(),u=l.firstChild;return u.$$click=a,j(u,()=>t("continue")),l})()]};le(["click"]);const Hd=()=>{const e=je(),[t]=pu(),n=Ce(),r=ve(),o=Q(()=>Number(e.courseIdx)),s=Q(()=>Number(e.lessonIdx)),i=Q(()=>Number(t["lesson-duration"])||-999),a=Q(()=>s()+1),l=()=>{r&&(a()<r.getLessons().length?n(`/course/${o()}`):n(`/course/${o()}/finished`))};return N(ce,{when:r,get children(){return N(zd,{onNext:l,get lessonDurationInSeconds(){return i()}})}})};var Wd=M("<div>Loading Lesson Data...");const Bd=()=>{const e=je(),t=ve(),n=Q(()=>Number(e.courseIdx||-1)),r=Q(()=>Number(e.lessonIdx||-1)),o=Ce(),s=rt(n()),[i,a]=W(null),[l,u]=W(Date.now());pe(()=>{if(!t)return;const g=r(),$=t.getLessons();$[g]&&(a($[g]),u(Date.now()))});const c=()=>{o(`/course/${n()}`)},h=(g,$)=>{console.log("calling lessonsStore.saveAnswer for",g),s.saveAnswer(r(),g,$||"")},d=()=>{const g=Math.floor((Date.now()-l())/1e3);o(`/course/${n()}/${r()}/completed?lesson-duration=${g}`)};return N(ce,{get when(){return i()},get fallback(){return Wd()},children:g=>N(Xc,{get lesson(){return g()},onCancel:c,onAnswer:h,onLessonComplete:d})})};var Gd=M("<div>Loading Lesson Data..."),Jd=M('<article class="lesson-intro card"><header><h2> </h2><h3>'),Qd=M("<footer class=lesson-intro-footer><button class=next-button>"),Xd=M("<p class=description>");const No=()=>{const e=je(),t=Ce(),{t:n}=be(),r=ve(),o=Q(()=>Number(e.courseIdx)),s=Q(()=>Number(e.lessonIdx)),i=Q(()=>rt(o())),a=Q(()=>{if(r)return r.getLessons()?.[s()]}),l=()=>{rc(),i()?.resetLesson(s()),t(`/course/${o()}/${s()}/in-progress`)};return N(ce,{get when(){return a()},get fallback(){return Gd()},children:u=>[(()=>{var c=Jd(),h=c.firstChild,d=h.firstChild,g=d.firstChild,$=d.nextSibling;return j(d,()=>n("lesson"),g),j(d,()=>s()+1,null),j($,()=>u().title),j(c,(()=>{var b=oe(()=>!!u().description);return()=>b()&&(()=>{var m=Xd();return j(m,()=>u().description),m})()})(),null),c})(),(()=>{var c=Qd(),h=c.firstChild;return h.$$click=l,j(h,()=>n("begin")),c})()]})};le(["click"]);const Yd="0.2.4",Zd="https://leegee.github.io/learning-oe-solidjs",Ei={version:Yd,homepage:Zd};var ef=M("<h1>");const tf=e=>{const[t,n]=W(!1);let r;return pe(()=>{if(r){let o;requestAnimationFrame(()=>{o=new IntersectionObserver(i=>{i[0].isIntersecting&&(n(!0),o.unobserve(r))},{threshold:.1}),o.observe(r)}),Ke(()=>{o?.disconnect()})}}),(()=>{var o=ef(),s=r;return typeof s=="function"?Ze(s,o):r=o,j(o,()=>e.title),Z(()=>o.classList.toggle("visible",!!t())),o})()};var nf=M("<button class=large-icon-button><i class=icon-cog>");const Io=e=>{const t=Ce();return(()=>{var n=nf();return n.$$click=()=>t("/editor/"+e.courseIdx),n})()};le(["click"]);var rf=M('<button title="Download this course"class="icon-download large-icon-button">'),sf=M('<dialog class=dialog-error><header><h3>Error saving lessons</h3></header><footer><button class="large-icon-button utf8-icon-close">');const Lo=e=>{const t=ve();let n=null;const r=async()=>{const o="lessons.lson.json";try{const s=await t.getCourseData(e.courseIdx);if(!s)throw new Error("Lessons not loaded?");const i=new Blob([JSON.stringify(s,null,2)],{type:"text/plain"}),a=URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=o,l.click(),URL.revokeObjectURL(a)}catch(s){s.name!=="AbortError"&&(console.error("Error saving file:",s),n?.showModal())}};return[(()=>{var o=rf();return o.$$click=r,o})(),(()=>{var o=sf(),s=o.firstChild,i=s.nextSibling,a=i.firstChild;return Ze(l=>n=l,o),a.$$click=()=>n?.close(),o})()]};le(["click"]);var of=M('<button title="Create a blank course"class="large-icon-button utf8-icon-new">');const af=()=>{const e=Ce(),{config:t}=Me(),n=async()=>{const o=ve();if(!o)return;const s=o.initNewCourse(t);s!==void 0?(rt(s),e(`/editor/${s}`)):alert("Error creating new course")},r=ve();return N(ce,{when:r,get children(){var o=of();return o.$$click=n,o}})};le(["click"]);var lf=M('<button title="Load a course from a file"class=large-icon-button><i class=icon-upload>'),cf=M("<input type=file accept=.json,application/json style=display:none>"),uf=M("<dialog class=dialog-error><header><h3>Error loading course</h3></header><footer><button class=large-icon-button><span class=utf8-icon-close>"),df=M('<dialog class=dialog-ok><header><h3>Course Loaded</h3></header><footer><button class="large-icon-button utf8-icon-tick">');const ff=()=>{const e=ve();let t=null,n=null,r=null;const o=()=>{n?.close(),t?.close()},s=()=>r?.click(),i=async a=>{const u=a.target.files?.[0];if(u)try{const c=await u.text();await e.saveCourseToStorage(c),n?.showModal()}catch(c){c.name!=="AbortError"&&(console.error("Error loading file:",c),t?.showModal())}finally{r&&(r.value="")}};return[(()=>{var a=lf();return a.$$click=s,a.disabled=!e,a})(),(()=>{var a=cf();return a.addEventListener("change",i),Ze(l=>r=l,a),a})(),(()=>{var a=uf(),l=a.firstChild,u=l.nextSibling,c=u.firstChild;return Ze(h=>t=h,a),c.$$click=o,a})(),(()=>{var a=df(),l=a.firstChild,u=l.nextSibling,c=u.firstChild;return Ze(h=>n=h,a),c.$$click=o,a})()]};le(["click"]);var Ao=M("<span class=course-action-buttons>"),hf=M("<li><a>Custom Course"),mf=M("<footer><small><button>Edit Courses "),gf=M('<aside aria-roledescription="Toggle menu"class=hamburger-menu><section class=card><menu></menu></section><footer><small>Version '),pf=M("<p>Loading..."),yf=M("<li><a>");const vf=()=>{const e=ve(),[t,n]=W(!1),r=Ce(),{config:o}=Me(),[s,i]=W(0),a=l=>{i(l),r("/course/"+l)};return pe(()=>{if(!e){console.warn("Course store not available");return}isNaN(s())&&console.debug("local course index is NaN?")}),N(ce,{when:e,get fallback(){return pf()},get children(){var l=gf(),u=l.firstChild,c=u.firstChild,h=u.nextSibling,d=h.firstChild;return d.firstChild,j(u,N(tf,{get title(){return o.menuTitle||o.appTitle}}),c),j(c,()=>Tn(o).map((g,$)=>(()=>{var b=yf(),m=b.firstChild;return m.$$click=()=>a($),j(m,g),j(b,N(ce,{get when(){return t()},get children(){var p=Ao();return j(p,N(Si,{courseIdx:$}),null),j(p,N(Lo,{courseIdx:$}),null),j(p,N(Io,{courseIdx:$}),null),p}}),null),Z(()=>Pe(b,s()===$?"selected":"")),b})()),null),j(c,N(ce,{get when(){return o.allowCustomisation},get children(){var g=hf(),$=g.firstChild;return $.$$click=()=>{r("/course/"+o.courses.length)},j(g,N(ce,{get when(){return t()},get children(){var b=Ao();return j(b,N(af,{}),null),j(b,N(ff,{}),null),j(b,N(Lo,{get courseIdx(){return Tn(o).length}}),null),j(b,N(Io,{get courseIdx(){return Tn(o).length}}),null),b}}),null),g}}),null),j(u,N(ce,{get when(){return o.allowCustomisation},get children(){var g=mf(),$=g.firstChild,b=$.firstChild;return b.$$click=()=>n(!t()),g}}),null),j(d,()=>Ei.version,null),Z(()=>Pe(c,"course-menu "+(t()?"editing":""))),l}})};le(["click"]);const Ot=e=>e.allowed?e.children:N(qn,{get href(){return e.redirect}});var $f=M("<main><h1>Home Page");function bf(){return qo(()=>document.body.classList.add("home")),Ke(()=>document.body.classList.remove("home")),(()=>{var e=$f();return e.firstChild,j(e,N(wi,{href:"/course/1",children:"Course"}),null),e})()}const _f=()=>[N(Ne,{path:"/home",component:bf}),N(Ne,{path:"/course",component:()=>N(qn,{href:"/menu"})}),N(Ne,{path:"/course/:courseIdx",component:Vd,get children(){return[N(Ne,{path:"/",component:Dd}),N(Ne,{path:":lessonIdx",component:No}),N(Ne,{path:":lessonIdx/intro",component:No}),N(Ne,{path:":lessonIdx/in-progress",component:Bd}),N(Ne,{path:":lessonIdx/completed",component:Hd}),N(Ne,{path:"finished",component:id})]}}),N(Ne,{path:"/editor/:courseIdx/:lessonIdx/:cardIdx",component:()=>{const{config:e}=Me();return N(Ot,{get allowed(){return e.allowCustomisation??!1},redirect:"/course/1",get children(){return N(Yu,{})}})}}),N(Ne,{path:"/editor/:courseIdx?",component:()=>{const{config:e}=Me();return N(Ot,{get allowed(){return e.allowCustomisation??!1},redirect:"/course/1",get children(){return N(Rd,{})}})}}),N(Ne,{path:"/menu",component:()=>{const{config:e}=Me();return N(Ot,{get allowed(){return e.allowCustomisation??!1},redirect:"/course/1",get children(){return N(vf,{})}})}}),N(Ne,{path:"/",component:()=>{const{config:e}=Me();return N(Ot,{get allowed(){return e.homeInsteadOfMenu??!1},redirect:"/course/1",get children(){return N(qn,{href:"/home"})}})}}),N(Ne,{path:"*",component:()=>{const{config:e}=Me();return N(Ot,{get allowed(){return e.allowCustomisation??!1},redirect:"/course/1",get children(){return N(qn,{href:"/menu"})}})}})],wf=Ei.homepage,Sf=()=>new URL(wf).pathname.replace(/\/?$/,"");var Cf=M('<button class="hamburger-button large-icon-button"aria-label="Toggle menu"><span>');const Ef=()=>{const e=sr(),t=Ce(),[n,r]=W("/"),o=Sf(),s=()=>e.pathname.replace(o,"")||"/",i=()=>/\/menu(\/|$)/.test(e.pathname),a=()=>{if(i()){const l=s(),u=n();u===l||u==="/menu"||!u?t("/"):window.history.back()}else r(s()),t("/menu")};return pe(()=>{i()?document.body.classList.add("menu-shown"):document.body.classList.remove("menu-shown")}),(()=>{var l=Cf(),u=l.firstChild;return l.$$click=a,Z(()=>Pe(u,`utf8-icon-${i()?"close":"menu"}`)),l})()};le(["click"]);var Pf=M("<span class=utf8-icon-home>"),kf=M("<button class=large-icon-button aria-label=Home>"),Of=M("<header class=header-component><div class=header-text><h1>"),Rf=M("<p>Loading...");const Nf=()=>{const e=je(),{config:t}=Me(),n=ve(),r=!!e.courseIdx&&t.allowCustomisation;return N(ce,{when:n,get fallback(){return Rf()},get children(){var o=Of(),s=o.firstChild,i=s.firstChild;return j(i,()=>t.appTitle),j(s,N(zo,{get children(){return[N(Be,{get when(){return t.homeInsteadOfMenu},get children(){var a=kf();return j(a,N(wi,{href:"/home",onclick:()=>Ur(),get children(){return Pf()}})),a}}),N(Be,{when:r,get children(){return N(Ef,{})}})]}}),null),Z(()=>X(i,"lang",t.targetLanguage)),o}})};function If(){const e=ve(),t=je();return pe(()=>{const n=t.courseIdx;if(n==null)return;const r=Number(n);isNaN(r)?console.error("Load course by route failure - course index was non-numeric",n):(console.log("Load course by route",r),e.loadCourseFromFile(r))}),null}var Lf=M("<main id=main>");const Af=e=>N(Au,{root:n=>N(fc,{get config(){return e.config},get children(){return[N(If,{}),N(qa,{get children(){return N(nc,{get children(){var r=Lf();return j(r,N(Nf,{}),null),j(r,()=>n.children,null),r}})}})]}}),get children(){return N(_f,{})}}),jf=async()=>{try{return await Wo()}catch(e){return console.error("Error loading configuration:",e),null}},Tf=async()=>{const e=await jf();if(!e)throw new Error("Failed to load config. App will not start.");await Promise.all([tu(),xa(e)]);const t=N(Af,{config:e}),n=document.getElementById("root");if(n)n.innerHTML="",ra(()=>t,n);else throw new Error("No root in HTML")};await Tf();

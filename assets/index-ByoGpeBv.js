(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const vi=!0,$i=(e,t)=>e===t,Ve=Symbol("solid-proxy"),_i=typeof Proxy=="function",$r=Symbol("solid-track"),wi=Symbol("solid-dev-component"),Rn={equals:$i};let Oo=jo;const Je=1,Nn=2,bi={},Zn={};var se=null;let er=null,Si=null,he=null,Ce=null,We=null,Kn=0;const Ci={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function pt(e,t){const n=he,r=se,o=e.length===0,s=t===void 0?r:t,a=o?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=o?()=>e(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>e(()=>$e(()=>Nt(a)));se=a,he=null;try{return Fe(i,!0)}finally{he=n,se=r}}function H(e,t){t=t?Object.assign({},Rn,t):Rn;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0};t.name&&(n.name=t.name),t.internal?n.internal=!0:Lo(n);const r=o=>(typeof o=="function"&&(o=o(n.value)),Rr(n,o));return[Ao.bind(n),r]}function Ei(e,t,n){const r=xt(e,t,!0,Je,n);at(r)}function Y(e,t,n){const r=xt(e,t,!1,Je,n);at(r)}function me(e,t,n){Oo=Li;const r=xt(e,t,!1,Je,n);r.user=!0,We?We.push(r):at(r)}function B(e,t,n){n=n?Object.assign({},Rn,n):Rn;const r=xt(e,t,!0,0,n);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,at(r),Ao.bind(r)}function Pi(e){return e&&typeof e=="object"&&"then"in e}function ve(e,t,n){let r,o,s;r=!0,o=e,s={};let a=null,i=Zn,c=!1,d="initialValue"in s,u=typeof r=="function"&&B(r);const h=new Set,[p,v]=(s.storage||H)(s.initialValue),[w,y]=H(void 0),[f,m]=H(void 0,{equals:!1}),[l,g]=H(d?"ready":"unresolved");function $(k,P,L,T){return a===k&&(a=null,T!==void 0&&(d=!0),(k===i||P===i)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(T,{value:P})),i=Zn,b(P,L)),P}function b(k,P){Fe(()=>{P===void 0&&v(()=>k),g(P!==void 0?"errored":d?"ready":"unresolved"),y(P);for(const L of h.keys())L.decrement();h.clear()},!1)}function _(){const k=Ri,P=p(),L=w();if(L!==void 0&&!a)throw L;return he&&he.user,P}function C(k=!0){if(k!==!1&&c)return;c=!1;const P=u?u():r;if(P==null||P===!1){$(a,$e(p));return}const L=i!==Zn?i:$e(()=>o(P,{value:p(),refetching:k}));return Pi(L)?(a=L,"value"in L?(L.status==="success"?$(a,L.value,void 0,P):$(a,void 0,wr(L.value),P),L):(c=!0,queueMicrotask(()=>c=!1),Fe(()=>{g(d?"refreshing":"pending"),m()},!1),L.then(T=>$(L,T,void 0,P),T=>$(L,void 0,wr(T),P)))):($(a,L,void 0,P),L)}return Object.defineProperties(_,{state:{get:()=>l()},error:{get:()=>w()},loading:{get(){const k=l();return k==="pending"||k==="refreshing"}},latest:{get(){if(!d)return _();const k=w();if(k&&!a)throw k;return p()}}}),u?Ei(()=>C(!1)):C(!1),[_,{refetch:C,mutate:v}]}function Ro(e){return Fe(e,!1)}function $e(e){if(he===null)return e();const t=he;he=null;try{return e()}finally{he=t}}function Or(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return a=>{let i;if(r){i=Array(e.length);for(let d=0;d<e.length;d++)i[d]=e[d]()}else i=e();if(s)return s=!1,a;const c=$e(()=>t(i,o,a));return o=i,c}}function Ye(e){return se===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):se.cleanups===null?se.cleanups=[e]:se.cleanups.push(e),e}function _r(){return he}function No(){return se}function Io(e,t){const n=se,r=he;se=e,he=null;try{return Fe(t,!0)}catch(o){Nr(o)}finally{se=n,he=r}}function ki(e){const t=he,n=se;return Promise.resolve().then(()=>{he=t,se=n;let r;return Fe(e,!1),he=se=null,r?r.done:void 0})}const[sf,of]=H(!1);function Oi(e,t){const n=xt(()=>$e(()=>(Object.assign(e,{[wi]:!0}),e(t))),void 0,!0,0);return n.props=t,n.observers=null,n.observerSlots=null,n.name=e.name,n.component=e,at(n),n.tValue!==void 0?n.tValue:n.value}function Lo(e){se&&(se.sourceMap?se.sourceMap.push(e):se.sourceMap=[e],e.graph=se)}function jt(e,t){const n=Symbol("context");return{id:n,Provider:Ai(n,t),defaultValue:e}}function Tt(e){let t;return se&&se.context&&(t=se.context[e.id])!==void 0?t:e.defaultValue}function $t(e){const t=B(e),n=B(()=>br(t()),void 0,{name:"children"});return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Ri;function Ao(){if(this.sources&&this.state)if(this.state===Je)at(this);else{const e=Ce;Ce=null,Fe(()=>Ln(this),!1),Ce=e}if(he){const e=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(e)):(he.sources=[this],he.sourceSlots=[e]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function Rr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],a=er&&er.running;a&&er.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Ce.push(s):We.push(s),s.observers&&To(s)),a||(s.state=Je)}if(Ce.length>1e6)throw Ce=[],vi?new Error("Potential Infinite Loop Detected."):new Error},!1)),t}function at(e){if(!e.fn)return;Nt(e);const t=Kn;Ni(e,e.value,t)}function Ni(e,t,n){let r;const o=se,s=he;he=se=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=Je,e.owned&&e.owned.forEach(Nt),e.owned=null),e.updatedAt=n+1,Nr(a)}finally{he=s,se=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Rr(e,r):e.value=r,e.updatedAt=n)}function xt(e,t,n,r=Je,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:se,context:se?se.context:null,pure:n};return se===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):se!==bi&&(se.owned?se.owned.push(s):se.owned=[s]),o&&o.name&&(s.name=o.name),s}function In(e){if(e.state===0)return;if(e.state===Nn)return Ln(e);if(e.suspense&&$e(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Kn);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Je)at(e);else if(e.state===Nn){const r=Ce;Ce=null,Fe(()=>Ln(e,t[0]),!1),Ce=r}}function Fe(e,t){if(Ce)return e();let n=!1;t||(Ce=[]),We?n=!0:We=[],Kn++;try{const r=e();return Ii(n),r}catch(r){n||(We=null),Ce=null,Nr(r)}}function Ii(e){if(Ce&&(jo(Ce),Ce=null),e)return;const t=We;We=null,t.length&&Fe(()=>Oo(t),!1)}function jo(e){for(let t=0;t<e.length;t++)In(e[t])}function Li(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:In(r)}for(t=0;t<n;t++)In(e[t])}function Ln(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===Je?r!==t&&(!r.updatedAt||r.updatedAt<Kn)&&In(r):o===Nn&&Ln(r,t)}}}function To(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Nn,n.pure?Ce.push(n):We.push(n),n.observers&&To(n))}}function Nt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),a=n.observerSlots.pop();r<o.length&&(s.sourceSlots[a]=r,o[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Nt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Nt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,delete e.sourceMap}function wr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Nr(e,t=se){throw wr(e)}function br(e){if(typeof e=="function"&&!e.length)return br(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=br(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ai(e,t){return function(r){let o;return Y(()=>o=$e(()=>(se.context={...se.context,[e]:r.value},$t(()=>r.children))),void 0,t),o}}const ji=Symbol("fallback");function Mr(e){for(let t=0;t<e.length;t++)e[t]()}function Ti(e,t,n={}){let r=[],o=[],s=[],a=0,i=t.length>1?[]:null;return Ye(()=>Mr(s)),()=>{let c=e()||[],d=c.length,u,h;return c[$r],$e(()=>{let v,w,y,f,m,l,g,$,b;if(d===0)a!==0&&(Mr(s),s=[],r=[],o=[],a=0,i&&(i=[])),n.fallback&&(r=[ji],o[0]=pt(_=>(s[0]=_,n.fallback())),a=1);else if(a===0){for(o=new Array(d),h=0;h<d;h++)r[h]=c[h],o[h]=pt(p);a=d}else{for(y=new Array(d),f=new Array(d),i&&(m=new Array(d)),l=0,g=Math.min(a,d);l<g&&r[l]===c[l];l++);for(g=a-1,$=d-1;g>=l&&$>=l&&r[g]===c[$];g--,$--)y[$]=o[g],f[$]=s[g],i&&(m[$]=i[g]);for(v=new Map,w=new Array($+1),h=$;h>=l;h--)b=c[h],u=v.get(b),w[h]=u===void 0?-1:u,v.set(b,h);for(u=l;u<=g;u++)b=r[u],h=v.get(b),h!==void 0&&h!==-1?(y[h]=o[u],f[h]=s[u],i&&(m[h]=i[u]),h=w[h],v.set(b,h)):s[u]();for(h=l;h<d;h++)h in y?(o[h]=y[h],s[h]=f[h],i&&(i[h]=m[h],i[h](h))):o[h]=pt(p);o=o.slice(0,a=d),r=c.slice(0)}return o});function p(v){if(s[h]=v,i){const[w,y]=H(h,{name:"index"});return i[h]=y,t(c[h],w)}return t(c[h])}}}function A(e,t){return Oi(e,t||{})}function Dt(){return!0}const xi={get(e,t,n){return t===Ve?n:e.get(t)},has(e,t){return t===Ve?!0:e.has(t)},set:Dt,deleteProperty:Dt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Dt,deleteProperty:Dt}},ownKeys(e){return e.keys()}};function tr(e){return(e=typeof e=="function"?e():e)?e:{}}function qi(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Di(...e){let t=!1;for(let a=0;a<e.length;a++){const i=e[a];t=t||!!i&&Ve in i,e[a]=typeof i=="function"?(t=!0,B(i)):i}if(_i&&t)return new Proxy({get(a){for(let i=e.length-1;i>=0;i--){const c=tr(e[i])[a];if(c!==void 0)return c}},has(a){for(let i=e.length-1;i>=0;i--)if(a in tr(e[i]))return!0;return!1},keys(){const a=[];for(let i=0;i<e.length;i++)a.push(...Object.keys(tr(e[i])));return[...new Set(a)]}},xi);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const i=e[a];if(!i)continue;const c=Object.getOwnPropertyNames(i);for(let d=c.length-1;d>=0;d--){const u=c[d];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(i,u);if(!r[u])r[u]=h.get?{enumerable:!0,configurable:!0,get:qi.bind(n[u]=[h.get.bind(i)])}:h.value!==void 0?h:void 0;else{const p=n[u];p&&(h.get?p.push(h.get.bind(i)):h.value!==void 0&&p.push(()=>h.value))}}}const o={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){const i=s[a],c=r[i];c&&c.get?Object.defineProperty(o,i,c):o[i]=c?c.value:void 0}return o}let Mi=0;function Vi(){return`cl-${Mi++}`}const xo=e=>`Attempting to access a stale value from <${e}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function it(e){const t="fallback"in e&&{fallback:()=>e.fallback};return B(Ti(()=>e.each,e.children,t||void 0),void 0,{name:"value"})}function ue(e){const t=e.keyed,n=B(()=>e.when,void 0,{name:"condition value"}),r=t?n:B(n,void 0,{equals:(o,s)=>!o==!s,name:"condition"});return B(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?$e(()=>s(t?o:()=>{if(!$e(r))throw xo("Show");return n()})):s}return e.fallback},void 0,{name:"value"})}function Fi(e){const t=$t(()=>e.children),n=B(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let a=0;a<o.length;a++){const i=a,c=o[a],d=s,u=B(()=>d()?void 0:c.when,void 0,{name:"condition value"}),h=c.keyed?u:B(u,void 0,{equals:(p,v)=>!p==!v,name:"condition"});s=()=>d()||(h()?[i,u,c]:void 0)}return s});return B(()=>{const r=n()();if(!r)return e.fallback;const[o,s,a]=r,i=a.children;return typeof i=="function"&&i.length>0?$e(()=>i(a.keyed?s():()=>{if($e(n)()?.[0]!==o)throw xo("Match");return s()})):i},void 0,{name:"eval conditions"})}function et(e){return e}const Ui={hooks:Ci,writeSignal:Rr,registerGraph:Lo};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);function Ki(e,t,n){let r=n.length,o=t.length,s=r,a=0,i=0,c=t[o-1].nextSibling,d=null;for(;a<o||i<s;){if(t[a]===n[i]){a++,i++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===a){const u=s<r?i?n[i-1].nextSibling:n[s-i]:c;for(;i<s;)e.insertBefore(n[i++],u)}else if(s===i)for(;a<o;)(!d||!d.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[i]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[i++],t[a++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!d){d=new Map;let h=i;for(;h<s;)d.set(n[h],h++)}const u=d.get(t[a]);if(u!=null)if(i<u&&u<s){let h=a,p=1,v;for(;++h<o&&h<s&&!((v=d.get(t[h]))==null||v!==u+p);)p++;if(p>u-i){const w=t[a];for(;i<u;)e.insertBefore(n[i++],w)}else e.replaceChild(n[i++],t[a++])}else a++;else t[a++].remove()}}}const Vr="_$DX_DELEGATE";function zi(e,t,n,r={}){if(!t)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let o;return pt(s=>{o=s,t===document?e():j(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function M(e,t,n,r){let o;const s=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},a=()=>(o||(o=s())).cloneNode(!0);return a.cloneNode=a,a}function ae(e,t=window.document){const n=t[Vr]||(t[Vr]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Hi))}}function te(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ne(e,t){t==null?e.removeAttribute("class"):e.className=t}function It(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function ot(e,t,n){return $e(()=>e(t,n))}function j(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return An(e,t,r,n);Y(o=>An(e,t(),o,n),r)}function Hi(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),a=()=>{const c=t[n];if(c&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?c.call(t,d,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},i=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();s(c[0]);for(let d=0;d<c.length-2&&(t=c[d],!!a());d++){if(t._$host){t=t._$host,i();break}if(t.parentNode===o)break}}else i();s(r)}function An(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(a){let i=n[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),n=ct(e,n,r,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=ct(e,n,r);else{if(s==="function")return Y(()=>{let i=t();for(;typeof i=="function";)i=i();n=An(e,i,n,r)}),()=>n;if(Array.isArray(t)){const i=[],c=n&&Array.isArray(n);if(Sr(i,t,n,o))return Y(()=>n=An(e,i,n,r,!0)),()=>n;if(i.length===0){if(n=ct(e,n,r),a)return n}else c?n.length===0?Fr(e,i,r):Ki(e,n,i):(n&&ct(e),Fr(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=ct(e,n,r,t);ct(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Sr(e,t,n,r){let o=!1;for(let s=0,a=t.length;s<a;s++){let i=t[s],c=n&&n[e.length],d;if(!(i==null||i===!0||i===!1))if((d=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))o=Sr(e,i,c)||o;else if(d==="function")if(r){for(;typeof i=="function";)i=i();o=Sr(e,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||o}else e.push(i),o=!0;else{const u=String(i);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function Fr(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ct(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const i=t[a];if(o!==i){const c=i.parentNode===e;!s&&!a?c?e.replaceChild(o,i):e.insertBefore(o,n):c&&i.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Bi=!1,Wi="modulepreload",Ji=function(e){return"/learning-oe-solidjs/"+e},Ur={},gt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");o=Promise.allSettled(n.map(c=>{if(c=Ji(c),c in Ur)return;Ur[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Wi,d||(h.as="script"),h.crossOrigin="",h.href=c,i&&h.setAttribute("nonce",i),document.head.appendChild(h),d)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},Gi=["targetLanguage","defaultLanguage","appTitle","i18n"];let Mt;const qo=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;for(const n in t)t[n]&&typeof t[n]=="object"&&!Array.isArray(t[n])?((!e[n]||typeof e[n]!="object")&&(e[n]={}),qo(e[n],t[n])):e[n]=t[n];return e},Do=async()=>Mt||(Mt=(async()=>{let e,t;try{e=(await gt(async()=>{const{default:o}=await import("./default.config-C-p_k8Fb.js");return{default:o}},[])).default}catch{throw new Error("Default config file did not properly load")}try{t=(await gt(async()=>{const{default:o}=await import("./app.config-CR0Mk74Z.js");return{default:o}},[])).default}catch{throw new Error('Config file "app.config.json" did not properly load')}const n=qo(e,t);let r=!0;if(Gi.forEach(o=>{n[o]||(console.warn(`app.config.json should contain the "${o}" key`),r=!1)}),!r)throw new Error("Invalid configuration file JSON.");return n})(),Mt),X=e=>typeof e=="string",bt=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},Kr=e=>e==null?"":""+e,Qi=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Xi=/###/g,zr=e=>e&&e.indexOf("###")>-1?e.replace(Xi,"."):e,Hr=e=>!e||X(e),Ot=(e,t,n)=>{const r=X(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(Hr(e))return{};const s=zr(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return Hr(e)?{}:{obj:e,k:zr(r[o])}},Br=(e,t,n)=>{const{obj:r,k:o}=Ot(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],a=t.slice(0,t.length-1),i=Ot(e,a,Object);for(;i.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),i=Ot(e,a,Object),i?.obj&&typeof i.obj[`${i.k}.${s}`]<"u"&&(i.obj=void 0);i.obj[`${i.k}.${s}`]=n},Yi=(e,t,n,r)=>{const{obj:o,k:s}=Ot(e,t,Object);o[s]=o[s]||[],o[s].push(n)},jn=(e,t)=>{const{obj:n,k:r}=Ot(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Zi=(e,t,n)=>{const r=jn(e,n);return r!==void 0?r:jn(t,n)},Mo=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?X(e[r])||e[r]instanceof String||X(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Mo(e[r],t[r],n):e[r]=t[r]);return e},ut=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ea={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ta=e=>X(e)?e.replace(/[&<>"'\/]/g,t=>ea[t]):e;class na{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const ra=[" ",",","?","!",";"],sa=new na(20),oa=(e,t,n)=>{t=t||"",n=n||"";const r=ra.filter(a=>t.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const o=sa.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!o.test(e);if(!s){const a=e.indexOf(n);a>0&&!o.test(e.substring(0,a))&&(s=!0)}return s},Cr=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let a,i="";for(let c=s;c<r.length;++c)if(c!==s&&(i+=n),i+=r[c],a=o[i],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<r.length-1)continue;s+=c-s+1;break}o=a}return o},Tn=e=>e?.replace("_","-"),ia={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class xn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||ia,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(X(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new xn(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new xn(this.logger,t)}}var De=new xn;class zn{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[i,c]=a;for(let d=0;d<c;d++)i(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[i,c]=a;for(let d=0;d<c;d++)i.apply(i,[t,...r])})}}class Wr extends zn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let i;t.indexOf(".")>-1?i=t.split("."):(i=[t,n],r&&(Array.isArray(r)?i.push(...r):X(r)&&s?i.push(...r.split(s)):i.push(r)));const c=jn(this.data,i);return!c&&!n&&!r&&t.indexOf(".")>-1&&(t=i[0],n=i[1],r=i.slice(2).join(".")),c||!a||!X(r)?c:Cr(this.data?.[t]?.[n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=[t,n];r&&(i=i.concat(a?r.split(a):r)),t.indexOf(".")>-1&&(i=t.split("."),o=n,n=i[1]),this.addNamespaces(n),Br(this.data,i,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},i=[t,n];t.indexOf(".")>-1&&(i=t.split("."),o=r,r=n,n=i[1]),this.addNamespaces(n);let c=jn(this.data,i)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Mo(c,r,s):c={...c,...r},Br(this.data,i,c),a.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var Vo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{t=this.processors[s]?.process(t,n,r,o)??t}),t}};const Jr={},Gr=e=>!X(e)&&typeof e!="boolean"&&typeof e!="number";class qn extends zn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Qi(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=De.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=r&&t.indexOf(r)>-1,i=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!oa(t,r,o);if(a&&!i){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:X(s)?[s]:s};const d=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),t=d.join(o)}return{key:t,namespaces:X(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:i}=this.extractFromKey(t[t.length-1],n),c=i[i.length-1],d=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(u){const T=n.nsSeparator||this.options.nsSeparator;return o?{res:`${c}${T}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${T}${a}`}return o?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:a}const h=this.resolve(t,n);let p=h?.res;const v=h?.usedKey||a,w=h?.exactUsedKey||a,y=["[object Number]","[object Function]","[object RegExp]"],f=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,l=n.count!==void 0&&!X(n.count),g=qn.hasDefaultValue(n),$=l?this.pluralResolver.getSuffix(d,n.count,n):"",b=n.ordinal&&l?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",_=l&&!n.ordinal&&n.count===0,C=_&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${$}`]||n[`defaultValue${b}`]||n.defaultValue;let k=p;m&&!p&&g&&(k=C);const P=Gr(k),L=Object.prototype.toString.apply(k);if(m&&k&&P&&y.indexOf(L)<0&&!(X(f)&&Array.isArray(k))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,k,{...n,ns:i}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(h.res=T,h.usedParams=this.getUsedParamsDetails(n),h):T}if(s){const T=Array.isArray(k),V=T?[]:{},z=T?w:v;for(const K in k)if(Object.prototype.hasOwnProperty.call(k,K)){const W=`${z}${s}${K}`;g&&!p?V[K]=this.translate(W,{...n,defaultValue:Gr(C)?C[K]:void 0,joinArrays:!1,ns:i}):V[K]=this.translate(W,{...n,joinArrays:!1,ns:i}),V[K]===W&&(V[K]=k[K])}p=V}}else if(m&&X(f)&&Array.isArray(p))p=p.join(f),p&&(p=this.extendTranslation(p,t,n,r));else{let T=!1,V=!1;!this.isValidLookup(p)&&g&&(T=!0,p=C),this.isValidLookup(p)||(V=!0,p=a);const K=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:p,W=g&&C!==p&&this.options.updateMissing;if(V||T||W){if(this.logger.log(W?"updateKey":"missingKey",d,c,a,W?C:p),s){const de=this.resolve(a,{...n,keySeparator:!1});de&&de.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let oe=[];const ge=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ge&&ge[0])for(let de=0;de<ge.length;de++)oe.push(ge[de]);else this.options.saveMissingTo==="all"?oe=this.languageUtils.toResolveHierarchy(n.lng||this.language):oe.push(n.lng||this.language);const re=(de,F,R)=>{const q=g&&R!==p?R:K;this.options.missingKeyHandler?this.options.missingKeyHandler(de,c,F,q,W,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(de,c,F,q,W,n),this.emit("missingKey",de,c,F,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&l?oe.forEach(de=>{const F=this.pluralResolver.getSuffixes(de,n);_&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(R=>{re([de],a+R,n[`defaultValue${R}`]||C)})}):re(oe,a,C))}p=this.extendTranslation(p,t,n,h,r),V&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${a}`),(V||T)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,T?p:void 0))}return o?(h.res=p,h.usedParams=this.getUsedParamsDetails(n),h):p}extendTranslation(t,n,r,o,s){var a=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=X(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const p=t.match(this.interpolator.nestingRegexp);u=p&&p.length}let h=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,r.lng||this.language||o.usedLng,r),d){const p=t.match(this.interpolator.nestingRegexp),v=p&&p.length;u<v&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var p=arguments.length,v=new Array(p),w=0;w<p;w++)v[w]=arguments[w];return s?.[0]===v[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${n[0]}`),null):a.translate(...v,n)},r)),r.interpolation&&this.interpolator.reset()}const i=r.postProcess||this.options.postProcess,c=X(i)?[i]:i;return t!=null&&c?.length&&r.applyPostProcessor!==!1&&(t=Vo.handle(c,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,a,i;return X(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,n),u=d.key;o=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&!X(n.count),v=p&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(f=>{this.isValidLookup(r)||(i=f,!Jr[`${y[0]}-${f}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(i)&&(Jr[`${y[0]}-${f}`]=!0,this.logger.warn(`key "${o}" for languages "${y.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(m=>{if(this.isValidLookup(r))return;a=m;const l=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(l,u,m,f,n);else{let $;p&&($=this.pluralResolver.getSuffix(m,n.count,n));const b=`${this.options.pluralSeparator}zero`,_=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(l.push(u+$),n.ordinal&&$.indexOf(_)===0&&l.push(u+$.replace(_,this.options.pluralSeparator)),v&&l.push(u+b)),w){const C=`${u}${this.options.contextSeparator}${n.context}`;l.push(C),p&&(l.push(C+$),n.ordinal&&$.indexOf(_)===0&&l.push(C+$.replace(_,this.options.pluralSeparator)),v&&l.push(C+b))}}let g;for(;g=l.pop();)this.isValidLookup(r)||(s=g,r=this.getResource(m,f,g,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:a,usedNS:i}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!X(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Qr{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=De.create("languageUtils")}getScriptPartFromCode(t){if(t=Tn(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Tn(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(X(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),X(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return X(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):X(t)&&s(this.formatLanguageCode(t)),r.forEach(a=>{o.indexOf(a)<0&&s(this.formatLanguageCode(a))}),o}}const Xr={zero:0,one:1,two:2,few:3,many:4,other:5},Yr={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class aa{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=De.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Tn(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Yr;if(!t.match(/-|_/))return Yr;const c=this.languageUtils.getLanguagePartFromCode(t);a=this.getRule(c,n)}return this.pluralRulesCache[s]=a,a}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>Xr[o]-Xr[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const Zr=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Zi(e,t,n);return!s&&o&&X(n)&&(s=Cr(e,n,r),s===void 0&&(s=Cr(t,n,r))),s},nr=e=>e.replace(/\$/g,"$$$$");class la{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:a,suffix:i,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:v,nestingSuffix:w,nestingSuffixEscaped:y,nestingOptionsSeparator:f,maxReplaces:m,alwaysFormat:l}=t.interpolation;this.escape=n!==void 0?n:ta,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ut(s):a||"{{",this.suffix=i?ut(i):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=p?ut(p):v||ut("$t("),this.nestingSuffix=w?ut(w):y||ut(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=m||1e3,this.alwaysFormat=l!==void 0?l:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,a,i;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const m=Zr(n,c,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...o,...n,interpolationkey:v}):m}const w=v.split(this.formatSeparator),y=w.shift().trim(),f=w.join(this.formatSeparator).trim();return this.format(Zr(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),f,r,{...o,...n,interpolationkey:y})};this.resetRegExp();const u=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>nr(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?nr(this.escape(v)):nr(v)}].forEach(v=>{for(i=0;s=v.regex.exec(t);){const w=s[1].trim();if(a=d(w),a===void 0)if(typeof u=="function"){const f=u(t,s,o);a=X(f)?f:""}else if(o&&Object.prototype.hasOwnProperty.call(o,w))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),a="";else!X(a)&&!this.useRawValueToEscape&&(a=Kr(a));const y=v.safeValue(a);if(t=t.replace(s[0],y),h?(v.regex.lastIndex+=a.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,i++,i>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,a;const i=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let p=`{${h[1]}`;c=h[0],p=this.interpolate(p,a);const v=p.match(/'/g),w=p.match(/"/g);((v?.length??0)%2===0&&!w||w.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),d&&(a={...d,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${u}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;o=this.nestingRegexp.exec(t);){let c=[];a={...r},a=a.replace&&!X(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const u=o[1].split(this.formatSeparator).map(h=>h.trim());o[1]=u.shift(),c=u,d=!0}if(s=n(i.call(this,o[1].trim(),a),a),s&&o[0]===t&&!X(s))return s;X(s)||(s=Kr(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),d&&(s=c.reduce((u,h)=>this.format(u,h,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const ca=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(a=>{if(a){const[i,...c]=a.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=i.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},dt=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const a=r+JSON.stringify(s);let i=t[a];return i||(i=e(Tn(r),o),t[a]=i),i(n)}};class ua{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("formatter"),this.options=t,this.formats={number:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:dt((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:dt((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:dt((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=dt(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(i=>i.indexOf(")")>-1)){const i=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,i)].join(this.formatSeparator)}return s.reduce((i,c)=>{const{formatName:d,formatOptions:u}=ca(c);if(this.formats[d]){let h=i;try{const p=o?.formatParams?.[o.interpolationkey]||{},v=p.locale||p.lng||o.locale||o.lng||r;h=this.formats[d](i,v,{...u,...o,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${d}`);return i},t)}}const da=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class fa extends zn{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=De.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(t,n,r,o){const s={},a={},i={},c={};return t.forEach(d=>{let u=!0;n.forEach(h=>{const p=`${d}|${h}`;!r.reload&&this.store.hasResourceBundle(d,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,u=!1,a[p]===void 0&&(a[p]=!0),s[p]===void 0&&(s[p]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(i[d]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(c)}}loaded(t,n,r){const o=t.split("|"),s=o[0],a=o[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const i={};this.queue.forEach(c=>{Yi(c.loaded,[s],a),da(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{i[d]||(i[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{i[d][h]===void 0&&(i[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(c=>!c.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:a});return}this.readingCalls++;const i=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,a)},s);return}a(d,u)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(t,n);d&&typeof d.then=="function"?d.then(u=>i(null,u)).catch(i):i(null,d)}catch(d){i(d)}return}return c(t,n,i)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();X(t)&&(t=this.languageUtils.toResolveHierarchy(t)),X(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(a,i)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,a),!a&&i&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,i),this.loaded(t,a,i)})}saveMissing(t,n,r,o,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...a,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(t,n,r,o,c):u=d(t,n,r,o),u&&typeof u.then=="function"?u.then(h=>i(null,h)).catch(i):i(null,u)}catch(u){i(u)}else d(t,n,r,o,i,c)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const es=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),X(e[1])&&(t.defaultValue=e[1]),X(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ts=e=>(X(e.ns)&&(e.ns=[e.ns]),X(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),X(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Vt=()=>{},ha=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Lt extends zn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ts(t),this.services={},this.logger=De,this.modules={external:[]},ha(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(X(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=es();this.options={...o,...this.options,...ts(n)},this.options.interpolation={...o.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?De.init(s(this.modules.logger),this.options):De.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=ua;const h=new Qr(this.options);this.store=new Wr(this.options.resources,this.options);const p=this.services;p.logger=De,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new aa(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=s(u),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new la(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new fa(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(v){for(var w=arguments.length,y=new Array(w>1?w-1:0),f=1;f<w;f++)y[f-1]=arguments[f];t.emit(v,...y)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new qn(this.services,this.options),this.translator.on("*",function(v){for(var w=arguments.length,y=new Array(w>1?w-1:0),f=1;f<w;f++)y[f-1]=arguments[f];t.emit(v,...y)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Vt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const c=bt(),d=()=>{const u=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),r(h,p)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const o=X(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],a=i=>{if(!i||i==="cimode")return;this.services.languageUtils.toResolveHierarchy(i).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(i=>a(i)),this.services.backendConnector.load(s,this.options.ns,i=>{!i&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(i)})}else r(null)}reloadResources(t,n,r){const o=bt();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Vt),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Vo.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=bt();this.emit("languageChanging",t);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},i=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=X(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,u=>{a(u,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(t),o}getFixedT(t,n,r){var o=this;const s=function(a,i){let c;if(typeof i!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),h=2;h<d;h++)u[h-2]=arguments[h];c=o.options.overloadTranslationOptionHandler([a,i].concat(u))}else c={...i};c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||s.keyPrefix);const p=o.options.keySeparator||".";let v;return c.keyPrefix&&Array.isArray(a)?v=a.map(w=>`${c.keyPrefix}${p}${w}`):v=c.keyPrefix?`${c.keyPrefix}${p}${a}`:a,o.t(v,c)};return X(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(i,c)=>{const d=this.services.backendConnector.state[`${i}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const i=n.precheck(this,a);if(i!==void 0)return i}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,t)&&(!o||a(s,t)))}loadNamespaces(t,n){const r=bt();return this.options.ns?(X(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=bt();X(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=o.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Qr(es());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Lt(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new Lt(o);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(i=>{s[i]=this[i]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const i=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},Object.keys(c[d]).reduce((u,h)=>(u[h]={...c[d][h]},u),{})),{});s.store=new Wr(i,o),s.services.resourceStore=s.store}return s.translator=new qn(s.services,o),s.translator.on("*",function(i){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];s.emit(i,...d)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const pe=Lt.createInstance();pe.createInstance=Lt.createInstance;pe.createInstance;pe.dir;pe.init;pe.loadResources;pe.reloadResources;pe.use;pe.changeLanguage;pe.getFixedT;pe.t;pe.exists;pe.setDefaultNamespace;pe.hasLoadedNamespace;pe.loadNamespaces;pe.loadLanguages;var ma=M("<div>Loading i18n...");const ga={t:(...e)=>pe.t(...e),language:()=>pe.language,setLanguage:e=>pe.changeLanguage(e)},Fo=jt(ga),pa=async e=>{const t=Object.fromEntries(Object.entries(e.i18n.availableLanguages).map(([n,r])=>[n,{translation:r}]));await pe.init({resources:t,lng:e.uiLanguage||e.targetLanguage||e.defaultLanguage,fallbackLng:e.defaultLanguage,interpolation:{escapeValue:!1}})},ya=e=>{const t=$t(()=>e.children),[n,r]=H(pe.language),[o,s]=H(!1),a=pe.t;return me(()=>{r(pe.language),pe.on("languageChanged",r),s(!0)}),o()?A(Fo.Provider,{value:{t:a,language:n,setLanguage:r},get children(){return t()}}):ma()},_e=()=>{const e=Tt(Fo);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},Er=Symbol("store-raw"),yt=Symbol("store-node"),Be=Symbol("store-has"),Uo=Symbol("store-self");function Ko(e){let t=e[Ve];if(!t&&(Object.defineProperty(e,Ve,{value:t=new Proxy(e,_a)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const a=n[o];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Xe(e){let t;return e!=null&&typeof e=="object"&&(e[Ve]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function vt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[Er])return n;if(!Xe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,i=e.length;a<i;a++)o=e[a],(r=vt(o,t))!==o&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let c=0,d=a.length;c<d;c++)s=a[c],!i[s].get&&(o=e[s],(r=vt(o,t))!==o&&(e[s]=r))}return e}function Dn(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function At(e,t,n){if(e[t])return e[t];const[r,o]=H(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function va(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ve||t===yt||(delete n.value,delete n.writable,n.get=()=>e[Ve][t]),n}function zo(e){_r()&&At(Dn(e,yt),Uo)()}function $a(e){return zo(e),Reflect.ownKeys(e)}const _a={get(e,t,n){if(t===Er)return e;if(t===Ve)return n;if(t===$r)return zo(e),n;const r=Dn(e,yt),o=r[t];let s=o?o():e[t];if(t===yt||t===Be||t==="__proto__")return s;if(!o){const a=Object.getOwnPropertyDescriptor(e,t);_r()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=At(r,t,s)())}return Xe(s)?Ko(s):s},has(e,t){return t===Er||t===Ve||t===$r||t===yt||t===Be||t==="__proto__"?!0:(_r()&&At(Dn(e,Be),t)(),t in e)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:$a,getOwnPropertyDescriptor:va};function Ae(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[Be]&&e[Be][t]&&o!==void 0&&e[Be][t].$()):(e[t]=n,e[Be]&&e[Be][t]&&o===void 0&&e[Be][t].$());let a=Dn(e,yt),i;if((i=At(a,t,o))&&i.$(()=>n),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(i=a[c])&&i.$();(i=At(a,"length",s))&&i.$(e.length)}(i=a[Uo])&&i.$()}function Ho(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ae(e,o,t[o])}}function wa(e,t){if(typeof t=="function"&&(t=t(e)),t=vt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Ae(e,n,o)}Ae(e,"length",r)}else Ho(e,t)}function kt(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const a=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)kt(e,[r[c]].concat(t),n);return}else if(i&&a==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&kt(e,[c].concat(t),n);return}else if(i&&a==="object"){const{from:c=0,to:d=e.length-1,by:u=1}=r;for(let h=c;h<=d;h+=u)kt(e,[h].concat(t),n);return}else if(t.length>1){kt(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=vt(s),r===void 0||Xe(o)&&Xe(s)&&!Array.isArray(s)?Ho(o,s):Ae(e,r,s))}function Bo(...[e,t]){const n=vt(e||{}),r=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const o=Ko(n);Ui.registerGraph({value:n,name:t&&t.name});function s(...a){Ro(()=>{r&&a.length===1?wa(n,a[0]):kt(n,a)})}return[o,s]}const Pr=Symbol("store-root");function mt(e,t,n,r,o){const s=t[n];if(e===s)return;const a=Array.isArray(e);if(n!==Pr&&(!Xe(e)||!Xe(s)||a!==Array.isArray(s)||o&&e[o]!==s[o])){Ae(t,n,e);return}if(a){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,u,h,p,v,w,y,f;for(h=0,p=Math.min(s.length,e.length);h<p&&(s[h]===e[h]||o&&s[h]&&e[h]&&s[h][o]===e[h][o]);h++)mt(e[h],s,h,r,o);const m=new Array(e.length),l=new Map;for(p=s.length-1,v=e.length-1;p>=h&&v>=h&&(s[p]===e[v]||o&&s[p]&&e[v]&&s[p][o]===e[v][o]);p--,v--)m[v]=s[p];if(h>v||h>p){for(u=h;u<=v;u++)Ae(s,u,e[u]);for(;u<e.length;u++)Ae(s,u,m[u]),mt(e[u],s,u,r,o);s.length>e.length&&Ae(s,"length",e.length);return}for(y=new Array(v+1),u=v;u>=h;u--)w=e[u],f=o&&w?w[o]:w,d=l.get(f),y[u]=d===void 0?-1:d,l.set(f,u);for(d=h;d<=p;d++)w=s[d],f=o&&w?w[o]:w,u=l.get(f),u!==void 0&&u!==-1&&(m[u]=s[d],u=y[u],l.set(f,u));for(u=h;u<e.length;u++)u in m?(Ae(s,u,m[u]),mt(e[u],s,u,r,o)):Ae(s,u,e[u])}else for(let d=0,u=e.length;d<u;d++)mt(e[d],s,d,r,o);s.length>e.length&&Ae(s,"length",e.length);return}const i=Object.keys(e);for(let d=0,u=i.length;d<u;d++)mt(e[i[d]],s,i[d],r,o);const c=Object.keys(s);for(let d=0,u=c.length;d<u;d++)e[c[d]]===void 0&&Ae(s,c[d],void 0)}function ba(e,t={}){const{merge:n,key:r="id"}=t,o=vt(e);return s=>{if(!Xe(s)||!Xe(o))return o;const a=mt(o,{[Pr]:s},Pr,n,r);return a===void 0?s:a}}function Wo(e,t={}){const n=t.storage||globalThis.localStorage,r=t.name||`storage-${Vi()}`;if(!n)return[e[0],e[1],null];const o=t.storageOptions,s=t.serialize||JSON.stringify.bind(JSON),a=t.deserialize||JSON.parse.bind(JSON),i=n.getItem(r,o),c=typeof e[0]=="function"?u=>{try{const h=a(u);e[1](()=>h)}catch(h){console.warn(h)}}:u=>{try{const h=a(u);e[1](ba(h))}catch(h){console.warn(h)}};let d=!0;if(i instanceof Promise?i.then(u=>d&&u&&c(u)):i&&c(i),typeof t.sync?.[0]=="function"){const u=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](h=>{h.key!==r||(h.url||globalThis.location.href)!==globalThis.location.href||h.newValue===s($e(u))||c(h.newValue)})}return[e[0],typeof e[0]=="function"?u=>{const h=e[1](u),p=u!=null?s(h):u;return t.sync?.[1](r,p),p!=null?n.setItem(r,p,o):n.removeItem(r,o),d=!1,h}:(...u)=>{e[1](...u);const h=s($e(()=>e[0]));t.sync?.[1](r,h),n.setItem(r,h,o),d=!1},i]}function Sa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ft={exports:{}},rr={},Ke={},tt={},sr={},or={},ir={},ns;function Mn(){return ns||(ns=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(l){if(super(),!e.IDENTIFIER.test(l))throw new Error("CodeGen: name must be a valid identifier");this.str=l}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(l){super(),this._items=typeof l=="string"?[l]:l}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const l=this._items[0];return l===""||l==='""'}get str(){var l;return(l=this._str)!==null&&l!==void 0?l:this._str=this._items.reduce((g,$)=>`${g}${$}`,"")}get names(){var l;return(l=this._names)!==null&&l!==void 0?l:this._names=this._items.reduce((g,$)=>($ instanceof n&&(g[$.str]=(g[$.str]||0)+1),g),{})}}e._Code=r,e.nil=new r("");function o(m,...l){const g=[m[0]];let $=0;for(;$<l.length;)i(g,l[$]),g.push(m[++$]);return new r(g)}e._=o;const s=new r("+");function a(m,...l){const g=[v(m[0])];let $=0;for(;$<l.length;)g.push(s),i(g,l[$]),g.push(s,v(m[++$]));return c(g),new r(g)}e.str=a;function i(m,l){l instanceof r?m.push(...l._items):l instanceof n?m.push(l):m.push(h(l))}e.addCodeArg=i;function c(m){let l=1;for(;l<m.length-1;){if(m[l]===s){const g=d(m[l-1],m[l+1]);if(g!==void 0){m.splice(l-1,3,g);continue}m[l++]="+"}l++}}function d(m,l){if(l==='""')return m;if(m==='""')return l;if(typeof m=="string")return l instanceof n||m[m.length-1]!=='"'?void 0:typeof l!="string"?`${m.slice(0,-1)}${l}"`:l[0]==='"'?m.slice(0,-1)+l.slice(1):void 0;if(typeof l=="string"&&l[0]==='"'&&!(m instanceof n))return`"${m}${l.slice(1)}`}function u(m,l){return l.emptyStr()?m:m.emptyStr()?l:a`${m}${l}`}e.strConcat=u;function h(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:v(Array.isArray(m)?m.join(","):m)}function p(m){return new r(v(m))}e.stringify=p;function v(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=v;function w(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new r(`.${m}`):o`[${m}]`}e.getProperty=w;function y(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new r(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=y;function f(m){return new r(m.toString())}e.regexpCode=f}(ir)),ir}var ar={},rs;function ss(){return rs||(rs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Mn();class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:d,parent:u}={}){this._names={},this._prefixes=d,this._parent=u}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const u=this._names[d]||this._nameGroup(d);return`${d}${u.index++}`}_nameGroup(d){var u,h;if(!((h=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||h===void 0)&&h.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=o;class s extends t.Name{constructor(d,u){super(u),this.prefix=d}setValue(d,{property:u,itemIndex:h}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(u)}[${h}]`}}e.ValueScopeName=s;const a=(0,t._)`\n`;class i extends o{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?a:t.nil}}get(){return this._scope}name(d){return new s(d,this._newName(d))}value(d,u){var h;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const p=this.toName(d),{prefix:v}=p,w=(h=u.key)!==null&&h!==void 0?h:u.ref;let y=this._values[v];if(y){const l=y.get(w);if(l)return l}else y=this._values[v]=new Map;y.set(w,p);const f=this._scope[v]||(this._scope[v]=[]),m=f.length;return f[m]=u.ref,p.setValue(u,{property:v,itemIndex:m}),p}getValue(d,u){const h=this._values[d];if(h)return h.get(u)}scopeRefs(d,u=this._values){return this._reduceValues(u,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,t._)`${d}${h.scopePath}`})}scopeCode(d=this._values,u,h){return this._reduceValues(d,p=>{if(p.value===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return p.value.code},u,h)}_reduceValues(d,u,h={},p){let v=t.nil;for(const w in d){const y=d[w];if(!y)continue;const f=h[w]=h[w]||new Map;y.forEach(m=>{if(f.has(m))return;f.set(m,r.Started);let l=u(m);if(l){const g=this.opts.es5?e.varKinds.var:e.varKinds.const;v=(0,t._)`${v}${g} ${m} = ${l};${this.opts._n}`}else if(l=p?.(m))v=(0,t._)`${v}${l}${this.opts._n}`;else throw new n(m);f.set(m,r.Completed)})}return v}}e.ValueScope=i}(ar)),ar}var os;function ne(){return os||(os=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Mn(),n=ss();var r=Mn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=ss();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,E){return this}}class a extends s{constructor(S,E,x){super(),this.varKind=S,this.name=E,this.rhs=x}render({es5:S,_n:E}){const x=S?n.varKinds.var:this.varKind,J=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${J};`+E}optimizeNames(S,E){if(S[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,S,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends s{constructor(S,E,x){super(),this.lhs=S,this.rhs=E,this.sideEffects=x}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,E){if(!(this.lhs instanceof t.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=K(this.rhs,S,E),this}get names(){const S=this.lhs instanceof t.Name?{}:{...this.lhs.names};return z(S,this.rhs)}}class c extends i{constructor(S,E,x,J){super(S,x,J),this.op=E}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class d extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class u extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class h extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class p extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,E){return this.code=K(this.code,S,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class v extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((E,x)=>E+x.render(S),"")}optimizeNodes(){const{nodes:S}=this;let E=S.length;for(;E--;){const x=S[E].optimizeNodes();Array.isArray(x)?S.splice(E,1,...x):x?S[E]=x:S.splice(E,1)}return S.length>0?this:void 0}optimizeNames(S,E){const{nodes:x}=this;let J=x.length;for(;J--;){const Q=x[J];Q.optimizeNames(S,E)||(W(S,Q.names),x.splice(J,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((S,E)=>V(S,E.names),{})}}class w extends v{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class y extends v{}class f extends w{}f.kind="else";class m extends w{constructor(S,E){super(E),this.condition=S}render(S){let E=`if(${this.condition})`+super.render(S);return this.else&&(E+="else "+this.else.render(S)),E}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let E=this.else;if(E){const x=E.optimizeNodes();E=this.else=Array.isArray(x)?new f(x):x}if(E)return S===!1?E instanceof m?E:E.nodes:this.nodes.length?this:new m(oe(S),E instanceof m?[E]:E.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,E){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(S,E),!!(super.optimizeNames(S,E)||this.else))return this.condition=K(this.condition,S,E),this}get names(){const S=super.names;return z(S,this.condition),this.else&&V(S,this.else.names),S}}m.kind="if";class l extends w{}l.kind="for";class g extends l{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iteration=K(this.iteration,S,E),this}get names(){return V(super.names,this.iteration.names)}}class $ extends l{constructor(S,E,x,J){super(),this.varKind=S,this.name=E,this.from=x,this.to=J}render(S){const E=S.es5?n.varKinds.var:this.varKind,{name:x,from:J,to:Q}=this;return`for(${E} ${x}=${J}; ${x}<${Q}; ${x}++)`+super.render(S)}get names(){const S=z(super.names,this.from);return z(S,this.to)}}class b extends l{constructor(S,E,x,J){super(),this.loop=S,this.varKind=E,this.name=x,this.iterable=J}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iterable=K(this.iterable,S,E),this}get names(){return V(super.names,this.iterable.names)}}class _ extends w{constructor(S,E,x){super(),this.name=S,this.args=E,this.async=x}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}_.kind="func";class C extends v{render(S){return"return "+super.render(S)}}C.kind="return";class k extends w{render(S){let E="try"+super.render(S);return this.catch&&(E+=this.catch.render(S)),this.finally&&(E+=this.finally.render(S)),E}optimizeNodes(){var S,E;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(S,E){var x,J;return super.optimizeNames(S,E),(x=this.catch)===null||x===void 0||x.optimizeNames(S,E),(J=this.finally)===null||J===void 0||J.optimizeNames(S,E),this}get names(){const S=super.names;return this.catch&&V(S,this.catch.names),this.finally&&V(S,this.finally.names),S}}class P extends w{constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}P.kind="catch";class L extends w{render(S){return"finally"+super.render(S)}}L.kind="finally";class T{constructor(S,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=S,this._scope=new n.Scope({parent:S}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,E){const x=this._extScope.value(S,E);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(S,E){return this._extScope.getValue(S,E)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,E,x,J){const Q=this._scope.toName(E);return x!==void 0&&J&&(this._constants[Q.str]=x),this._leafNode(new a(S,Q,x)),Q}const(S,E,x){return this._def(n.varKinds.const,S,E,x)}let(S,E,x){return this._def(n.varKinds.let,S,E,x)}var(S,E,x){return this._def(n.varKinds.var,S,E,x)}assign(S,E,x){return this._leafNode(new i(S,E,x))}add(S,E){return this._leafNode(new c(S,e.operators.ADD,E))}code(S){return typeof S=="function"?S():S!==t.nil&&this._leafNode(new p(S)),this}object(...S){const E=["{"];for(const[x,J]of S)E.length>1&&E.push(","),E.push(x),(x!==J||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,J));return E.push("}"),new t._Code(E)}if(S,E,x){if(this._blockNode(new m(S)),E&&x)this.code(E).else().code(x).endIf();else if(E)this.code(E).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new m(S))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(m,f)}_for(S,E){return this._blockNode(S),E&&this.code(E).endFor(),this}for(S,E){return this._for(new g(S),E)}forRange(S,E,x,J,Q=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(S);return this._for(new $(Q,ce,E,x),()=>J(ce))}forOf(S,E,x,J=n.varKinds.const){const Q=this._scope.toName(S);if(this.opts.es5){const ce=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${ce}.length`,ie=>{this.var(Q,(0,t._)`${ce}[${ie}]`),x(Q)})}return this._for(new b("of",J,Q,E),()=>x(Q))}forIn(S,E,x,J=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,t._)`Object.keys(${E})`,x);const Q=this._scope.toName(S);return this._for(new b("in",J,Q,E),()=>x(Q))}endFor(){return this._endBlockNode(l)}label(S){return this._leafNode(new d(S))}break(S){return this._leafNode(new u(S))}return(S){const E=new C;if(this._blockNode(E),this.code(S),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,E,x){if(!E&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const J=new k;if(this._blockNode(J),this.code(S),E){const Q=this.name("e");this._currNode=J.catch=new P(Q),E(Q)}return x&&(this._currNode=J.finally=new L,this.code(x)),this._endBlockNode(P,L)}throw(S){return this._leafNode(new h(S))}block(S,E){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(E),this}endBlock(S){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-E;if(x<0||S!==void 0&&x!==S)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${S} expected`);return this._nodes.length=E,this}func(S,E=t.nil,x,J){return this._blockNode(new _(S,E,x)),J&&this.code(J).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,E){const x=this._currNode;if(x instanceof S||E&&x instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${S.kind}/${E.kind}`:S.kind}"`)}_elseNode(S){const E=this._currNode;if(!(E instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const E=this._nodes;E[E.length-1]=S}}e.CodeGen=T;function V(I,S){for(const E in S)I[E]=(I[E]||0)+(S[E]||0);return I}function z(I,S){return S instanceof t._CodeOrName?V(I,S.names):I}function K(I,S,E){if(I instanceof t.Name)return x(I);if(!J(I))return I;return new t._Code(I._items.reduce((Q,ce)=>(ce instanceof t.Name&&(ce=x(ce)),ce instanceof t._Code?Q.push(...ce._items):Q.push(ce),Q),[]));function x(Q){const ce=E[Q.str];return ce===void 0||S[Q.str]!==1?Q:(delete S[Q.str],ce)}function J(Q){return Q instanceof t._Code&&Q._items.some(ce=>ce instanceof t.Name&&S[ce.str]===1&&E[ce.str]!==void 0)}}function W(I,S){for(const E in S)I[E]=(I[E]||0)-(S[E]||0)}function oe(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:(0,t._)`!${q(I)}`}e.not=oe;const ge=R(e.operators.AND);function re(...I){return I.reduce(ge)}e.and=re;const de=R(e.operators.OR);function F(...I){return I.reduce(de)}e.or=F;function R(I){return(S,E)=>S===t.nil?E:E===t.nil?S:(0,t._)`${q(S)} ${I} ${q(E)}`}function q(I){return I instanceof t.Name?I:(0,t._)`(${I})`}}(or)),or}var Z={},is;function le(){if(is)return Z;is=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.checkStrictMode=Z.getErrorPath=Z.Type=Z.useFunc=Z.setEvaluated=Z.evaluatedPropsToName=Z.mergeEvaluated=Z.eachItem=Z.unescapeJsonPointer=Z.escapeJsonPointer=Z.escapeFragment=Z.unescapeFragment=Z.schemaRefOrVal=Z.schemaHasRulesButRef=Z.schemaHasRules=Z.checkUnknownRules=Z.alwaysValidSchema=Z.toHash=void 0;const e=ne(),t=Mn();function n(b){const _={};for(const C of b)_[C]=!0;return _}Z.toHash=n;function r(b,_){return typeof _=="boolean"?_:Object.keys(_).length===0?!0:(o(b,_),!s(_,b.self.RULES.all))}Z.alwaysValidSchema=r;function o(b,_=b.schema){const{opts:C,self:k}=b;if(!C.strictSchema||typeof _=="boolean")return;const P=k.RULES.keywords;for(const L in _)P[L]||$(b,`unknown keyword: "${L}"`)}Z.checkUnknownRules=o;function s(b,_){if(typeof b=="boolean")return!b;for(const C in b)if(_[C])return!0;return!1}Z.schemaHasRules=s;function a(b,_){if(typeof b=="boolean")return!b;for(const C in b)if(C!=="$ref"&&_.all[C])return!0;return!1}Z.schemaHasRulesButRef=a;function i({topSchemaRef:b,schemaPath:_},C,k,P){if(!P){if(typeof C=="number"||typeof C=="boolean")return C;if(typeof C=="string")return(0,e._)`${C}`}return(0,e._)`${b}${_}${(0,e.getProperty)(k)}`}Z.schemaRefOrVal=i;function c(b){return h(decodeURIComponent(b))}Z.unescapeFragment=c;function d(b){return encodeURIComponent(u(b))}Z.escapeFragment=d;function u(b){return typeof b=="number"?`${b}`:b.replace(/~/g,"~0").replace(/\//g,"~1")}Z.escapeJsonPointer=u;function h(b){return b.replace(/~1/g,"/").replace(/~0/g,"~")}Z.unescapeJsonPointer=h;function p(b,_){if(Array.isArray(b))for(const C of b)_(C);else _(b)}Z.eachItem=p;function v({mergeNames:b,mergeToName:_,mergeValues:C,resultToName:k}){return(P,L,T,V)=>{const z=T===void 0?L:T instanceof e.Name?(L instanceof e.Name?b(P,L,T):_(P,L,T),T):L instanceof e.Name?(_(P,T,L),L):C(L,T);return V===e.Name&&!(z instanceof e.Name)?k(P,z):z}}Z.mergeEvaluated={props:v({mergeNames:(b,_,C)=>b.if((0,e._)`${C} !== true && ${_} !== undefined`,()=>{b.if((0,e._)`${_} === true`,()=>b.assign(C,!0),()=>b.assign(C,(0,e._)`${C} || {}`).code((0,e._)`Object.assign(${C}, ${_})`))}),mergeToName:(b,_,C)=>b.if((0,e._)`${C} !== true`,()=>{_===!0?b.assign(C,!0):(b.assign(C,(0,e._)`${C} || {}`),y(b,C,_))}),mergeValues:(b,_)=>b===!0?!0:{...b,..._},resultToName:w}),items:v({mergeNames:(b,_,C)=>b.if((0,e._)`${C} !== true && ${_} !== undefined`,()=>b.assign(C,(0,e._)`${_} === true ? true : ${C} > ${_} ? ${C} : ${_}`)),mergeToName:(b,_,C)=>b.if((0,e._)`${C} !== true`,()=>b.assign(C,_===!0?!0:(0,e._)`${C} > ${_} ? ${C} : ${_}`)),mergeValues:(b,_)=>b===!0?!0:Math.max(b,_),resultToName:(b,_)=>b.var("items",_)})};function w(b,_){if(_===!0)return b.var("props",!0);const C=b.var("props",(0,e._)`{}`);return _!==void 0&&y(b,C,_),C}Z.evaluatedPropsToName=w;function y(b,_,C){Object.keys(C).forEach(k=>b.assign((0,e._)`${_}${(0,e.getProperty)(k)}`,!0))}Z.setEvaluated=y;const f={};function m(b,_){return b.scopeValue("func",{ref:_,code:f[_.code]||(f[_.code]=new t._Code(_.code))})}Z.useFunc=m;var l;(function(b){b[b.Num=0]="Num",b[b.Str=1]="Str"})(l||(Z.Type=l={}));function g(b,_,C){if(b instanceof e.Name){const k=_===l.Num;return C?k?(0,e._)`"[" + ${b} + "]"`:(0,e._)`"['" + ${b} + "']"`:k?(0,e._)`"/" + ${b}`:(0,e._)`"/" + ${b}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return C?(0,e.getProperty)(b).toString():"/"+u(b)}Z.getErrorPath=g;function $(b,_,C=b.opts.strictSchema){if(C){if(_=`strict mode: ${_}`,C===!0)throw new Error(_);b.self.logger.warn(_)}}return Z.checkStrictMode=$,Z}var Ut={},as;function Ze(){if(as)return Ut;as=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e=ne(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Ut.default=t,Ut}var ls;function Hn(){return ls||(ls=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ne(),n=le(),r=Ze();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:m})=>m?(0,t.str)`"${f}" keyword must be ${m} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function o(f,m=e.keywordError,l,g){const{it:$}=f,{gen:b,compositeRule:_,allErrors:C}=$,k=h(f,m,l);g??(_||C)?c(b,k):d($,(0,t._)`[${k}]`)}e.reportError=o;function s(f,m=e.keywordError,l){const{it:g}=f,{gen:$,compositeRule:b,allErrors:_}=g,C=h(f,m,l);c($,C),b||_||d(g,r.default.vErrors)}e.reportExtraError=s;function a(f,m){f.assign(r.default.errors,m),f.if((0,t._)`${r.default.vErrors} !== null`,()=>f.if(m,()=>f.assign((0,t._)`${r.default.vErrors}.length`,m),()=>f.assign(r.default.vErrors,null)))}e.resetErrorsCount=a;function i({gen:f,keyword:m,schemaValue:l,data:g,errsCount:$,it:b}){if($===void 0)throw new Error("ajv implementation error");const _=f.name("err");f.forRange("i",$,r.default.errors,C=>{f.const(_,(0,t._)`${r.default.vErrors}[${C}]`),f.if((0,t._)`${_}.instancePath === undefined`,()=>f.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(r.default.instancePath,b.errorPath))),f.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${b.errSchemaPath}/${m}`),b.opts.verbose&&(f.assign((0,t._)`${_}.schema`,l),f.assign((0,t._)`${_}.data`,g))})}e.extendErrors=i;function c(f,m){const l=f.const("err",m);f.if((0,t._)`${r.default.vErrors} === null`,()=>f.assign(r.default.vErrors,(0,t._)`[${l}]`),(0,t._)`${r.default.vErrors}.push(${l})`),f.code((0,t._)`${r.default.errors}++`)}function d(f,m){const{gen:l,validateName:g,schemaEnv:$}=f;$.$async?l.throw((0,t._)`new ${f.ValidationError}(${m})`):(l.assign((0,t._)`${g}.errors`,m),l.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function h(f,m,l){const{createErrors:g}=f.it;return g===!1?(0,t._)`{}`:p(f,m,l)}function p(f,m,l={}){const{gen:g,it:$}=f,b=[v($,l),w(f,l)];return y(f,m,b),g.object(...b)}function v({errorPath:f},{instancePath:m}){const l=m?(0,t.str)`${f}${(0,n.getErrorPath)(m,n.Type.Str)}`:f;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,l)]}function w({keyword:f,it:{errSchemaPath:m}},{schemaPath:l,parentSchema:g}){let $=g?m:(0,t.str)`${m}/${f}`;return l&&($=(0,t.str)`${$}${(0,n.getErrorPath)(l,n.Type.Str)}`),[u.schemaPath,$]}function y(f,{params:m,message:l},g){const{keyword:$,data:b,schemaValue:_,it:C}=f,{opts:k,propertyName:P,topSchemaRef:L,schemaPath:T}=C;g.push([u.keyword,$],[u.params,typeof m=="function"?m(f):m||(0,t._)`{}`]),k.messages&&g.push([u.message,typeof l=="function"?l(f):l]),k.verbose&&g.push([u.schema,_],[u.parentSchema,(0,t._)`${L}${T}`],[r.default.data,b]),P&&g.push([u.propertyName,P])}}(sr)),sr}var cs;function Ca(){if(cs)return tt;cs=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.boolOrEmptySchema=tt.topBoolOrEmptySchema=void 0;const e=Hn(),t=ne(),n=Ze(),r={message:"boolean schema is false"};function o(i){const{gen:c,schema:d,validateName:u}=i;d===!1?a(i,!1):typeof d=="object"&&d.$async===!0?c.return(n.default.data):(c.assign((0,t._)`${u}.errors`,null),c.return(!0))}tt.topBoolOrEmptySchema=o;function s(i,c){const{gen:d,schema:u}=i;u===!1?(d.var(c,!1),a(i)):d.var(c,!0)}tt.boolOrEmptySchema=s;function a(i,c){const{gen:d,data:u}=i,h={gen:d,keyword:"false schema",data:u,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:i};(0,e.reportError)(h,r,void 0,c)}return tt}var Se={},nt={},us;function Jo(){if(us)return nt;us=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.getRules=nt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(o){return typeof o=="string"&&t.has(o)}nt.isJSONType=n;function r(){const o={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...o,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},o.number,o.string,o.array,o.object],post:{rules:[]},all:{},keywords:{}}}return nt.getRules=r,nt}var ze={},ds;function Go(){if(ds)return ze;ds=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.shouldUseRule=ze.shouldUseGroup=ze.schemaHasRulesForType=void 0;function e({schema:r,self:o},s){const a=o.RULES.types[s];return a&&a!==!0&&t(r,a)}ze.schemaHasRulesForType=e;function t(r,o){return o.rules.some(s=>n(r,s))}ze.shouldUseGroup=t;function n(r,o){var s;return r[o.keyword]!==void 0||((s=o.definition.implements)===null||s===void 0?void 0:s.some(a=>r[a]!==void 0))}return ze.shouldUseRule=n,ze}var fs;function Vn(){if(fs)return Se;fs=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.reportTypeError=Se.checkDataTypes=Se.checkDataType=Se.coerceAndCheckDataType=Se.getJSONTypes=Se.getSchemaTypes=Se.DataType=void 0;const e=Jo(),t=Go(),n=Hn(),r=ne(),o=le();var s;(function(l){l[l.Correct=0]="Correct",l[l.Wrong=1]="Wrong"})(s||(Se.DataType=s={}));function a(l){const g=i(l.type);if(g.includes("null")){if(l.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!g.length&&l.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');l.nullable===!0&&g.push("null")}return g}Se.getSchemaTypes=a;function i(l){const g=Array.isArray(l)?l:l?[l]:[];if(g.every(e.isJSONType))return g;throw new Error("type must be JSONType or JSONType[]: "+g.join(","))}Se.getJSONTypes=i;function c(l,g){const{gen:$,data:b,opts:_}=l,C=u(g,_.coerceTypes),k=g.length>0&&!(C.length===0&&g.length===1&&(0,t.schemaHasRulesForType)(l,g[0]));if(k){const P=w(g,b,_.strictNumbers,s.Wrong);$.if(P,()=>{C.length?h(l,g,C):f(l)})}return k}Se.coerceAndCheckDataType=c;const d=new Set(["string","number","integer","boolean","null"]);function u(l,g){return g?l.filter($=>d.has($)||g==="array"&&$==="array"):[]}function h(l,g,$){const{gen:b,data:_,opts:C}=l,k=b.let("dataType",(0,r._)`typeof ${_}`),P=b.let("coerced",(0,r._)`undefined`);C.coerceTypes==="array"&&b.if((0,r._)`${k} == 'object' && Array.isArray(${_}) && ${_}.length == 1`,()=>b.assign(_,(0,r._)`${_}[0]`).assign(k,(0,r._)`typeof ${_}`).if(w(g,_,C.strictNumbers),()=>b.assign(P,_))),b.if((0,r._)`${P} !== undefined`);for(const T of $)(d.has(T)||T==="array"&&C.coerceTypes==="array")&&L(T);b.else(),f(l),b.endIf(),b.if((0,r._)`${P} !== undefined`,()=>{b.assign(_,P),p(l,P)});function L(T){switch(T){case"string":b.elseIf((0,r._)`${k} == "number" || ${k} == "boolean"`).assign(P,(0,r._)`"" + ${_}`).elseIf((0,r._)`${_} === null`).assign(P,(0,r._)`""`);return;case"number":b.elseIf((0,r._)`${k} == "boolean" || ${_} === null
              || (${k} == "string" && ${_} && ${_} == +${_})`).assign(P,(0,r._)`+${_}`);return;case"integer":b.elseIf((0,r._)`${k} === "boolean" || ${_} === null
              || (${k} === "string" && ${_} && ${_} == +${_} && !(${_} % 1))`).assign(P,(0,r._)`+${_}`);return;case"boolean":b.elseIf((0,r._)`${_} === "false" || ${_} === 0 || ${_} === null`).assign(P,!1).elseIf((0,r._)`${_} === "true" || ${_} === 1`).assign(P,!0);return;case"null":b.elseIf((0,r._)`${_} === "" || ${_} === 0 || ${_} === false`),b.assign(P,null);return;case"array":b.elseIf((0,r._)`${k} === "string" || ${k} === "number"
              || ${k} === "boolean" || ${_} === null`).assign(P,(0,r._)`[${_}]`)}}}function p({gen:l,parentData:g,parentDataProperty:$},b){l.if((0,r._)`${g} !== undefined`,()=>l.assign((0,r._)`${g}[${$}]`,b))}function v(l,g,$,b=s.Correct){const _=b===s.Correct?r.operators.EQ:r.operators.NEQ;let C;switch(l){case"null":return(0,r._)`${g} ${_} null`;case"array":C=(0,r._)`Array.isArray(${g})`;break;case"object":C=(0,r._)`${g} && typeof ${g} == "object" && !Array.isArray(${g})`;break;case"integer":C=k((0,r._)`!(${g} % 1) && !isNaN(${g})`);break;case"number":C=k();break;default:return(0,r._)`typeof ${g} ${_} ${l}`}return b===s.Correct?C:(0,r.not)(C);function k(P=r.nil){return(0,r.and)((0,r._)`typeof ${g} == "number"`,P,$?(0,r._)`isFinite(${g})`:r.nil)}}Se.checkDataType=v;function w(l,g,$,b){if(l.length===1)return v(l[0],g,$,b);let _;const C=(0,o.toHash)(l);if(C.array&&C.object){const k=(0,r._)`typeof ${g} != "object"`;_=C.null?k:(0,r._)`!${g} || ${k}`,delete C.null,delete C.array,delete C.object}else _=r.nil;C.number&&delete C.integer;for(const k in C)_=(0,r.and)(_,v(k,g,$,b));return _}Se.checkDataTypes=w;const y={message:({schema:l})=>`must be ${l}`,params:({schema:l,schemaValue:g})=>typeof l=="string"?(0,r._)`{type: ${l}}`:(0,r._)`{type: ${g}}`};function f(l){const g=m(l);(0,n.reportError)(g,y)}Se.reportTypeError=f;function m(l){const{gen:g,data:$,schema:b}=l,_=(0,o.schemaRefOrVal)(l,b,"type");return{gen:g,keyword:"type",data:$,schema:b.type,schemaCode:_,schemaValue:_,parentSchema:b,params:{},it:l}}return Se}var St={},hs;function Ea(){if(hs)return St;hs=1,Object.defineProperty(St,"__esModule",{value:!0}),St.assignDefaults=void 0;const e=ne(),t=le();function n(o,s){const{properties:a,items:i}=o.schema;if(s==="object"&&a)for(const c in a)r(o,c,a[c].default);else s==="array"&&Array.isArray(i)&&i.forEach((c,d)=>r(o,d,c.default))}St.assignDefaults=n;function r(o,s,a){const{gen:i,compositeRule:c,data:d,opts:u}=o;if(a===void 0)return;const h=(0,e._)`${d}${(0,e.getProperty)(s)}`;if(c){(0,t.checkStrictMode)(o,`default is ignored for: ${h}`);return}let p=(0,e._)`${h} === undefined`;u.useDefaults==="empty"&&(p=(0,e._)`${p} || ${h} === null || ${h} === ""`),i.if(p,(0,e._)`${h} = ${(0,e.stringify)(a)}`)}return St}var xe={},fe={},ms;function qe(){if(ms)return fe;ms=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.validateUnion=fe.validateArray=fe.usePattern=fe.callValidateCode=fe.schemaProperties=fe.allSchemaProperties=fe.noPropertyInData=fe.propertyInData=fe.isOwnProperty=fe.hasPropFunc=fe.reportMissingProp=fe.checkMissingProp=fe.checkReportMissingProp=void 0;const e=ne(),t=le(),n=Ze(),r=le();function o(l,g){const{gen:$,data:b,it:_}=l;$.if(u($,b,g,_.opts.ownProperties),()=>{l.setParams({missingProperty:(0,e._)`${g}`},!0),l.error()})}fe.checkReportMissingProp=o;function s({gen:l,data:g,it:{opts:$}},b,_){return(0,e.or)(...b.map(C=>(0,e.and)(u(l,g,C,$.ownProperties),(0,e._)`${_} = ${C}`)))}fe.checkMissingProp=s;function a(l,g){l.setParams({missingProperty:g},!0),l.error()}fe.reportMissingProp=a;function i(l){return l.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}fe.hasPropFunc=i;function c(l,g,$){return(0,e._)`${i(l)}.call(${g}, ${$})`}fe.isOwnProperty=c;function d(l,g,$,b){const _=(0,e._)`${g}${(0,e.getProperty)($)} !== undefined`;return b?(0,e._)`${_} && ${c(l,g,$)}`:_}fe.propertyInData=d;function u(l,g,$,b){const _=(0,e._)`${g}${(0,e.getProperty)($)} === undefined`;return b?(0,e.or)(_,(0,e.not)(c(l,g,$))):_}fe.noPropertyInData=u;function h(l){return l?Object.keys(l).filter(g=>g!=="__proto__"):[]}fe.allSchemaProperties=h;function p(l,g){return h(g).filter($=>!(0,t.alwaysValidSchema)(l,g[$]))}fe.schemaProperties=p;function v({schemaCode:l,data:g,it:{gen:$,topSchemaRef:b,schemaPath:_,errorPath:C},it:k},P,L,T){const V=T?(0,e._)`${l}, ${g}, ${b}${_}`:g,z=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,C)],[n.default.parentData,k.parentData],[n.default.parentDataProperty,k.parentDataProperty],[n.default.rootData,n.default.rootData]];k.opts.dynamicRef&&z.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const K=(0,e._)`${V}, ${$.object(...z)}`;return L!==e.nil?(0,e._)`${P}.call(${L}, ${K})`:(0,e._)`${P}(${K})`}fe.callValidateCode=v;const w=(0,e._)`new RegExp`;function y({gen:l,it:{opts:g}},$){const b=g.unicodeRegExp?"u":"",{regExp:_}=g.code,C=_($,b);return l.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,e._)`${_.code==="new RegExp"?w:(0,r.useFunc)(l,_)}(${$}, ${b})`})}fe.usePattern=y;function f(l){const{gen:g,data:$,keyword:b,it:_}=l,C=g.name("valid");if(_.allErrors){const P=g.let("valid",!0);return k(()=>g.assign(P,!1)),P}return g.var(C,!0),k(()=>g.break()),C;function k(P){const L=g.const("len",(0,e._)`${$}.length`);g.forRange("i",0,L,T=>{l.subschema({keyword:b,dataProp:T,dataPropType:t.Type.Num},C),g.if((0,e.not)(C),P)})}}fe.validateArray=f;function m(l){const{gen:g,schema:$,keyword:b,it:_}=l;if(!Array.isArray($))throw new Error("ajv implementation error");if($.some(L=>(0,t.alwaysValidSchema)(_,L))&&!_.opts.unevaluated)return;const k=g.let("valid",!1),P=g.name("_valid");g.block(()=>$.forEach((L,T)=>{const V=l.subschema({keyword:b,schemaProp:T,compositeRule:!0},P);g.assign(k,(0,e._)`${k} || ${P}`),l.mergeValidEvaluated(V,P)||g.if((0,e.not)(k))})),l.result(k,()=>l.reset(),()=>l.error(!0))}return fe.validateUnion=m,fe}var gs;function Pa(){if(gs)return xe;gs=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.validateKeywordUsage=xe.validSchemaType=xe.funcKeywordCode=xe.macroKeywordCode=void 0;const e=ne(),t=Ze(),n=qe(),r=Hn();function o(p,v){const{gen:w,keyword:y,schema:f,parentSchema:m,it:l}=p,g=v.macro.call(l.self,f,m,l),$=d(w,y,g);l.opts.validateSchema!==!1&&l.self.validateSchema(g,!0);const b=w.name("valid");p.subschema({schema:g,schemaPath:e.nil,errSchemaPath:`${l.errSchemaPath}/${y}`,topSchemaRef:$,compositeRule:!0},b),p.pass(b,()=>p.error(!0))}xe.macroKeywordCode=o;function s(p,v){var w;const{gen:y,keyword:f,schema:m,parentSchema:l,$data:g,it:$}=p;c($,v);const b=!g&&v.compile?v.compile.call($.self,m,l,$):v.validate,_=d(y,f,b),C=y.let("valid");p.block$data(C,k),p.ok((w=v.valid)!==null&&w!==void 0?w:C);function k(){if(v.errors===!1)T(),v.modifying&&a(p),V(()=>p.error());else{const z=v.async?P():L();v.modifying&&a(p),V(()=>i(p,z))}}function P(){const z=y.let("ruleErrs",null);return y.try(()=>T((0,e._)`await `),K=>y.assign(C,!1).if((0,e._)`${K} instanceof ${$.ValidationError}`,()=>y.assign(z,(0,e._)`${K}.errors`),()=>y.throw(K))),z}function L(){const z=(0,e._)`${_}.errors`;return y.assign(z,null),T(e.nil),z}function T(z=v.async?(0,e._)`await `:e.nil){const K=$.opts.passContext?t.default.this:t.default.self,W=!("compile"in v&&!g||v.schema===!1);y.assign(C,(0,e._)`${z}${(0,n.callValidateCode)(p,_,K,W)}`,v.modifying)}function V(z){var K;y.if((0,e.not)((K=v.valid)!==null&&K!==void 0?K:C),z)}}xe.funcKeywordCode=s;function a(p){const{gen:v,data:w,it:y}=p;v.if(y.parentData,()=>v.assign(w,(0,e._)`${y.parentData}[${y.parentDataProperty}]`))}function i(p,v){const{gen:w}=p;w.if((0,e._)`Array.isArray(${v})`,()=>{w.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${v} : ${t.default.vErrors}.concat(${v})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(p)},()=>p.error())}function c({schemaEnv:p},v){if(v.async&&!p.$async)throw new Error("async keyword in sync schema")}function d(p,v,w){if(w===void 0)throw new Error(`keyword "${v}" failed to compile`);return p.scopeValue("keyword",typeof w=="function"?{ref:w}:{ref:w,code:(0,e.stringify)(w)})}function u(p,v,w=!1){return!v.length||v.some(y=>y==="array"?Array.isArray(p):y==="object"?p&&typeof p=="object"&&!Array.isArray(p):typeof p==y||w&&typeof p>"u")}xe.validSchemaType=u;function h({schema:p,opts:v,self:w,errSchemaPath:y},f,m){if(Array.isArray(f.keyword)?!f.keyword.includes(m):f.keyword!==m)throw new Error("ajv implementation error");const l=f.dependencies;if(l?.some(g=>!Object.prototype.hasOwnProperty.call(p,g)))throw new Error(`parent schema must have dependencies of ${m}: ${l.join(",")}`);if(f.validateSchema&&!f.validateSchema(p[m])){const $=`keyword "${m}" value is invalid at path "${y}": `+w.errorsText(f.validateSchema.errors);if(v.validateSchema==="log")w.logger.error($);else throw new Error($)}}return xe.validateKeywordUsage=h,xe}var He={},ps;function ka(){if(ps)return He;ps=1,Object.defineProperty(He,"__esModule",{value:!0}),He.extendSubschemaMode=He.extendSubschemaData=He.getSubschema=void 0;const e=ne(),t=le();function n(s,{keyword:a,schemaProp:i,schema:c,schemaPath:d,errSchemaPath:u,topSchemaRef:h}){if(a!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(a!==void 0){const p=s.schema[a];return i===void 0?{schema:p,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${a}`}:{schema:p[i],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(a)}${(0,e.getProperty)(i)}`,errSchemaPath:`${s.errSchemaPath}/${a}/${(0,t.escapeFragment)(i)}`}}if(c!==void 0){if(d===void 0||u===void 0||h===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:d,topSchemaRef:h,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}He.getSubschema=n;function r(s,a,{dataProp:i,dataPropType:c,data:d,dataTypes:u,propertyName:h}){if(d!==void 0&&i!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:p}=a;if(i!==void 0){const{errorPath:w,dataPathArr:y,opts:f}=a,m=p.let("data",(0,e._)`${a.data}${(0,e.getProperty)(i)}`,!0);v(m),s.errorPath=(0,e.str)`${w}${(0,t.getErrorPath)(i,c,f.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${i}`,s.dataPathArr=[...y,s.parentDataProperty]}if(d!==void 0){const w=d instanceof e.Name?d:p.let("data",d,!0);v(w),h!==void 0&&(s.propertyName=h)}u&&(s.dataTypes=u);function v(w){s.data=w,s.dataLevel=a.dataLevel+1,s.dataTypes=[],a.definedProperties=new Set,s.parentData=a.data,s.dataNames=[...a.dataNames,w]}}He.extendSubschemaData=r;function o(s,{jtdDiscriminator:a,jtdMetadata:i,compositeRule:c,createErrors:d,allErrors:u}){c!==void 0&&(s.compositeRule=c),d!==void 0&&(s.createErrors=d),u!==void 0&&(s.allErrors=u),s.jtdDiscriminator=a,s.jtdMetadata=i}return He.extendSubschemaMode=o,He}var Ee={},lr,ys;function Qo(){return ys||(ys=1,lr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var a=s[o];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),lr}var cr={exports:{}},vs;function Oa(){if(vs)return cr.exports;vs=1;var e=cr.exports=function(r,o,s){typeof o=="function"&&(s=o,o={}),s=o.cb||s;var a=typeof s=="function"?s:s.pre||function(){},i=s.post||function(){};t(o,a,i,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,o,s,a,i,c,d,u,h,p){if(a&&typeof a=="object"&&!Array.isArray(a)){o(a,i,c,d,u,h,p);for(var v in a){var w=a[v];if(Array.isArray(w)){if(v in e.arrayKeywords)for(var y=0;y<w.length;y++)t(r,o,s,w[y],i+"/"+v+"/"+y,c,i,v,a,y)}else if(v in e.propsKeywords){if(w&&typeof w=="object")for(var f in w)t(r,o,s,w[f],i+"/"+v+"/"+n(f),c,i,v,a,f)}else(v in e.keywords||r.allKeys&&!(v in e.skipKeywords))&&t(r,o,s,w,i+"/"+v,c,i,v,a)}s(a,i,c,d,u,h,p)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return cr.exports}var $s;function Bn(){if($s)return Ee;$s=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getSchemaRefs=Ee.resolveUrl=Ee.normalizeId=Ee._getFullPath=Ee.getFullPath=Ee.inlineRef=void 0;const e=le(),t=Qo(),n=Oa(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(y,f=!0){return typeof y=="boolean"?!0:f===!0?!a(y):f?i(y)<=f:!1}Ee.inlineRef=o;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function a(y){for(const f in y){if(s.has(f))return!0;const m=y[f];if(Array.isArray(m)&&m.some(a)||typeof m=="object"&&a(m))return!0}return!1}function i(y){let f=0;for(const m in y){if(m==="$ref")return 1/0;if(f++,!r.has(m)&&(typeof y[m]=="object"&&(0,e.eachItem)(y[m],l=>f+=i(l)),f===1/0))return 1/0}return f}function c(y,f="",m){m!==!1&&(f=h(f));const l=y.parse(f);return d(y,l)}Ee.getFullPath=c;function d(y,f){return y.serialize(f).split("#")[0]+"#"}Ee._getFullPath=d;const u=/#\/?$/;function h(y){return y?y.replace(u,""):""}Ee.normalizeId=h;function p(y,f,m){return m=h(m),y.resolve(f,m)}Ee.resolveUrl=p;const v=/^[a-z_][-a-z0-9._]*$/i;function w(y,f){if(typeof y=="boolean")return{};const{schemaId:m,uriResolver:l}=this.opts,g=h(y[m]||f),$={"":g},b=c(l,g,!1),_={},C=new Set;return n(y,{allKeys:!0},(L,T,V,z)=>{if(z===void 0)return;const K=b+T;let W=$[z];typeof L[m]=="string"&&(W=oe.call(this,L[m])),ge.call(this,L.$anchor),ge.call(this,L.$dynamicAnchor),$[T]=W;function oe(re){const de=this.opts.uriResolver.resolve;if(re=h(W?de(W,re):re),C.has(re))throw P(re);C.add(re);let F=this.refs[re];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?k(L,F.schema,re):re!==h(K)&&(re[0]==="#"?(k(L,_[re],re),_[re]=L):this.refs[re]=K),re}function ge(re){if(typeof re=="string"){if(!v.test(re))throw new Error(`invalid anchor "${re}"`);oe.call(this,`#${re}`)}}}),_;function k(L,T,V){if(T!==void 0&&!t(L,T))throw P(V)}function P(L){return new Error(`reference "${L}" resolves to more than one schema`)}}return Ee.getSchemaRefs=w,Ee}var _s;function Wn(){if(_s)return Ke;_s=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.getData=Ke.KeywordCxt=Ke.validateFunctionCode=void 0;const e=Ca(),t=Vn(),n=Go(),r=Vn(),o=Ea(),s=Pa(),a=ka(),i=ne(),c=Ze(),d=Bn(),u=le(),h=Hn();function p(O){if(b(O)&&(C(O),$(O))){f(O);return}v(O,()=>(0,e.topBoolOrEmptySchema)(O))}Ke.validateFunctionCode=p;function v({gen:O,validateName:N,schema:D,schemaEnv:U,opts:G},ee){G.code.es5?O.func(N,(0,i._)`${c.default.data}, ${c.default.valCxt}`,U.$async,()=>{O.code((0,i._)`"use strict"; ${l(D,G)}`),y(O,G),O.code(ee)}):O.func(N,(0,i._)`${c.default.data}, ${w(G)}`,U.$async,()=>O.code(l(D,G)).code(ee))}function w(O){return(0,i._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${O.dynamicRef?(0,i._)`, ${c.default.dynamicAnchors}={}`:i.nil}}={}`}function y(O,N){O.if(c.default.valCxt,()=>{O.var(c.default.instancePath,(0,i._)`${c.default.valCxt}.${c.default.instancePath}`),O.var(c.default.parentData,(0,i._)`${c.default.valCxt}.${c.default.parentData}`),O.var(c.default.parentDataProperty,(0,i._)`${c.default.valCxt}.${c.default.parentDataProperty}`),O.var(c.default.rootData,(0,i._)`${c.default.valCxt}.${c.default.rootData}`),N.dynamicRef&&O.var(c.default.dynamicAnchors,(0,i._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{O.var(c.default.instancePath,(0,i._)`""`),O.var(c.default.parentData,(0,i._)`undefined`),O.var(c.default.parentDataProperty,(0,i._)`undefined`),O.var(c.default.rootData,c.default.data),N.dynamicRef&&O.var(c.default.dynamicAnchors,(0,i._)`{}`)})}function f(O){const{schema:N,opts:D,gen:U}=O;v(O,()=>{D.$comment&&N.$comment&&z(O),L(O),U.let(c.default.vErrors,null),U.let(c.default.errors,0),D.unevaluated&&m(O),k(O),K(O)})}function m(O){const{gen:N,validateName:D}=O;O.evaluated=N.const("evaluated",(0,i._)`${D}.evaluated`),N.if((0,i._)`${O.evaluated}.dynamicProps`,()=>N.assign((0,i._)`${O.evaluated}.props`,(0,i._)`undefined`)),N.if((0,i._)`${O.evaluated}.dynamicItems`,()=>N.assign((0,i._)`${O.evaluated}.items`,(0,i._)`undefined`))}function l(O,N){const D=typeof O=="object"&&O[N.schemaId];return D&&(N.code.source||N.code.process)?(0,i._)`/*# sourceURL=${D} */`:i.nil}function g(O,N){if(b(O)&&(C(O),$(O))){_(O,N);return}(0,e.boolOrEmptySchema)(O,N)}function $({schema:O,self:N}){if(typeof O=="boolean")return!O;for(const D in O)if(N.RULES.all[D])return!0;return!1}function b(O){return typeof O.schema!="boolean"}function _(O,N){const{schema:D,gen:U,opts:G}=O;G.$comment&&D.$comment&&z(O),T(O),V(O);const ee=U.const("_errs",c.default.errors);k(O,ee),U.var(N,(0,i._)`${ee} === ${c.default.errors}`)}function C(O){(0,u.checkUnknownRules)(O),P(O)}function k(O,N){if(O.opts.jtd)return oe(O,[],!1,N);const D=(0,t.getSchemaTypes)(O.schema),U=(0,t.coerceAndCheckDataType)(O,D);oe(O,D,!U,N)}function P(O){const{schema:N,errSchemaPath:D,opts:U,self:G}=O;N.$ref&&U.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(N,G.RULES)&&G.logger.warn(`$ref: keywords ignored in schema at path "${D}"`)}function L(O){const{schema:N,opts:D}=O;N.default!==void 0&&D.useDefaults&&D.strictSchema&&(0,u.checkStrictMode)(O,"default is ignored in the schema root")}function T(O){const N=O.schema[O.opts.schemaId];N&&(O.baseId=(0,d.resolveUrl)(O.opts.uriResolver,O.baseId,N))}function V(O){if(O.schema.$async&&!O.schemaEnv.$async)throw new Error("async schema in sync schema")}function z({gen:O,schemaEnv:N,schema:D,errSchemaPath:U,opts:G}){const ee=D.$comment;if(G.$comment===!0)O.code((0,i._)`${c.default.self}.logger.log(${ee})`);else if(typeof G.$comment=="function"){const we=(0,i.str)`${U}/$comment`,Te=O.scopeValue("root",{ref:N.root});O.code((0,i._)`${c.default.self}.opts.$comment(${ee}, ${we}, ${Te}.schema)`)}}function K(O){const{gen:N,schemaEnv:D,validateName:U,ValidationError:G,opts:ee}=O;D.$async?N.if((0,i._)`${c.default.errors} === 0`,()=>N.return(c.default.data),()=>N.throw((0,i._)`new ${G}(${c.default.vErrors})`)):(N.assign((0,i._)`${U}.errors`,c.default.vErrors),ee.unevaluated&&W(O),N.return((0,i._)`${c.default.errors} === 0`))}function W({gen:O,evaluated:N,props:D,items:U}){D instanceof i.Name&&O.assign((0,i._)`${N}.props`,D),U instanceof i.Name&&O.assign((0,i._)`${N}.items`,U)}function oe(O,N,D,U){const{gen:G,schema:ee,data:we,allErrors:Te,opts:ke,self:Oe}=O,{RULES:be}=Oe;if(ee.$ref&&(ke.ignoreKeywordsWithRef||!(0,u.schemaHasRulesButRef)(ee,be))){G.block(()=>J(O,"$ref",be.all.$ref.definition));return}ke.jtd||re(O,N),G.block(()=>{for(const Le of be.rules)lt(Le);lt(be.post)});function lt(Le){(0,n.shouldUseGroup)(ee,Le)&&(Le.type?(G.if((0,r.checkDataType)(Le.type,we,ke.strictNumbers)),ge(O,Le),N.length===1&&N[0]===Le.type&&D&&(G.else(),(0,r.reportTypeError)(O)),G.endIf()):ge(O,Le),Te||G.if((0,i._)`${c.default.errors} === ${U||0}`))}}function ge(O,N){const{gen:D,schema:U,opts:{useDefaults:G}}=O;G&&(0,o.assignDefaults)(O,N.type),D.block(()=>{for(const ee of N.rules)(0,n.shouldUseRule)(U,ee)&&J(O,ee.keyword,ee.definition,N.type)})}function re(O,N){O.schemaEnv.meta||!O.opts.strictTypes||(de(O,N),O.opts.allowUnionTypes||F(O,N),R(O,O.dataTypes))}function de(O,N){if(N.length){if(!O.dataTypes.length){O.dataTypes=N;return}N.forEach(D=>{I(O.dataTypes,D)||E(O,`type "${D}" not allowed by context "${O.dataTypes.join(",")}"`)}),S(O,N)}}function F(O,N){N.length>1&&!(N.length===2&&N.includes("null"))&&E(O,"use allowUnionTypes to allow union type keyword")}function R(O,N){const D=O.self.RULES.all;for(const U in D){const G=D[U];if(typeof G=="object"&&(0,n.shouldUseRule)(O.schema,G)){const{type:ee}=G.definition;ee.length&&!ee.some(we=>q(N,we))&&E(O,`missing type "${ee.join(",")}" for keyword "${U}"`)}}}function q(O,N){return O.includes(N)||N==="number"&&O.includes("integer")}function I(O,N){return O.includes(N)||N==="integer"&&O.includes("number")}function S(O,N){const D=[];for(const U of O.dataTypes)I(N,U)?D.push(U):N.includes("integer")&&U==="number"&&D.push("integer");O.dataTypes=D}function E(O,N){const D=O.schemaEnv.baseId+O.errSchemaPath;N+=` at "${D}" (strictTypes)`,(0,u.checkStrictMode)(O,N,O.opts.strictTypes)}class x{constructor(N,D,U){if((0,s.validateKeywordUsage)(N,D,U),this.gen=N.gen,this.allErrors=N.allErrors,this.keyword=U,this.data=N.data,this.schema=N.schema[U],this.$data=D.$data&&N.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(N,this.schema,U,this.$data),this.schemaType=D.schemaType,this.parentSchema=N.schema,this.params={},this.it=N,this.def=D,this.$data)this.schemaCode=N.gen.const("vSchema",ie(this.$data,N));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,D.schemaType,D.allowUndefined))throw new Error(`${U} value must be ${JSON.stringify(D.schemaType)}`);("code"in D?D.trackErrors:D.errors!==!1)&&(this.errsCount=N.gen.const("_errs",c.default.errors))}result(N,D,U){this.failResult((0,i.not)(N),D,U)}failResult(N,D,U){this.gen.if(N),U?U():this.error(),D?(this.gen.else(),D(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(N,D){this.failResult((0,i.not)(N),void 0,D)}fail(N){if(N===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(N),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(N){if(!this.$data)return this.fail(N);const{schemaCode:D}=this;this.fail((0,i._)`${D} !== undefined && (${(0,i.or)(this.invalid$data(),N)})`)}error(N,D,U){if(D){this.setParams(D),this._error(N,U),this.setParams({});return}this._error(N,U)}_error(N,D){(N?h.reportExtraError:h.reportError)(this,this.def.error,D)}$dataError(){(0,h.reportError)(this,this.def.$dataError||h.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,h.resetErrorsCount)(this.gen,this.errsCount)}ok(N){this.allErrors||this.gen.if(N)}setParams(N,D){D?Object.assign(this.params,N):this.params=N}block$data(N,D,U=i.nil){this.gen.block(()=>{this.check$data(N,U),D()})}check$data(N=i.nil,D=i.nil){if(!this.$data)return;const{gen:U,schemaCode:G,schemaType:ee,def:we}=this;U.if((0,i.or)((0,i._)`${G} === undefined`,D)),N!==i.nil&&U.assign(N,!0),(ee.length||we.validateSchema)&&(U.elseIf(this.invalid$data()),this.$dataError(),N!==i.nil&&U.assign(N,!1)),U.else()}invalid$data(){const{gen:N,schemaCode:D,schemaType:U,def:G,it:ee}=this;return(0,i.or)(we(),Te());function we(){if(U.length){if(!(D instanceof i.Name))throw new Error("ajv implementation error");const ke=Array.isArray(U)?U:[U];return(0,i._)`${(0,r.checkDataTypes)(ke,D,ee.opts.strictNumbers,r.DataType.Wrong)}`}return i.nil}function Te(){if(G.validateSchema){const ke=N.scopeValue("validate$data",{ref:G.validateSchema});return(0,i._)`!${ke}(${D})`}return i.nil}}subschema(N,D){const U=(0,a.getSubschema)(this.it,N);(0,a.extendSubschemaData)(U,this.it,N),(0,a.extendSubschemaMode)(U,N);const G={...this.it,...U,items:void 0,props:void 0};return g(G,D),G}mergeEvaluated(N,D){const{it:U,gen:G}=this;U.opts.unevaluated&&(U.props!==!0&&N.props!==void 0&&(U.props=u.mergeEvaluated.props(G,N.props,U.props,D)),U.items!==!0&&N.items!==void 0&&(U.items=u.mergeEvaluated.items(G,N.items,U.items,D)))}mergeValidEvaluated(N,D){const{it:U,gen:G}=this;if(U.opts.unevaluated&&(U.props!==!0||U.items!==!0))return G.if(D,()=>this.mergeEvaluated(N,i.Name)),!0}}Ke.KeywordCxt=x;function J(O,N,D,U){const G=new x(O,D,N);"code"in D?D.code(G,U):G.$data&&D.validate?(0,s.funcKeywordCode)(G,D):"macro"in D?(0,s.macroKeywordCode)(G,D):(D.compile||D.validate)&&(0,s.funcKeywordCode)(G,D)}const Q=/^\/(?:[^~]|~0|~1)*$/,ce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ie(O,{dataLevel:N,dataNames:D,dataPathArr:U}){let G,ee;if(O==="")return c.default.rootData;if(O[0]==="/"){if(!Q.test(O))throw new Error(`Invalid JSON-pointer: ${O}`);G=O,ee=c.default.rootData}else{const Oe=ce.exec(O);if(!Oe)throw new Error(`Invalid JSON-pointer: ${O}`);const be=+Oe[1];if(G=Oe[2],G==="#"){if(be>=N)throw new Error(ke("property/index",be));return U[N-be]}if(be>N)throw new Error(ke("data",be));if(ee=D[N-be],!G)return ee}let we=ee;const Te=G.split("/");for(const Oe of Te)Oe&&(ee=(0,i._)`${ee}${(0,i.getProperty)((0,u.unescapeJsonPointer)(Oe))}`,we=(0,i._)`${we} && ${ee}`);return we;function ke(Oe,be){return`Cannot access ${Oe} ${be} levels up, current level is ${N}`}}return Ke.getData=ie,Ke}var Kt={},ws;function Ir(){if(ws)return Kt;ws=1,Object.defineProperty(Kt,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return Kt.default=e,Kt}var zt={},bs;function Jn(){if(bs)return zt;bs=1,Object.defineProperty(zt,"__esModule",{value:!0});const e=Bn();class t extends Error{constructor(r,o,s,a){super(a||`can't resolve reference ${s} from id ${o}`),this.missingRef=(0,e.resolveUrl)(r,o,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return zt.default=t,zt}var Ie={},Ss;function Lr(){if(Ss)return Ie;Ss=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;const e=ne(),t=Ir(),n=Ze(),r=Bn(),o=le(),s=Wn();class a{constructor(m){var l;this.refs={},this.dynamicAnchors={};let g;typeof m.schema=="object"&&(g=m.schema),this.schema=m.schema,this.schemaId=m.schemaId,this.root=m.root||this,this.baseId=(l=m.baseId)!==null&&l!==void 0?l:(0,r.normalizeId)(g?.[m.schemaId||"$id"]),this.schemaPath=m.schemaPath,this.localRefs=m.localRefs,this.meta=m.meta,this.$async=g?.$async,this.refs={}}}Ie.SchemaEnv=a;function i(f){const m=u.call(this,f);if(m)return m;const l=(0,r.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:g,lines:$}=this.opts.code,{ownProperties:b}=this.opts,_=new e.CodeGen(this.scope,{es5:g,lines:$,ownProperties:b});let C;f.$async&&(C=_.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const k=_.scopeName("validate");f.validateName=k;const P={gen:_,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:_.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,e.stringify)(f.schema)}:{ref:f.schema}),validateName:k,ValidationError:C,schema:f.schema,schemaEnv:f,rootId:l,baseId:f.baseId||l,schemaPath:e.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let L;try{this._compilations.add(f),(0,s.validateFunctionCode)(P),_.optimize(this.opts.code.optimize);const T=_.toString();L=`${_.scopeRefs(n.default.scope)}return ${T}`,this.opts.code.process&&(L=this.opts.code.process(L,f));const z=new Function(`${n.default.self}`,`${n.default.scope}`,L)(this,this.scope.get());if(this.scope.value(k,{ref:z}),z.errors=null,z.schema=f.schema,z.schemaEnv=f,f.$async&&(z.$async=!0),this.opts.code.source===!0&&(z.source={validateName:k,validateCode:T,scopeValues:_._values}),this.opts.unevaluated){const{props:K,items:W}=P;z.evaluated={props:K instanceof e.Name?void 0:K,items:W instanceof e.Name?void 0:W,dynamicProps:K instanceof e.Name,dynamicItems:W instanceof e.Name},z.source&&(z.source.evaluated=(0,e.stringify)(z.evaluated))}return f.validate=z,f}catch(T){throw delete f.validate,delete f.validateName,L&&this.logger.error("Error compiling schema, function code:",L),T}finally{this._compilations.delete(f)}}Ie.compileSchema=i;function c(f,m,l){var g;l=(0,r.resolveUrl)(this.opts.uriResolver,m,l);const $=f.refs[l];if($)return $;let b=p.call(this,f,l);if(b===void 0){const _=(g=f.localRefs)===null||g===void 0?void 0:g[l],{schemaId:C}=this.opts;_&&(b=new a({schema:_,schemaId:C,root:f,baseId:m}))}if(b!==void 0)return f.refs[l]=d.call(this,b)}Ie.resolveRef=c;function d(f){return(0,r.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:i.call(this,f)}function u(f){for(const m of this._compilations)if(h(m,f))return m}Ie.getCompilingSchema=u;function h(f,m){return f.schema===m.schema&&f.root===m.root&&f.baseId===m.baseId}function p(f,m){let l;for(;typeof(l=this.refs[m])=="string";)m=l;return l||this.schemas[m]||v.call(this,f,m)}function v(f,m){const l=this.opts.uriResolver.parse(m),g=(0,r._getFullPath)(this.opts.uriResolver,l);let $=(0,r.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&g===$)return y.call(this,l,f);const b=(0,r.normalizeId)(g),_=this.refs[b]||this.schemas[b];if(typeof _=="string"){const C=v.call(this,f,_);return typeof C?.schema!="object"?void 0:y.call(this,l,C)}if(typeof _?.schema=="object"){if(_.validate||i.call(this,_),b===(0,r.normalizeId)(m)){const{schema:C}=_,{schemaId:k}=this.opts,P=C[k];return P&&($=(0,r.resolveUrl)(this.opts.uriResolver,$,P)),new a({schema:C,schemaId:k,root:f,baseId:$})}return y.call(this,l,_)}}Ie.resolveSchema=v;const w=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(f,{baseId:m,schema:l,root:g}){var $;if((($=f.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(const C of f.fragment.slice(1).split("/")){if(typeof l=="boolean")return;const k=l[(0,o.unescapeFragment)(C)];if(k===void 0)return;l=k;const P=typeof l=="object"&&l[this.opts.schemaId];!w.has(C)&&P&&(m=(0,r.resolveUrl)(this.opts.uriResolver,m,P))}let b;if(typeof l!="boolean"&&l.$ref&&!(0,o.schemaHasRulesButRef)(l,this.RULES)){const C=(0,r.resolveUrl)(this.opts.uriResolver,m,l.$ref);b=v.call(this,g,C)}const{schemaId:_}=this.opts;if(b=b||new a({schema:l,schemaId:_,root:g,baseId:m}),b.schema!==b.root.schema)return b}return Ie}const Ra="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Na="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ia="object",La=["$data"],Aa={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ja=!1,Ta={$id:Ra,description:Na,type:Ia,required:La,properties:Aa,additionalProperties:ja};var Ht={},Ct={exports:{}},ur,Cs;function xa(){return Cs||(Cs=1,ur={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),ur}var dr,Es;function qa(){if(Es)return dr;Es=1;const{HEX:e}=xa(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(y){if(i(y,".")<3)return{host:y,isIPV4:!1};const f=y.match(t)||[],[m]=f;return m?{host:a(m,"."),isIPV4:!0}:{host:y,isIPV4:!1}}function r(y,f=!1){let m="",l=!0;for(const g of y){if(e[g]===void 0)return;g!=="0"&&l===!0&&(l=!1),l||(m+=g)}return f&&m.length===0&&(m="0"),m}function o(y){let f=0;const m={error:!1,address:"",zone:""},l=[],g=[];let $=!1,b=!1,_=!1;function C(){if(g.length){if($===!1){const k=r(g);if(k!==void 0)l.push(k);else return m.error=!0,!1}g.length=0}return!0}for(let k=0;k<y.length;k++){const P=y[k];if(!(P==="["||P==="]"))if(P===":"){if(b===!0&&(_=!0),!C())break;if(f++,l.push(":"),f>7){m.error=!0;break}k-1>=0&&y[k-1]===":"&&(b=!0);continue}else if(P==="%"){if(!C())break;$=!0}else{g.push(P);continue}}return g.length&&($?m.zone=g.join(""):_?l.push(g.join("")):l.push(r(g))),m.address=l.join(""),m}function s(y){if(i(y,":")<2)return{host:y,isIPV6:!1};const f=o(y);if(f.error)return{host:y,isIPV6:!1};{let m=f.address,l=f.address;return f.zone&&(m+="%"+f.zone,l+="%25"+f.zone),{host:m,escapedHost:l,isIPV6:!0}}}function a(y,f){let m="",l=!0;const g=y.length;for(let $=0;$<g;$++){const b=y[$];b==="0"&&l?($+1<=g&&y[$+1]===f||$+1===g)&&(m+=b,l=!1):(b===f?l=!0:l=!1,m+=b)}return m}function i(y,f){let m=0;for(let l=0;l<y.length;l++)y[l]===f&&m++;return m}const c=/^\.\.?\//u,d=/^\/\.(?:\/|$)/u,u=/^\/\.\.(?:\/|$)/u,h=/^\/?(?:.|\n)*?(?=\/|$)/u;function p(y){const f=[];for(;y.length;)if(y.match(c))y=y.replace(c,"");else if(y.match(d))y=y.replace(d,"/");else if(y.match(u))y=y.replace(u,"/"),f.pop();else if(y==="."||y==="..")y="";else{const m=y.match(h);if(m){const l=m[0];y=y.slice(l.length),f.push(l)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function v(y,f){const m=f!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=m(y.scheme)),y.userinfo!==void 0&&(y.userinfo=m(y.userinfo)),y.host!==void 0&&(y.host=m(y.host)),y.path!==void 0&&(y.path=m(y.path)),y.query!==void 0&&(y.query=m(y.query)),y.fragment!==void 0&&(y.fragment=m(y.fragment)),y}function w(y){const f=[];if(y.userinfo!==void 0&&(f.push(y.userinfo),f.push("@")),y.host!==void 0){let m=unescape(y.host);const l=n(m);if(l.isIPV4)m=l.host;else{const g=s(l.host);g.isIPV6===!0?m=`[${g.escapedHost}]`:m=y.host}f.push(m)}return(typeof y.port=="number"||typeof y.port=="string")&&(f.push(":"),f.push(String(y.port))),f.length?f.join(""):void 0}return dr={recomposeAuthority:w,normalizeComponentEncoding:v,removeDotSegments:p,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},dr}var fr,Ps;function Da(){if(Ps)return fr;Ps=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(l){return typeof l.secure=="boolean"?l.secure:String(l.scheme).toLowerCase()==="wss"}function r(l){return l.host||(l.error=l.error||"HTTP URIs must have a host."),l}function o(l){const g=String(l.scheme).toLowerCase()==="https";return(l.port===(g?443:80)||l.port==="")&&(l.port=void 0),l.path||(l.path="/"),l}function s(l){return l.secure=n(l),l.resourceName=(l.path||"/")+(l.query?"?"+l.query:""),l.path=void 0,l.query=void 0,l}function a(l){if((l.port===(n(l)?443:80)||l.port==="")&&(l.port=void 0),typeof l.secure=="boolean"&&(l.scheme=l.secure?"wss":"ws",l.secure=void 0),l.resourceName){const[g,$]=l.resourceName.split("?");l.path=g&&g!=="/"?g:void 0,l.query=$,l.resourceName=void 0}return l.fragment=void 0,l}function i(l,g){if(!l.path)return l.error="URN can not be parsed",l;const $=l.path.match(t);if($){const b=g.scheme||l.scheme||"urn";l.nid=$[1].toLowerCase(),l.nss=$[2];const _=`${b}:${g.nid||l.nid}`,C=m[_];l.path=void 0,C&&(l=C.parse(l,g))}else l.error=l.error||"URN can not be parsed.";return l}function c(l,g){const $=g.scheme||l.scheme||"urn",b=l.nid.toLowerCase(),_=`${$}:${g.nid||b}`,C=m[_];C&&(l=C.serialize(l,g));const k=l,P=l.nss;return k.path=`${b||g.nid}:${P}`,g.skipEscape=!0,k}function d(l,g){const $=l;return $.uuid=$.nss,$.nss=void 0,!g.tolerant&&(!$.uuid||!e.test($.uuid))&&($.error=$.error||"UUID is not valid."),$}function u(l){const g=l;return g.nss=(l.uuid||"").toLowerCase(),g}const h={scheme:"http",domainHost:!0,parse:r,serialize:o},p={scheme:"https",domainHost:h.domainHost,parse:r,serialize:o},v={scheme:"ws",domainHost:!0,parse:s,serialize:a},w={scheme:"wss",domainHost:v.domainHost,parse:v.parse,serialize:v.serialize},m={http:h,https:p,ws:v,wss:w,urn:{scheme:"urn",parse:i,serialize:c,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:d,serialize:u,skipNormalize:!0}};return fr=m,fr}var ks;function Ma(){if(ks)return Ct.exports;ks=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:o}=qa(),s=Da();function a(f,m){return typeof f=="string"?f=u(w(f,m),m):typeof f=="object"&&(f=w(u(f,m),m)),f}function i(f,m,l){const g=Object.assign({scheme:"null"},l),$=c(w(f,g),w(m,g),g,!0);return u($,{...g,skipEscape:!0})}function c(f,m,l,g){const $={};return g||(f=w(u(f,l),l),m=w(u(m,l),l)),l=l||{},!l.tolerant&&m.scheme?($.scheme=m.scheme,$.userinfo=m.userinfo,$.host=m.host,$.port=m.port,$.path=n(m.path||""),$.query=m.query):(m.userinfo!==void 0||m.host!==void 0||m.port!==void 0?($.userinfo=m.userinfo,$.host=m.host,$.port=m.port,$.path=n(m.path||""),$.query=m.query):(m.path?(m.path.charAt(0)==="/"?$.path=n(m.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?$.path="/"+m.path:f.path?$.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+m.path:$.path=m.path,$.path=n($.path)),$.query=m.query):($.path=f.path,m.query!==void 0?$.query=m.query:$.query=f.query),$.userinfo=f.userinfo,$.host=f.host,$.port=f.port),$.scheme=f.scheme),$.fragment=m.fragment,$}function d(f,m,l){return typeof f=="string"?(f=unescape(f),f=u(o(w(f,l),!0),{...l,skipEscape:!0})):typeof f=="object"&&(f=u(o(f,!0),{...l,skipEscape:!0})),typeof m=="string"?(m=unescape(m),m=u(o(w(m,l),!0),{...l,skipEscape:!0})):typeof m=="object"&&(m=u(o(m,!0),{...l,skipEscape:!0})),f.toLowerCase()===m.toLowerCase()}function u(f,m){const l={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},g=Object.assign({},m),$=[],b=s[(g.scheme||l.scheme||"").toLowerCase()];b&&b.serialize&&b.serialize(l,g),l.path!==void 0&&(g.skipEscape?l.path=unescape(l.path):(l.path=escape(l.path),l.scheme!==void 0&&(l.path=l.path.split("%3A").join(":")))),g.reference!=="suffix"&&l.scheme&&$.push(l.scheme,":");const _=r(l);if(_!==void 0&&(g.reference!=="suffix"&&$.push("//"),$.push(_),l.path&&l.path.charAt(0)!=="/"&&$.push("/")),l.path!==void 0){let C=l.path;!g.absolutePath&&(!b||!b.absolutePath)&&(C=n(C)),_===void 0&&(C=C.replace(/^\/\//u,"/%2F")),$.push(C)}return l.query!==void 0&&$.push("?",l.query),l.fragment!==void 0&&$.push("#",l.fragment),$.join("")}const h=Array.from({length:127},(f,m)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(m)));function p(f){let m=0;for(let l=0,g=f.length;l<g;++l)if(m=f.charCodeAt(l),m>126||h[m])return!0;return!1}const v=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function w(f,m){const l=Object.assign({},m),g={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},$=f.indexOf("%")!==-1;let b=!1;l.reference==="suffix"&&(f=(l.scheme?l.scheme+":":"")+"//"+f);const _=f.match(v);if(_){if(g.scheme=_[1],g.userinfo=_[3],g.host=_[4],g.port=parseInt(_[5],10),g.path=_[6]||"",g.query=_[7],g.fragment=_[8],isNaN(g.port)&&(g.port=_[5]),g.host){const k=t(g.host);if(k.isIPV4===!1){const P=e(k.host);g.host=P.host.toLowerCase(),b=P.isIPV6}else g.host=k.host,b=!0}g.scheme===void 0&&g.userinfo===void 0&&g.host===void 0&&g.port===void 0&&g.query===void 0&&!g.path?g.reference="same-document":g.scheme===void 0?g.reference="relative":g.fragment===void 0?g.reference="absolute":g.reference="uri",l.reference&&l.reference!=="suffix"&&l.reference!==g.reference&&(g.error=g.error||"URI is not a "+l.reference+" reference.");const C=s[(l.scheme||g.scheme||"").toLowerCase()];if(!l.unicodeSupport&&(!C||!C.unicodeSupport)&&g.host&&(l.domainHost||C&&C.domainHost)&&b===!1&&p(g.host))try{g.host=URL.domainToASCII(g.host.toLowerCase())}catch(k){g.error=g.error||"Host's domain name can not be converted to ASCII: "+k}(!C||C&&!C.skipNormalize)&&($&&g.scheme!==void 0&&(g.scheme=unescape(g.scheme)),$&&g.host!==void 0&&(g.host=unescape(g.host)),g.path&&(g.path=escape(unescape(g.path))),g.fragment&&(g.fragment=encodeURI(decodeURIComponent(g.fragment)))),C&&C.parse&&C.parse(g,l)}else g.error=g.error||"URI can not be parsed.";return g}const y={SCHEMES:s,normalize:a,resolve:i,resolveComponents:c,equal:d,serialize:u,parse:w};return Ct.exports=y,Ct.exports.default=y,Ct.exports.fastUri=y,Ct.exports}var Os;function Va(){if(Os)return Ht;Os=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=Ma();return e.code='require("ajv/dist/runtime/uri").default',Ht.default=e,Ht}var Rs;function Fa(){return Rs||(Rs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Wn();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=ne();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Ir(),o=Jn(),s=Jo(),a=Lr(),i=ne(),c=Bn(),d=Vn(),u=le(),h=Ta,p=Va(),v=(F,R)=>new RegExp(F,R);v.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},l=200;function g(F){var R,q,I,S,E,x,J,Q,ce,ie,O,N,D,U,G,ee,we,Te,ke,Oe,be,lt,Le,Qn,Xn;const wt=F.strict,Yn=(R=F.code)===null||R===void 0?void 0:R.optimize,qr=Yn===!0||Yn===void 0?1:Yn||0,Dr=(I=(q=F.code)===null||q===void 0?void 0:q.regExp)!==null&&I!==void 0?I:v,yi=(S=F.uriResolver)!==null&&S!==void 0?S:p.default;return{strictSchema:(x=(E=F.strictSchema)!==null&&E!==void 0?E:wt)!==null&&x!==void 0?x:!0,strictNumbers:(Q=(J=F.strictNumbers)!==null&&J!==void 0?J:wt)!==null&&Q!==void 0?Q:!0,strictTypes:(ie=(ce=F.strictTypes)!==null&&ce!==void 0?ce:wt)!==null&&ie!==void 0?ie:"log",strictTuples:(N=(O=F.strictTuples)!==null&&O!==void 0?O:wt)!==null&&N!==void 0?N:"log",strictRequired:(U=(D=F.strictRequired)!==null&&D!==void 0?D:wt)!==null&&U!==void 0?U:!1,code:F.code?{...F.code,optimize:qr,regExp:Dr}:{optimize:qr,regExp:Dr},loopRequired:(G=F.loopRequired)!==null&&G!==void 0?G:l,loopEnum:(ee=F.loopEnum)!==null&&ee!==void 0?ee:l,meta:(we=F.meta)!==null&&we!==void 0?we:!0,messages:(Te=F.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(ke=F.inlineRefs)!==null&&ke!==void 0?ke:!0,schemaId:(Oe=F.schemaId)!==null&&Oe!==void 0?Oe:"$id",addUsedSchema:(be=F.addUsedSchema)!==null&&be!==void 0?be:!0,validateSchema:(lt=F.validateSchema)!==null&&lt!==void 0?lt:!0,validateFormats:(Le=F.validateFormats)!==null&&Le!==void 0?Le:!0,unicodeRegExp:(Qn=F.unicodeRegExp)!==null&&Qn!==void 0?Qn:!0,int32range:(Xn=F.int32range)!==null&&Xn!==void 0?Xn:!0,uriResolver:yi}}class ${constructor(R={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,R=this.opts={...R,...g(R)};const{es5:q,lines:I}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:y,es5:q,lines:I}),this.logger=V(R.logger);const S=R.validateFormats;R.validateFormats=!1,this.RULES=(0,s.getRules)(),b.call(this,f,R,"NOT SUPPORTED"),b.call(this,m,R,"DEPRECATED","warn"),this._metaOpts=L.call(this),R.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),R.keywords&&P.call(this,R.keywords),typeof R.meta=="object"&&this.addMetaSchema(R.meta),C.call(this),R.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:R,meta:q,schemaId:I}=this.opts;let S=h;I==="id"&&(S={...h},S.id=S.$id,delete S.$id),q&&R&&this.addMetaSchema(S,S[I],!1)}defaultMeta(){const{meta:R,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof R=="object"?R[q]||R:void 0}validate(R,q){let I;if(typeof R=="string"){if(I=this.getSchema(R),!I)throw new Error(`no schema with key or ref "${R}"`)}else I=this.compile(R);const S=I(q);return"$async"in I||(this.errors=I.errors),S}compile(R,q){const I=this._addSchema(R,q);return I.validate||this._compileSchemaEnv(I)}compileAsync(R,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:I}=this.opts;return S.call(this,R,q);async function S(ie,O){await E.call(this,ie.$schema);const N=this._addSchema(ie,O);return N.validate||x.call(this,N)}async function E(ie){ie&&!this.getSchema(ie)&&await S.call(this,{$ref:ie},!0)}async function x(ie){try{return this._compileSchemaEnv(ie)}catch(O){if(!(O instanceof o.default))throw O;return J.call(this,O),await Q.call(this,O.missingSchema),x.call(this,ie)}}function J({missingSchema:ie,missingRef:O}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${O} cannot be resolved`)}async function Q(ie){const O=await ce.call(this,ie);this.refs[ie]||await E.call(this,O.$schema),this.refs[ie]||this.addSchema(O,ie,q)}async function ce(ie){const O=this._loading[ie];if(O)return O;try{return await(this._loading[ie]=I(ie))}finally{delete this._loading[ie]}}}addSchema(R,q,I,S=this.opts.validateSchema){if(Array.isArray(R)){for(const x of R)this.addSchema(x,void 0,I,S);return this}let E;if(typeof R=="object"){const{schemaId:x}=this.opts;if(E=R[x],E!==void 0&&typeof E!="string")throw new Error(`schema ${x} must be string`)}return q=(0,c.normalizeId)(q||E),this._checkUnique(q),this.schemas[q]=this._addSchema(R,I,q,S,!0),this}addMetaSchema(R,q,I=this.opts.validateSchema){return this.addSchema(R,q,!0,I),this}validateSchema(R,q){if(typeof R=="boolean")return!0;let I;if(I=R.$schema,I!==void 0&&typeof I!="string")throw new Error("$schema must be a string");if(I=I||this.opts.defaultMeta||this.defaultMeta(),!I)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(I,R);if(!S&&q){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return S}getSchema(R){let q;for(;typeof(q=_.call(this,R))=="string";)R=q;if(q===void 0){const{schemaId:I}=this.opts,S=new a.SchemaEnv({schema:{},schemaId:I});if(q=a.resolveSchema.call(this,S,R),!q)return;this.refs[R]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(R){if(R instanceof RegExp)return this._removeAllSchemas(this.schemas,R),this._removeAllSchemas(this.refs,R),this;switch(typeof R){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=_.call(this,R);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[R],delete this.refs[R],this}case"object":{const q=R;this._cache.delete(q);let I=R[this.opts.schemaId];return I&&(I=(0,c.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(R){for(const q of R)this.addKeyword(q);return this}addKeyword(R,q){let I;if(typeof R=="string")I=R,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=I);else if(typeof R=="object"&&q===void 0){if(q=R,I=q.keyword,Array.isArray(I)&&!I.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K.call(this,I,q),!q)return(0,u.eachItem)(I,E=>W.call(this,E)),this;ge.call(this,q);const S={...q,type:(0,d.getJSONTypes)(q.type),schemaType:(0,d.getJSONTypes)(q.schemaType)};return(0,u.eachItem)(I,S.type.length===0?E=>W.call(this,E,S):E=>S.type.forEach(x=>W.call(this,E,S,x))),this}getKeyword(R){const q=this.RULES.all[R];return typeof q=="object"?q.definition:!!q}removeKeyword(R){const{RULES:q}=this;delete q.keywords[R],delete q.all[R];for(const I of q.rules){const S=I.rules.findIndex(E=>E.keyword===R);S>=0&&I.rules.splice(S,1)}return this}addFormat(R,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[R]=q,this}errorsText(R=this.errors,{separator:q=", ",dataVar:I="data"}={}){return!R||R.length===0?"No errors":R.map(S=>`${I}${S.instancePath} ${S.message}`).reduce((S,E)=>S+q+E)}$dataMetaSchema(R,q){const I=this.RULES.all;R=JSON.parse(JSON.stringify(R));for(const S of q){const E=S.split("/").slice(1);let x=R;for(const J of E)x=x[J];for(const J in I){const Q=I[J];if(typeof Q!="object")continue;const{$data:ce}=Q.definition,ie=x[J];ce&&ie&&(x[J]=de(ie))}}return R}_removeAllSchemas(R,q){for(const I in R){const S=R[I];(!q||q.test(I))&&(typeof S=="string"?delete R[I]:S&&!S.meta&&(this._cache.delete(S.schema),delete R[I]))}}_addSchema(R,q,I,S=this.opts.validateSchema,E=this.opts.addUsedSchema){let x;const{schemaId:J}=this.opts;if(typeof R=="object")x=R[J];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof R!="boolean")throw new Error("schema must be object or boolean")}let Q=this._cache.get(R);if(Q!==void 0)return Q;I=(0,c.normalizeId)(x||I);const ce=c.getSchemaRefs.call(this,R,I);return Q=new a.SchemaEnv({schema:R,schemaId:J,meta:q,baseId:I,localRefs:ce}),this._cache.set(Q.schema,Q),E&&!I.startsWith("#")&&(I&&this._checkUnique(I),this.refs[I]=Q),S&&this.validateSchema(R,!0),Q}_checkUnique(R){if(this.schemas[R]||this.refs[R])throw new Error(`schema with key or id "${R}" already exists`)}_compileSchemaEnv(R){if(R.meta?this._compileMetaSchema(R):a.compileSchema.call(this,R),!R.validate)throw new Error("ajv implementation error");return R.validate}_compileMetaSchema(R){const q=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,R)}finally{this.opts=q}}}$.ValidationError=r.default,$.MissingRefError=o.default,e.default=$;function b(F,R,q,I="error"){for(const S in F){const E=S;E in R&&this.logger[I](`${q}: option ${S}. ${F[E]}`)}}function _(F){return F=(0,c.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const R in F)this.addSchema(F[R],R)}function k(){for(const F in this.opts.formats){const R=this.opts.formats[F];R&&this.addFormat(F,R)}}function P(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const R in F){const q=F[R];q.keyword||(q.keyword=R),this.addKeyword(q)}}function L(){const F={...this.opts};for(const R of w)delete F[R];return F}const T={log(){},warn(){},error(){}};function V(F){if(F===!1)return T;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function K(F,R){const{RULES:q}=this;if((0,u.eachItem)(F,I=>{if(q.keywords[I])throw new Error(`Keyword ${I} is already defined`);if(!z.test(I))throw new Error(`Keyword ${I} has invalid name`)}),!!R&&R.$data&&!("code"in R||"validate"in R))throw new Error('$data keyword must have "code" or "validate" function')}function W(F,R,q){var I;const S=R?.post;if(q&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let x=S?E.post:E.rules.find(({type:Q})=>Q===q);if(x||(x={type:q,rules:[]},E.rules.push(x)),E.keywords[F]=!0,!R)return;const J={keyword:F,definition:{...R,type:(0,d.getJSONTypes)(R.type),schemaType:(0,d.getJSONTypes)(R.schemaType)}};R.before?oe.call(this,x,J,R.before):x.rules.push(J),E.all[F]=J,(I=R.implements)===null||I===void 0||I.forEach(Q=>this.addKeyword(Q))}function oe(F,R,q){const I=F.rules.findIndex(S=>S.keyword===q);I>=0?F.rules.splice(I,0,R):(F.rules.push(R),this.logger.warn(`rule ${q} is not defined`))}function ge(F){let{metaSchema:R}=F;R!==void 0&&(F.$data&&this.opts.$data&&(R=de(R)),F.validateSchema=this.compile(R,!0))}const re={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function de(F){return{anyOf:[F,re]}}}(rr)),rr}var Bt={},Wt={},Jt={},Ns;function Ua(){if(Ns)return Jt;Ns=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Jt.default=e,Jt}var Qe={},Is;function Ka(){if(Is)return Qe;Is=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.callRef=Qe.getValidate=void 0;const e=Jn(),t=qe(),n=ne(),r=Ze(),o=Lr(),s=le(),a={keyword:"$ref",schemaType:"string",code(d){const{gen:u,schema:h,it:p}=d,{baseId:v,schemaEnv:w,validateName:y,opts:f,self:m}=p,{root:l}=w;if((h==="#"||h==="#/")&&v===l.baseId)return $();const g=o.resolveRef.call(m,l,v,h);if(g===void 0)throw new e.default(p.opts.uriResolver,v,h);if(g instanceof o.SchemaEnv)return b(g);return _(g);function $(){if(w===l)return c(d,y,w,w.$async);const C=u.scopeValue("root",{ref:l});return c(d,(0,n._)`${C}.validate`,l,l.$async)}function b(C){const k=i(d,C);c(d,k,C,C.$async)}function _(C){const k=u.scopeValue("schema",f.code.source===!0?{ref:C,code:(0,n.stringify)(C)}:{ref:C}),P=u.name("valid"),L=d.subschema({schema:C,dataTypes:[],schemaPath:n.nil,topSchemaRef:k,errSchemaPath:h},P);d.mergeEvaluated(L),d.ok(P)}}};function i(d,u){const{gen:h}=d;return u.validate?h.scopeValue("validate",{ref:u.validate}):(0,n._)`${h.scopeValue("wrapper",{ref:u})}.validate`}Qe.getValidate=i;function c(d,u,h,p){const{gen:v,it:w}=d,{allErrors:y,schemaEnv:f,opts:m}=w,l=m.passContext?r.default.this:n.nil;p?g():$();function g(){if(!f.$async)throw new Error("async schema referenced by sync schema");const C=v.let("valid");v.try(()=>{v.code((0,n._)`await ${(0,t.callValidateCode)(d,u,l)}`),_(u),y||v.assign(C,!0)},k=>{v.if((0,n._)`!(${k} instanceof ${w.ValidationError})`,()=>v.throw(k)),b(k),y||v.assign(C,!1)}),d.ok(C)}function $(){d.result((0,t.callValidateCode)(d,u,l),()=>_(u),()=>b(u))}function b(C){const k=(0,n._)`${C}.errors`;v.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${k} : ${r.default.vErrors}.concat(${k})`),v.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function _(C){var k;if(!w.opts.unevaluated)return;const P=(k=h?.validate)===null||k===void 0?void 0:k.evaluated;if(w.props!==!0)if(P&&!P.dynamicProps)P.props!==void 0&&(w.props=s.mergeEvaluated.props(v,P.props,w.props));else{const L=v.var("props",(0,n._)`${C}.evaluated.props`);w.props=s.mergeEvaluated.props(v,L,w.props,n.Name)}if(w.items!==!0)if(P&&!P.dynamicItems)P.items!==void 0&&(w.items=s.mergeEvaluated.items(v,P.items,w.items));else{const L=v.var("items",(0,n._)`${C}.evaluated.items`);w.items=s.mergeEvaluated.items(v,L,w.items,n.Name)}}}return Qe.callRef=c,Qe.default=a,Qe}var Ls;function za(){if(Ls)return Wt;Ls=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=Ua(),t=Ka(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Wt.default=n,Wt}var Gt={},Qt={},As;function Ha(){if(As)return Qt;As=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=ne(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:a})=>(0,e.str)`must be ${n[s].okStr} ${a}`,params:({keyword:s,schemaCode:a})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${a}}`},o={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:a,data:i,schemaCode:c}=s;s.fail$data((0,e._)`${i} ${n[a].fail} ${c} || isNaN(${i})`)}};return Qt.default=o,Qt}var Xt={},js;function Ba(){if(js)return Xt;js=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=ne(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:o,data:s,schemaCode:a,it:i}=r,c=i.opts.multipleOfPrecision,d=o.let("res"),u=c?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${c}`:(0,e._)`${d} !== parseInt(${d})`;r.fail$data((0,e._)`(${a} === 0 || (${d} = ${s}/${a}, ${u}))`)}};return Xt.default=n,Xt}var Yt={},Zt={},Ts;function Wa(){if(Ts)return Zt;Ts=1,Object.defineProperty(Zt,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,o=0,s;for(;o<n;)r++,s=t.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=t.charCodeAt(o),(s&64512)===56320&&o++);return r}return Zt.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Zt}var xs;function Ja(){if(xs)return Yt;xs=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=ne(),t=le(),n=Wa(),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:a}){const i=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${a} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:a,data:i,schemaCode:c,it:d}=s,u=a==="maxLength"?e.operators.GT:e.operators.LT,h=d.opts.unicode===!1?(0,e._)`${i}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${i})`;s.fail$data((0,e._)`${h} ${u} ${c}`)}};return Yt.default=o,Yt}var en={},qs;function Ga(){if(qs)return en;qs=1,Object.defineProperty(en,"__esModule",{value:!0});const e=qe(),t=ne(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,t.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,t._)`{pattern: ${o}}`},code(o){const{data:s,$data:a,schema:i,schemaCode:c,it:d}=o,u=d.opts.unicodeRegExp?"u":"",h=a?(0,t._)`(new RegExp(${c}, ${u}))`:(0,e.usePattern)(o,i);o.fail$data((0,t._)`!${h}.test(${s})`)}};return en.default=r,en}var tn={},Ds;function Qa(){if(Ds)return tn;Ds=1,Object.defineProperty(tn,"__esModule",{value:!0});const e=ne(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:a}=r,i=o==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${i} ${a}`)}};return tn.default=n,tn}var nn={},Ms;function Xa(){if(Ms)return nn;Ms=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=qe(),t=ne(),n=le(),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:a,schema:i,schemaCode:c,data:d,$data:u,it:h}=s,{opts:p}=h;if(!u&&i.length===0)return;const v=i.length>=p.loopRequired;if(h.allErrors?w():y(),p.strictRequired){const l=s.parentSchema.properties,{definedProperties:g}=s.it;for(const $ of i)if(l?.[$]===void 0&&!g.has($)){const b=h.schemaEnv.baseId+h.errSchemaPath,_=`required property "${$}" is not defined at "${b}" (strictRequired)`;(0,n.checkStrictMode)(h,_,h.opts.strictRequired)}}function w(){if(v||u)s.block$data(t.nil,f);else for(const l of i)(0,e.checkReportMissingProp)(s,l)}function y(){const l=a.let("missing");if(v||u){const g=a.let("valid",!0);s.block$data(g,()=>m(l,g)),s.ok(g)}else a.if((0,e.checkMissingProp)(s,i,l)),(0,e.reportMissingProp)(s,l),a.else()}function f(){a.forOf("prop",c,l=>{s.setParams({missingProperty:l}),a.if((0,e.noPropertyInData)(a,d,l,p.ownProperties),()=>s.error())})}function m(l,g){s.setParams({missingProperty:l}),a.forOf(l,c,()=>{a.assign(g,(0,e.propertyInData)(a,d,l,p.ownProperties)),a.if((0,t.not)(g),()=>{s.error(),a.break()})},t.nil)}}};return nn.default=o,nn}var rn={},Vs;function Ya(){if(Vs)return rn;Vs=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=ne(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:a}=r,i=o==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${i} ${a}`)}};return rn.default=n,rn}var sn={},on={},Fs;function Ar(){if(Fs)return on;Fs=1,Object.defineProperty(on,"__esModule",{value:!0});const e=Qo();return e.code='require("ajv/dist/runtime/equal").default',on.default=e,on}var Us;function Za(){if(Us)return sn;Us=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=Vn(),t=ne(),n=le(),r=Ar(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:i}})=>(0,t.str)`must NOT have duplicate items (items ## ${i} and ${a} are identical)`,params:({params:{i:a,j:i}})=>(0,t._)`{i: ${a}, j: ${i}}`},code(a){const{gen:i,data:c,$data:d,schema:u,parentSchema:h,schemaCode:p,it:v}=a;if(!d&&!u)return;const w=i.let("valid"),y=h.items?(0,e.getSchemaTypes)(h.items):[];a.block$data(w,f,(0,t._)`${p} === false`),a.ok(w);function f(){const $=i.let("i",(0,t._)`${c}.length`),b=i.let("j");a.setParams({i:$,j:b}),i.assign(w,!0),i.if((0,t._)`${$} > 1`,()=>(m()?l:g)($,b))}function m(){return y.length>0&&!y.some($=>$==="object"||$==="array")}function l($,b){const _=i.name("item"),C=(0,e.checkDataTypes)(y,_,v.opts.strictNumbers,e.DataType.Wrong),k=i.const("indices",(0,t._)`{}`);i.for((0,t._)`;${$}--;`,()=>{i.let(_,(0,t._)`${c}[${$}]`),i.if(C,(0,t._)`continue`),y.length>1&&i.if((0,t._)`typeof ${_} == "string"`,(0,t._)`${_} += "_"`),i.if((0,t._)`typeof ${k}[${_}] == "number"`,()=>{i.assign(b,(0,t._)`${k}[${_}]`),a.error(),i.assign(w,!1).break()}).code((0,t._)`${k}[${_}] = ${$}`)})}function g($,b){const _=(0,n.useFunc)(i,r.default),C=i.name("outer");i.label(C).for((0,t._)`;${$}--;`,()=>i.for((0,t._)`${b} = ${$}; ${b}--;`,()=>i.if((0,t._)`${_}(${c}[${$}], ${c}[${b}])`,()=>{a.error(),i.assign(w,!1).break(C)})))}}};return sn.default=s,sn}var an={},Ks;function el(){if(Ks)return an;Ks=1,Object.defineProperty(an,"__esModule",{value:!0});const e=ne(),t=le(),n=Ar(),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:a,data:i,$data:c,schemaCode:d,schema:u}=s;c||u&&typeof u=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(a,n.default)}(${i}, ${d})`):s.fail((0,e._)`${u} !== ${i}`)}};return an.default=o,an}var ln={},zs;function tl(){if(zs)return ln;zs=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=ne(),t=le(),n=Ar(),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:a,data:i,$data:c,schema:d,schemaCode:u,it:h}=s;if(!c&&d.length===0)throw new Error("enum must have non-empty array");const p=d.length>=h.opts.loopEnum;let v;const w=()=>v??(v=(0,t.useFunc)(a,n.default));let y;if(p||c)y=a.let("valid"),s.block$data(y,f);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const l=a.const("vSchema",u);y=(0,e.or)(...d.map((g,$)=>m(l,$)))}s.pass(y);function f(){a.assign(y,!1),a.forOf("v",u,l=>a.if((0,e._)`${w()}(${i}, ${l})`,()=>a.assign(y,!0).break()))}function m(l,g){const $=d[g];return typeof $=="object"&&$!==null?(0,e._)`${w()}(${i}, ${l}[${g}])`:(0,e._)`${i} === ${$}`}}};return ln.default=o,ln}var Hs;function nl(){if(Hs)return Gt;Hs=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=Ha(),t=Ba(),n=Ja(),r=Ga(),o=Qa(),s=Xa(),a=Ya(),i=Za(),c=el(),d=tl(),u=[e.default,t.default,n.default,r.default,o.default,s.default,a.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,d.default];return Gt.default=u,Gt}var cn={},ft={},Bs;function Xo(){if(Bs)return ft;Bs=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.validateAdditionalItems=void 0;const e=ne(),t=le(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:a,it:i}=s,{items:c}=a;if(!Array.isArray(c)){(0,t.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(s,c)}};function o(s,a){const{gen:i,schema:c,data:d,keyword:u,it:h}=s;h.items=!0;const p=i.const("len",(0,e._)`${d}.length`);if(c===!1)s.setParams({len:a.length}),s.pass((0,e._)`${p} <= ${a.length}`);else if(typeof c=="object"&&!(0,t.alwaysValidSchema)(h,c)){const w=i.var("valid",(0,e._)`${p} <= ${a.length}`);i.if((0,e.not)(w),()=>v(w)),s.ok(w)}function v(w){i.forRange("i",a.length,p,y=>{s.subschema({keyword:u,dataProp:y,dataPropType:t.Type.Num},w),h.allErrors||i.if((0,e.not)(w),()=>i.break())})}}return ft.validateAdditionalItems=o,ft.default=r,ft}var un={},ht={},Ws;function Yo(){if(Ws)return ht;Ws=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.validateTuple=void 0;const e=ne(),t=le(),n=qe(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:a,it:i}=s;if(Array.isArray(a))return o(s,"additionalItems",a);i.items=!0,!(0,t.alwaysValidSchema)(i,a)&&s.ok((0,n.validateArray)(s))}};function o(s,a,i=s.schema){const{gen:c,parentSchema:d,data:u,keyword:h,it:p}=s;y(d),p.opts.unevaluated&&i.length&&p.items!==!0&&(p.items=t.mergeEvaluated.items(c,i.length,p.items));const v=c.name("valid"),w=c.const("len",(0,e._)`${u}.length`);i.forEach((f,m)=>{(0,t.alwaysValidSchema)(p,f)||(c.if((0,e._)`${w} > ${m}`,()=>s.subschema({keyword:h,schemaProp:m,dataProp:m},v)),s.ok(v))});function y(f){const{opts:m,errSchemaPath:l}=p,g=i.length,$=g===f.minItems&&(g===f.maxItems||f[a]===!1);if(m.strictTuples&&!$){const b=`"${h}" is ${g}-tuple, but minItems or maxItems/${a} are not specified or different at path "${l}"`;(0,t.checkStrictMode)(p,b,m.strictTuples)}}}return ht.validateTuple=o,ht.default=r,ht}var Js;function rl(){if(Js)return un;Js=1,Object.defineProperty(un,"__esModule",{value:!0});const e=Yo(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return un.default=t,un}var dn={},Gs;function sl(){if(Gs)return dn;Gs=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=ne(),t=le(),n=qe(),r=Xo(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{schema:i,parentSchema:c,it:d}=a,{prefixItems:u}=c;d.items=!0,!(0,t.alwaysValidSchema)(d,i)&&(u?(0,r.validateAdditionalItems)(a,u):a.ok((0,n.validateArray)(a)))}};return dn.default=s,dn}var fn={},Qs;function ol(){if(Qs)return fn;Qs=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=ne(),t=le(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:s}})=>s===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${s} valid item(s)`,params:({params:{min:o,max:s}})=>s===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${s}}`},code(o){const{gen:s,schema:a,parentSchema:i,data:c,it:d}=o;let u,h;const{minContains:p,maxContains:v}=i;d.opts.next?(u=p===void 0?1:p,h=v):u=1;const w=s.const("len",(0,e._)`${c}.length`);if(o.setParams({min:u,max:h}),h===void 0&&u===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(h!==void 0&&u>h){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,t.alwaysValidSchema)(d,a)){let g=(0,e._)`${w} >= ${u}`;h!==void 0&&(g=(0,e._)`${g} && ${w} <= ${h}`),o.pass(g);return}d.items=!0;const y=s.name("valid");h===void 0&&u===1?m(y,()=>s.if(y,()=>s.break())):u===0?(s.let(y,!0),h!==void 0&&s.if((0,e._)`${c}.length > 0`,f)):(s.let(y,!1),f()),o.result(y,()=>o.reset());function f(){const g=s.name("_valid"),$=s.let("count",0);m(g,()=>s.if(g,()=>l($)))}function m(g,$){s.forRange("i",0,w,b=>{o.subschema({keyword:"contains",dataProp:b,dataPropType:t.Type.Num,compositeRule:!0},g),$()})}function l(g){s.code((0,e._)`${g}++`),h===void 0?s.if((0,e._)`${g} >= ${u}`,()=>s.assign(y,!0).break()):(s.if((0,e._)`${g} > ${h}`,()=>s.assign(y,!1).break()),u===1?s.assign(y,!0):s.if((0,e._)`${g} >= ${u}`,()=>s.assign(y,!0)))}}};return fn.default=r,fn}var hr={},Xs;function il(){return Xs||(Xs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ne(),n=le(),r=qe();e.error={message:({params:{property:c,depsCount:d,deps:u}})=>{const h=d===1?"property":"properties";return(0,t.str)`must have ${h} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:u,missingProperty:h}})=>(0,t._)`{property: ${c},
    missingProperty: ${h},
    depsCount: ${d},
    deps: ${u}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,u]=s(c);a(c,d),i(c,u)}};function s({schema:c}){const d={},u={};for(const h in c){if(h==="__proto__")continue;const p=Array.isArray(c[h])?d:u;p[h]=c[h]}return[d,u]}function a(c,d=c.schema){const{gen:u,data:h,it:p}=c;if(Object.keys(d).length===0)return;const v=u.let("missing");for(const w in d){const y=d[w];if(y.length===0)continue;const f=(0,r.propertyInData)(u,h,w,p.opts.ownProperties);c.setParams({property:w,depsCount:y.length,deps:y.join(", ")}),p.allErrors?u.if(f,()=>{for(const m of y)(0,r.checkReportMissingProp)(c,m)}):(u.if((0,t._)`${f} && (${(0,r.checkMissingProp)(c,y,v)})`),(0,r.reportMissingProp)(c,v),u.else())}}e.validatePropertyDeps=a;function i(c,d=c.schema){const{gen:u,data:h,keyword:p,it:v}=c,w=u.name("valid");for(const y in d)(0,n.alwaysValidSchema)(v,d[y])||(u.if((0,r.propertyInData)(u,h,y,v.opts.ownProperties),()=>{const f=c.subschema({keyword:p,schemaProp:y},w);c.mergeValidEvaluated(f,w)},()=>u.var(w,!0)),c.ok(w))}e.validateSchemaDeps=i,e.default=o}(hr)),hr}var hn={},Ys;function al(){if(Ys)return hn;Ys=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=ne(),t=le(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:s,schema:a,data:i,it:c}=o;if((0,t.alwaysValidSchema)(c,a))return;const d=s.name("valid");s.forIn("key",i,u=>{o.setParams({propertyName:u}),o.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},d),s.if((0,e.not)(d),()=>{o.error(!0),c.allErrors||s.break()})}),o.ok(d)}};return hn.default=r,hn}var mn={},Zs;function Zo(){if(Zs)return mn;Zs=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=qe(),t=ne(),n=Ze(),r=le(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,t._)`{additionalProperty: ${a.additionalProperty}}`},code(a){const{gen:i,schema:c,parentSchema:d,data:u,errsCount:h,it:p}=a;if(!h)throw new Error("ajv implementation error");const{allErrors:v,opts:w}=p;if(p.props=!0,w.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(p,c))return;const y=(0,e.allSchemaProperties)(d.properties),f=(0,e.allSchemaProperties)(d.patternProperties);m(),a.ok((0,t._)`${h} === ${n.default.errors}`);function m(){i.forIn("key",u,_=>{!y.length&&!f.length?$(_):i.if(l(_),()=>$(_))})}function l(_){let C;if(y.length>8){const k=(0,r.schemaRefOrVal)(p,d.properties,"properties");C=(0,e.isOwnProperty)(i,k,_)}else y.length?C=(0,t.or)(...y.map(k=>(0,t._)`${_} === ${k}`)):C=t.nil;return f.length&&(C=(0,t.or)(C,...f.map(k=>(0,t._)`${(0,e.usePattern)(a,k)}.test(${_})`))),(0,t.not)(C)}function g(_){i.code((0,t._)`delete ${u}[${_}]`)}function $(_){if(w.removeAdditional==="all"||w.removeAdditional&&c===!1){g(_);return}if(c===!1){a.setParams({additionalProperty:_}),a.error(),v||i.break();return}if(typeof c=="object"&&!(0,r.alwaysValidSchema)(p,c)){const C=i.name("valid");w.removeAdditional==="failing"?(b(_,C,!1),i.if((0,t.not)(C),()=>{a.reset(),g(_)})):(b(_,C),v||i.if((0,t.not)(C),()=>i.break()))}}function b(_,C,k){const P={keyword:"additionalProperties",dataProp:_,dataPropType:r.Type.Str};k===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(P,C)}}};return mn.default=s,mn}var gn={},eo;function ll(){if(eo)return gn;eo=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=Wn(),t=qe(),n=le(),r=Zo(),o={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:a,schema:i,parentSchema:c,data:d,it:u}=s;u.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(u,r.default,"additionalProperties"));const h=(0,t.allSchemaProperties)(i);for(const f of h)u.definedProperties.add(f);u.opts.unevaluated&&h.length&&u.props!==!0&&(u.props=n.mergeEvaluated.props(a,(0,n.toHash)(h),u.props));const p=h.filter(f=>!(0,n.alwaysValidSchema)(u,i[f]));if(p.length===0)return;const v=a.name("valid");for(const f of p)w(f)?y(f):(a.if((0,t.propertyInData)(a,d,f,u.opts.ownProperties)),y(f),u.allErrors||a.else().var(v,!0),a.endIf()),s.it.definedProperties.add(f),s.ok(v);function w(f){return u.opts.useDefaults&&!u.compositeRule&&i[f].default!==void 0}function y(f){s.subschema({keyword:"properties",schemaProp:f,dataProp:f},v)}}};return gn.default=o,gn}var pn={},to;function cl(){if(to)return pn;to=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=qe(),t=ne(),n=le(),r=le(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:a,schema:i,data:c,parentSchema:d,it:u}=s,{opts:h}=u,p=(0,e.allSchemaProperties)(i),v=p.filter($=>(0,n.alwaysValidSchema)(u,i[$]));if(p.length===0||v.length===p.length&&(!u.opts.unevaluated||u.props===!0))return;const w=h.strictSchema&&!h.allowMatchingProperties&&d.properties,y=a.name("valid");u.props!==!0&&!(u.props instanceof t.Name)&&(u.props=(0,r.evaluatedPropsToName)(a,u.props));const{props:f}=u;m();function m(){for(const $ of p)w&&l($),u.allErrors?g($):(a.var(y,!0),g($),a.if(y))}function l($){for(const b in w)new RegExp($).test(b)&&(0,n.checkStrictMode)(u,`property ${b} matches pattern ${$} (use allowMatchingProperties)`)}function g($){a.forIn("key",c,b=>{a.if((0,t._)`${(0,e.usePattern)(s,$)}.test(${b})`,()=>{const _=v.includes($);_||s.subschema({keyword:"patternProperties",schemaProp:$,dataProp:b,dataPropType:r.Type.Str},y),u.opts.unevaluated&&f!==!0?a.assign((0,t._)`${f}[${b}]`,!0):!_&&!u.allErrors&&a.if((0,t.not)(y),()=>a.break())})})}}};return pn.default=o,pn}var yn={},no;function ul(){if(no)return yn;no=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=le(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:o,it:s}=n;if((0,e.alwaysValidSchema)(s,o)){n.fail();return}const a=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),n.failResult(a,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return yn.default=t,yn}var vn={},ro;function dl(){if(ro)return vn;ro=1,Object.defineProperty(vn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qe().validateUnion,error:{message:"must match a schema in anyOf"}};return vn.default=t,vn}var $n={},so;function fl(){if(so)return $n;so=1,Object.defineProperty($n,"__esModule",{value:!0});const e=ne(),t=le(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:s,schema:a,parentSchema:i,it:c}=o;if(!Array.isArray(a))throw new Error("ajv implementation error");if(c.opts.discriminator&&i.discriminator)return;const d=a,u=s.let("valid",!1),h=s.let("passing",null),p=s.name("_valid");o.setParams({passing:h}),s.block(v),o.result(u,()=>o.reset(),()=>o.error(!0));function v(){d.forEach((w,y)=>{let f;(0,t.alwaysValidSchema)(c,w)?s.var(p,!0):f=o.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},p),y>0&&s.if((0,e._)`${p} && ${u}`).assign(u,!1).assign(h,(0,e._)`[${h}, ${y}]`).else(),s.if(p,()=>{s.assign(u,!0),s.assign(h,y),f&&o.mergeEvaluated(f,e.Name)})})}}};return $n.default=r,$n}var _n={},oo;function hl(){if(oo)return _n;oo=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=le(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:o,it:s}=n;if(!Array.isArray(o))throw new Error("ajv implementation error");const a=r.name("valid");o.forEach((i,c)=>{if((0,e.alwaysValidSchema)(s,i))return;const d=n.subschema({keyword:"allOf",schemaProp:c},a);n.ok(a),n.mergeEvaluated(d)})}};return _n.default=t,_n}var wn={},io;function ml(){if(io)return wn;io=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=ne(),t=le(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:a,parentSchema:i,it:c}=s;i.then===void 0&&i.else===void 0&&(0,t.checkStrictMode)(c,'"if" without "then" and "else" is ignored');const d=o(c,"then"),u=o(c,"else");if(!d&&!u)return;const h=a.let("valid",!0),p=a.name("_valid");if(v(),s.reset(),d&&u){const y=a.let("ifClause");s.setParams({ifClause:y}),a.if(p,w("then",y),w("else",y))}else d?a.if(p,w("then")):a.if((0,e.not)(p),w("else"));s.pass(h,()=>s.error(!0));function v(){const y=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},p);s.mergeEvaluated(y)}function w(y,f){return()=>{const m=s.subschema({keyword:y},p);a.assign(h,p),s.mergeValidEvaluated(m,h),f?a.assign(f,(0,e._)`${y}`):s.setParams({ifClause:y})}}}};function o(s,a){const i=s.schema[a];return i!==void 0&&!(0,t.alwaysValidSchema)(s,i)}return wn.default=r,wn}var bn={},ao;function gl(){if(ao)return bn;ao=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=le(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:o}){r.if===void 0&&(0,e.checkStrictMode)(o,`"${n}" without "if" is ignored`)}};return bn.default=t,bn}var lo;function pl(){if(lo)return cn;lo=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=Xo(),t=rl(),n=Yo(),r=sl(),o=ol(),s=il(),a=al(),i=Zo(),c=ll(),d=cl(),u=ul(),h=dl(),p=fl(),v=hl(),w=ml(),y=gl();function f(m=!1){const l=[u.default,h.default,p.default,v.default,w.default,y.default,a.default,i.default,s.default,c.default,d.default];return m?l.push(t.default,r.default):l.push(e.default,n.default),l.push(o.default),l}return cn.default=f,cn}var Sn={},Cn={},co;function yl(){if(co)return Cn;co=1,Object.defineProperty(Cn,"__esModule",{value:!0});const e=ne(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,o){const{gen:s,data:a,$data:i,schema:c,schemaCode:d,it:u}=r,{opts:h,errSchemaPath:p,schemaEnv:v,self:w}=u;if(!h.validateFormats)return;i?y():f();function y(){const m=s.scopeValue("formats",{ref:w.formats,code:h.code.formats}),l=s.const("fDef",(0,e._)`${m}[${d}]`),g=s.let("fType"),$=s.let("format");s.if((0,e._)`typeof ${l} == "object" && !(${l} instanceof RegExp)`,()=>s.assign(g,(0,e._)`${l}.type || "string"`).assign($,(0,e._)`${l}.validate`),()=>s.assign(g,(0,e._)`"string"`).assign($,l)),r.fail$data((0,e.or)(b(),_()));function b(){return h.strictSchema===!1?e.nil:(0,e._)`${d} && !${$}`}function _(){const C=v.$async?(0,e._)`(${l}.async ? await ${$}(${a}) : ${$}(${a}))`:(0,e._)`${$}(${a})`,k=(0,e._)`(typeof ${$} == "function" ? ${C} : ${$}.test(${a}))`;return(0,e._)`${$} && ${$} !== true && ${g} === ${o} && !${k}`}}function f(){const m=w.formats[c];if(!m){b();return}if(m===!0)return;const[l,g,$]=_(m);l===o&&r.pass(C());function b(){if(h.strictSchema===!1){w.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${c}" ignored in schema at path "${p}"`}}function _(k){const P=k instanceof RegExp?(0,e.regexpCode)(k):h.code.formats?(0,e._)`${h.code.formats}${(0,e.getProperty)(c)}`:void 0,L=s.scopeValue("formats",{key:c,ref:k,code:P});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,e._)`${L}.validate`]:["string",k,L]}function C(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!v.$async)throw new Error("async format in sync schema");return(0,e._)`await ${$}(${a})`}return typeof g=="function"?(0,e._)`${$}(${a})`:(0,e._)`${$}.test(${a})`}}}};return Cn.default=n,Cn}var uo;function vl(){if(uo)return Sn;uo=1,Object.defineProperty(Sn,"__esModule",{value:!0});const t=[yl().default];return Sn.default=t,Sn}var rt={},fo;function $l(){return fo||(fo=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.contentVocabulary=rt.metadataVocabulary=void 0,rt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],rt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),rt}var ho;function _l(){if(ho)return Bt;ho=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=za(),t=nl(),n=pl(),r=vl(),o=$l(),s=[e.default,t.default,(0,n.default)(),r.default,o.metadataVocabulary,o.contentVocabulary];return Bt.default=s,Bt}var En={},Et={},mo;function wl(){if(mo)return Et;mo=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(Et.DiscrError=e={})),Et}var go;function bl(){if(go)return En;go=1,Object.defineProperty(En,"__esModule",{value:!0});const e=ne(),t=wl(),n=Lr(),r=Jn(),o=le(),a={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:i,tagName:c}})=>i===t.DiscrError.Tag?`tag "${c}" must be string`:`value of tag "${c}" must be in oneOf`,params:({params:{discrError:i,tag:c,tagName:d}})=>(0,e._)`{error: ${i}, tag: ${d}, tagValue: ${c}}`},code(i){const{gen:c,data:d,schema:u,parentSchema:h,it:p}=i,{oneOf:v}=h;if(!p.opts.discriminator)throw new Error("discriminator: requires discriminator option");const w=u.propertyName;if(typeof w!="string")throw new Error("discriminator: requires propertyName");if(u.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const y=c.let("valid",!1),f=c.const("tag",(0,e._)`${d}${(0,e.getProperty)(w)}`);c.if((0,e._)`typeof ${f} == "string"`,()=>m(),()=>i.error(!1,{discrError:t.DiscrError.Tag,tag:f,tagName:w})),i.ok(y);function m(){const $=g();c.if(!1);for(const b in $)c.elseIf((0,e._)`${f} === ${b}`),c.assign(y,l($[b]));c.else(),i.error(!1,{discrError:t.DiscrError.Mapping,tag:f,tagName:w}),c.endIf()}function l($){const b=c.name("valid"),_=i.subschema({keyword:"oneOf",schemaProp:$},b);return i.mergeEvaluated(_,e.Name),b}function g(){var $;const b={},_=k(h);let C=!0;for(let T=0;T<v.length;T++){let V=v[T];if(V?.$ref&&!(0,o.schemaHasRulesButRef)(V,p.self.RULES)){const K=V.$ref;if(V=n.resolveRef.call(p.self,p.schemaEnv.root,p.baseId,K),V instanceof n.SchemaEnv&&(V=V.schema),V===void 0)throw new r.default(p.opts.uriResolver,p.baseId,K)}const z=($=V?.properties)===null||$===void 0?void 0:$[w];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${w}"`);C=C&&(_||k(V)),P(z,T)}if(!C)throw new Error(`discriminator: "${w}" must be required`);return b;function k({required:T}){return Array.isArray(T)&&T.includes(w)}function P(T,V){if(T.const)L(T.const,V);else if(T.enum)for(const z of T.enum)L(z,V);else throw new Error(`discriminator: "properties/${w}" must have "const" or "enum"`)}function L(T,V){if(typeof T!="string"||T in b)throw new Error(`discriminator: "${w}" values must be unique strings`);b[T]=V}}}};return En.default=a,En}const Sl="http://json-schema.org/draft-07/schema#",Cl="http://json-schema.org/draft-07/schema#",El="Core schema meta-schema",Pl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},kl=["object","boolean"],Ol={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Rl={$schema:Sl,$id:Cl,title:El,definitions:Pl,type:kl,properties:Ol,default:!0};var po;function Nl(){return po||(po=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Fa(),r=_l(),o=bl(),s=Rl,a=["/properties"],i="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(w=>this.addVocabulary(w)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const w=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(w,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=Wn();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=ne();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=Ir();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=Jn();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})}(Ft,Ft.exports)),Ft.exports}var Il=Nl();const Ll=Sa(Il),Al="http://json-schema.org/draft-07/schema#",jl="object",Tl={title:{type:"string",description:"The title of the course."},description:{type:"string",description:"A short description of the course."},language:{type:"string",description:"The primary language of the course."},targetLanguage:{type:"string",description:"The language being taught in the course."},author:{type:"string",description:"The name of the course creator."},version:{type:"string",description:"Versioning for tracking updates to the course."},createdAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp when the course was created."},updatedAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp of the last course update."},tags:{type:"array",items:{type:"string"},description:"Keywords related to the course for searching and categorization."},lessons:{type:"array",items:{type:"object",properties:{title:{type:"string"},description:{type:"string"},cards:{type:"array",items:{oneOf:[{type:"object",properties:{class:{type:"string",enum:["vocab"]},qlang:{type:"string",enum:["default","target"]},vocab:{type:"object",additionalProperties:{type:"string"}}},required:["class","qlang","vocab"]},{type:"object",properties:{class:{type:"string",enum:["dynamic-vocab"]},qlang:{type:"string",enum:["default","target"]}},required:["class","qlang"]},{type:"object",properties:{class:{type:"string",enum:["multiple-choice"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answers:{type:"array",items:{type:"string"}},answer:{type:"string"}},required:["class","qlang","question","answers","answer"]},{type:"object",properties:{class:{type:"string",enum:["writing"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["writing-blocks"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"},options:{type:"array",items:{type:"string"}}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["blanks"]},qlang:{type:"string",enum:["default","target"]},alang:{type:"string",enum:["default","target"]},question:{type:"string"},words:{type:"array",items:{type:"object",minProperties:1,maxProperties:1,additionalProperties:{type:"boolean"}}}},required:["class","qlang","question","words"]}]}}},required:["title","cards"]}}},xl={$schema:Al,type:jl,properties:Tl};var ql=M('<div class=modal-bg><dialog class=confirm-dialog><h3></h3><footer><button class="cancel-button utf8-icon-close"></button><button class="next-button utf8-icon-tick">');const ei=jt(),Dl=e=>{const[t,n]=H(!1),[r,o]=H(()=>{}),[s,a]=H(""),i=(u,h)=>{a(u),o(()=>h),n(!0)},c=()=>{r()(),n(!1)},d=()=>{n(!1)};return A(ei.Provider,{value:{showConfirm:i},get children(){return[B(()=>e.children),A(ue,{get when(){return t()},get children(){var u=ql(),h=u.firstChild,p=h.firstChild,v=p.nextSibling,w=v.firstChild,y=w.nextSibling;return j(p,s),w.$$click=d,y.$$click=c,Y(f=>{var m=t()?"flex":"none",l=t();return m!==f.e&&((f.e=m)!=null?u.style.setProperty("display",m):u.style.removeProperty("display")),l!==f.t&&(h.open=f.t=l),f},{e:void 0,t:void 0}),u}})]}})},Gn=()=>{const e=Tt(ei);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e};ae(["click"]);function Ml(){const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}function ti(){document.exitFullscreen&&document.exitFullscreen()}const Fn=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},ni=jt(void 0),Vl=e=>A(ni.Provider,{get value(){return{config:e.config,isLoading:!1}},get children(){return e.children}}),_t=()=>{const e=Tt(ni);if(!e)throw new Error("useConfigContext must be used within ConfigProvider");return e},Ue=e=>{const{config:t}=_t();return e.alang&&e.alang===e.qlang?{q:e.qlang,a:e.alang}:{q:e.qlang==="default"?t.defaultLanguage:t.targetLanguage,a:e.alang??(e.qlang==="default"?t.targetLanguage:t.defaultLanguage)}};var Fl=M("<button id=action-button aria-label=action-button>");const qt=e=>{const{t}=_e(),[n,r]=H(!1);me(()=>{e.isCorrect===null&&r(!1)});const o=()=>{n()?(e.onComplete(),r(!1)):(e.onCheckAnswer(),r(!0))},s=a=>{e.isCorrect!==null&&(a.key==="Enter"||a.key===" "||a.key==="Spacebar")&&o()};return me(()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)})),(()=>{var a=Fl();return a.$$click=o,j(a,(()=>{var i=B(()=>e.isCorrect===null);return()=>i()?t("check"):B(()=>e.isCorrect===!0)()?t("correct_next"):t("incorrect_next")})()),Y(i=>{var c=e.isCorrect===null?"next-button":e.isCorrect===!0?"correct-next-button":"incorrect-next-button",d=!e.isInputPresent;return c!==i.e&&Ne(a,i.e=c),d!==i.t&&(a.disabled=i.t=d),i},{e:void 0,t:void 0}),a})()};ae(["click"]);var Ul=M('<section class="card multiple-choice"><h3 class=question></h3><div class=options>'),Kl=M("<h4>"),zl=M("<button>");const Hl={class:"multiple-choice",question:"A Question",qlang:"default",answers:["An answer","Another answer"],answer:"An answer"},Bl=e=>{const{t}=_e(),[n,r]=H(Ue(e.card)),[o,s]=H(null),[a,i]=H(!1),[c,d]=H(null),[u,h]=H(Fn(e.card.answers)),[p,v]=H(!1);me(()=>{h(Fn(e.card.answers)),r(Ue(e.card)),i(!1),s(null),d(null),v(!1)});const w=f=>{p()||s(f)},y=()=>{a()?(s(null),d(null),i(!1),v(!1)):(v(!0),o()===e.card.answer?(d(!0),e.onCorrect()):(d(!1),e.onIncorrect()),i(!0))};return[(()=>{var f=Ul(),m=f.firstChild,l=m.nextSibling;return j(f,(()=>{var g=B(()=>n().q!==n().q);return()=>g()&&(()=>{var $=Kl();return j($,()=>t("in_lang_how_do_you_say",{lang:t(n().a)})),Y(()=>te($,"lang",n().q)),$})()})(),m),j(m,()=>e.card.question),j(l,A(it,{get each(){return u()},children:g=>(()=>{var $=zl();return $.$$click=()=>w(g),j($,g),Y(b=>{var _=n().a,C=`multiple-choice-button ${o()===g?"selected":""} ${a()&&o()===g?c()?"correct":"incorrect":""}`,k=p()?!0:void 0;return _!==b.e&&te($,"lang",b.e=_),C!==b.t&&Ne($,b.t=C),k!==b.a&&($.disabled=b.a=k),b},{e:void 0,t:void 0,a:void 0}),$})()})),Y(()=>te(m,"lang",n().q)),f})(),A(qt,{get isCorrect(){return c()},get isInputPresent(){return o()!==null},onCheckAnswer:y,get onComplete(){return e.onComplete}})]};ae(["click"]);var Wl=M('<section class="vocab-match card"><h3></h3><table><tbody>'),Jl=M("<footer class=vocab-match-footer>"),Gl=M("<tr><td><button></button></td><td><button>");const Ql={class:"vocab",qlang:"default",vocab:{word:"ord"}},ri=e=>{const{t}=_e(),[n,r]=H(Ue(e.card)),[o,s]=H([]),[a,i]=H([]),[c,d]=H(!1),[u,h]=H(null),[p,v]=H(null),{config:w}=_t();me(()=>{r(Ue(e.card));const l=Object.values(e.card.vocab);s(Fn(l)),i(Object.keys(e.card.vocab).map((g,$)=>{const b=e.card.vocab[g];return{leftWord:g,rightWord:b,shuffledRightWord:o()[$],isLeftMatched:!1,isRightMatched:!1,isLeftDisabled:!1,isRightDisabled:!1,shakeIt:!1,shakeRight:!1}}))});const y=l=>{h(g=>g===l?null:l)},f=l=>{v(g=>g===l?null:l)},m=()=>{e.onCorrect(),e.onComplete()};return me(()=>{if(!u()||!p())return;const l=u(),g=p();e.card.vocab[l]===g?(i(b=>b.map(_=>{const C=_.leftWord===l&&_.rightWord===g,k=_.shuffledRightWord===g;return C||k?{..._,isLeftMatched:C?!0:_.isLeftMatched,isRightMatched:k?!0:_.isRightMatched,isLeftDisabled:C?!0:_.isLeftDisabled,isRightDisabled:k?!0:_.isRightDisabled}:_})),h(null),v(null)):(i(b=>b.map(_=>_.leftWord===l||_.shuffledRightWord===g?{..._,shakeIt:_.leftWord===l,shakeRight:_.shuffledRightWord===g}:_)),setTimeout(()=>{i(b=>b.map(_=>_.shakeIt||_.shakeRight?{..._,shakeIt:!1,shakeRight:!1}:_))},w.animationShakeMs),h(null),v(null))}),me(()=>{a().every(l=>l.isLeftMatched&&l.isRightMatched)&&!c()&&d(!0)}),[(()=>{var l=Wl(),g=l.firstChild,$=g.nextSibling,b=$.firstChild;return j(g,()=>e.card.question||t("match_the_words")),j(b,A(it,{get each(){return a()},children:_=>(()=>{var C=Gl(),k=C.firstChild,P=k.firstChild,L=k.nextSibling,T=L.firstChild;return P.$$click=()=>y(_.leftWord),j(P,()=>_.leftWord),T.$$click=()=>f(_.shuffledRightWord),j(T,()=>_.shuffledRightWord),Y(V=>{var z=n().q,K=`vocab-match left-word ${_.isLeftMatched?"correct":""} ${u()===_.leftWord?"selected":""} ${_.shakeIt?"shake":""}`,W=_.isLeftDisabled,oe=n().a,ge=`vocab-match right-word ${_.isRightMatched?"correct":""} ${p()===_.shuffledRightWord?"selected":""} ${_.shakeRight?"shake":""}`,re=_.isRightDisabled;return z!==V.e&&te(P,"lang",V.e=z),K!==V.t&&Ne(P,V.t=K),W!==V.a&&(P.disabled=V.a=W),oe!==V.o&&te(T,"lang",V.o=oe),ge!==V.i&&Ne(T,V.i=ge),re!==V.n&&(T.disabled=V.n=re),V},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),C})()})),Y(()=>te(g,"lang",n().q)),l})(),A(ue,{get when(){return c()},get children(){var l=Jl();return j(l,A(qt,{get isCorrect(){return c()===!1?null:!0},get isInputPresent(){return c()},onCheckAnswer:m,onComplete:m})),l}})]};ae(["click"]);var Xl=M("<span>__"),Yl=M("<span class=provided-word>"),Zl=M("<span class=blank-correct>"),ec=M('<section class="card blanks-card"><h4></h4><h3 class=question></h3><div class=word-options>'),tc=M("<button>");const nc={class:"blanks",question:"Question",qlang:"default",words:[{answer:!0,other:!1}]},rc=e=>{const{t}=_e(),[n,r]=H(Ue(e.card)),[o,s]=H([]),[a,i]=H([]),[c,d]=H(null),[u,h]=H([]),[p,v]=H(null);me(()=>{s(Fn(e.card.words.map(m=>Object.keys(m)[0]))),r(Ue(e.card));const f=e.card.question.split(/[\s\b]/).reduce((m,l)=>(/^_{2,}/.test(l)?m.push((()=>{var g=Xl();return Y(()=>Ne(g,u().includes(l)?"blank-correct":"blank")),g})()):m.push((()=>{var g=Yl();return j(g,l),g})()),m),[]);h(f)});const w=f=>{const m=u().findIndex(g=>g instanceof HTMLElement&&g.classList.contains("blank"));if(m===-1)return;if(e.card.words.find(g=>g[f])){const g=[...u()];g[m]=(()=>{var $=Zl();return j($,f),$})(),h(g),i([...a(),f]),e.onCorrect()}else v(f),setTimeout(()=>v(null),1e3),e.onIncorrect()};me(()=>{const f=e.card.words.filter(m=>Object.values(m)[0]).map(m=>Object.keys(m)[0]);a().length===f.length&&a().every((m,l)=>m===f[l])&&d(!0)});const y=()=>{c()&&e.onComplete()};return[(()=>{var f=ec(),m=f.firstChild,l=m.nextSibling,g=l.nextSibling;return j(m,()=>t("fill_in_the_blanks")),j(l,u),j(g,()=>o().map($=>{const b=a().includes($),_=e.card.words.some(P=>Object.keys(P)[0]===$&&Object.values(P)[0]),C=p()===$?"shake":"",k="word-option "+(b?_?"correct":"incorrect":"")+C;return(()=>{var P=tc();return P.$$click=()=>w($),P.disabled=b,Ne(P,k),j(P,$),Y(()=>te(P,"lang",n().a)),P})()})),Y(()=>te(l,"lang",n().q)),f})(),A(qt,{get isCorrect(){return c()},get isInputPresent(){return!!c()},onCheckAnswer:y,get onComplete(){return e.onComplete}})]};ae(["click"]);var sc=M("<div class=letter-buttons>"),oc=M("<button>");const ic=3,mr={ang:[{symbol:"",name:"Ash"},{symbol:"",name:"o-slash"},{symbol:"",name:"Thorn"},{symbol:"",name:"Eth"},{symbol:"",name:"Yogh"},{symbol:"",name:"o-e"},{symbol:"",name:"long-s"},{symbol:"",name:"wynn"},{symbol:"",name:"long-a"},{symbol:"",name:"long-e"},{symbol:"",name:"long-i"},{symbol:"",name:"long-o"},{symbol:"",name:"long-u"},{symbol:"",name:"long-y"}]},ac=e=>{if(!mr[e.lang])return console.warn(`No buttons exist for the supplied language, "${e.lang}".`),"";if(e.text.length===0)return"";let t=mr[e.lang].filter(n=>e.text.includes(n.symbol));if(t.length<3){const n=mr[e.lang].filter(r=>!t.some(o=>o.symbol===r.symbol));t=[...t,...n.slice(0,ic-t.length)]}return(()=>{var n=sc();return j(n,A(it,{each:t,children:r=>(()=>{var o=oc();return o.$$click=()=>e.onSelect(r.symbol),j(o,()=>r.symbol),Y(s=>{var a=r.name,i=r.name;return a!==s.e&&te(o,"aria-label",s.e=a),i!==s.t&&te(o,"title",s.t=i),s},{e:void 0,t:void 0}),o})()})),n})()};ae(["click"]);var lc=M('<section class="card writing-card"><h3 class=question></h3><div class=input><textarea id=writing-input class=answer autofocus>'),cc=M("<h4>");const uc={class:"writing",qlang:"default",question:"Question",answer:"Answer"},yo=e=>e.trim().toLowerCase().replace(/\W+/g,"").replace(/\s+/g," "),dc=e=>{const{t}=_e(),[n,r]=H(Ue(e.card)),[o,s]=H(""),[a,i]=H(null);let c=null;const d=B(()=>yo(e.card.answer));me(()=>{const w=Ue(e.card);r(w)});const u=w=>{i(null),s(w)},h=w=>{if(!c)return;const y=c,f=y.selectionStart??o().length,m=y.selectionEnd??o().length,l=o().slice(0,f)+w+o().slice(m);u(l),queueMicrotask(()=>{y.selectionStart=y.selectionEnd=f+w.length,y.focus()})},p=()=>{yo(o())===d()?(i(!0),e.onCorrect()):(i(!1),e.onIncorrect())},v=()=>{i(null),u(""),e.onComplete()};return[(()=>{var w=lc(),y=w.firstChild,f=y.nextSibling,m=f.firstChild;return j(w,(()=>{var l=B(()=>n().q!==n().a);return()=>l()&&(()=>{var g=cc();return j(g,()=>t("translate_to_lang",{lang:t(n().a)})),g})()})(),y),j(y,()=>e.card.question),m.$$input=l=>u(l.target.value),ot(l=>c=l,m),j(f,A(ac,{get lang(){return n().a},onSelect:h,get text(){return e.card.answer}}),null),Y(l=>{var g=n().q,$=t("type_in")+" "+t(n().a)+"...",b=n().a,_=t("enter_answer");return g!==l.e&&te(y,"lang",l.e=g),$!==l.t&&te(m,"placeholder",l.t=$),b!==l.a&&te(m,"lang",l.a=b),_!==l.o&&te(m,"aria-label",l.o=_),l},{e:void 0,t:void 0,a:void 0,o:void 0}),Y(()=>m.value=o()),w})(),A(qt,{get isCorrect(){return a()},get isInputPresent(){return o().length>0},onCheckAnswer:p,onComplete:v})]};ae(["input"]);var fc=M('<section class="writing-blocks-card card"><h3 class=question></h3><div class=selected-words></div><hr><div class=options>'),hc=M("<button class=selected-word>"),mc=M("<button class=option-button>");const gc={class:"writing-blocks",qlang:"default",question:"Question",answer:"Answer",options:["Answer","Another"]},vo=e=>e.trim().toLowerCase().replace(/[^\s\w]+/g,"").replace(/\s+/g," "),pc=e=>{const[t,n]=H(Ue(e.card)),[r,o]=H(null),[s,a]=H([]);me(()=>{n(Ue(e.card)),a([]),o(null)});const i=u=>{o(null),a(h=>[...h,u])},c=u=>{o(null),a(h=>h.filter((p,v)=>v!==u))},d=()=>{const u=vo(s().join(" ")),h=vo(e.card.answer);u===h?(o(!0),e.onCorrect()):(o(!1),e.onIncorrect())};return[(()=>{var u=fc(),h=u.firstChild,p=h.nextSibling,v=p.nextSibling,w=v.nextSibling;return j(h,()=>e.card.question),j(p,A(it,{get each(){return s()},children:(y,f)=>(()=>{var m=hc();return m.$$click=()=>c(f()),j(m,y),m})()})),j(w,A(it,{get each(){return e.card.options},children:y=>(()=>{var f=mc();return f.$$click=()=>i(y),j(f,y),Y(()=>f.disabled=s().includes(y)),f})()})),Y(()=>te(h,"lang",t().q)),u})(),A(qt,{get isCorrect(){return r()},get isInputPresent(){return s().length>0},onCheckAnswer:d,get onComplete(){return e.onComplete}})]};ae(["click"]);const yc={class:"dynamic-vocab",question:"Question",qlang:"default"},vc=e=>{const t=B(()=>{const r={};for(const o of e.lesson.cards.filter(s=>["vocab","blanks"].includes(s.class)))if(o.class==="blanks"&&o.qlang===e.card.qlang)o.words.forEach(s=>{const a=Object.keys(s)[0],i=s[a];r[a]=i?a:""});else if(o.class==="vocab")if(o.qlang===e.card.qlang)Object.assign(r,o.vocab);else{const s=Object.fromEntries(Object.entries(o.vocab).map(([a,i])=>[i,a]));Object.assign(r,s)}return r}),n={class:"vocab",qlang:e.card.qlang,vocab:t()};return A(ri,{card:n,get onCorrect(){return e.onCorrect},get onIncorrect(){return e.onIncorrect},get onComplete(){return e.onComplete}})},$c={"multiple-choice":Hl,vocab:Ql,blanks:nc,writing:uc,"writing-blocks":gc,"dynamic-vocab":yc},_c=e=>structuredClone($c[e]),wc=["writing-blocks","writing","vocab","multiple-choice","dynamic"];function bc(e){return typeof e=="object"&&e!==null&&"answer"in e}var Sc=M("<p>"),Cc=M("<div>"),Ec=M("<p>Unknown lesson card...");function si(e){const{t}=_e();return(()=>{var n=Cc();return It(n,"dblclick",e.ondblclick),j(n,A(Fi,{get fallback(){return Ec()},get children(){return[A(et,{get when(){return!e.card},get children(){var r=Sc();return j(r,()=>t("lesson_complete")),r}}),A(et,{get when(){return e.card?.class==="dynamic-vocab"},get children(){return A(vc,{get card(){return e.card},get lesson(){return e.lesson},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(et,{get when(){return e.card?.class==="writing"},get children(){return A(dc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(et,{get when(){return e.card?.class==="writing-blocks"},get children(){return A(pc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(et,{get when(){return e.card?.class==="multiple-choice"},get children(){return A(Bl,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(et,{get when(){return e.card?.class==="vocab"},get children(){return A(ri,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(et,{get when(){return e.card?.class==="blanks"},get children(){return A(rc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}})]}})),Y(()=>te(n,"tabindex",e.tabindex||void 0)),n})()}ae(["dblclick"]);var Pc=M("<article class=lesson><h2><em></em><button class=close-button></button></h2><progress>");const $o={title:"A Lesson",description:"A lesson description",cards:[]},kc=e=>{const{t}=_e(),{showConfirm:n}=Gn(),[r,o]=H([]),s=B(()=>(r()&&r()[0])??null);let a=null;me(()=>{e.lesson&&e.lesson.cards&&o(e.lesson.cards)});const i=()=>{n(t("confirm_leave_lesson"),()=>{ti(),e.onCancel()})},c=v=>{v.key==="Escape"&&i()},d=v=>{const w=t("confirm_leave_app");return v.preventDefault(),w};window.addEventListener("keyup",c),window.addEventListener("beforeunload",d),Ye(()=>{window.removeEventListener("keyup",c),window.removeEventListener("beforeunload",d)});const u=()=>{if(a){if(o(v=>v.slice(1)),r().length===0){e.onLessonComplete();return}}else o(v=>[...v.slice(1),v[0]])},h=()=>{a=!1;const v=e.lesson.cards.indexOf(r()[0]);e.onAnswer(v,"bad_answer_goes_here")},p=()=>{a=!0;const v=e.lesson.cards.indexOf(r()[0]);e.onAnswer(v)};return!e.lesson||!e.lesson.cards?"Loading lesson cards...":(()=>{var v=Pc(),w=v.firstChild,y=w.firstChild,f=y.nextSibling,m=w.nextSibling;return j(y,()=>e.lesson.title),f.$$click=i,j(v,A(si,{get card(){return s()},get lesson(){return e.lesson},onComplete:u,onCorrect:p,onIncorrect:h}),null),Y(l=>{var g=t("cancel_lesson"),$=e.lesson.cards.length,b=t("lesson_progress"),_=`${e.lesson.cards.length-r().length+1} / ${e.lesson.cards.length}`;return g!==l.e&&te(f,"aria-label",l.e=g),$!==l.t&&te(m,"max",l.t=$),b!==l.a&&te(m,"aria-label",l.a=b),_!==l.o&&te(m,"title",l.o=_),l},{e:void 0,t:void 0,a:void 0,o:void 0}),Y(()=>m.value=r().length===0?1:e.lesson.cards.length-r().length+1),v})()};ae(["click"]);const Pn="oe_",Pt={CURRENT_LESSON_INDEX:e=>`${Pn}current_lesson_index_${e}`,ANSWERS:e=>`${Pn}answers_${e}`,LESSONS:e=>`${Pn}course_${e}`,CURRENT_COURSE_INDEX:`${Pn}course`,STORE_NAME:"oe-courses",EDITING_MODE:"oe-editing"},Oc=()=>Object.assign({"../../lessons/lessons.json":()=>gt(()=>import("./lessons-CczpSXUr.js"),[]),"../../lessons/lessons.old.json":()=>gt(()=>import("./lessons.old-Bh74MdUW.js"),[]),"../../lessons/test.json":()=>gt(()=>import("./test-Bb4xNry_.js"),[]),"../../lessons/uk-constitution.json":()=>gt(()=>import("./uk-constitution-2T_E9-3M.js"),[])}),Rc={title:"New Course",description:"A description",language:"en",targetLanguage:"en",level:"level",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[]},_o="custom-lesson",Nc=[];let gr;const kn=e=>[...e.courses.map(t=>t.title)],ye=async()=>(gr||(gr=await Ic()),gr),Ic=async()=>{const[e,t]=Wo(Bo({courseMetadata:null,lessons:[],loading:!1}),{name:Pt.STORE_NAME,storage:localStorage});let n=null;const r=()=>(n||(n=Do()),n),o=async P=>{const L=await r();if(isNaN(P)||P<0||P>=L.courses.length)throw new Error(`Invalid course index for deletion: ${P}`);$(P),await u(0)},s=({lessons:P,courseMetadata:L})=>{t({lessons:P,courseMetadata:L})},a=P=>{const T=new Ll().compile(xl);if(!T(P))throw console.error(JSON.stringify(T.errors,null,4)),console.debug("courseData",P),new TypeError("Invalid course data",P)},i=async P=>{const L=`../../lessons/${P}.json`;console.info(`Loading course ${P} from ${L}`);const T=await Oc();if(!T[L])throw new Error("Lesson not found: "+L);const z=(await T[L]()).default;return console.info(`Loaded course ${P} from ${L}`),z},c=P=>{if(t("loading",!0),P){const L=JSON.parse(P);a(L)}else{const L={lessons:e.lessons,courseMetadata:e.courseMetadata};P=JSON.stringify(L)}localStorage.setItem(_o,P),t("loading",!1)},d=()=>{console.log("loadCourseFromStorage enter");try{const P=JSON.parse(localStorage.getItem(_o)||"{}"),{lessons:L,...T}=P;s({lessons:L,courseMetadata:T}),console.log("loadCourseFromStorage set ",P)}finally{t("loading",!1)}},u=async P=>{if(console.info("loadCourseFromFile enter with",P),isNaN(P))return;const L=await r();if(P===L.courses.length)return console.log("loadCourseFromFile Shall load course from storage"),d();if(P<0)throw console.warn("loadCourseFromFile Invalid course index:",P),new Error("loadCourseFromFile: Negative course index? "+P);t("loading",!0);try{let T;const{fileBasename:V}=L.courses[P];T=await i(V),a(T);const{lessons:z,...K}=T;s({lessons:z,courseMetadata:K}),t({loading:!1}),console.info("loadCourseFromFile OK")}catch(T){console.error("loadCourseFromFile Error loading lessons:",T),t("loading",!1)}console.info("loadCourseFromFile leave")},h=B(()=>e.lessons),p=async P=>{if(!e.lessons||e.lessons.length===0){if(!Number.isFinite(P))throw new Error("No lessons loaded and no courseIdx supplied?");await u(P),console.debug("getCourseData loaded course",P)}return{...e.courseMetadata,lessons:e.lessons}},v=P=>t({lessons:P}),w=B(()=>e.lessons.length),y=P=>{t("lessons",L=>{const T={...$o};return P===void 0||P>L.length?[...L,T]:P<=0?[T,...L]:[...L.slice(0,P),{...$o},...L.slice(P)]})},f=P=>{console.trace("initNewCourse enter");const L=kn(P).length;return t({loading:!0}),s({lessons:[...Nc],courseMetadata:{...Rc}}),t({loading:!1}),c(),console.log("initNewCourse leave with",L),L},m=()=>e.lessons.map((P,L)=>({title:P.title,index:L})),l=(P,L,T)=>{const V=e.lessons.map((z,K)=>K===L?{...z,cards:z.cards.map((W,oe)=>oe===T?P:W)}:z);v(V),console.log("updated card")},g=(P,L)=>{const T=e.lessons.map((V,z)=>z===P?{...V,cards:V.cards.filter((K,W)=>W!==L)}:V);v(T)},$=P=>{const L=P;localStorage.removeItem(Pt.CURRENT_LESSON_INDEX(L)),localStorage.removeItem(Pt.CURRENT_COURSE_INDEX),localStorage.removeItem(Pt.ANSWERS(L)),localStorage.removeItem(Pt.STORE_NAME)};return{store:e,setTitle:P=>t("courseMetadata","title",P),getTitle:()=>e.courseMetadata?.title??"",setDescription:P=>t("courseMetadata","description",P),getDescription:()=>e.courseMetadata?.description??"",initNewCourse:f,saveCourseToStorage:c,loadCourseFromStorage:d,loadCourseFromFile:u,setCourse:s,deleteCourse:o,saveCard:l,deleteCard:g,setLessons:v,getLessons:h,getCourseData:p,getTotalLessonsCount:w,addLesson:y,lessonTitles2Indicies:m,reset:$,assertValidCourseData:a}};function oi(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const a={to:o,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:c=>{c&&(n=!0),i.navigate(o,{...s,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let kr;function jr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),kr=window.history.state._depth}jr();function Lc(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Ac(e,t){let n=!1;return()=>{const r=kr;jr();const o=r==null?null:kr-r;if(n){n=!1;return}o&&t(o)?(n=!0,window.history.go(-o)):e()}}const jc=/^(?:[a-z0-9]+:)?\/\//i,Tc=/^\/+|(\/)\/+$/g,ii="http://sr";function Rt(e,t=!1){const n=e.replace(Tc,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function On(e,t,n){if(jc.test(t))return;const r=Rt(e),o=n&&Rt(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+Rt(t,!s)}function xc(e,t){if(e==null)throw new Error(t);return e}function qc(e,t){return Rt(e).replace(/\/*(\*.*)?$/g,"")+Rt(t)}function ai(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Dc(e,t,n){const[r,o]=e.split("/*",2),s=r.split("/").filter(Boolean),a=s.length;return i=>{const c=i.split("/").filter(Boolean),d=c.length-a;if(d<0||d>0&&o===void 0&&!t)return null;const u={path:a?"":"/",params:{}},h=p=>n===void 0?void 0:n[p];for(let p=0;p<a;p++){const v=s[p],w=v[0]===":",y=w?c[p]:c[p].toLowerCase(),f=w?v.slice(1):v.toLowerCase();if(w&&pr(y,h(f)))u.params[f]=y;else if(w||!pr(y,f))return null;u.path+=`/${y}`}if(o){const p=d?c.slice(-d).join("/"):"";if(pr(p,h(o)))u.params[o]=p;else return null}return u}}function pr(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Mc(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function li(e){const t=new Map,n=No();return new Proxy({},{get(r,o){return t.has(o)||Io(n,()=>t.set(o,B(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Vc(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(o):s instanceof Array?(n.delete(o),s.forEach(a=>{n.append(o,String(a))})):n.set(o,String(s))});const r=n.toString();return r?`?${r}`:""}function ci(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return ci(r).reduce((s,a)=>[...s,...o.map(i=>i+a)],[])}const Fc=100,ui=jt(),di=jt(),Tr=()=>xc(Tt(ui),"<A> and 'use' router primitives can be only used inside a Route."),Pe=()=>Tr().navigatorFactory(),xr=()=>Tr().location,je=()=>Tr().params,Uc=()=>{const e=xr(),t=Pe(),n=(r,o)=>{const s=$e(()=>Vc(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...o})};return[e.query,n]};function Kc(e,t=""){const{component:n,preload:r,load:o,children:s,info:a}=e,i=!s||Array.isArray(s)&&!s.length,c={key:e,component:n,preload:r||o,info:a};return fi(e.path).reduce((d,u)=>{for(const h of ci(u)){const p=qc(t,h);let v=i?p:p.split("/*",1)[0];v=v.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),d.push({...c,originalPath:u,pattern:v,matcher:Dc(v,!i,e.matchFilters)})}return d},[])}function zc(e,t=0){return{routes:e,score:Mc(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}function fi(e){return Array.isArray(e)?e:[e]}function hi(e,t="",n=[],r=[]){const o=fi(e);for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const c=Kc(i,t);for(const d of c){n.push(d);const u=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!u)hi(i.children,d.pattern,n,r);else{const h=zc([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((s,a)=>a.score-s.score)}function yr(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function Hc(e,t,n){const r=new URL(ii),o=B(u=>{const h=e();try{return new URL(h,r)}catch{return console.error(`Invalid path ${h}`),u}},r,{equals:(u,h)=>u.href===h.href}),s=B(()=>o().pathname),a=B(()=>o().search,!0),i=B(()=>o().hash),c=()=>"",d=Or(a,()=>ai(o()));return{get pathname(){return s()},get search(){return a()},get hash(){return i()},get state(){return t()},get key(){return c()},query:n?n(d):li(d)}}let st;function Bc(){return st}function Wc(e,t,n,r={}){const{signal:[o,s],utils:a={}}=e,i=a.parsePath||(K=>K),c=a.renderPath||(K=>K),d=a.beforeLeave||oi(),u=On("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!o().value&&s({value:u,replace:!0,scroll:!1});const[h,p]=H(!1);let v;const w=(K,W)=>{W.value===y()&&W.state===m()||(v===void 0&&p(!0),st=K,v=W,ki(()=>{v===W&&(f(v.value),l(v.state),b[1](oe=>oe.filter(ge=>ge.pending)))}).finally(()=>{v===W&&Ro(()=>{st=void 0,K==="navigate"&&V(v),p(!1),v=void 0})}))},[y,f]=H(o().value),[m,l]=H(o().state),g=Hc(y,m,a.queryWrapper),$=[],b=H([]),_=B(()=>typeof r.transformUrl=="function"?yr(t(),r.transformUrl(g.pathname)):yr(t(),g.pathname)),C=()=>{const K=_(),W={};for(let oe=0;oe<K.length;oe++)Object.assign(W,K[oe].params);return W},k=a.paramsWrapper?a.paramsWrapper(C,t):li(C),P={pattern:u,path:()=>u,outlet:()=>null,resolvePath(K){return On(u,K)}};return Y(Or(o,K=>w("native",K),{defer:!0})),{base:P,location:g,params:k,isRouting:h,renderPath:c,parsePath:i,navigatorFactory:T,matches:_,beforeLeave:d,preloadRoute:z,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:b};function L(K,W,oe){$e(()=>{if(typeof W=="number"){W&&(a.go?a.go(W):console.warn("Router integration does not support relative routing"));return}const ge=!W||W[0]==="?",{replace:re,resolve:de,scroll:F,state:R}={replace:!1,resolve:!ge,scroll:!0,...oe},q=de?K.resolvePath(W):On(ge&&g.pathname||"",W);if(q===void 0)throw new Error(`Path '${W}' is not a routable path`);if($.length>=Fc)throw new Error("Too many redirects");const I=y();(q!==I||R!==m())&&(Bi||d.confirm(q,oe)&&($.push({value:I,replace:re,scroll:F,state:m()}),w("navigate",{value:q,state:R})))})}function T(K){return K=K||Tt(di)||P,(W,oe)=>L(K,W,oe)}function V(K){const W=$[0];W&&(s({...K,replace:W.replace,scroll:W.scroll}),$.length=0)}function z(K,W){const oe=yr(t(),K.pathname),ge=st;st="preload";for(let re in oe){const{route:de,params:F}=oe[re];de.component&&de.component.preload&&de.component.preload();const{preload:R}=de;W&&R&&Io(n(),()=>R({params:F,location:{pathname:K.pathname,search:K.search,hash:K.hash,query:ai(K),state:null,key:""},intent:"preload"}))}st=ge}}function Jc(e,t,n,r){const{base:o,location:s,params:a}=e,{pattern:i,component:c,preload:d}=r().route,u=B(()=>r().path);c&&c.preload&&c.preload();const h=d?d({params:a,location:s,intent:st||"initial"}):void 0;return{parent:t,pattern:i,path:u,outlet:()=>c?A(c,{params:a,location:s,data:h,get children(){return n()}}):n(),resolvePath(v){return On(o.path(),v,u())}}}const Gc=e=>t=>{const{base:n}=t,r=$t(()=>t.children),o=B(()=>hi(r(),t.base||""));let s;const a=Wc(e,o,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),A(ui.Provider,{value:a,get children(){return A(Qc,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[B(()=>(s=No())&&null),A(Xc,{routerState:a,get branches(){return o()}})]}})}})};function Qc(e){const t=e.routerState.location,n=e.routerState.params,r=B(()=>e.preload&&$e(()=>{e.preload({params:n,location:t,intent:Bc()||"initial"})}));return A(ue,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>A(o,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Xc(e){const t=[];let n;const r=B(Or(e.routerState.matches,(o,s,a)=>{let i=s&&o.length===s.length;const c=[];for(let d=0,u=o.length;d<u;d++){const h=s&&s[d],p=o[d];a&&h&&p.route.key===h.route.key?c[d]=a[d]:(i=!1,t[d]&&t[d](),pt(v=>{t[d]=v,c[d]=Jc(e.routerState,c[d-1]||e.routerState.base,wo(()=>r()[d+1]),()=>e.routerState.matches()[d])}))}return t.splice(o.length).forEach(d=>d()),a&&i?a:(n=c[0],c)}));return wo(()=>r()&&n)()}const wo=e=>()=>A(ue,{get when(){return e()},keyed:!0,children:t=>A(di.Provider,{value:t,get children(){return t.outlet()}})}),Re=e=>{const t=$t(()=>e.children);return Di(e,{get children(){return t()}})};function Yc([e,t],n,r){return[e,r?o=>t(r(o)):t]}function Zc(e){let t=!1;const n=o=>typeof o=="string"?{value:o}:o,r=Yc(H(n(e.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&e.set(o),o));return e.init&&Ye(e.init((o=e.get())=>{t=!0,r[1](n(o)),t=!1})),Gc({signal:r,create:e.create,utils:e.utils})}function eu(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function tu(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const nu=new Map;function ru(e=!0,t=!1,n="/_server",r){return o=>{const s=o.base.path(),a=o.navigatorFactory(o.base);let i,c;function d(y){return y.namespaceURI==="http://www.w3.org/2000/svg"}function u(y){if(y.defaultPrevented||y.button!==0||y.metaKey||y.altKey||y.ctrlKey||y.shiftKey)return;const f=y.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const m=d(f),l=m?f.href.baseVal:f.href;if((m?f.target.baseVal:f.target)||!l&&!f.hasAttribute("state"))return;const $=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||$&&$.includes("external"))return;const b=m?new URL(l,document.baseURI):new URL(l);if(!(b.origin!==window.location.origin||s&&b.pathname&&!b.pathname.toLowerCase().startsWith(s.toLowerCase())))return[f,b]}function h(y){const f=u(y);if(!f)return;const[m,l]=f,g=o.parsePath(l.pathname+l.search+l.hash),$=m.getAttribute("state");y.preventDefault(),a(g,{resolve:!1,replace:m.hasAttribute("replace"),scroll:!m.hasAttribute("noscroll"),state:$?JSON.parse($):void 0})}function p(y){const f=u(y);if(!f)return;const[m,l]=f;r&&(l.pathname=r(l.pathname)),o.preloadRoute(l,m.getAttribute("preload")!=="false")}function v(y){clearTimeout(i);const f=u(y);if(!f)return c=null;const[m,l]=f;c!==m&&(r&&(l.pathname=r(l.pathname)),i=setTimeout(()=>{o.preloadRoute(l,m.getAttribute("preload")!=="false"),c=m},20))}function w(y){if(y.defaultPrevented)return;let f=y.submitter&&y.submitter.hasAttribute("formaction")?y.submitter.getAttribute("formaction"):y.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const l=new URL(f,ii);if(f=o.parsePath(l.pathname+l.search),!f.startsWith(n))return}if(y.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const m=nu.get(f);if(m){y.preventDefault();const l=new FormData(y.target,y.submitter);m.call({r:o,f:y.target},y.target.enctype==="multipart/form-data"?l:new URLSearchParams(l))}}ae(["click","submit"]),document.addEventListener("click",h),e&&(document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("focusin",p,{passive:!0}),document.addEventListener("touchstart",p,{passive:!0})),document.addEventListener("submit",w),Ye(()=>{document.removeEventListener("click",h),e&&(document.removeEventListener("mousemove",v),document.removeEventListener("focusin",p),document.removeEventListener("touchstart",p)),document.removeEventListener("submit",w)})}}function su(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,o=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:o}},n=oi();return Zc({get:t,set({value:r,replace:o,scroll:s,state:a}){o?window.history.replaceState(Lc(a),"",r):window.history.pushState(a,"",r),tu(decodeURIComponent(window.location.hash.slice(1)),s),jr()},init:r=>eu(window,"popstate",Ac(r,o=>{if(o&&o<0)return!n.confirm(o);{const s=t();return!n.confirm(s.value,{state:s.state})}})),create:ru(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}function vr(e){const t=Pe(),n=xr(),{href:r,state:o}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:o}),null}var ou=M("<article id=main>");const iu=e=>{const t=$t(()=>e.children);return(()=>{var n=ou();return j(n,t),n})()},Ge=e=>{const t=`answers-store-${e}`,[n,r]=Wo(Bo({currentLessonIdx:-1,answers:{}}),{name:t,storage:localStorage}),o=l=>r("currentLessonIdx",l),s=()=>n.currentLessonIdx===-1?0:n.currentLessonIdx,a=()=>r("currentLessonIdx",s()+1),i=(l,g,$="")=>{if(n.answers[l]||r("answers",l,[]),!n.answers[l]?.[g])for(let C=n.answers[l].length;C<=g;C++)r("answers",l,C,[]);const _=n.answers[l][g]??[];r("answers",l,g,[..._,$])},c=l=>n.answers[l]??[],d=l=>{r("answers",l,[])},u=()=>Object.keys(n.answers).length,h=()=>Object.values(n.answers).reduce((l,g)=>l+g.length,0),p=l=>Object.values(n.answers).reduce((g,$)=>g+$.reduce((b,_)=>b+_.filter(l).length,0),0);return{getCurrentLessonIdx:s,setCurrentLessonIdx:o,incrementLessonsIdx:a,saveAnswer:i,getLessonAnswers:c,resetLesson:d,getTotalTakenLessons:u,getTotalQuestionsAnswered:h,getTotalCorrectAnswers:()=>p(l=>l===""),getTotalIncorrectAnswers:()=>p(l=>l!==""),getLessonQuestionsAnsweredCorrectly:l=>c(l).reduce(($,b)=>$+(Array.isArray(b)?b.filter(_=>_==="").length:0),0),getLessonQuestionCount:l=>c(l).length,getLessonQuestionsAnsweredIncorrectly:l=>c(l).reduce(($,b)=>$+(Array.isArray(b)?b.filter(_=>_!=="").length:0),0)}};var au=M("<button class=large-icon-button><i class=icon-ccw>");const mi=e=>{const{t}=_e(),{showConfirm:n}=Gn(),[r]=ve(ye),o=Ge(e.courseIdx),s=B(()=>o.getTotalQuestionsAnswered()),a=()=>{r.loading||(r().reset(e.courseIdx),window.location.reload())};return s()===0?"":(()=>{var i=au(),c=i.firstChild;return i.$$click=()=>n(t("lose_progress",{totalAnswered:s()}),a),Y(()=>te(c,"title",t("reset_course"))),i})()};ae(["click"]);var lu=M('<section class="completed-all-lessons card"><h2></h2><div class=stats>');const cu=e=>{const{t}=_e(),n=je();return(()=>{var r=lu(),o=r.firstChild;return o.nextSibling,j(o,()=>t("all_lessons_done")),j(r,()=>e.children&&e.children,null),j(r,A(mi,{get courseIdx(){return Number(n.courseIdx||-1)}}),null),r})()};var uu=M("<ol>"),du=M('<section class="card lesson-list">'),fu=M("<div>Loading lesson list..."),hu=M("<p class=card>No lessons are available for this course."),mu=M("<li><button>");const gu=e=>{const[t]=ve(ye),n=Ge(e.courseIndex);return A(ue,{get when(){return!t.loading},get fallback(){return fu()},get children(){var r=du();return j(r,()=>e.children,null),j(r,A(ue,{get when(){return(t()?.getLessons()?.length??0)>0},get fallback(){return hu()},get children(){var o=uu();return j(o,A(it,{get each(){return t()?.getLessons()??[]},children:(s,a)=>{const i=a(),c=n.getCurrentLessonIdx();return(()=>{var d=mu(),u=d.firstChild;return u.$$click=()=>{i<=c&&e.onLessonSelected(i)},u.disabled=i>c,u.classList.toggle("completed",i<c),u.classList.toggle("current",i===c),u.classList.toggle("todo",i>c),j(u,()=>s.title),d})()}})),o}}),null),r}})};ae(["click"]);var pu=M('<section class="stats-component card"><h2></h2><table><tbody><tr class=correct-answers><th class=correct-answers-alt></th><td class=value></td></tr><tr class=incorrect-answers><th class=incorrect-answers-alt></th><td class=value></td></tr><tr class=questions-answered><th class=questions-answered-alt></th><td class=value>');const yu=e=>{const{t}=_e(),n=Ge(e.courseIdx);return!n||!n.getTotalQuestionsAnswered()?"":(()=>{var r=pu(),o=r.firstChild,s=o.nextSibling,a=s.firstChild,i=a.firstChild,c=i.firstChild,d=c.nextSibling,u=i.nextSibling,h=u.firstChild,p=h.nextSibling,v=u.nextSibling,w=v.firstChild,y=w.nextSibling;return j(o,()=>t("progress")),j(c,()=>t("correct_answer_count_alt")),j(d,()=>n.getTotalCorrectAnswers()),j(h,()=>t("incorrect_answer_count_alt")),j(p,()=>n.getTotalQuestionsAnswered()),j(w,()=>t("questions_answered_count_alt")),j(y,()=>n.getTotalQuestionsAnswered()),Y(f=>{var m=t("corect_answers_alt"),l=t("incorrect_answer_count_alt"),g=t("questions_answered_count_alt");return m!==f.e&&te(i,"title",f.e=m),l!==f.t&&te(u,"title",f.t=l),g!==f.a&&te(v,"title",f.a=g),f},{e:void 0,t:void 0,a:void 0}),r})()};var vu=M("<p>"),$u=M('<section class="card no-set-height"><h2>'),_u=M("<article id=home>"),wu=M("<div>Loading lessons ...");const bu=()=>{const e=je(),t=Pe(),[n,r]=H(null),[o]=ve(ye),s=B(()=>{const c=n();return c!==null?Ge(c):null}),a=B(()=>o()?.store.courseMetadata);me(()=>{console.log("courseMetadata",a()),console.log("courseMetadata 2",o()?.store)}),me(()=>{const c=Number(e.courseIdx);Number.isFinite(c)?(console.log("Course home screen set courseIdx",c),r(c)):(console.log("Course home screen has no courseIdx"),r(null))});const i=c=>{t(`/course/${n()}/${c}/intro`)};return A(ue,{get when(){return B(()=>!!(!o.loading&&o()))()&&s()},get fallback(){return wu()},get children(){var c=_u();return j(c,A(yu,{get courseIdx(){return n()}}),null),j(c,A(gu,{get courseIndex(){return n()},onLessonSelected:i,get children(){return A(ue,{get when(){return a()},get children(){var d=$u(),u=d.firstChild;return j(u,()=>a().title),j(d,A(ue,{get when(){return a().description},get children(){var h=vu();return j(h,()=>a().description),h}}),null),d}})}}),null),c}})};var Su=M("<div class=form-field><label>"),Cu=M("<textarea class=text-input>"),Eu=M("<input class=text-input>");const Me=e=>(()=>{var t=Su(),n=t.firstChild;return j(n,()=>e.label),j(t,(()=>{var r=B(()=>!!e.multiline);return()=>r()?(()=>{var o=Cu();return It(o,"input",e.onInput),Y(()=>te(o,"placeholder",e.placeholder)),Y(()=>o.value=e.value),o})():(()=>{var o=Eu();return It(o,"input",e.onInput),Y(s=>{var a=e.placeholder,i=e.type||"text";return a!==s.e&&te(o,"placeholder",s.e=a),i!==s.t&&te(o,"type",s.t=i),s},{e:void 0,t:void 0}),Y(()=>o.value=e.value),o})()})(),null),t})();ae(["input"]);var Pu=M('<section class="boolean-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),ku=M('<div class=answer-row><button title="Click to mark as correct answer"><span></span></button><button type=button title="Remove this answer"><span class=utf8-icon-close>');function Ou(e){const[t,n]=H(""),[r,o]=H(!1),s=(d,u)=>{const h=[...e.list],p=Object.keys(h[d])[0];h[d]={[u]:h[d][p]},e.onUpdate(h)},a=d=>{const u=[...e.list],h=Object.keys(u[d])[0];u[d]={[h]:!u[d][h]},e.onUpdate(u)},i=d=>{const u=[...e.list];u.splice(d,1),e.onUpdate(u)},c=()=>{if(!t())return;const d=[...e.list,{[t()]:r()}];e.onUpdate(d),n(""),o(!1)};return(()=>{var d=Pu(),u=d.firstChild,h=u.firstChild;return j(d,()=>e.list.map((p,v)=>{const w=Object.keys(p)[0],y=p[w];return(()=>{var f=ku(),m=f.firstChild,l=m.firstChild,g=m.nextSibling;return j(f,A(Me,{label:`Option ${v+1}`,value:w,onInput:$=>s(v,$.target.value),placeholder:"Enter answer"}),m),m.$$click=()=>a(v),Ne(m,`checkmark ${y?"selected":""}`),Ne(l,`utf8-icon-${y?"tick":"not-tick"}`),g.$$click=()=>i(v),f})()}),u),j(u,A(Me,{label:"New Option",get value(){return t()},onInput:p=>n(p.target.value),placeholder:"Enter new option"}),h),h.$$click=c,d})()}ae(["click"]);var Ru=M('<section class="answer-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Nu=M('<div class=answer-row><button title="Select as the correct answer"><span></span></button><button class=large-icon-button type=button title="Remove this answer"><span class=utf8-icon-close>');function bo(e){const[t,n]=H(""),[r,o]=H([]);me(()=>{o([...e.list])});const s=(d,u)=>{const h=[...r()];h[d]=u,o(h),e.onUpdate(h,e.answer)},a=d=>{const u=[...r()];u.splice(d,1),o(u),e.onUpdate(u,e.answer)},i=()=>{const d=t().trim();if(!d)return;const u=[...r(),d];o(u),n(""),e.onUpdate(u,e.answer)},c=d=>{const u=e.answer===d?"":d;e.onUpdate(r(),u)};return(()=>{var d=Ru(),u=d.firstChild,h=u.firstChild;return j(d,()=>r().map((p,v)=>(()=>{var w=Nu(),y=w.firstChild,f=y.firstChild,m=y.nextSibling;return j(w,A(Me,{label:`Option ${v+1}`,value:p,onInput:l=>s(v,l.target.value),placeholder:"Enter answer"}),y),y.$$click=()=>c(p),m.$$click=()=>a(v),Y(l=>{var g=`large-icon-button checkmark ${e.answer===p?"selected":""}`,$=`utf8-icon-${e.answer===p?"tick":"not-tick"}`;return g!==l.e&&Ne(y,l.e=g),$!==l.t&&Ne(f,l.t=$),l},{e:void 0,t:void 0}),w})()),u),j(u,A(Me,{label:"New Option",get value(){return t()},onInput:p=>n(p.target.value),placeholder:"Enter new option"}),h),h.$$click=i,d})()}ae(["click"]);var Iu=M('<section class="vocab-text answer-list"><div class="answer-row add-new"><button type=button title="Add this entry"><span class=utf8-icon-add>'),Lu=M('<div class=answer-row><button type=button title="Remove this entry"><span class=utf8-icon-close>');function Au(e){const[t,n]=H(""),[r,o]=H(""),s=B(()=>Object.entries(e.list)),a=(u,h)=>{const p={...e.list},v=s()[u][0],w=p[v];delete p[v],p[h]=w,e.onUpdate(p)},i=(u,h)=>{const p={...e.list},v=s()[u][0];p[v]=h,e.onUpdate(p)},c=u=>{const h={...e.list},p=s()[u][0];delete h[p],e.onUpdate(h)},d=()=>{if(!t()||!r())return;const u={...e.list,[t()]:r()};e.onUpdate(u),n(""),o("")};return(()=>{var u=Iu(),h=u.firstChild,p=h.firstChild;return j(u,()=>s().map(([v,w],y)=>(()=>{var f=Lu(),m=f.firstChild;return j(f,A(Me,{label:`Prompt ${y+1}`,value:v,onInput:l=>a(y,l.target.value),placeholder:"Enter prompt"}),m),j(f,A(Me,{label:`Answer ${y+1}`,value:w,onInput:l=>i(y,l.target.value),placeholder:"Enter answer"}),m),m.$$click=()=>c(y),f})()),h),j(h,A(Me,{label:"New Prompt",get value(){return t()},onInput:v=>n(v.target.value),placeholder:"Enter new prompt"}),p),j(h,A(Me,{label:"New Answer",get value(){return r()},onInput:v=>o(v.target.value),placeholder:"Enter new answer"}),p),p.$$click=d,u})()}ae(["click"]);var ju=M("<p>Loading card..."),Tu=M('<aside class="card-editor card"><section><h2>Editing <!> Card<button class="close-editor large-icon-button"><span class=utf8-icon-close></span></button></h2></section><footer class=modal-actions><button>Cancel</button><button>Save'),xu=M("<section class=question>");const qu=e=>{const{t}=_e(),[n,r]=H([]),[o,s]=H(""),[a,i]=H(""),[c,d]=H({}),[u,h]=H([]),[p,v]=H([]);me(()=>{if(!e.card){console.warn("No card!");return}"answer"in e.card&&s(e.card.answer||""),"answers"in e.card&&r(e.card.answers||[]),"options"in e.card&&h(e.card.options),"question"in e.card&&i(e.card.question),"words"in e.card&&v(e.card.words),"vocab"in e.card&&d(e.card.vocab)});const w=()=>{if(!e.card)return;const f={...e.card};"answers"in f&&(f.answers=n()),"answer"in f&&(f.answer=o()),"options"in f&&(f.options=u()),"question"in e.card&&(f.question=a()),"words"in f&&(f.words=p()),"vocab"in f&&(f.vocab=c()),e.onSave(f)};function y(f,m,l){f(m),l&&bc(e.card)&&s(l)}return A(ue,{get when(){return e.card},get fallback(){return ju()},children:f=>(()=>{var m=Tu(),l=m.firstChild,g=l.firstChild,$=g.firstChild,b=$.nextSibling,_=b.nextSibling,C=_.nextSibling,k=l.nextSibling,P=k.firstChild,L=P.nextSibling;return m.$$click=T=>T.stopPropagation(),j(g,()=>t("card-class."+e.card?.class),b),It(C,"click",e.onCancel),j(l,(()=>{var T=B(()=>!!a());return()=>T()&&(()=>{var V=xu();return j(V,A(Me,{multiline:!0,label:"Question",get value(){return a()??"Question"},onInput:z=>i(z.target.value),placeholder:"Option: enter a question"})),V})()})(),null),j(l,(()=>{var T=B(()=>!!(f().answer&&f().class!=="writing-blocks"&&f().class!=="multiple-choice"));return()=>T()&&A(Me,{label:"Answer",get value(){return f().answer},onInput:V=>s(V.target.value),placeholder:"Enter answer"})})(),null),j(l,(()=>{var T=B(()=>"words"in f());return()=>T()&&A(Ou,{get list(){return p()},onUpdate:(...V)=>y(v,...V)})})(),null),j(l,(()=>{var T=B(()=>"answers"in f());return()=>T()&&A(bo,{get answer(){return o()},get list(){return n()},onUpdate:(...V)=>y(r,...V)})})(),null),j(l,(()=>{var T=B(()=>"options"in f());return()=>T()&&A(bo,{get answer(){return o()},get list(){return u()},onUpdate:(...V)=>y(h,...V)})})(),null),j(l,(()=>{var T=B(()=>"vocab"in f());return()=>T()&&A(Au,{get list(){return c()},onUpdate:(...V)=>y(d,...V)})})(),null),It(P,"click",e.onCancel),L.$$click=w,Y(()=>te(C,"title",t("cacnel"))),m})()})};ae(["click"]);var Du=M("<article>"),Mu=M("<p>Loading editor...");const Vu=()=>{const e=je(),t=Pe(),[n]=ve(ye),r=()=>Number(e.courseIdx??-1),o=()=>Number(e.lessonIdx??-1),s=()=>Number(e.cardIdx??-1),a=B(()=>n()?.getLessons()??[]),i=B(()=>{const u=o();if(typeof o>"u"||!a().length)return;const h=a()[u];if(!h||!Array.isArray(h.cards))return console.warn("Invalid lesson:",u,h),null;const p=s();if(s()>=h.cards.length){console.warn("cardId is >= lesson.cards length"),t("/course/"+r());return}return h.cards[p]??null}),c=B(()=>a().length>0&&o()>=0&&s()>=0&&i()!==null);me(()=>{n()});const d=u=>{const h=n();h&&(h.saveCard(u,o(),s()),t(-1))};return A(ue,{get when(){return B(()=>!!c())()&&i()},get fallback(){return Mu()},get children(){var u=Du();return j(u,A(qu,{get card(){return i()},onSave:d,onCancel:()=>t(`/editor/${r()}`)})),u}})},Fu=(e,t)=>{const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=t%60;let s="";return n>0&&(s+=`${n} ${e("hours")}`),(r>0||n>0)&&(s&&(s+=" "),s+=`${r} ${e("minutes")}`),s&&(s+=", "),s+=`${o} ${e("seconds")}`,s};var Uu=M('<section class="lesson-completed card"><h2></h2><p>'),Ku=M("<footer class=lesson-completed-footer><button class=next-button>");const zu=e=>{const{t}=_e(),n=je(),r=Ge(Number(n.courseIdx||-1)),o=r.getCurrentLessonIdx(),s=r.getLessonQuestionsAnsweredIncorrectly(o),a=r.getLessonQuestionCount(o),i=()=>{ti(),e.onNext()};return[(()=>{var c=Uu(),d=c.firstChild,u=d.nextSibling;return j(d,()=>t("lesson_completed")),j(u,()=>t("lesson_completed_counts",{questionCount:a,incorrectAnswerCount:s,duration:Fu(t,e.durationInSeconds)})),c})(),(()=>{var c=Ku(),d=c.firstChild;return d.$$click=i,j(d,()=>t("continue")),c})()]};ae(["click"]);const Hu=()=>{const[e]=ve(ye),t=je(),[n]=Uc(),r=Pe(),o=B(()=>Number(t.courseIdx)),s=B(()=>Number(t.lessonIdx)),a=B(()=>Number(n.duration)||-1),i=B(()=>s()+1),c=()=>{const d=e();d&&(i()<d.getLessons().length?r(`/course/${o()}/${i()}/intro`):r(`/course/${o()}/finished`))};return A(ue,{get when(){return e()},get children(){return A(zu,{onNext:c,get durationInSeconds(){return a()}})}})};var Bu=M("<div>Loading Lesson Data...");const Wu=()=>{const[e]=ve(ye),t=je(),n=B(()=>Number(t.courseIdx||-1)),r=B(()=>Number(t.lessonIdx||-1)),o=Pe(),s=Ge(n()),[a,i]=H(null),[c,d]=H(Date.now());me(()=>{if(e.loading)return;const v=e();if(!v)return;const w=r(),y=v?.getLessons();y[w]&&(i(y[w]),d(Date.now()))});const u=()=>{o(`/course/${n()}`)},h=(v,w)=>{s.saveAnswer(r(),v,w||"")},p=()=>{const v=Math.floor((Date.now()-c())/1e3);o(`/course/${n()}/${r()}/completed?duration=${v}`)};return A(ue,{get when(){return a()},get fallback(){return Bu()},children:v=>A(kc,{get lesson(){return v()},onCancel:u,onAnswer:h,onLessonComplete:p})})};var Ju=M("<div>Loading Lesson Data..."),Gu=M('<article class="lesson-intro card"><header><h2> </h2><h3>'),Qu=M("<footer class=lesson-intro-footer><button class=next-button>"),Xu=M("<p class=description>");const So=()=>{const[e]=ve(ye),t=je(),n=Pe(),{t:r}=_e(),o=B(()=>Number(t.courseIdx)),s=B(()=>Number(t.lessonIdx)),a=B(()=>Ge(o())),i=B(()=>{const d=e();if(!(!d||!d.store))return d.getLessons()?.[s()]}),c=()=>{Ml(),a()?.resetLesson(s()),n(`/course/${o()}/${s()}/in-progress`)};return A(ue,{get when(){return i()},get fallback(){return Ju()},children:d=>[(()=>{var u=Gu(),h=u.firstChild,p=h.firstChild,v=p.firstChild,w=p.nextSibling;return j(p,()=>r("lesson"),v),j(p,()=>s()+1,null),j(w,()=>d().title),j(u,(()=>{var y=B(()=>!!d().description);return()=>y()&&(()=>{var f=Xu();return j(f,()=>d().description),f})()})(),null),u})(),(()=>{var u=Qu(),h=u.firstChild;return h.$$click=c,j(h,()=>r("begin")),u})()]})};ae(["click"]);const Yu="0.2.2",Zu="https://leegee.github.io/learning-oe-solidjs",gi={version:Yu,homepage:Zu};var ed=M("<h1 class=animated-text>");const td=e=>{const[t,n]=H(!1);let r;return me(()=>{if(r){let o;requestAnimationFrame(()=>{o=new IntersectionObserver(a=>{a[0].isIntersecting&&(n(!0),o.unobserve(r))},{threshold:.1}),o.observe(r)}),Ye(()=>{o?.disconnect()})}}),(()=>{var o=ed(),s=r;return typeof s=="function"?ot(s,o):r=o,j(o,()=>e.title),Y(()=>o.classList.toggle("visible",!!t())),o})()};var nd=M("<button class=large-icon-button><i class=icon-cog>");const Co=e=>{const t=Pe();return(()=>{var n=nd();return n.$$click=()=>t("/editor/"+e.courseIdx),n})()};ae(["click"]);var rd=M('<button title="Download this course"class="icon-download large-icon-button">'),sd=M('<dialog class=dialog-error><header><h3>Error saving lessons</h3></header><footer><button class="large-icon-button utf8-icon-close">');const Eo=e=>{const[t]=ve(ye);let n=null;const r=async()=>{if(t.loading)return;const o="lessons.lson.json",s=await t().getCourseData(e.courseIdx);if(!s)throw new Error("Lessons not loaded?");try{const a=new Blob([JSON.stringify(s,null,2)],{type:"text/plain"}),i=URL.createObjectURL(a),c=document.createElement("a");c.href=i,c.download=o,c.click(),URL.revokeObjectURL(i)}catch(a){a.name!=="AbortError"&&(console.error("Error saving file:",a),n?.showModal())}};return[(()=>{var o=rd();return o.$$click=()=>r(),o})(),(()=>{var o=sd(),s=o.firstChild,a=s.nextSibling,i=a.firstChild;return ot(c=>n=c,o),i.$$click=()=>n?.close(),o})()]};ae(["click"]);var od=M('<button title="Create a blank course"class="large-icon-button utf8-icon-new">');const id=()=>{const e=Pe(),{config:t}=_t(),[n]=ve(ye),r=async()=>{if(n.loading)return;const o=n().initNewCourse(t);o?(Ge(o),e(`/editor/${o}`)):alert("Error creating new course")};return A(ue,{get when(){return!n.loading},get children(){var o=od();return o.$$click=r,o}})};ae(["click"]);var ad=M('<button title="Load a course from a file"class=large-icon-button><i class=icon-upload>'),ld=M("<input type=file accept=.json>"),cd=M("<dialog class=dialog-error><header><h3>Error loading course</h3></header><footer><button class=large-icon-button><span class=utf8-icon-close>"),ud=M('<dialog class=dialog-ok><header><h3>Course Loaded</h3></header><footer><button class="large-icon-button utf8-icon-tick">');const dd=()=>{const[e]=ve(ye);let t=null,n=null,r=null;const o=()=>{n?.close(),t?.close()},s=()=>r?.click(),a=async i=>{const d=i.target.files?.[0];if(d&&!e.loading)try{console.log("Selected file:",d.name);const u=await d.text();console.log(u),await e()?.saveCourseToStorage(u),await e()?.loadCourseFromStorage(),n?.showModal()}catch(u){u.name!=="AbortError"&&(console.error("Error loading file:",u),t?.showModal())}finally{r&&(r.value="")}};return[(()=>{var i=ad();return i.$$click=s,i})(),(()=>{var i=ld();return i.addEventListener("change",a),ot(c=>r=c,i),i.style.setProperty("display","none"),i})(),(()=>{var i=cd(),c=i.firstChild,d=c.nextSibling,u=d.firstChild;return ot(h=>t=h,i),u.$$click=o,i})(),(()=>{var i=ud(),c=i.firstChild,d=c.nextSibling,u=d.firstChild;return ot(h=>n=h,i),u.$$click=o,i})()]};ae(["click"]);var Po=M("<span class=course-action-buttons>"),fd=M('<aside aria-roledescription="Toggle menu"class=hamburger-menu><section class=card><nav><li><a>Custom Course</a></li></nav><footer><small><button>Edit Courses </button></small></footer></section><footer><small>Version '),hd=M("<p>Loading..."),md=M("<li><a>");const gd=()=>{const[e]=ve(ye),[t,n]=H(!1),r=Pe(),{config:o}=_t(),[s,a]=H(0),i=c=>{a(c),r("/course/"+c)};return me(()=>{if(!e.loading&&isNaN(s())){console.debug("local course index is NaN?");return}}),A(ue,{get when(){return!e.loading},get fallback(){return hd()},get children(){var c=fd(),d=c.firstChild,u=d.firstChild,h=u.firstChild,p=h.firstChild,v=u.nextSibling,w=v.firstChild,y=w.firstChild,f=d.nextSibling,m=f.firstChild;return m.firstChild,j(d,A(td,{get title(){return o.menuTitle||o.appTitle}}),u),j(u,()=>kn(o).map((l,g)=>(()=>{var $=md(),b=$.firstChild;return te($,"tabindex",g+1),b.$$click=()=>i(g),j(b,l),j($,A(ue,{get when(){return t()},get children(){var _=Po();return j(_,A(mi,{courseIdx:g}),null),j(_,A(Eo,{courseIdx:g}),null),j(_,A(Co,{courseIdx:g}),null),_}}),null),Y(()=>Ne($,s()===g?"selected":"")),$})()),h),p.$$click=()=>{r("/course/"+o.courses.length)},j(h,A(ue,{get when(){return t()},get children(){var l=Po();return j(l,A(id,{}),null),j(l,A(dd,{}),null),j(l,A(Eo,{get courseIdx(){return kn(o).length}}),null),j(l,A(Co,{get courseIdx(){return kn(o).length}}),null),l}}),null),y.$$click=()=>n(!t()),j(m,()=>gi.version,null),Y(()=>Ne(u,"course-menu "+(t()?"editing":""))),c}})};ae(["click"]);var pd=M("<span contenteditable>");function Un(e){let t,n=e.value;const r=o=>o.replace(/[\r\n]+/g,"").trim();return me(()=>{t&&document.activeElement!==t&&(t.innerText=e.value)}),(()=>{var o=pd();return o.addEventListener("blur",s=>{const a=r(s.currentTarget.innerText);a!==e.value&&e.onChange(a)}),o.$$keydown=s=>{const a=s.currentTarget;s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),a.blur()):s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),a.innerText=n,a.blur())},o.addEventListener("focus",()=>{n=e.value}),ot(s=>t=s,o),Y(s=>{var a=e.placeholder,i=`${e.class??""} ${e.value.trim()===""?"placeholder":""}`;return a!==s.e&&te(o,"aria-placeholder",s.e=a),i!==s.t&&Ne(o,s.t=i),s},{e:void 0,t:void 0}),o})()}ae(["keydown"]);var yd=M('<button class=add-card title="Add a new card to this lesson"><span class=utf8-icon-add>'),vd=M("<div class=card-class-picker><button class=delete-button><span class=utf8-icon-close>"),$d=M("<div class=add-card>"),_d=M("<p>Loading..."),wd=M("<button>");function bd(e){const[t]=ve(ye),n=je(),r=Pe(),[o,s]=H(!1),a=i=>{const c=t();if(!c)return;const d=Number(n.courseIdx),u=c.getLessons();if(!Array.isArray(u)||e.lessonIdx<0||e.lessonIdx>=u.length){console.error("Invalid lesson index or malformed lessons:",u,e.lessonIdx);return}const h=_c(i),p=u.map((w,y)=>y===e.lessonIdx?{...w,cards:[...w.cards,h]}:w);c.setLessons(p);const v=p[e.lessonIdx]?.cards?.length-1;if(v==null||v<0){console.error("Failed to calculate newCardIdx");return}r(`/editor/${d}/${e.lessonIdx}/${v}`)};return A(ue,{get when(){return!t.loading},get fallback(){return _d()},get children(){var i=$d();return j(i,A(ue,{get when(){return!o()},get children(){var c=yd();return c.$$click=()=>s(!0),c}}),null),j(i,A(ue,{get when(){return o()},get children(){var c=vd(),d=c.firstChild;return d.$$click=()=>s(!1),j(c,A(it,{each:wc,children:u=>(()=>{var h=wd();return h.$$click=()=>{a(u),s(!1)},j(h,u),h})()}),null),c}}),null),i}})}ae(["click"]);var Sd=M('<button class="large-icon-button icon-up-fat"title="Add a new lesson above this">'),Cd=M('<button class="large-icon-button icon-down-fat"title="Add a new lesson beneath this">'),Ed=M("<aside class=add-lesson-overlay>"),Pd=M('<div class=add-lesson-button-component><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course">'),kd=M("<p>Loading...");function Od(e){const[t]=ve(ye),[n,r]=H(!1),o=s=>{s.target.closest(".add-lesson-button-component")||r(!1)};return document.addEventListener("click",o),Ye(()=>document.removeEventListener("click",o)),A(ue,{get when(){return!t.loading},get fallback(){return kd()},get children(){var s=Pd(),a=s.firstChild;return a.$$click=()=>r(i=>!i),j(s,A(ue,{get when(){return n()},get children(){var i=Ed();return j(i,A(ue,{get when(){return e.above||!e.above&&!e.below},get children(){var c=Sd();return c.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)-1),r(!1)},c}}),null),j(i,A(ue,{get when(){return e.below||!e.above&&!e.below},get children(){var c=Cd();return c.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)+1),r(!1)},c}}),null),i}}),null),s}})}ae(["click"]);var Rd=M('<div class=card-holder><div class="vertical-controls top-controls"><button title="Move up to the previous lesson"class="move-card-button icon-up-fat"></button></div><div class=horizontal-controls><button title="Swap with the card on the left"class="move-card-button icon-left-fat"></button><div class=card-overlay-wrapper><div class=card-overlay><button title=Delete class="control small-control"><span class=icon-trash></span></button><button title=Edit class=control><span class=icon-pencil></span></button></div></div><button title="Swap with the card to the right"class="move-card-button icon-right-fat"></button></div><div class="vertical-controls bottom-controls"><button title="Move to the next lesson"class="move-card-button icon-down-fat">'),Nd=M("<p>Loading...?!");function Id(e){const[t]=ve(ye),{showConfirm:n}=Gn(),{t:r}=_e(),o=Pe(),s=je(),a=u=>({...u,cards:[...u.cards]}),i=()=>{t.loading||n(r("confirm_delete_card"),()=>t().deleteCard(Number(e.lessonIdx),Number(e.cardIdx)))},c=(u,h,p)=>{const w=[...t().getLessons()],y=a(w[u]),f=[...y.cards],m=h+p;if(m<0||m>=f.length)return;const[l]=f.splice(h,1);f.splice(m,0,l),y.cards=f,w[u]=y,t().setLessons(w)},d=(u,h,p)=>{if(t.loading)return"Loading...";const v=t().getLessons(),w=u+p;if(w<0||w>=v.length||h<0||h>=v[u].cards.length)return;const y=[...v],f=a(y[u]),m=a(y[w]),l=[...f.cards],g=[...m.cards],[$]=l.splice(h,1);g.push($),f.cards=l,m.cards=g,y[u]=f,y[w]=m,t().setLessons(y)};return A(ue,{get when(){return!t.loading},get fallback(){return Nd()},get children(){var u=Rd(),h=u.firstChild,p=h.firstChild,v=h.nextSibling,w=v.firstChild,y=w.nextSibling,f=y.firstChild,m=f.firstChild,l=m.nextSibling,g=y.nextSibling,$=v.nextSibling,b=$.firstChild;return p.$$click=()=>d(e.lessonIdx,e.cardIdx,-1),w.$$click=()=>c(e.lessonIdx,e.cardIdx,-1),j(y,A(si,{tabindex:-1,get card(){return e.card},get lesson(){return e.lesson},ondblclick:()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`)}),f),m.$$click=()=>i(),l.$$click=()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`),g.$$click=()=>c(e.lessonIdx,e.cardIdx,1),b.$$click=()=>d(e.lessonIdx,e.cardIdx,1),Y(_=>{var C=e.lessonIdx===0,k=e.cardIdx===0,P=e.cardIdx===e.lesson.cards.length-1,L=e.lessonIdx===t().getLessons().length-1;return C!==_.e&&(p.disabled=_.e=C),k!==_.t&&(w.disabled=_.t=k),P!==_.a&&(g.disabled=_.a=P),L!==_.o&&(b.disabled=_.o=L),_},{e:void 0,t:void 0,a:void 0,o:void 0}),u}})}ae(["click"]);var Ld=M('<article class="card no-set-height no-lessons"><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course"></button><p>Click above to create your first lesson</p><p>Click titles and descriptions to edit them'),Ad=M("<p>..."),jd=M("<section class=lesson><header><h3><span>: &nbsp;</span></h3><h4></h4></header><div class=cards>"),Td=M("<div class=card-holder>");function xd(){const[e]=ve(ye),{t}=_e();me(()=>{document.body.classList.add("editing-card"),Ye(()=>{document.body.classList.remove("editing-card")})});const n=(r,o)=>{const s=[...e().getLessons()];s[r]=o(s[r]),e().setLessons(s)};return A(ue,{get when(){return e()},get fallback(){return(()=>{var r=Ad(),o=r.firstChild;return j(r,()=>t("loading"),o),r})()},get children(){return[B(()=>e().getLessons().map((r,o)=>(()=>{var s=jd(),a=s.firstChild,i=a.firstChild,c=i.firstChild,d=c.firstChild,u=i.nextSibling,h=a.nextSibling;return te(s,"id",`lesson-${o}`),j(c,o+1,d),j(c,A(Un,{get value(){return r.title},onChange:p=>n(o,v=>({...v,title:p}))}),null),j(i,A(Od,{lessonIdx:o}),null),j(u,A(Un,{get value(){return r.description??""},onChange:p=>n(o,v=>({...v,description:p}))})),j(h,()=>r.cards.map((p,v)=>(()=>{var w=Td();return j(w,A(Id,{lesson:r,lessonIdx:o,card:p,cardIdx:v})),w})()),null),j(h,A(bd,{lessonIdx:o}),null),s})())),A(ue,{get when(){return e().getLessons().length===0},get children(){var r=Ld(),o=r.firstChild;return o.$$click=()=>e()?.addLesson(0),r}})]}})}ae(["click"]);var qd=M('<button class="large-icon-button icon-trash">');function Dd(e){const[t]=ve(ye),{t:n}=_e(),r=Pe(),{showConfirm:o}=Gn(),s=async()=>{try{await t().deleteCourse(e.courseIdx),r("/")}catch(i){console.error("Failed to delete course:",i)}},a=async()=>{if(e.courseIdx==null){console.warn("No course selected.");return}t.loading||o(n("confirm_delete_course"),s)};return(()=>{var i=qd();return i.$$click=a,Y(()=>te(i,"title",n("delete_course"))),i})()}ae(["click"]);var Md=M("<p>..."),Vd=M("<nav class=coourse-action-buttons>"),Fd=M("<article class=course-editor role=dialog aria-modal=true><header><h2>:&nbsp;<q></q></h2><h3><q>"),Ud=M("<nav class=lesson-pager>"),Kd=M("<button class=pager-link>: ");function zd(){const[e]=ve(ye),{t}=_e(),n=Pe(),r=je(),{config:o}=_t();return me(()=>{console.log("editor course idx:",r.courseIdx)}),me(()=>{document.body.classList.add("editing-card"),Ye(()=>{document.body.classList.remove("editing-card")})}),A(ue,{get when(){return e()},get fallback(){return(()=>{var s=Md(),a=s.firstChild;return j(s,()=>t("loading"),a),s})()},children:s=>{const a=s().getLessons();return(()=>{var i=Fd(),c=i.firstChild,d=c.firstChild,u=d.firstChild,h=u.nextSibling,p=d.nextSibling,v=p.firstChild;return j(d,()=>t("course"),u),j(h,A(Un,{get value(){return s().getTitle()??""},onChange:w=>s().setTitle(w)})),j(d,A(ue,{get when(){return Number(r.courseIdx)<o.courses.length},get children(){var w=Vd();return j(w,A(Dd,{get courseIdx(){return Number(r.courseIdx)}})),w}}),null),j(v,A(Un,{get value(){return s().getDescription()??""},onChange:w=>s().setDescription(w)})),j(c,(()=>{var w=B(()=>a.length>1);return()=>w()&&(()=>{var y=Ud();return j(y,()=>a.map((f,m)=>(()=>{var l=Kd(),g=l.firstChild;return l.$$click=()=>n(`#lesson-${m}`),j(l,m+1,g),j(l,()=>f.title,null),Y(()=>te(l,"aria-label",`Go to lesson ${m+1}: ${f.title}`)),l})())),y})()})(),null),j(i,A(xd,{}),null),i})()}})}ae(["click"]);var Hd=M("<h1>The specified resource is unavailable.");const Bd=()=>[A(Re,{path:"/editor/:courseIdx/:lessonIdx/:cardIdx",component:Vu}),A(Re,{path:"/editor/:courseIdx?",component:zd}),A(Re,{path:"/course/:courseIdx",component:iu,get children(){return[A(Re,{path:"/",component:bu}),A(Re,{path:":lessonIdx",component:So}),A(Re,{path:":lessonIdx/intro",component:So}),A(Re,{path:":lessonIdx/in-progress",component:Wu}),A(Re,{path:":lessonIdx/completed",component:Hu}),A(Re,{path:"finished",component:cu})]}}),A(Re,{path:"/editor",component:()=>A(vr,{href:"/menu"})}),A(Re,{path:"/course",component:()=>A(vr,{href:"/menu"})}),A(Re,{path:"/menu",component:gd}),A(Re,{path:"/",component:()=>A(vr,{href:"/menu"})}),A(Re,{path:"*",component:()=>Hd()})],Wd=gi.homepage,pi=()=>new URL(Wd).pathname.replace(/\/?$/,"");var Jd=M('<button class="hamburger-button large-icon-button"aria-label="Toggle menu"><span>');const Gd=()=>{const e=xr(),t=Pe(),[n,r]=H("/"),o=pi(),s=()=>e.pathname.replace(o,"")||"/",a=()=>/\/menu(\/|$)/.test(e.pathname),i=()=>{a()?n()===s()?t("/"):window.history.back():(r(s()),t("/menu"))};return me(()=>{a()?document.body.classList.add("menu-shown"):document.body.classList.remove("menu-shown")}),(()=>{var c=Jd(),d=c.firstChild;return c.$$click=i,Y(()=>Ne(d,`utf8-icon-${a()?"close":"menu"}`)),c})()};ae(["click"]);var Qd=M("<p>Loading..."),Xd=M("<header class=header-component><aside class=header-progress><progress class=course-progress></progress></aside><div class=header-text><h1>");const Yd=()=>{const{t:e}=_e(),{config:t}=_t(),n=je(),r=Ge(Number(n.courseIdx||-1)),[o]=ve(ye);return A(ue,{get when(){return o()},get fallback(){return Qd()},children:s=>{const a=r.getTotalQuestionsAnswered(),i=s().getTotalLessonsCount();return(()=>{var c=Xd(),d=c.firstChild,u=d.firstChild,h=d.nextSibling,p=h.firstChild;return u.value=a,te(u,"max",i),j(p,()=>t.appTitle),j(h,A(Gd,{}),null),Y(v=>{var w=e("course_progress"),y=`${e("all_lessons")} ${a+1} / ${i}`,f=t.targetLanguage;return w!==v.e&&te(u,"aria-label",v.e=w),y!==v.t&&te(u,"title",v.t=y),f!==v.a&&te(p,"lang",v.a=f),v},{e:void 0,t:void 0,a:void 0}),c})()}})},ko=new Set;function Zd(){const[e]=ve(ye),t=je();return me(async()=>{if(e.loading)return;const n=t.courseIdx;if(!n)return;const r=Number(n);!isNaN(r)&&!ko.has(n)&&(ko.add(n),await e()?.loadCourseFromFile(r),console.log("Loaded course by route"))}),null}var ef=M("<main id=main>");const tf=e=>{const t=pi();return A(su,{base:t,root:r=>A(Vl,{get config(){return e.config},get children(){return[A(Zd,{}),A(ya,{get children(){return A(Dl,{get children(){var o=ef();return j(o,A(Yd,{}),null),j(o,()=>r.children,null),o}})}})]}}),get children(){return A(Bd,{})}})},nf=async()=>{try{return await Do()}catch(e){return console.error("Error loading configuration:",e),null}},rf=async()=>{const e=await nf();if(!e)throw new Error("Failed to load config. App will not start.");await Promise.allSettled([ye(),pa(e)]);const t=A(tf,{config:e}),n=document.getElementById("root");n?(n.innerHTML="",zi(()=>t,n)):pt(()=>t)};await rf();

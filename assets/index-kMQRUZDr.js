(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const $a=!0,ba=(e,t)=>e===t,Ve=Symbol("solid-proxy"),_a=typeof Proxy=="function",_r=Symbol("solid-track"),wa=Symbol("solid-dev-component"),Nn={equals:ba};let Oo=jo;const Be=1,In=2,Sa={},er={};var oe=null;let tr=null,Ca=null,he=null,Ee=null,We=null,zn=0;const Ea={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function pt(e,t){const n=he,r=oe,o=e.length===0,s=t===void 0?r:t,a=o?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=o?()=>e(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>e(()=>be(()=>Ot(a)));oe=a,he=null;try{return Fe(i,!0)}finally{he=n,oe=r}}function B(e,t){t=t?Object.assign({},Nn,t):Nn;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0};t.name&&(n.name=t.name),t.internal?n.internal=!0:Lo(n);const r=o=>(typeof o=="function"&&(o=o(n.value)),Ir(n,o));return[Ao.bind(n),r]}function Pa(e,t,n){const r=jt(e,t,!0,Be,n);it(r)}function Z(e,t,n){const r=jt(e,t,!1,Be,n);it(r)}function me(e,t,n){Oo=ja;const r=jt(e,t,!1,Be,n);r.user=!0,We?We.push(r):it(r)}function H(e,t,n){n=n?Object.assign({},Nn,n):Nn;const r=jt(e,t,!0,0,n);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,it(r),Ao.bind(r)}function ka(e){return e&&typeof e=="object"&&"then"in e}function pe(e,t,n){let r,o,s;r=!0,o=e,s={};let a=null,i=er,l=!1,d="initialValue"in s,c=typeof r=="function"&&H(r);const h=new Set,[g,y]=(s.storage||B)(s.initialValue),[_,v]=B(void 0),[f,m]=B(void 0,{equals:!1}),[u,p]=B(d?"ready":"unresolved");function b(P,T,R,N){return a===P&&(a=null,N!==void 0&&(d=!0),(P===i||T===i)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(N,{value:T})),i=er,$(T,R)),T}function $(P,T){Fe(()=>{T===void 0&&y(()=>P),p(T!==void 0?"errored":d?"ready":"unresolved"),v(T);for(const R of h.keys())R.decrement();h.clear()},!1)}function w(){const P=Ia,T=g(),R=_();if(R!==void 0&&!a)throw R;return he&&he.user,T}function C(P=!0){if(P!==!1&&l)return;l=!1;const T=c?c():r;if(T==null||T===!1){b(a,be(g));return}const R=i!==er?i:be(()=>o(T,{value:g(),refetching:P}));return ka(R)?(a=R,"value"in R?(R.status==="success"?b(a,R.value,void 0,T):b(a,void 0,Sr(R.value),T),R):(l=!0,queueMicrotask(()=>l=!1),Fe(()=>{p(d?"refreshing":"pending"),m()},!1),R.then(N=>b(R,N,void 0,T),N=>b(R,void 0,Sr(N),T)))):(b(a,R,void 0,T),R)}return Object.defineProperties(w,{state:{get:()=>u()},error:{get:()=>_()},loading:{get(){const P=u();return P==="pending"||P==="refreshing"}},latest:{get(){if(!d)return w();const P=_();if(P&&!a)throw P;return g()}}}),c?Pa(()=>C(!1)):C(!1),[w,{refetch:C,mutate:y}]}function Ro(e){return Fe(e,!1)}function be(e){if(he===null)return e();const t=he;he=null;try{return e()}finally{he=t}}function Nr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return a=>{let i;if(r){i=Array(e.length);for(let d=0;d<e.length;d++)i[d]=e[d]()}else i=e();if(s)return s=!1,a;const l=be(()=>t(i,o,a));return o=i,l}}function Oa(e){me(()=>be(e))}function Ge(e){return oe===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):oe.cleanups===null?oe.cleanups=[e]:oe.cleanups.push(e),e}function wr(){return he}function No(){return oe}function Io(e,t){const n=oe,r=he;oe=e,he=null;try{return Fe(t,!0)}catch(o){Lr(o)}finally{oe=n,he=r}}function Ra(e){const t=he,n=oe;return Promise.resolve().then(()=>{he=t,oe=n;let r;return Fe(e,!1),he=oe=null,r?r.done:void 0})}const[pf,yf]=B(!1);function Na(e,t){const n=jt(()=>be(()=>(Object.assign(e,{[wa]:!0}),e(t))),void 0,!0,0);return n.props=t,n.observers=null,n.observerSlots=null,n.name=e.name,n.component=e,it(n),n.tValue!==void 0?n.tValue:n.value}function Lo(e){oe&&(oe.sourceMap?oe.sourceMap.push(e):oe.sourceMap=[e],e.graph=oe)}function Lt(e,t){const n=Symbol("context");return{id:n,Provider:Ta(n,t),defaultValue:e}}function At(e){let t;return oe&&oe.context&&(t=oe.context[e.id])!==void 0?t:e.defaultValue}function $t(e){const t=H(e),n=H(()=>Cr(t()),void 0,{name:"children"});return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Ia;function Ao(){if(this.sources&&this.state)if(this.state===Be)it(this);else{const e=Ee;Ee=null,Fe(()=>An(this),!1),Ee=e}if(he){const e=this.observers?this.observers.length:0;he.sources?(he.sources.push(this),he.sourceSlots.push(e)):(he.sources=[this],he.sourceSlots=[e]),this.observers?(this.observers.push(he),this.observerSlots.push(he.sources.length-1)):(this.observers=[he],this.observerSlots=[he.sources.length-1])}return this.value}function Ir(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],a=tr&&tr.running;a&&tr.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Ee.push(s):We.push(s),s.observers&&To(s)),a||(s.state=Be)}if(Ee.length>1e6)throw Ee=[],$a?new Error("Potential Infinite Loop Detected."):new Error},!1)),t}function it(e){if(!e.fn)return;Ot(e);const t=zn;La(e,e.value,t)}function La(e,t,n){let r;const o=oe,s=he;he=oe=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=Be,e.owned&&e.owned.forEach(Ot),e.owned=null),e.updatedAt=n+1,Lr(a)}finally{he=s,oe=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ir(e,r):e.value=r,e.updatedAt=n)}function jt(e,t,n,r=Be,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:oe,context:oe?oe.context:null,pure:n};return oe===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):oe!==Sa&&(oe.owned?oe.owned.push(s):oe.owned=[s]),o&&o.name&&(s.name=o.name),s}function Ln(e){if(e.state===0)return;if(e.state===In)return An(e);if(e.suspense&&be(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<zn);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Be)it(e);else if(e.state===In){const r=Ee;Ee=null,Fe(()=>An(e,t[0]),!1),Ee=r}}function Fe(e,t){if(Ee)return e();let n=!1;t||(Ee=[]),We?n=!0:We=[],zn++;try{const r=e();return Aa(n),r}catch(r){n||(We=null),Ee=null,Lr(r)}}function Aa(e){if(Ee&&(jo(Ee),Ee=null),e)return;const t=We;We=null,t.length&&Fe(()=>Oo(t),!1)}function jo(e){for(let t=0;t<e.length;t++)Ln(e[t])}function ja(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ln(r)}for(t=0;t<n;t++)Ln(e[t])}function An(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===Be?r!==t&&(!r.updatedAt||r.updatedAt<zn)&&Ln(r):o===In&&An(r,t)}}}function To(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=In,n.pure?Ee.push(n):We.push(n),n.observers&&To(n))}}function Ot(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),a=n.observerSlots.pop();r<o.length&&(s.sourceSlots[a]=r,o[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ot(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ot(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,delete e.sourceMap}function Sr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Lr(e,t=oe){throw Sr(e)}function Cr(e){if(typeof e=="function"&&!e.length)return Cr(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Cr(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ta(e,t){return function(r){let o;return Z(()=>o=be(()=>(oe.context={...oe.context,[e]:r.value},$t(()=>r.children))),void 0,t),o}}const xa=Symbol("fallback");function Fr(e){for(let t=0;t<e.length;t++)e[t]()}function qa(e,t,n={}){let r=[],o=[],s=[],a=0,i=t.length>1?[]:null;return Ge(()=>Fr(s)),()=>{let l=e()||[],d=l.length,c,h;return l[_r],be(()=>{let y,_,v,f,m,u,p,b,$;if(d===0)a!==0&&(Fr(s),s=[],r=[],o=[],a=0,i&&(i=[])),n.fallback&&(r=[xa],o[0]=pt(w=>(s[0]=w,n.fallback())),a=1);else if(a===0){for(o=new Array(d),h=0;h<d;h++)r[h]=l[h],o[h]=pt(g);a=d}else{for(v=new Array(d),f=new Array(d),i&&(m=new Array(d)),u=0,p=Math.min(a,d);u<p&&r[u]===l[u];u++);for(p=a-1,b=d-1;p>=u&&b>=u&&r[p]===l[b];p--,b--)v[b]=o[p],f[b]=s[p],i&&(m[b]=i[p]);for(y=new Map,_=new Array(b+1),h=b;h>=u;h--)$=l[h],c=y.get($),_[h]=c===void 0?-1:c,y.set($,h);for(c=u;c<=p;c++)$=r[c],h=y.get($),h!==void 0&&h!==-1?(v[h]=o[c],f[h]=s[c],i&&(m[h]=i[c]),h=_[h],y.set($,h)):s[c]();for(h=u;h<d;h++)h in v?(o[h]=v[h],s[h]=f[h],i&&(i[h]=m[h],i[h](h))):o[h]=pt(g);o=o.slice(0,a=d),r=l.slice(0)}return o});function g(y){if(s[h]=y,i){const[_,v]=B(h,{name:"index"});return i[h]=v,t(l[h],_)}return t(l[h])}}}function A(e,t){return Na(e,t||{})}function Dt(){return!0}const Da={get(e,t,n){return t===Ve?n:e.get(t)},has(e,t){return t===Ve?!0:e.has(t)},set:Dt,deleteProperty:Dt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Dt,deleteProperty:Dt}},ownKeys(e){return e.keys()}};function nr(e){return(e=typeof e=="function"?e():e)?e:{}}function Ma(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Va(...e){let t=!1;for(let a=0;a<e.length;a++){const i=e[a];t=t||!!i&&Ve in i,e[a]=typeof i=="function"?(t=!0,H(i)):i}if(_a&&t)return new Proxy({get(a){for(let i=e.length-1;i>=0;i--){const l=nr(e[i])[a];if(l!==void 0)return l}},has(a){for(let i=e.length-1;i>=0;i--)if(a in nr(e[i]))return!0;return!1},keys(){const a=[];for(let i=0;i<e.length;i++)a.push(...Object.keys(nr(e[i])));return[...new Set(a)]}},Da);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const i=e[a];if(!i)continue;const l=Object.getOwnPropertyNames(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(c==="__proto__"||c==="constructor")continue;const h=Object.getOwnPropertyDescriptor(i,c);if(!r[c])r[c]=h.get?{enumerable:!0,configurable:!0,get:Ma.bind(n[c]=[h.get.bind(i)])}:h.value!==void 0?h:void 0;else{const g=n[c];g&&(h.get?g.push(h.get.bind(i)):h.value!==void 0&&g.push(()=>h.value))}}}const o={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){const i=s[a],l=r[i];l&&l.get?Object.defineProperty(o,i,l):o[i]=l?l.value:void 0}return o}let Fa=0;function Ua(){return`cl-${Fa++}`}const xo=e=>`Attempting to access a stale value from <${e}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function at(e){const t="fallback"in e&&{fallback:()=>e.fallback};return H(qa(()=>e.each,e.children,t||void 0),void 0,{name:"value"})}function ae(e){const t=e.keyed,n=H(()=>e.when,void 0,{name:"condition value"}),r=t?n:H(n,void 0,{equals:(o,s)=>!o==!s,name:"condition"});return H(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?be(()=>s(t?o:()=>{if(!be(r))throw xo("Show");return n()})):s}return e.fallback},void 0,{name:"value"})}function Ka(e){const t=$t(()=>e.children),n=H(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let a=0;a<o.length;a++){const i=a,l=o[a],d=s,c=H(()=>d()?void 0:l.when,void 0,{name:"condition value"}),h=l.keyed?c:H(c,void 0,{equals:(g,y)=>!g==!y,name:"condition"});s=()=>d()||(h()?[i,c,l]:void 0)}return s});return H(()=>{const r=n()();if(!r)return e.fallback;const[o,s,a]=r,i=a.children;return typeof i=="function"&&i.length>0?be(()=>i(a.keyed?s():()=>{if(be(n)()?.[0]!==o)throw xo("Match");return s()})):i},void 0,{name:"eval conditions"})}function Ze(e){return e}const za={hooks:Ea,writeSignal:Ir,registerGraph:Lo};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);function Ha(e,t,n){let r=n.length,o=t.length,s=r,a=0,i=0,l=t[o-1].nextSibling,d=null;for(;a<o||i<s;){if(t[a]===n[i]){a++,i++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===a){const c=s<r?i?n[i-1].nextSibling:n[s-i]:l;for(;i<s;)e.insertBefore(n[i++],c)}else if(s===i)for(;a<o;)(!d||!d.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[i]===t[o-1]){const c=t[--o].nextSibling;e.insertBefore(n[i++],t[a++].nextSibling),e.insertBefore(n[--s],c),t[o]=n[s]}else{if(!d){d=new Map;let h=i;for(;h<s;)d.set(n[h],h++)}const c=d.get(t[a]);if(c!=null)if(i<c&&c<s){let h=a,g=1,y;for(;++h<o&&h<s&&!((y=d.get(t[h]))==null||y!==c+g);)g++;if(g>c-i){const _=t[a];for(;i<c;)e.insertBefore(n[i++],_)}else e.replaceChild(n[i++],t[a++])}else a++;else t[a++].remove()}}}const Ur="_$DX_DELEGATE";function Wa(e,t,n,r={}){if(!t)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let o;return pt(s=>{o=s,t===document?e():j(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function D(e,t,n,r){let o;const s=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},a=()=>(o||(o=s())).cloneNode(!0);return a.cloneNode=a,a}function le(e,t=window.document){const n=t[Ur]||(t[Ur]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Ba))}}function Y(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ke(e,t){t==null?e.removeAttribute("class"):e.className=t}function Rt(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function ot(e,t,n){return be(()=>e(t,n))}function j(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return jn(e,t,r,n);Z(o=>jn(e,t(),o,n),r)}function Ba(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),a=()=>{const l=t[n];if(l&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?l.call(t,d,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},i=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();s(l[0]);for(let d=0;d<l.length-2&&(t=l[d],!!a());d++){if(t._$host){t=t._$host,i();break}if(t.parentNode===o)break}}else i();s(r)}function jn(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(a){let i=n[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),n=ct(e,n,r,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=ct(e,n,r);else{if(s==="function")return Z(()=>{let i=t();for(;typeof i=="function";)i=i();n=jn(e,i,n,r)}),()=>n;if(Array.isArray(t)){const i=[],l=n&&Array.isArray(n);if(Er(i,t,n,o))return Z(()=>n=jn(e,i,n,r,!0)),()=>n;if(i.length===0){if(n=ct(e,n,r),a)return n}else l?n.length===0?Kr(e,i,r):Ha(e,n,i):(n&&ct(e),Kr(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=ct(e,n,r,t);ct(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Er(e,t,n,r){let o=!1;for(let s=0,a=t.length;s<a;s++){let i=t[s],l=n&&n[e.length],d;if(!(i==null||i===!0||i===!1))if((d=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))o=Er(e,i,l)||o;else if(d==="function")if(r){for(;typeof i=="function";)i=i();o=Er(e,Array.isArray(i)?i:[i],Array.isArray(l)?l:[l])||o}else e.push(i),o=!0;else{const c=String(i);l&&l.nodeType===3&&l.data===c?e.push(l):e.push(document.createTextNode(c))}}return o}function Kr(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ct(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const i=t[a];if(o!==i){const l=i.parentNode===e;!s&&!a?l?e.replaceChild(o,i):e.insertBefore(o,n):l&&i.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Ga=!1,Ja="modulepreload",Qa=function(e){return"/learning-oe-solidjs/"+e},zr={},rt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");o=Promise.allSettled(n.map(l=>{if(l=Qa(l),l in zr)return;zr[l]=!0;const d=l.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Ja,d||(h.as="script"),h.crossOrigin="",h.href=l,i&&h.setAttribute("nonce",i),document.head.appendChild(h),d)return new Promise((g,y)=>{h.addEventListener("load",g),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},Xa=["targetLanguage","defaultLanguage","appTitle","i18n"];let Mt;const qo=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;for(const n in t)t[n]&&typeof t[n]=="object"&&!Array.isArray(t[n])?((!e[n]||typeof e[n]!="object")&&(e[n]={}),qo(e[n],t[n])):e[n]=t[n];return e},Do=async()=>Mt||(Mt=(async()=>{let e,t;try{e=(await rt(async()=>{const{default:o}=await import("./default.config-C-p_k8Fb.js");return{default:o}},[])).default}catch{throw new Error("Default config file did not properly load")}try{t=(await rt(async()=>{const{default:o}=await import("./app.config-BgdfBHtv.js");return{default:o}},[])).default}catch{throw new Error('Config file "app.config.json" did not properly load')}const n=qo(e,t);let r=!0;if(Xa.forEach(o=>{n[o]||(console.warn(`app.config.json should contain the "${o}" key`),r=!1)}),!r)throw new Error("Invalid configuration file JSON.");return n})(),Mt),X=e=>typeof e=="string",_t=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},Hr=e=>e==null?"":""+e,Ya=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Za=/###/g,Wr=e=>e&&e.indexOf("###")>-1?e.replace(Za,"."):e,Br=e=>!e||X(e),Pt=(e,t,n)=>{const r=X(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(Br(e))return{};const s=Wr(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return Br(e)?{}:{obj:e,k:Wr(r[o])}},Gr=(e,t,n)=>{const{obj:r,k:o}=Pt(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],a=t.slice(0,t.length-1),i=Pt(e,a,Object);for(;i.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),i=Pt(e,a,Object),i?.obj&&typeof i.obj[`${i.k}.${s}`]<"u"&&(i.obj=void 0);i.obj[`${i.k}.${s}`]=n},ei=(e,t,n,r)=>{const{obj:o,k:s}=Pt(e,t,Object);o[s]=o[s]||[],o[s].push(n)},Tn=(e,t)=>{const{obj:n,k:r}=Pt(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ti=(e,t,n)=>{const r=Tn(e,n);return r!==void 0?r:Tn(t,n)},Mo=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?X(e[r])||e[r]instanceof String||X(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Mo(e[r],t[r],n):e[r]=t[r]);return e},ut=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ni={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ri=e=>X(e)?e.replace(/[&<>"'\/]/g,t=>ni[t]):e;class si{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const oi=[" ",",","?","!",";"],ai=new si(20),ii=(e,t,n)=>{t=t||"",n=n||"";const r=oi.filter(a=>t.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const o=ai.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!o.test(e);if(!s){const a=e.indexOf(n);a>0&&!o.test(e.substring(0,a))&&(s=!0)}return s},Pr=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let a,i="";for(let l=s;l<r.length;++l)if(l!==s&&(i+=n),i+=r[l],a=o[i],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;s+=l-s+1;break}o=a}return o},xn=e=>e?.replace("_","-"),li={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class qn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||li,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(X(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new qn(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new qn(this.logger,t)}}var De=new qn;class Hn{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[i,l]=a;for(let d=0;d<l;d++)i(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[i,l]=a;for(let d=0;d<l;d++)i.apply(i,[t,...r])})}}class Jr extends Hn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let i;t.indexOf(".")>-1?i=t.split("."):(i=[t,n],r&&(Array.isArray(r)?i.push(...r):X(r)&&s?i.push(...r.split(s)):i.push(r)));const l=Tn(this.data,i);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=i[0],n=i[1],r=i.slice(2).join(".")),l||!a||!X(r)?l:Pr(this.data?.[t]?.[n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=[t,n];r&&(i=i.concat(a?r.split(a):r)),t.indexOf(".")>-1&&(i=t.split("."),o=n,n=i[1]),this.addNamespaces(n),Gr(this.data,i,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},i=[t,n];t.indexOf(".")>-1&&(i=t.split("."),o=r,r=n,n=i[1]),this.addNamespaces(n);let l=Tn(this.data,i)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Mo(l,r,s):l={...l,...r},Gr(this.data,i,l),a.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var Vo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{t=this.processors[s]?.process(t,n,r,o)??t}),t}};const Qr={},Xr=e=>!X(e)&&typeof e!="boolean"&&typeof e!="number";class Dn extends Hn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ya(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=De.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=r&&t.indexOf(r)>-1,i=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ii(t,r,o);if(a&&!i){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:X(s)?[s]:s};const d=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),t=d.join(o)}return{key:t,namespaces:X(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:i}=this.extractFromKey(t[t.length-1],n),l=i[i.length-1],d=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode"){if(c){const N=n.nsSeparator||this.options.nsSeparator;return o?{res:`${l}${N}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${N}${a}`}return o?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:a}const h=this.resolve(t,n);let g=h?.res;const y=h?.usedKey||a,_=h?.exactUsedKey||a,v=["[object Number]","[object Function]","[object RegExp]"],f=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,u=n.count!==void 0&&!X(n.count),p=Dn.hasDefaultValue(n),b=u?this.pluralResolver.getSuffix(d,n.count,n):"",$=n.ordinal&&u?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",w=u&&!n.ordinal&&n.count===0,C=w&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${b}`]||n[`defaultValue${$}`]||n.defaultValue;let P=g;m&&!g&&p&&(P=C);const T=Xr(P),R=Object.prototype.toString.apply(P);if(m&&P&&T&&v.indexOf(R)<0&&!(X(f)&&Array.isArray(P))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,P,{...n,ns:i}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(h.res=N,h.usedParams=this.getUsedParamsDetails(n),h):N}if(s){const N=Array.isArray(P),M=N?[]:{},z=N?_:y;for(const U in P)if(Object.prototype.hasOwnProperty.call(P,U)){const W=`${z}${s}${U}`;p&&!g?M[U]=this.translate(W,{...n,defaultValue:Xr(C)?C[U]:void 0,joinArrays:!1,ns:i}):M[U]=this.translate(W,{...n,joinArrays:!1,ns:i}),M[U]===W&&(M[U]=P[U])}g=M}}else if(m&&X(f)&&Array.isArray(g))g=g.join(f),g&&(g=this.extendTranslation(g,t,n,r));else{let N=!1,M=!1;!this.isValidLookup(g)&&p&&(N=!0,g=C),this.isValidLookup(g)||(M=!0,g=a);const U=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&M?void 0:g,W=p&&C!==g&&this.options.updateMissing;if(M||N||W){if(this.logger.log(W?"updateKey":"missingKey",d,l,a,W?C:g),s){const ce=this.resolve(a,{...n,keySeparator:!1});ce&&ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ne=[];const ge=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ge&&ge[0])for(let ce=0;ce<ge.length;ce++)ne.push(ge[ce]);else this.options.saveMissingTo==="all"?ne=this.languageUtils.toResolveHierarchy(n.lng||this.language):ne.push(n.lng||this.language);const se=(ce,F,O)=>{const q=p&&O!==g?O:U;this.options.missingKeyHandler?this.options.missingKeyHandler(ce,l,F,q,W,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ce,l,F,q,W,n),this.emit("missingKey",ce,l,F,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?ne.forEach(ce=>{const F=this.pluralResolver.getSuffixes(ce,n);w&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(O=>{se([ce],a+O,n[`defaultValue${O}`]||C)})}):se(ne,a,C))}g=this.extendTranslation(g,t,n,h,r),M&&g===a&&this.options.appendNamespaceToMissingKey&&(g=`${l}:${a}`),(M||N)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,N?g:void 0))}return o?(h.res=g,h.usedParams=this.getUsedParamsDetails(n),h):g}extendTranslation(t,n,r,o,s){var a=this;if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=X(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(d){const g=t.match(this.interpolator.nestingRegexp);c=g&&g.length}let h=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,r.lng||this.language||o.usedLng,r),d){const g=t.match(this.interpolator.nestingRegexp),y=g&&g.length;c<y&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var g=arguments.length,y=new Array(g),_=0;_<g;_++)y[_]=arguments[_];return s?.[0]===y[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${n[0]}`),null):a.translate(...y,n)},r)),r.interpolation&&this.interpolator.reset()}const i=r.postProcess||this.options.postProcess,l=X(i)?[i]:i;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=Vo.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,a,i;return X(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(l,n),c=d.key;o=c;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const g=n.count!==void 0&&!X(n.count),y=g&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(f=>{this.isValidLookup(r)||(i=f,!Qr[`${v[0]}-${f}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(i)&&(Qr[`${v[0]}-${f}`]=!0,this.logger.warn(`key "${o}" for languages "${v.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(m=>{if(this.isValidLookup(r))return;a=m;const u=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(u,c,m,f,n);else{let b;g&&(b=this.pluralResolver.getSuffix(m,n.count,n));const $=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(u.push(c+b),n.ordinal&&b.indexOf(w)===0&&u.push(c+b.replace(w,this.options.pluralSeparator)),y&&u.push(c+$)),_){const C=`${c}${this.options.contextSeparator}${n.context}`;u.push(C),g&&(u.push(C+b),n.ordinal&&b.indexOf(w)===0&&u.push(C+b.replace(w,this.options.pluralSeparator)),y&&u.push(C+$))}}let p;for(;p=u.pop();)this.isValidLookup(r)||(s=p,r=this.getResource(m,f,p,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:a,usedNS:i}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!X(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Yr{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=De.create("languageUtils")}getScriptPartFromCode(t){if(t=xn(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=xn(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(X(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),X(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return X(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):X(t)&&s(this.formatLanguageCode(t)),r.forEach(a=>{o.indexOf(a)<0&&s(this.formatLanguageCode(a))}),o}}const Zr={zero:0,one:1,two:2,few:3,many:4,other:5},es={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ci{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=De.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=xn(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),es;if(!t.match(/-|_/))return es;const l=this.languageUtils.getLanguagePartFromCode(t);a=this.getRule(l,n)}return this.pluralRulesCache[s]=a,a}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>Zr[o]-Zr[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const ts=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=ti(e,t,n);return!s&&o&&X(n)&&(s=Pr(e,n,r),s===void 0&&(s=Pr(t,n,r))),s},rr=e=>e.replace(/\$/g,"$$$$");class ui{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:a,suffix:i,suffixEscaped:l,formatSeparator:d,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:g,nestingPrefixEscaped:y,nestingSuffix:_,nestingSuffixEscaped:v,nestingOptionsSeparator:f,maxReplaces:m,alwaysFormat:u}=t.interpolation;this.escape=n!==void 0?n:ri,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ut(s):a||"{{",this.suffix=i?ut(i):l||"}}",this.formatSeparator=d||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=g?ut(g):y||ut("$t("),this.nestingSuffix=_?ut(_):v||ut(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=m||1e3,this.alwaysFormat=u!==void 0?u:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,a,i;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=y=>{if(y.indexOf(this.formatSeparator)<0){const m=ts(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...o,...n,interpolationkey:y}):m}const _=y.split(this.formatSeparator),v=_.shift().trim(),f=_.join(this.formatSeparator).trim();return this.format(ts(n,l,v,this.options.keySeparator,this.options.ignoreJSONStructure),f,r,{...o,...n,interpolationkey:v})};this.resetRegExp();const c=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>rr(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?rr(this.escape(y)):rr(y)}].forEach(y=>{for(i=0;s=y.regex.exec(t);){const _=s[1].trim();if(a=d(_),a===void 0)if(typeof c=="function"){const f=c(t,s,o);a=X(f)?f:""}else if(o&&Object.prototype.hasOwnProperty.call(o,_))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${t}`),a="";else!X(a)&&!this.useRawValueToEscape&&(a=Hr(a));const v=y.safeValue(a);if(t=t.replace(s[0],v),h?(y.regex.lastIndex+=a.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,i++,i>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,a;const i=(l,d)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let g=`{${h[1]}`;l=h[0],g=this.interpolate(g,a);const y=g.match(/'/g),_=g.match(/"/g);((y?.length??0)%2===0&&!_||_.length%2!==0)&&(g=g.replace(/'/g,'"'));try{a=JSON.parse(g),d&&(a={...d,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${c}${g}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;o=this.nestingRegexp.exec(t);){let l=[];a={...r},a=a.replace&&!X(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const c=o[1].split(this.formatSeparator).map(h=>h.trim());o[1]=c.shift(),l=c,d=!0}if(s=n(i.call(this,o[1].trim(),a),a),s&&o[0]===t&&!X(s))return s;X(s)||(s=Hr(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),d&&(s=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const di=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(a=>{if(a){const[i,...l]=a.split(":"),d=l.join(":").trim().replace(/^'+|'+$/g,""),c=i.trim();n[c]||(n[c]=d),d==="false"&&(n[c]=!1),d==="true"&&(n[c]=!0),isNaN(d)||(n[c]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},dt=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const a=r+JSON.stringify(s);let i=t[a];return i||(i=e(xn(r),o),t[a]=i),i(n)}};class fi{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=De.create("formatter"),this.options=t,this.formats={number:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:dt((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:dt((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:dt((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:dt((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=dt(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(i=>i.indexOf(")")>-1)){const i=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,i)].join(this.formatSeparator)}return s.reduce((i,l)=>{const{formatName:d,formatOptions:c}=di(l);if(this.formats[d]){let h=i;try{const g=o?.formatParams?.[o.interpolationkey]||{},y=g.locale||g.lng||o.locale||o.lng||r;h=this.formats[d](i,y,{...c,...o,...g})}catch(g){this.logger.warn(g)}return h}else this.logger.warn(`there was no format function for ${d}`);return i},t)}}const hi=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class mi extends Hn{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=De.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(t,n,r,o){const s={},a={},i={},l={};return t.forEach(d=>{let c=!0;n.forEach(h=>{const g=`${d}|${h}`;!r.reload&&this.store.hasResourceBundle(d,h)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?a[g]===void 0&&(a[g]=!0):(this.state[g]=1,c=!1,a[g]===void 0&&(a[g]=!0),s[g]===void 0&&(s[g]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(i[d]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const o=t.split("|"),s=o[0],a=o[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const i={};this.queue.forEach(l=>{ei(l.loaded,[s],a),hi(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(d=>{i[d]||(i[d]={});const c=l.loaded[d];c.length&&c.forEach(h=>{i[d][h]===void 0&&(i[d][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:a});return}this.readingCalls++;const i=(d,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&c&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,a)},s);return}a(d,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const d=l(t,n);d&&typeof d.then=="function"?d.then(c=>i(null,c)).catch(i):i(null,d)}catch(d){i(d)}return}return l(t,n,i)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();X(t)&&(t=this.languageUtils.toResolveHierarchy(t)),X(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(a,i)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,a),!a&&i&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,i),this.loaded(t,a,i)})}saveMissing(t,n,r,o,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const l={...a,isUpdate:s},d=this.backend.create.bind(this.backend);if(d.length<6)try{let c;d.length===5?c=d(t,n,r,o,l):c=d(t,n,r,o),c&&typeof c.then=="function"?c.then(h=>i(null,h)).catch(i):i(null,c)}catch(c){i(c)}else d(t,n,r,o,i,l)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const ns=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),X(e[1])&&(t.defaultValue=e[1]),X(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),rs=e=>(X(e.ns)&&(e.ns=[e.ns]),X(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),X(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Vt=()=>{},gi=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Nt extends Hn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=rs(t),this.services={},this.logger=De,this.modules={external:[]},gi(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(X(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=ns();this.options={...o,...this.options,...rs(n)},this.options.interpolation={...o.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?De.init(s(this.modules.logger),this.options):De.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=fi;const h=new Yr(this.options);this.store=new Jr(this.options.resources,this.options);const g=this.services;g.logger=De,g.resourceStore=this.store,g.languageUtils=h,g.pluralResolver=new ci(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(g.formatter=s(c),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new ui(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new mi(s(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(y){for(var _=arguments.length,v=new Array(_>1?_-1:0),f=1;f<_;f++)v[f-1]=arguments[f];t.emit(y,...v)}),this.modules.languageDetector&&(g.languageDetector=s(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=s(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Dn(this.services,this.options),this.translator.on("*",function(y){for(var _=arguments.length,v=new Array(_>1?_-1:0),f=1;f<_;f++)v[f-1]=arguments[f];t.emit(y,...v)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Vt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=_t(),d=()=>{const c=(h,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(g),r(h,g)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const o=X(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],a=i=>{if(!i||i==="cimode")return;this.services.languageUtils.toResolveHierarchy(i).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload?.forEach?.(i=>a(i)),this.services.backendConnector.load(s,this.options.ns,i=>{!i&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(i)})}else r(null)}reloadResources(t,n,r){const o=_t();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Vt),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Vo.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=_t();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},i=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=X(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,c=>{a(c,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(t),o}getFixedT(t,n,r){var o=this;const s=function(a,i){let l;if(typeof i!="object"){for(var d=arguments.length,c=new Array(d>2?d-2:0),h=2;h<d;h++)c[h-2]=arguments[h];l=o.options.overloadTranslationOptionHandler([a,i].concat(c))}else l={...i};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const g=o.options.keySeparator||".";let y;return l.keyPrefix&&Array.isArray(a)?y=a.map(_=>`${l.keyPrefix}${g}${_}`):y=l.keyPrefix?`${l.keyPrefix}${g}${a}`:a,o.t(y,l)};return X(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.translate(...n)}exists(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.translator?.exists(...n)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(i,l)=>{const d=this.services.backendConnector.state[`${i}|${l}`];return d===-1||d===0||d===2};if(n.precheck){const i=n.precheck(this,a);if(i!==void 0)return i}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,t)&&(!o||a(s,t)))}loadNamespaces(t,n){const r=_t();return this.options.ns?(X(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=_t();X(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=o.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Yr(ns());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Nt(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new Nt(o);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(i=>{s[i]=this[i]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const i=Object.keys(this.store.data).reduce((l,d)=>(l[d]={...this.store.data[d]},Object.keys(l[d]).reduce((c,h)=>(c[h]={...l[d][h]},c),{})),{});s.store=new Jr(i,o),s.services.resourceStore=s.store}return s.translator=new Dn(s.services,o),s.translator.on("*",function(i){for(var l=arguments.length,d=new Array(l>1?l-1:0),c=1;c<l;c++)d[c-1]=arguments[c];s.emit(i,...d)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=Nt.createInstance();ye.createInstance=Nt.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;var pi=D("<div>Loading i18n...");const yi={t:(...e)=>ye.t(...e),language:()=>ye.language,setLanguage:e=>ye.changeLanguage(e)},Fo=Lt(yi),vi=async e=>{const t=Object.fromEntries(Object.entries(e.i18n.availableLanguages).map(([n,r])=>[n,{translation:r}]));await ye.init({resources:t,lng:e.uiLanguage||e.targetLanguage||e.defaultLanguage,fallbackLng:e.defaultLanguage,interpolation:{escapeValue:!1}})},$i=e=>{const t=$t(()=>e.children),[n,r]=B(ye.language),[o,s]=B(!1),a=ye.t;return me(()=>{r(ye.language),ye.on("languageChanged",r),s(!0)}),o()?A(Fo.Provider,{value:{t:a,language:n,setLanguage:r},get children(){return t()}}):pi()},ve=()=>{const e=At(Fo);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},kr=Symbol("store-raw"),yt=Symbol("store-node"),He=Symbol("store-has"),Uo=Symbol("store-self");function Ko(e){let t=e[Ve];if(!t&&(Object.defineProperty(e,Ve,{value:t=new Proxy(e,wi)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const a=n[o];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Xe(e){let t;return e!=null&&typeof e=="object"&&(e[Ve]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function vt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[kr])return n;if(!Xe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,i=e.length;a<i;a++)o=e[a],(r=vt(o,t))!==o&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let l=0,d=a.length;l<d;l++)s=a[l],!i[s].get&&(o=e[s],(r=vt(o,t))!==o&&(e[s]=r))}return e}function Mn(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function It(e,t,n){if(e[t])return e[t];const[r,o]=B(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function bi(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ve||t===yt||(delete n.value,delete n.writable,n.get=()=>e[Ve][t]),n}function zo(e){wr()&&It(Mn(e,yt),Uo)()}function _i(e){return zo(e),Reflect.ownKeys(e)}const wi={get(e,t,n){if(t===kr)return e;if(t===Ve)return n;if(t===_r)return zo(e),n;const r=Mn(e,yt),o=r[t];let s=o?o():e[t];if(t===yt||t===He||t==="__proto__")return s;if(!o){const a=Object.getOwnPropertyDescriptor(e,t);wr()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=It(r,t,s)())}return Xe(s)?Ko(s):s},has(e,t){return t===kr||t===Ve||t===_r||t===yt||t===He||t==="__proto__"?!0:(wr()&&It(Mn(e,He),t)(),t in e)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:_i,getOwnPropertyDescriptor:bi};function Ae(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[He]&&e[He][t]&&o!==void 0&&e[He][t].$()):(e[t]=n,e[He]&&e[He][t]&&o===void 0&&e[He][t].$());let a=Mn(e,yt),i;if((i=It(a,t,o))&&i.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(i=a[l])&&i.$();(i=It(a,"length",s))&&i.$(e.length)}(i=a[Uo])&&i.$()}function Ho(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ae(e,o,t[o])}}function Si(e,t){if(typeof t=="function"&&(t=t(e)),t=vt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Ae(e,n,o)}Ae(e,"length",r)}else Ho(e,t)}function Et(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const a=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Et(e,[r[l]].concat(t),n);return}else if(i&&a==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Et(e,[l].concat(t),n);return}else if(i&&a==="object"){const{from:l=0,to:d=e.length-1,by:c=1}=r;for(let h=l;h<=d;h+=c)Et(e,[h].concat(t),n);return}else if(t.length>1){Et(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=vt(s),r===void 0||Xe(o)&&Xe(s)&&!Array.isArray(s)?Ho(o,s):Ae(e,r,s))}function Wo(...[e,t]){const n=vt(e||{}),r=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const o=Ko(n);za.registerGraph({value:n,name:t&&t.name});function s(...a){Ro(()=>{r&&a.length===1?Si(n,a[0]):Et(n,a)})}return[o,s]}const Or=Symbol("store-root");function gt(e,t,n,r,o){const s=t[n];if(e===s)return;const a=Array.isArray(e);if(n!==Or&&(!Xe(e)||!Xe(s)||a!==Array.isArray(s)||o&&e[o]!==s[o])){Ae(t,n,e);return}if(a){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,c,h,g,y,_,v,f;for(h=0,g=Math.min(s.length,e.length);h<g&&(s[h]===e[h]||o&&s[h]&&e[h]&&s[h][o]===e[h][o]);h++)gt(e[h],s,h,r,o);const m=new Array(e.length),u=new Map;for(g=s.length-1,y=e.length-1;g>=h&&y>=h&&(s[g]===e[y]||o&&s[g]&&e[y]&&s[g][o]===e[y][o]);g--,y--)m[y]=s[g];if(h>y||h>g){for(c=h;c<=y;c++)Ae(s,c,e[c]);for(;c<e.length;c++)Ae(s,c,m[c]),gt(e[c],s,c,r,o);s.length>e.length&&Ae(s,"length",e.length);return}for(v=new Array(y+1),c=y;c>=h;c--)_=e[c],f=o&&_?_[o]:_,d=u.get(f),v[c]=d===void 0?-1:d,u.set(f,c);for(d=h;d<=g;d++)_=s[d],f=o&&_?_[o]:_,c=u.get(f),c!==void 0&&c!==-1&&(m[c]=s[d],c=v[c],u.set(f,c));for(c=h;c<e.length;c++)c in m?(Ae(s,c,m[c]),gt(e[c],s,c,r,o)):Ae(s,c,e[c])}else for(let d=0,c=e.length;d<c;d++)gt(e[d],s,d,r,o);s.length>e.length&&Ae(s,"length",e.length);return}const i=Object.keys(e);for(let d=0,c=i.length;d<c;d++)gt(e[i[d]],s,i[d],r,o);const l=Object.keys(s);for(let d=0,c=l.length;d<c;d++)e[l[d]]===void 0&&Ae(s,l[d],void 0)}function Ci(e,t={}){const{merge:n,key:r="id"}=t,o=vt(e);return s=>{if(!Xe(s)||!Xe(o))return o;const a=gt(o,{[Or]:s},Or,n,r);return a===void 0?s:a}}function Bo(e,t={}){const n=t.storage||globalThis.localStorage,r=t.name||`storage-${Ua()}`;if(!n)return[e[0],e[1],null];const o=t.storageOptions,s=t.serialize||JSON.stringify.bind(JSON),a=t.deserialize||JSON.parse.bind(JSON),i=n.getItem(r,o),l=typeof e[0]=="function"?c=>{try{const h=a(c);e[1](()=>h)}catch(h){console.warn(h)}}:c=>{try{const h=a(c);e[1](Ci(h))}catch(h){console.warn(h)}};let d=!0;if(i instanceof Promise?i.then(c=>d&&c&&l(c)):i&&l(i),typeof t.sync?.[0]=="function"){const c=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](h=>{h.key!==r||(h.url||globalThis.location.href)!==globalThis.location.href||h.newValue===s(be(c))||l(h.newValue)})}return[e[0],typeof e[0]=="function"?c=>{const h=e[1](c),g=c!=null?s(h):c;return t.sync?.[1](r,g),g!=null?n.setItem(r,g,o):n.removeItem(r,o),d=!1,h}:(...c)=>{e[1](...c);const h=s(be(()=>e[0]));t.sync?.[1](r,h),n.setItem(r,h,o),d=!1},i]}function Ei(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ft={exports:{}},sr={},Ue={},et={},or={},ar={},ir={},ss;function Vn(){return ss||(ss=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(u){if(super(),!e.IDENTIFIER.test(u))throw new Error("CodeGen: name must be a valid identifier");this.str=u}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(u){super(),this._items=typeof u=="string"?[u]:u}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const u=this._items[0];return u===""||u==='""'}get str(){var u;return(u=this._str)!==null&&u!==void 0?u:this._str=this._items.reduce((p,b)=>`${p}${b}`,"")}get names(){var u;return(u=this._names)!==null&&u!==void 0?u:this._names=this._items.reduce((p,b)=>(b instanceof n&&(p[b.str]=(p[b.str]||0)+1),p),{})}}e._Code=r,e.nil=new r("");function o(m,...u){const p=[m[0]];let b=0;for(;b<u.length;)i(p,u[b]),p.push(m[++b]);return new r(p)}e._=o;const s=new r("+");function a(m,...u){const p=[y(m[0])];let b=0;for(;b<u.length;)p.push(s),i(p,u[b]),p.push(s,y(m[++b]));return l(p),new r(p)}e.str=a;function i(m,u){u instanceof r?m.push(...u._items):u instanceof n?m.push(u):m.push(h(u))}e.addCodeArg=i;function l(m){let u=1;for(;u<m.length-1;){if(m[u]===s){const p=d(m[u-1],m[u+1]);if(p!==void 0){m.splice(u-1,3,p);continue}m[u++]="+"}u++}}function d(m,u){if(u==='""')return m;if(m==='""')return u;if(typeof m=="string")return u instanceof n||m[m.length-1]!=='"'?void 0:typeof u!="string"?`${m.slice(0,-1)}${u}"`:u[0]==='"'?m.slice(0,-1)+u.slice(1):void 0;if(typeof u=="string"&&u[0]==='"'&&!(m instanceof n))return`"${m}${u.slice(1)}`}function c(m,u){return u.emptyStr()?m:m.emptyStr()?u:a`${m}${u}`}e.strConcat=c;function h(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:y(Array.isArray(m)?m.join(","):m)}function g(m){return new r(y(m))}e.stringify=g;function y(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=y;function _(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new r(`.${m}`):o`[${m}]`}e.getProperty=_;function v(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new r(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=v;function f(m){return new r(m.toString())}e.regexpCode=f}(ir)),ir}var lr={},os;function as(){return os||(os=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Vn();class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:d,parent:c}={}){this._names={},this._prefixes=d,this._parent=c}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const c=this._names[d]||this._nameGroup(d);return`${d}${c.index++}`}_nameGroup(d){var c,h;if(!((h=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||h===void 0)&&h.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=o;class s extends t.Name{constructor(d,c){super(c),this.prefix=d}setValue(d,{property:c,itemIndex:h}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(c)}[${h}]`}}e.ValueScopeName=s;const a=(0,t._)`\n`;class i extends o{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?a:t.nil}}get(){return this._scope}name(d){return new s(d,this._newName(d))}value(d,c){var h;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(d),{prefix:y}=g,_=(h=c.key)!==null&&h!==void 0?h:c.ref;let v=this._values[y];if(v){const u=v.get(_);if(u)return u}else v=this._values[y]=new Map;v.set(_,g);const f=this._scope[y]||(this._scope[y]=[]),m=f.length;return f[m]=c.ref,g.setValue(c,{property:y,itemIndex:m}),g}getValue(d,c){const h=this._values[d];if(h)return h.get(c)}scopeRefs(d,c=this._values){return this._reduceValues(c,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,t._)`${d}${h.scopePath}`})}scopeCode(d=this._values,c,h){return this._reduceValues(d,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},c,h)}_reduceValues(d,c,h={},g){let y=t.nil;for(const _ in d){const v=d[_];if(!v)continue;const f=h[_]=h[_]||new Map;v.forEach(m=>{if(f.has(m))return;f.set(m,r.Started);let u=c(m);if(u){const p=this.opts.es5?e.varKinds.var:e.varKinds.const;y=(0,t._)`${y}${p} ${m} = ${u};${this.opts._n}`}else if(u=g?.(m))y=(0,t._)`${y}${u}${this.opts._n}`;else throw new n(m);f.set(m,r.Completed)})}return y}}e.ValueScope=i}(lr)),lr}var is;function re(){return is||(is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Vn(),n=as();var r=Vn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=as();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,E){return this}}class a extends s{constructor(S,E,x){super(),this.varKind=S,this.name=E,this.rhs=x}render({es5:S,_n:E}){const x=S?n.varKinds.var:this.varKind,G=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${G};`+E}optimizeNames(S,E){if(S[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,S,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends s{constructor(S,E,x){super(),this.lhs=S,this.rhs=E,this.sideEffects=x}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,E){if(!(this.lhs instanceof t.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,S,E),this}get names(){const S=this.lhs instanceof t.Name?{}:{...this.lhs.names};return z(S,this.rhs)}}class l extends i{constructor(S,E,x,G){super(S,x,G),this.op=E}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class d extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class c extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class h extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class g extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,E){return this.code=U(this.code,S,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class y extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((E,x)=>E+x.render(S),"")}optimizeNodes(){const{nodes:S}=this;let E=S.length;for(;E--;){const x=S[E].optimizeNodes();Array.isArray(x)?S.splice(E,1,...x):x?S[E]=x:S.splice(E,1)}return S.length>0?this:void 0}optimizeNames(S,E){const{nodes:x}=this;let G=x.length;for(;G--;){const Q=x[G];Q.optimizeNames(S,E)||(W(S,Q.names),x.splice(G,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((S,E)=>M(S,E.names),{})}}class _ extends y{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class v extends y{}class f extends _{}f.kind="else";class m extends _{constructor(S,E){super(E),this.condition=S}render(S){let E=`if(${this.condition})`+super.render(S);return this.else&&(E+="else "+this.else.render(S)),E}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let E=this.else;if(E){const x=E.optimizeNodes();E=this.else=Array.isArray(x)?new f(x):x}if(E)return S===!1?E instanceof m?E:E.nodes:this.nodes.length?this:new m(ne(S),E instanceof m?[E]:E.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,E){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(S,E),!!(super.optimizeNames(S,E)||this.else))return this.condition=U(this.condition,S,E),this}get names(){const S=super.names;return z(S,this.condition),this.else&&M(S,this.else.names),S}}m.kind="if";class u extends _{}u.kind="for";class p extends u{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iteration=U(this.iteration,S,E),this}get names(){return M(super.names,this.iteration.names)}}class b extends u{constructor(S,E,x,G){super(),this.varKind=S,this.name=E,this.from=x,this.to=G}render(S){const E=S.es5?n.varKinds.var:this.varKind,{name:x,from:G,to:Q}=this;return`for(${E} ${x}=${G}; ${x}<${Q}; ${x}++)`+super.render(S)}get names(){const S=z(super.names,this.from);return z(S,this.to)}}class $ extends u{constructor(S,E,x,G){super(),this.loop=S,this.varKind=E,this.name=x,this.iterable=G}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,E){if(super.optimizeNames(S,E))return this.iterable=U(this.iterable,S,E),this}get names(){return M(super.names,this.iterable.names)}}class w extends _{constructor(S,E,x){super(),this.name=S,this.args=E,this.async=x}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}w.kind="func";class C extends y{render(S){return"return "+super.render(S)}}C.kind="return";class P extends _{render(S){let E="try"+super.render(S);return this.catch&&(E+=this.catch.render(S)),this.finally&&(E+=this.finally.render(S)),E}optimizeNodes(){var S,E;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(S,E){var x,G;return super.optimizeNames(S,E),(x=this.catch)===null||x===void 0||x.optimizeNames(S,E),(G=this.finally)===null||G===void 0||G.optimizeNames(S,E),this}get names(){const S=super.names;return this.catch&&M(S,this.catch.names),this.finally&&M(S,this.finally.names),S}}class T extends _{constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}T.kind="catch";class R extends _{render(S){return"finally"+super.render(S)}}R.kind="finally";class N{constructor(S,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=S,this._scope=new n.Scope({parent:S}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,E){const x=this._extScope.value(S,E);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(S,E){return this._extScope.getValue(S,E)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,E,x,G){const Q=this._scope.toName(E);return x!==void 0&&G&&(this._constants[Q.str]=x),this._leafNode(new a(S,Q,x)),Q}const(S,E,x){return this._def(n.varKinds.const,S,E,x)}let(S,E,x){return this._def(n.varKinds.let,S,E,x)}var(S,E,x){return this._def(n.varKinds.var,S,E,x)}assign(S,E,x){return this._leafNode(new i(S,E,x))}add(S,E){return this._leafNode(new l(S,e.operators.ADD,E))}code(S){return typeof S=="function"?S():S!==t.nil&&this._leafNode(new g(S)),this}object(...S){const E=["{"];for(const[x,G]of S)E.length>1&&E.push(","),E.push(x),(x!==G||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,G));return E.push("}"),new t._Code(E)}if(S,E,x){if(this._blockNode(new m(S)),E&&x)this.code(E).else().code(x).endIf();else if(E)this.code(E).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new m(S))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(m,f)}_for(S,E){return this._blockNode(S),E&&this.code(E).endFor(),this}for(S,E){return this._for(new p(S),E)}forRange(S,E,x,G,Q=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(S);return this._for(new b(Q,de,E,x),()=>G(de))}forOf(S,E,x,G=n.varKinds.const){const Q=this._scope.toName(S);if(this.opts.es5){const de=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${de}.length`,ie=>{this.var(Q,(0,t._)`${de}[${ie}]`),x(Q)})}return this._for(new $("of",G,Q,E),()=>x(Q))}forIn(S,E,x,G=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,t._)`Object.keys(${E})`,x);const Q=this._scope.toName(S);return this._for(new $("in",G,Q,E),()=>x(Q))}endFor(){return this._endBlockNode(u)}label(S){return this._leafNode(new d(S))}break(S){return this._leafNode(new c(S))}return(S){const E=new C;if(this._blockNode(E),this.code(S),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,E,x){if(!E&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const G=new P;if(this._blockNode(G),this.code(S),E){const Q=this.name("e");this._currNode=G.catch=new T(Q),E(Q)}return x&&(this._currNode=G.finally=new R,this.code(x)),this._endBlockNode(T,R)}throw(S){return this._leafNode(new h(S))}block(S,E){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(E),this}endBlock(S){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-E;if(x<0||S!==void 0&&x!==S)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${S} expected`);return this._nodes.length=E,this}func(S,E=t.nil,x,G){return this._blockNode(new w(S,E,x)),G&&this.code(G).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,E){const x=this._currNode;if(x instanceof S||E&&x instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${S.kind}/${E.kind}`:S.kind}"`)}_elseNode(S){const E=this._currNode;if(!(E instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const E=this._nodes;E[E.length-1]=S}}e.CodeGen=N;function M(L,S){for(const E in S)L[E]=(L[E]||0)+(S[E]||0);return L}function z(L,S){return S instanceof t._CodeOrName?M(L,S.names):L}function U(L,S,E){if(L instanceof t.Name)return x(L);if(!G(L))return L;return new t._Code(L._items.reduce((Q,de)=>(de instanceof t.Name&&(de=x(de)),de instanceof t._Code?Q.push(...de._items):Q.push(de),Q),[]));function x(Q){const de=E[Q.str];return de===void 0||S[Q.str]!==1?Q:(delete S[Q.str],de)}function G(Q){return Q instanceof t._Code&&Q._items.some(de=>de instanceof t.Name&&S[de.str]===1&&E[de.str]!==void 0)}}function W(L,S){for(const E in S)L[E]=(L[E]||0)-(S[E]||0)}function ne(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${q(L)}`}e.not=ne;const ge=O(e.operators.AND);function se(...L){return L.reduce(ge)}e.and=se;const ce=O(e.operators.OR);function F(...L){return L.reduce(ce)}e.or=F;function O(L){return(S,E)=>S===t.nil?E:E===t.nil?S:(0,t._)`${q(S)} ${L} ${q(E)}`}function q(L){return L instanceof t.Name?L:(0,t._)`(${L})`}}(ar)),ar}var ee={},ls;function ue(){if(ls)return ee;ls=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.checkStrictMode=ee.getErrorPath=ee.Type=ee.useFunc=ee.setEvaluated=ee.evaluatedPropsToName=ee.mergeEvaluated=ee.eachItem=ee.unescapeJsonPointer=ee.escapeJsonPointer=ee.escapeFragment=ee.unescapeFragment=ee.schemaRefOrVal=ee.schemaHasRulesButRef=ee.schemaHasRules=ee.checkUnknownRules=ee.alwaysValidSchema=ee.toHash=void 0;const e=re(),t=Vn();function n($){const w={};for(const C of $)w[C]=!0;return w}ee.toHash=n;function r($,w){return typeof w=="boolean"?w:Object.keys(w).length===0?!0:(o($,w),!s(w,$.self.RULES.all))}ee.alwaysValidSchema=r;function o($,w=$.schema){const{opts:C,self:P}=$;if(!C.strictSchema||typeof w=="boolean")return;const T=P.RULES.keywords;for(const R in w)T[R]||b($,`unknown keyword: "${R}"`)}ee.checkUnknownRules=o;function s($,w){if(typeof $=="boolean")return!$;for(const C in $)if(w[C])return!0;return!1}ee.schemaHasRules=s;function a($,w){if(typeof $=="boolean")return!$;for(const C in $)if(C!=="$ref"&&w.all[C])return!0;return!1}ee.schemaHasRulesButRef=a;function i({topSchemaRef:$,schemaPath:w},C,P,T){if(!T){if(typeof C=="number"||typeof C=="boolean")return C;if(typeof C=="string")return(0,e._)`${C}`}return(0,e._)`${$}${w}${(0,e.getProperty)(P)}`}ee.schemaRefOrVal=i;function l($){return h(decodeURIComponent($))}ee.unescapeFragment=l;function d($){return encodeURIComponent(c($))}ee.escapeFragment=d;function c($){return typeof $=="number"?`${$}`:$.replace(/~/g,"~0").replace(/\//g,"~1")}ee.escapeJsonPointer=c;function h($){return $.replace(/~1/g,"/").replace(/~0/g,"~")}ee.unescapeJsonPointer=h;function g($,w){if(Array.isArray($))for(const C of $)w(C);else w($)}ee.eachItem=g;function y({mergeNames:$,mergeToName:w,mergeValues:C,resultToName:P}){return(T,R,N,M)=>{const z=N===void 0?R:N instanceof e.Name?(R instanceof e.Name?$(T,R,N):w(T,R,N),N):R instanceof e.Name?(w(T,N,R),R):C(R,N);return M===e.Name&&!(z instanceof e.Name)?P(T,z):z}}ee.mergeEvaluated={props:y({mergeNames:($,w,C)=>$.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>{$.if((0,e._)`${w} === true`,()=>$.assign(C,!0),()=>$.assign(C,(0,e._)`${C} || {}`).code((0,e._)`Object.assign(${C}, ${w})`))}),mergeToName:($,w,C)=>$.if((0,e._)`${C} !== true`,()=>{w===!0?$.assign(C,!0):($.assign(C,(0,e._)`${C} || {}`),v($,C,w))}),mergeValues:($,w)=>$===!0?!0:{...$,...w},resultToName:_}),items:y({mergeNames:($,w,C)=>$.if((0,e._)`${C} !== true && ${w} !== undefined`,()=>$.assign(C,(0,e._)`${w} === true ? true : ${C} > ${w} ? ${C} : ${w}`)),mergeToName:($,w,C)=>$.if((0,e._)`${C} !== true`,()=>$.assign(C,w===!0?!0:(0,e._)`${C} > ${w} ? ${C} : ${w}`)),mergeValues:($,w)=>$===!0?!0:Math.max($,w),resultToName:($,w)=>$.var("items",w)})};function _($,w){if(w===!0)return $.var("props",!0);const C=$.var("props",(0,e._)`{}`);return w!==void 0&&v($,C,w),C}ee.evaluatedPropsToName=_;function v($,w,C){Object.keys(C).forEach(P=>$.assign((0,e._)`${w}${(0,e.getProperty)(P)}`,!0))}ee.setEvaluated=v;const f={};function m($,w){return $.scopeValue("func",{ref:w,code:f[w.code]||(f[w.code]=new t._Code(w.code))})}ee.useFunc=m;var u;(function($){$[$.Num=0]="Num",$[$.Str=1]="Str"})(u||(ee.Type=u={}));function p($,w,C){if($ instanceof e.Name){const P=w===u.Num;return C?P?(0,e._)`"[" + ${$} + "]"`:(0,e._)`"['" + ${$} + "']"`:P?(0,e._)`"/" + ${$}`:(0,e._)`"/" + ${$}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return C?(0,e.getProperty)($).toString():"/"+c($)}ee.getErrorPath=p;function b($,w,C=$.opts.strictSchema){if(C){if(w=`strict mode: ${w}`,C===!0)throw new Error(w);$.self.logger.warn(w)}}return ee.checkStrictMode=b,ee}var Ut={},cs;function Ye(){if(cs)return Ut;cs=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e=re(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Ut.default=t,Ut}var us;function Wn(){return us||(us=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=re(),n=ue(),r=Ye();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:m})=>m?(0,t.str)`"${f}" keyword must be ${m} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function o(f,m=e.keywordError,u,p){const{it:b}=f,{gen:$,compositeRule:w,allErrors:C}=b,P=h(f,m,u);p??(w||C)?l($,P):d(b,(0,t._)`[${P}]`)}e.reportError=o;function s(f,m=e.keywordError,u){const{it:p}=f,{gen:b,compositeRule:$,allErrors:w}=p,C=h(f,m,u);l(b,C),$||w||d(p,r.default.vErrors)}e.reportExtraError=s;function a(f,m){f.assign(r.default.errors,m),f.if((0,t._)`${r.default.vErrors} !== null`,()=>f.if(m,()=>f.assign((0,t._)`${r.default.vErrors}.length`,m),()=>f.assign(r.default.vErrors,null)))}e.resetErrorsCount=a;function i({gen:f,keyword:m,schemaValue:u,data:p,errsCount:b,it:$}){if(b===void 0)throw new Error("ajv implementation error");const w=f.name("err");f.forRange("i",b,r.default.errors,C=>{f.const(w,(0,t._)`${r.default.vErrors}[${C}]`),f.if((0,t._)`${w}.instancePath === undefined`,()=>f.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,$.errorPath))),f.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${$.errSchemaPath}/${m}`),$.opts.verbose&&(f.assign((0,t._)`${w}.schema`,u),f.assign((0,t._)`${w}.data`,p))})}e.extendErrors=i;function l(f,m){const u=f.const("err",m);f.if((0,t._)`${r.default.vErrors} === null`,()=>f.assign(r.default.vErrors,(0,t._)`[${u}]`),(0,t._)`${r.default.vErrors}.push(${u})`),f.code((0,t._)`${r.default.errors}++`)}function d(f,m){const{gen:u,validateName:p,schemaEnv:b}=f;b.$async?u.throw((0,t._)`new ${f.ValidationError}(${m})`):(u.assign((0,t._)`${p}.errors`,m),u.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function h(f,m,u){const{createErrors:p}=f.it;return p===!1?(0,t._)`{}`:g(f,m,u)}function g(f,m,u={}){const{gen:p,it:b}=f,$=[y(b,u),_(f,u)];return v(f,m,$),p.object(...$)}function y({errorPath:f},{instancePath:m}){const u=m?(0,t.str)`${f}${(0,n.getErrorPath)(m,n.Type.Str)}`:f;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,u)]}function _({keyword:f,it:{errSchemaPath:m}},{schemaPath:u,parentSchema:p}){let b=p?m:(0,t.str)`${m}/${f}`;return u&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(u,n.Type.Str)}`),[c.schemaPath,b]}function v(f,{params:m,message:u},p){const{keyword:b,data:$,schemaValue:w,it:C}=f,{opts:P,propertyName:T,topSchemaRef:R,schemaPath:N}=C;p.push([c.keyword,b],[c.params,typeof m=="function"?m(f):m||(0,t._)`{}`]),P.messages&&p.push([c.message,typeof u=="function"?u(f):u]),P.verbose&&p.push([c.schema,w],[c.parentSchema,(0,t._)`${R}${N}`],[r.default.data,$]),T&&p.push([c.propertyName,T])}}(or)),or}var ds;function Pi(){if(ds)return et;ds=1,Object.defineProperty(et,"__esModule",{value:!0}),et.boolOrEmptySchema=et.topBoolOrEmptySchema=void 0;const e=Wn(),t=re(),n=Ye(),r={message:"boolean schema is false"};function o(i){const{gen:l,schema:d,validateName:c}=i;d===!1?a(i,!1):typeof d=="object"&&d.$async===!0?l.return(n.default.data):(l.assign((0,t._)`${c}.errors`,null),l.return(!0))}et.topBoolOrEmptySchema=o;function s(i,l){const{gen:d,schema:c}=i;c===!1?(d.var(l,!1),a(i)):d.var(l,!0)}et.boolOrEmptySchema=s;function a(i,l){const{gen:d,data:c}=i,h={gen:d,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:i};(0,e.reportError)(h,r,void 0,l)}return et}var Se={},tt={},fs;function Go(){if(fs)return tt;fs=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.getRules=tt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(o){return typeof o=="string"&&t.has(o)}tt.isJSONType=n;function r(){const o={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...o,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},o.number,o.string,o.array,o.object],post:{rules:[]},all:{},keywords:{}}}return tt.getRules=r,tt}var Ke={},hs;function Jo(){if(hs)return Ke;hs=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.shouldUseRule=Ke.shouldUseGroup=Ke.schemaHasRulesForType=void 0;function e({schema:r,self:o},s){const a=o.RULES.types[s];return a&&a!==!0&&t(r,a)}Ke.schemaHasRulesForType=e;function t(r,o){return o.rules.some(s=>n(r,s))}Ke.shouldUseGroup=t;function n(r,o){var s;return r[o.keyword]!==void 0||((s=o.definition.implements)===null||s===void 0?void 0:s.some(a=>r[a]!==void 0))}return Ke.shouldUseRule=n,Ke}var ms;function Fn(){if(ms)return Se;ms=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.reportTypeError=Se.checkDataTypes=Se.checkDataType=Se.coerceAndCheckDataType=Se.getJSONTypes=Se.getSchemaTypes=Se.DataType=void 0;const e=Go(),t=Jo(),n=Wn(),r=re(),o=ue();var s;(function(u){u[u.Correct=0]="Correct",u[u.Wrong=1]="Wrong"})(s||(Se.DataType=s={}));function a(u){const p=i(u.type);if(p.includes("null")){if(u.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!p.length&&u.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');u.nullable===!0&&p.push("null")}return p}Se.getSchemaTypes=a;function i(u){const p=Array.isArray(u)?u:u?[u]:[];if(p.every(e.isJSONType))return p;throw new Error("type must be JSONType or JSONType[]: "+p.join(","))}Se.getJSONTypes=i;function l(u,p){const{gen:b,data:$,opts:w}=u,C=c(p,w.coerceTypes),P=p.length>0&&!(C.length===0&&p.length===1&&(0,t.schemaHasRulesForType)(u,p[0]));if(P){const T=_(p,$,w.strictNumbers,s.Wrong);b.if(T,()=>{C.length?h(u,p,C):f(u)})}return P}Se.coerceAndCheckDataType=l;const d=new Set(["string","number","integer","boolean","null"]);function c(u,p){return p?u.filter(b=>d.has(b)||p==="array"&&b==="array"):[]}function h(u,p,b){const{gen:$,data:w,opts:C}=u,P=$.let("dataType",(0,r._)`typeof ${w}`),T=$.let("coerced",(0,r._)`undefined`);C.coerceTypes==="array"&&$.if((0,r._)`${P} == 'object' && Array.isArray(${w}) && ${w}.length == 1`,()=>$.assign(w,(0,r._)`${w}[0]`).assign(P,(0,r._)`typeof ${w}`).if(_(p,w,C.strictNumbers),()=>$.assign(T,w))),$.if((0,r._)`${T} !== undefined`);for(const N of b)(d.has(N)||N==="array"&&C.coerceTypes==="array")&&R(N);$.else(),f(u),$.endIf(),$.if((0,r._)`${T} !== undefined`,()=>{$.assign(w,T),g(u,T)});function R(N){switch(N){case"string":$.elseIf((0,r._)`${P} == "number" || ${P} == "boolean"`).assign(T,(0,r._)`"" + ${w}`).elseIf((0,r._)`${w} === null`).assign(T,(0,r._)`""`);return;case"number":$.elseIf((0,r._)`${P} == "boolean" || ${w} === null
              || (${P} == "string" && ${w} && ${w} == +${w})`).assign(T,(0,r._)`+${w}`);return;case"integer":$.elseIf((0,r._)`${P} === "boolean" || ${w} === null
              || (${P} === "string" && ${w} && ${w} == +${w} && !(${w} % 1))`).assign(T,(0,r._)`+${w}`);return;case"boolean":$.elseIf((0,r._)`${w} === "false" || ${w} === 0 || ${w} === null`).assign(T,!1).elseIf((0,r._)`${w} === "true" || ${w} === 1`).assign(T,!0);return;case"null":$.elseIf((0,r._)`${w} === "" || ${w} === 0 || ${w} === false`),$.assign(T,null);return;case"array":$.elseIf((0,r._)`${P} === "string" || ${P} === "number"
              || ${P} === "boolean" || ${w} === null`).assign(T,(0,r._)`[${w}]`)}}}function g({gen:u,parentData:p,parentDataProperty:b},$){u.if((0,r._)`${p} !== undefined`,()=>u.assign((0,r._)`${p}[${b}]`,$))}function y(u,p,b,$=s.Correct){const w=$===s.Correct?r.operators.EQ:r.operators.NEQ;let C;switch(u){case"null":return(0,r._)`${p} ${w} null`;case"array":C=(0,r._)`Array.isArray(${p})`;break;case"object":C=(0,r._)`${p} && typeof ${p} == "object" && !Array.isArray(${p})`;break;case"integer":C=P((0,r._)`!(${p} % 1) && !isNaN(${p})`);break;case"number":C=P();break;default:return(0,r._)`typeof ${p} ${w} ${u}`}return $===s.Correct?C:(0,r.not)(C);function P(T=r.nil){return(0,r.and)((0,r._)`typeof ${p} == "number"`,T,b?(0,r._)`isFinite(${p})`:r.nil)}}Se.checkDataType=y;function _(u,p,b,$){if(u.length===1)return y(u[0],p,b,$);let w;const C=(0,o.toHash)(u);if(C.array&&C.object){const P=(0,r._)`typeof ${p} != "object"`;w=C.null?P:(0,r._)`!${p} || ${P}`,delete C.null,delete C.array,delete C.object}else w=r.nil;C.number&&delete C.integer;for(const P in C)w=(0,r.and)(w,y(P,p,b,$));return w}Se.checkDataTypes=_;const v={message:({schema:u})=>`must be ${u}`,params:({schema:u,schemaValue:p})=>typeof u=="string"?(0,r._)`{type: ${u}}`:(0,r._)`{type: ${p}}`};function f(u){const p=m(u);(0,n.reportError)(p,v)}Se.reportTypeError=f;function m(u){const{gen:p,data:b,schema:$}=u,w=(0,o.schemaRefOrVal)(u,$,"type");return{gen:p,keyword:"type",data:b,schema:$.type,schemaCode:w,schemaValue:w,parentSchema:$,params:{},it:u}}return Se}var wt={},gs;function ki(){if(gs)return wt;gs=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.assignDefaults=void 0;const e=re(),t=ue();function n(o,s){const{properties:a,items:i}=o.schema;if(s==="object"&&a)for(const l in a)r(o,l,a[l].default);else s==="array"&&Array.isArray(i)&&i.forEach((l,d)=>r(o,d,l.default))}wt.assignDefaults=n;function r(o,s,a){const{gen:i,compositeRule:l,data:d,opts:c}=o;if(a===void 0)return;const h=(0,e._)`${d}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(o,`default is ignored for: ${h}`);return}let g=(0,e._)`${h} === undefined`;c.useDefaults==="empty"&&(g=(0,e._)`${g} || ${h} === null || ${h} === ""`),i.if(g,(0,e._)`${h} = ${(0,e.stringify)(a)}`)}return wt}var xe={},fe={},ps;function qe(){if(ps)return fe;ps=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.validateUnion=fe.validateArray=fe.usePattern=fe.callValidateCode=fe.schemaProperties=fe.allSchemaProperties=fe.noPropertyInData=fe.propertyInData=fe.isOwnProperty=fe.hasPropFunc=fe.reportMissingProp=fe.checkMissingProp=fe.checkReportMissingProp=void 0;const e=re(),t=ue(),n=Ye(),r=ue();function o(u,p){const{gen:b,data:$,it:w}=u;b.if(c(b,$,p,w.opts.ownProperties),()=>{u.setParams({missingProperty:(0,e._)`${p}`},!0),u.error()})}fe.checkReportMissingProp=o;function s({gen:u,data:p,it:{opts:b}},$,w){return(0,e.or)(...$.map(C=>(0,e.and)(c(u,p,C,b.ownProperties),(0,e._)`${w} = ${C}`)))}fe.checkMissingProp=s;function a(u,p){u.setParams({missingProperty:p},!0),u.error()}fe.reportMissingProp=a;function i(u){return u.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}fe.hasPropFunc=i;function l(u,p,b){return(0,e._)`${i(u)}.call(${p}, ${b})`}fe.isOwnProperty=l;function d(u,p,b,$){const w=(0,e._)`${p}${(0,e.getProperty)(b)} !== undefined`;return $?(0,e._)`${w} && ${l(u,p,b)}`:w}fe.propertyInData=d;function c(u,p,b,$){const w=(0,e._)`${p}${(0,e.getProperty)(b)} === undefined`;return $?(0,e.or)(w,(0,e.not)(l(u,p,b))):w}fe.noPropertyInData=c;function h(u){return u?Object.keys(u).filter(p=>p!=="__proto__"):[]}fe.allSchemaProperties=h;function g(u,p){return h(p).filter(b=>!(0,t.alwaysValidSchema)(u,p[b]))}fe.schemaProperties=g;function y({schemaCode:u,data:p,it:{gen:b,topSchemaRef:$,schemaPath:w,errorPath:C},it:P},T,R,N){const M=N?(0,e._)`${u}, ${p}, ${$}${w}`:p,z=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,C)],[n.default.parentData,P.parentData],[n.default.parentDataProperty,P.parentDataProperty],[n.default.rootData,n.default.rootData]];P.opts.dynamicRef&&z.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const U=(0,e._)`${M}, ${b.object(...z)}`;return R!==e.nil?(0,e._)`${T}.call(${R}, ${U})`:(0,e._)`${T}(${U})`}fe.callValidateCode=y;const _=(0,e._)`new RegExp`;function v({gen:u,it:{opts:p}},b){const $=p.unicodeRegExp?"u":"",{regExp:w}=p.code,C=w(b,$);return u.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,e._)`${w.code==="new RegExp"?_:(0,r.useFunc)(u,w)}(${b}, ${$})`})}fe.usePattern=v;function f(u){const{gen:p,data:b,keyword:$,it:w}=u,C=p.name("valid");if(w.allErrors){const T=p.let("valid",!0);return P(()=>p.assign(T,!1)),T}return p.var(C,!0),P(()=>p.break()),C;function P(T){const R=p.const("len",(0,e._)`${b}.length`);p.forRange("i",0,R,N=>{u.subschema({keyword:$,dataProp:N,dataPropType:t.Type.Num},C),p.if((0,e.not)(C),T)})}}fe.validateArray=f;function m(u){const{gen:p,schema:b,keyword:$,it:w}=u;if(!Array.isArray(b))throw new Error("ajv implementation error");if(b.some(R=>(0,t.alwaysValidSchema)(w,R))&&!w.opts.unevaluated)return;const P=p.let("valid",!1),T=p.name("_valid");p.block(()=>b.forEach((R,N)=>{const M=u.subschema({keyword:$,schemaProp:N,compositeRule:!0},T);p.assign(P,(0,e._)`${P} || ${T}`),u.mergeValidEvaluated(M,T)||p.if((0,e.not)(P))})),u.result(P,()=>u.reset(),()=>u.error(!0))}return fe.validateUnion=m,fe}var ys;function Oi(){if(ys)return xe;ys=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.validateKeywordUsage=xe.validSchemaType=xe.funcKeywordCode=xe.macroKeywordCode=void 0;const e=re(),t=Ye(),n=qe(),r=Wn();function o(g,y){const{gen:_,keyword:v,schema:f,parentSchema:m,it:u}=g,p=y.macro.call(u.self,f,m,u),b=d(_,v,p);u.opts.validateSchema!==!1&&u.self.validateSchema(p,!0);const $=_.name("valid");g.subschema({schema:p,schemaPath:e.nil,errSchemaPath:`${u.errSchemaPath}/${v}`,topSchemaRef:b,compositeRule:!0},$),g.pass($,()=>g.error(!0))}xe.macroKeywordCode=o;function s(g,y){var _;const{gen:v,keyword:f,schema:m,parentSchema:u,$data:p,it:b}=g;l(b,y);const $=!p&&y.compile?y.compile.call(b.self,m,u,b):y.validate,w=d(v,f,$),C=v.let("valid");g.block$data(C,P),g.ok((_=y.valid)!==null&&_!==void 0?_:C);function P(){if(y.errors===!1)N(),y.modifying&&a(g),M(()=>g.error());else{const z=y.async?T():R();y.modifying&&a(g),M(()=>i(g,z))}}function T(){const z=v.let("ruleErrs",null);return v.try(()=>N((0,e._)`await `),U=>v.assign(C,!1).if((0,e._)`${U} instanceof ${b.ValidationError}`,()=>v.assign(z,(0,e._)`${U}.errors`),()=>v.throw(U))),z}function R(){const z=(0,e._)`${w}.errors`;return v.assign(z,null),N(e.nil),z}function N(z=y.async?(0,e._)`await `:e.nil){const U=b.opts.passContext?t.default.this:t.default.self,W=!("compile"in y&&!p||y.schema===!1);v.assign(C,(0,e._)`${z}${(0,n.callValidateCode)(g,w,U,W)}`,y.modifying)}function M(z){var U;v.if((0,e.not)((U=y.valid)!==null&&U!==void 0?U:C),z)}}xe.funcKeywordCode=s;function a(g){const{gen:y,data:_,it:v}=g;y.if(v.parentData,()=>y.assign(_,(0,e._)`${v.parentData}[${v.parentDataProperty}]`))}function i(g,y){const{gen:_}=g;_.if((0,e._)`Array.isArray(${y})`,()=>{_.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${y} : ${t.default.vErrors}.concat(${y})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(g)},()=>g.error())}function l({schemaEnv:g},y){if(y.async&&!g.$async)throw new Error("async keyword in sync schema")}function d(g,y,_){if(_===void 0)throw new Error(`keyword "${y}" failed to compile`);return g.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,e.stringify)(_)})}function c(g,y,_=!1){return!y.length||y.some(v=>v==="array"?Array.isArray(g):v==="object"?g&&typeof g=="object"&&!Array.isArray(g):typeof g==v||_&&typeof g>"u")}xe.validSchemaType=c;function h({schema:g,opts:y,self:_,errSchemaPath:v},f,m){if(Array.isArray(f.keyword)?!f.keyword.includes(m):f.keyword!==m)throw new Error("ajv implementation error");const u=f.dependencies;if(u?.some(p=>!Object.prototype.hasOwnProperty.call(g,p)))throw new Error(`parent schema must have dependencies of ${m}: ${u.join(",")}`);if(f.validateSchema&&!f.validateSchema(g[m])){const b=`keyword "${m}" value is invalid at path "${v}": `+_.errorsText(f.validateSchema.errors);if(y.validateSchema==="log")_.logger.error(b);else throw new Error(b)}}return xe.validateKeywordUsage=h,xe}var ze={},vs;function Ri(){if(vs)return ze;vs=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.extendSubschemaMode=ze.extendSubschemaData=ze.getSubschema=void 0;const e=re(),t=ue();function n(s,{keyword:a,schemaProp:i,schema:l,schemaPath:d,errSchemaPath:c,topSchemaRef:h}){if(a!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(a!==void 0){const g=s.schema[a];return i===void 0?{schema:g,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${a}`}:{schema:g[i],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(a)}${(0,e.getProperty)(i)}`,errSchemaPath:`${s.errSchemaPath}/${a}/${(0,t.escapeFragment)(i)}`}}if(l!==void 0){if(d===void 0||c===void 0||h===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:d,topSchemaRef:h,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}ze.getSubschema=n;function r(s,a,{dataProp:i,dataPropType:l,data:d,dataTypes:c,propertyName:h}){if(d!==void 0&&i!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:g}=a;if(i!==void 0){const{errorPath:_,dataPathArr:v,opts:f}=a,m=g.let("data",(0,e._)`${a.data}${(0,e.getProperty)(i)}`,!0);y(m),s.errorPath=(0,e.str)`${_}${(0,t.getErrorPath)(i,l,f.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${i}`,s.dataPathArr=[...v,s.parentDataProperty]}if(d!==void 0){const _=d instanceof e.Name?d:g.let("data",d,!0);y(_),h!==void 0&&(s.propertyName=h)}c&&(s.dataTypes=c);function y(_){s.data=_,s.dataLevel=a.dataLevel+1,s.dataTypes=[],a.definedProperties=new Set,s.parentData=a.data,s.dataNames=[...a.dataNames,_]}}ze.extendSubschemaData=r;function o(s,{jtdDiscriminator:a,jtdMetadata:i,compositeRule:l,createErrors:d,allErrors:c}){l!==void 0&&(s.compositeRule=l),d!==void 0&&(s.createErrors=d),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=a,s.jtdMetadata=i}return ze.extendSubschemaMode=o,ze}var Pe={},cr,$s;function Qo(){return $s||($s=1,cr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var a=s[o];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),cr}var ur={exports:{}},bs;function Ni(){if(bs)return ur.exports;bs=1;var e=ur.exports=function(r,o,s){typeof o=="function"&&(s=o,o={}),s=o.cb||s;var a=typeof s=="function"?s:s.pre||function(){},i=s.post||function(){};t(o,a,i,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,o,s,a,i,l,d,c,h,g){if(a&&typeof a=="object"&&!Array.isArray(a)){o(a,i,l,d,c,h,g);for(var y in a){var _=a[y];if(Array.isArray(_)){if(y in e.arrayKeywords)for(var v=0;v<_.length;v++)t(r,o,s,_[v],i+"/"+y+"/"+v,l,i,y,a,v)}else if(y in e.propsKeywords){if(_&&typeof _=="object")for(var f in _)t(r,o,s,_[f],i+"/"+y+"/"+n(f),l,i,y,a,f)}else(y in e.keywords||r.allKeys&&!(y in e.skipKeywords))&&t(r,o,s,_,i+"/"+y,l,i,y,a)}s(a,i,l,d,c,h,g)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return ur.exports}var _s;function Bn(){if(_s)return Pe;_s=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getSchemaRefs=Pe.resolveUrl=Pe.normalizeId=Pe._getFullPath=Pe.getFullPath=Pe.inlineRef=void 0;const e=ue(),t=Qo(),n=Ni(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(v,f=!0){return typeof v=="boolean"?!0:f===!0?!a(v):f?i(v)<=f:!1}Pe.inlineRef=o;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function a(v){for(const f in v){if(s.has(f))return!0;const m=v[f];if(Array.isArray(m)&&m.some(a)||typeof m=="object"&&a(m))return!0}return!1}function i(v){let f=0;for(const m in v){if(m==="$ref")return 1/0;if(f++,!r.has(m)&&(typeof v[m]=="object"&&(0,e.eachItem)(v[m],u=>f+=i(u)),f===1/0))return 1/0}return f}function l(v,f="",m){m!==!1&&(f=h(f));const u=v.parse(f);return d(v,u)}Pe.getFullPath=l;function d(v,f){return v.serialize(f).split("#")[0]+"#"}Pe._getFullPath=d;const c=/#\/?$/;function h(v){return v?v.replace(c,""):""}Pe.normalizeId=h;function g(v,f,m){return m=h(m),v.resolve(f,m)}Pe.resolveUrl=g;const y=/^[a-z_][-a-z0-9._]*$/i;function _(v,f){if(typeof v=="boolean")return{};const{schemaId:m,uriResolver:u}=this.opts,p=h(v[m]||f),b={"":p},$=l(u,p,!1),w={},C=new Set;return n(v,{allKeys:!0},(R,N,M,z)=>{if(z===void 0)return;const U=$+N;let W=b[z];typeof R[m]=="string"&&(W=ne.call(this,R[m])),ge.call(this,R.$anchor),ge.call(this,R.$dynamicAnchor),b[N]=W;function ne(se){const ce=this.opts.uriResolver.resolve;if(se=h(W?ce(W,se):se),C.has(se))throw T(se);C.add(se);let F=this.refs[se];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?P(R,F.schema,se):se!==h(U)&&(se[0]==="#"?(P(R,w[se],se),w[se]=R):this.refs[se]=U),se}function ge(se){if(typeof se=="string"){if(!y.test(se))throw new Error(`invalid anchor "${se}"`);ne.call(this,`#${se}`)}}}),w;function P(R,N,M){if(N!==void 0&&!t(R,N))throw T(M)}function T(R){return new Error(`reference "${R}" resolves to more than one schema`)}}return Pe.getSchemaRefs=_,Pe}var ws;function Gn(){if(ws)return Ue;ws=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;const e=Pi(),t=Fn(),n=Jo(),r=Fn(),o=ki(),s=Oi(),a=Ri(),i=re(),l=Ye(),d=Bn(),c=ue(),h=Wn();function g(k){if($(k)&&(C(k),b(k))){f(k);return}y(k,()=>(0,e.topBoolOrEmptySchema)(k))}Ue.validateFunctionCode=g;function y({gen:k,validateName:I,schema:V,schemaEnv:K,opts:J},te){J.code.es5?k.func(I,(0,i._)`${l.default.data}, ${l.default.valCxt}`,K.$async,()=>{k.code((0,i._)`"use strict"; ${u(V,J)}`),v(k,J),k.code(te)}):k.func(I,(0,i._)`${l.default.data}, ${_(J)}`,K.$async,()=>k.code(u(V,J)).code(te))}function _(k){return(0,i._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${k.dynamicRef?(0,i._)`, ${l.default.dynamicAnchors}={}`:i.nil}}={}`}function v(k,I){k.if(l.default.valCxt,()=>{k.var(l.default.instancePath,(0,i._)`${l.default.valCxt}.${l.default.instancePath}`),k.var(l.default.parentData,(0,i._)`${l.default.valCxt}.${l.default.parentData}`),k.var(l.default.parentDataProperty,(0,i._)`${l.default.valCxt}.${l.default.parentDataProperty}`),k.var(l.default.rootData,(0,i._)`${l.default.valCxt}.${l.default.rootData}`),I.dynamicRef&&k.var(l.default.dynamicAnchors,(0,i._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{k.var(l.default.instancePath,(0,i._)`""`),k.var(l.default.parentData,(0,i._)`undefined`),k.var(l.default.parentDataProperty,(0,i._)`undefined`),k.var(l.default.rootData,l.default.data),I.dynamicRef&&k.var(l.default.dynamicAnchors,(0,i._)`{}`)})}function f(k){const{schema:I,opts:V,gen:K}=k;y(k,()=>{V.$comment&&I.$comment&&z(k),R(k),K.let(l.default.vErrors,null),K.let(l.default.errors,0),V.unevaluated&&m(k),P(k),U(k)})}function m(k){const{gen:I,validateName:V}=k;k.evaluated=I.const("evaluated",(0,i._)`${V}.evaluated`),I.if((0,i._)`${k.evaluated}.dynamicProps`,()=>I.assign((0,i._)`${k.evaluated}.props`,(0,i._)`undefined`)),I.if((0,i._)`${k.evaluated}.dynamicItems`,()=>I.assign((0,i._)`${k.evaluated}.items`,(0,i._)`undefined`))}function u(k,I){const V=typeof k=="object"&&k[I.schemaId];return V&&(I.code.source||I.code.process)?(0,i._)`/*# sourceURL=${V} */`:i.nil}function p(k,I){if($(k)&&(C(k),b(k))){w(k,I);return}(0,e.boolOrEmptySchema)(k,I)}function b({schema:k,self:I}){if(typeof k=="boolean")return!k;for(const V in k)if(I.RULES.all[V])return!0;return!1}function $(k){return typeof k.schema!="boolean"}function w(k,I){const{schema:V,gen:K,opts:J}=k;J.$comment&&V.$comment&&z(k),N(k),M(k);const te=K.const("_errs",l.default.errors);P(k,te),K.var(I,(0,i._)`${te} === ${l.default.errors}`)}function C(k){(0,c.checkUnknownRules)(k),T(k)}function P(k,I){if(k.opts.jtd)return ne(k,[],!1,I);const V=(0,t.getSchemaTypes)(k.schema),K=(0,t.coerceAndCheckDataType)(k,V);ne(k,V,!K,I)}function T(k){const{schema:I,errSchemaPath:V,opts:K,self:J}=k;I.$ref&&K.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(I,J.RULES)&&J.logger.warn(`$ref: keywords ignored in schema at path "${V}"`)}function R(k){const{schema:I,opts:V}=k;I.default!==void 0&&V.useDefaults&&V.strictSchema&&(0,c.checkStrictMode)(k,"default is ignored in the schema root")}function N(k){const I=k.schema[k.opts.schemaId];I&&(k.baseId=(0,d.resolveUrl)(k.opts.uriResolver,k.baseId,I))}function M(k){if(k.schema.$async&&!k.schemaEnv.$async)throw new Error("async schema in sync schema")}function z({gen:k,schemaEnv:I,schema:V,errSchemaPath:K,opts:J}){const te=V.$comment;if(J.$comment===!0)k.code((0,i._)`${l.default.self}.logger.log(${te})`);else if(typeof J.$comment=="function"){const _e=(0,i.str)`${K}/$comment`,Te=k.scopeValue("root",{ref:I.root});k.code((0,i._)`${l.default.self}.opts.$comment(${te}, ${_e}, ${Te}.schema)`)}}function U(k){const{gen:I,schemaEnv:V,validateName:K,ValidationError:J,opts:te}=k;V.$async?I.if((0,i._)`${l.default.errors} === 0`,()=>I.return(l.default.data),()=>I.throw((0,i._)`new ${J}(${l.default.vErrors})`)):(I.assign((0,i._)`${K}.errors`,l.default.vErrors),te.unevaluated&&W(k),I.return((0,i._)`${l.default.errors} === 0`))}function W({gen:k,evaluated:I,props:V,items:K}){V instanceof i.Name&&k.assign((0,i._)`${I}.props`,V),K instanceof i.Name&&k.assign((0,i._)`${I}.items`,K)}function ne(k,I,V,K){const{gen:J,schema:te,data:_e,allErrors:Te,opts:Oe,self:Re}=k,{RULES:we}=Re;if(te.$ref&&(Oe.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(te,we))){J.block(()=>G(k,"$ref",we.all.$ref.definition));return}Oe.jtd||se(k,I),J.block(()=>{for(const Le of we.rules)lt(Le);lt(we.post)});function lt(Le){(0,n.shouldUseGroup)(te,Le)&&(Le.type?(J.if((0,r.checkDataType)(Le.type,_e,Oe.strictNumbers)),ge(k,Le),I.length===1&&I[0]===Le.type&&V&&(J.else(),(0,r.reportTypeError)(k)),J.endIf()):ge(k,Le),Te||J.if((0,i._)`${l.default.errors} === ${K||0}`))}}function ge(k,I){const{gen:V,schema:K,opts:{useDefaults:J}}=k;J&&(0,o.assignDefaults)(k,I.type),V.block(()=>{for(const te of I.rules)(0,n.shouldUseRule)(K,te)&&G(k,te.keyword,te.definition,I.type)})}function se(k,I){k.schemaEnv.meta||!k.opts.strictTypes||(ce(k,I),k.opts.allowUnionTypes||F(k,I),O(k,k.dataTypes))}function ce(k,I){if(I.length){if(!k.dataTypes.length){k.dataTypes=I;return}I.forEach(V=>{L(k.dataTypes,V)||E(k,`type "${V}" not allowed by context "${k.dataTypes.join(",")}"`)}),S(k,I)}}function F(k,I){I.length>1&&!(I.length===2&&I.includes("null"))&&E(k,"use allowUnionTypes to allow union type keyword")}function O(k,I){const V=k.self.RULES.all;for(const K in V){const J=V[K];if(typeof J=="object"&&(0,n.shouldUseRule)(k.schema,J)){const{type:te}=J.definition;te.length&&!te.some(_e=>q(I,_e))&&E(k,`missing type "${te.join(",")}" for keyword "${K}"`)}}}function q(k,I){return k.includes(I)||I==="number"&&k.includes("integer")}function L(k,I){return k.includes(I)||I==="integer"&&k.includes("number")}function S(k,I){const V=[];for(const K of k.dataTypes)L(I,K)?V.push(K):I.includes("integer")&&K==="number"&&V.push("integer");k.dataTypes=V}function E(k,I){const V=k.schemaEnv.baseId+k.errSchemaPath;I+=` at "${V}" (strictTypes)`,(0,c.checkStrictMode)(k,I,k.opts.strictTypes)}class x{constructor(I,V,K){if((0,s.validateKeywordUsage)(I,V,K),this.gen=I.gen,this.allErrors=I.allErrors,this.keyword=K,this.data=I.data,this.schema=I.schema[K],this.$data=V.$data&&I.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(I,this.schema,K,this.$data),this.schemaType=V.schemaType,this.parentSchema=I.schema,this.params={},this.it=I,this.def=V,this.$data)this.schemaCode=I.gen.const("vSchema",ie(this.$data,I));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,V.schemaType,V.allowUndefined))throw new Error(`${K} value must be ${JSON.stringify(V.schemaType)}`);("code"in V?V.trackErrors:V.errors!==!1)&&(this.errsCount=I.gen.const("_errs",l.default.errors))}result(I,V,K){this.failResult((0,i.not)(I),V,K)}failResult(I,V,K){this.gen.if(I),K?K():this.error(),V?(this.gen.else(),V(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(I,V){this.failResult((0,i.not)(I),void 0,V)}fail(I){if(I===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(I),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(I){if(!this.$data)return this.fail(I);const{schemaCode:V}=this;this.fail((0,i._)`${V} !== undefined && (${(0,i.or)(this.invalid$data(),I)})`)}error(I,V,K){if(V){this.setParams(V),this._error(I,K),this.setParams({});return}this._error(I,K)}_error(I,V){(I?h.reportExtraError:h.reportError)(this,this.def.error,V)}$dataError(){(0,h.reportError)(this,this.def.$dataError||h.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,h.resetErrorsCount)(this.gen,this.errsCount)}ok(I){this.allErrors||this.gen.if(I)}setParams(I,V){V?Object.assign(this.params,I):this.params=I}block$data(I,V,K=i.nil){this.gen.block(()=>{this.check$data(I,K),V()})}check$data(I=i.nil,V=i.nil){if(!this.$data)return;const{gen:K,schemaCode:J,schemaType:te,def:_e}=this;K.if((0,i.or)((0,i._)`${J} === undefined`,V)),I!==i.nil&&K.assign(I,!0),(te.length||_e.validateSchema)&&(K.elseIf(this.invalid$data()),this.$dataError(),I!==i.nil&&K.assign(I,!1)),K.else()}invalid$data(){const{gen:I,schemaCode:V,schemaType:K,def:J,it:te}=this;return(0,i.or)(_e(),Te());function _e(){if(K.length){if(!(V instanceof i.Name))throw new Error("ajv implementation error");const Oe=Array.isArray(K)?K:[K];return(0,i._)`${(0,r.checkDataTypes)(Oe,V,te.opts.strictNumbers,r.DataType.Wrong)}`}return i.nil}function Te(){if(J.validateSchema){const Oe=I.scopeValue("validate$data",{ref:J.validateSchema});return(0,i._)`!${Oe}(${V})`}return i.nil}}subschema(I,V){const K=(0,a.getSubschema)(this.it,I);(0,a.extendSubschemaData)(K,this.it,I),(0,a.extendSubschemaMode)(K,I);const J={...this.it,...K,items:void 0,props:void 0};return p(J,V),J}mergeEvaluated(I,V){const{it:K,gen:J}=this;K.opts.unevaluated&&(K.props!==!0&&I.props!==void 0&&(K.props=c.mergeEvaluated.props(J,I.props,K.props,V)),K.items!==!0&&I.items!==void 0&&(K.items=c.mergeEvaluated.items(J,I.items,K.items,V)))}mergeValidEvaluated(I,V){const{it:K,gen:J}=this;if(K.opts.unevaluated&&(K.props!==!0||K.items!==!0))return J.if(V,()=>this.mergeEvaluated(I,i.Name)),!0}}Ue.KeywordCxt=x;function G(k,I,V,K){const J=new x(k,V,I);"code"in V?V.code(J,K):J.$data&&V.validate?(0,s.funcKeywordCode)(J,V):"macro"in V?(0,s.macroKeywordCode)(J,V):(V.compile||V.validate)&&(0,s.funcKeywordCode)(J,V)}const Q=/^\/(?:[^~]|~0|~1)*$/,de=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ie(k,{dataLevel:I,dataNames:V,dataPathArr:K}){let J,te;if(k==="")return l.default.rootData;if(k[0]==="/"){if(!Q.test(k))throw new Error(`Invalid JSON-pointer: ${k}`);J=k,te=l.default.rootData}else{const Re=de.exec(k);if(!Re)throw new Error(`Invalid JSON-pointer: ${k}`);const we=+Re[1];if(J=Re[2],J==="#"){if(we>=I)throw new Error(Oe("property/index",we));return K[I-we]}if(we>I)throw new Error(Oe("data",we));if(te=V[I-we],!J)return te}let _e=te;const Te=J.split("/");for(const Re of Te)Re&&(te=(0,i._)`${te}${(0,i.getProperty)((0,c.unescapeJsonPointer)(Re))}`,_e=(0,i._)`${_e} && ${te}`);return _e;function Oe(Re,we){return`Cannot access ${Re} ${we} levels up, current level is ${I}`}}return Ue.getData=ie,Ue}var Kt={},Ss;function Ar(){if(Ss)return Kt;Ss=1,Object.defineProperty(Kt,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return Kt.default=e,Kt}var zt={},Cs;function Jn(){if(Cs)return zt;Cs=1,Object.defineProperty(zt,"__esModule",{value:!0});const e=Bn();class t extends Error{constructor(r,o,s,a){super(a||`can't resolve reference ${s} from id ${o}`),this.missingRef=(0,e.resolveUrl)(r,o,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return zt.default=t,zt}var Ie={},Es;function jr(){if(Es)return Ie;Es=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;const e=re(),t=Ar(),n=Ye(),r=Bn(),o=ue(),s=Gn();class a{constructor(m){var u;this.refs={},this.dynamicAnchors={};let p;typeof m.schema=="object"&&(p=m.schema),this.schema=m.schema,this.schemaId=m.schemaId,this.root=m.root||this,this.baseId=(u=m.baseId)!==null&&u!==void 0?u:(0,r.normalizeId)(p?.[m.schemaId||"$id"]),this.schemaPath=m.schemaPath,this.localRefs=m.localRefs,this.meta=m.meta,this.$async=p?.$async,this.refs={}}}Ie.SchemaEnv=a;function i(f){const m=c.call(this,f);if(m)return m;const u=(0,r.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:p,lines:b}=this.opts.code,{ownProperties:$}=this.opts,w=new e.CodeGen(this.scope,{es5:p,lines:b,ownProperties:$});let C;f.$async&&(C=w.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const P=w.scopeName("validate");f.validateName=P;const T={gen:w,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:w.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,e.stringify)(f.schema)}:{ref:f.schema}),validateName:P,ValidationError:C,schema:f.schema,schemaEnv:f,rootId:u,baseId:f.baseId||u,schemaPath:e.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let R;try{this._compilations.add(f),(0,s.validateFunctionCode)(T),w.optimize(this.opts.code.optimize);const N=w.toString();R=`${w.scopeRefs(n.default.scope)}return ${N}`,this.opts.code.process&&(R=this.opts.code.process(R,f));const z=new Function(`${n.default.self}`,`${n.default.scope}`,R)(this,this.scope.get());if(this.scope.value(P,{ref:z}),z.errors=null,z.schema=f.schema,z.schemaEnv=f,f.$async&&(z.$async=!0),this.opts.code.source===!0&&(z.source={validateName:P,validateCode:N,scopeValues:w._values}),this.opts.unevaluated){const{props:U,items:W}=T;z.evaluated={props:U instanceof e.Name?void 0:U,items:W instanceof e.Name?void 0:W,dynamicProps:U instanceof e.Name,dynamicItems:W instanceof e.Name},z.source&&(z.source.evaluated=(0,e.stringify)(z.evaluated))}return f.validate=z,f}catch(N){throw delete f.validate,delete f.validateName,R&&this.logger.error("Error compiling schema, function code:",R),N}finally{this._compilations.delete(f)}}Ie.compileSchema=i;function l(f,m,u){var p;u=(0,r.resolveUrl)(this.opts.uriResolver,m,u);const b=f.refs[u];if(b)return b;let $=g.call(this,f,u);if($===void 0){const w=(p=f.localRefs)===null||p===void 0?void 0:p[u],{schemaId:C}=this.opts;w&&($=new a({schema:w,schemaId:C,root:f,baseId:m}))}if($!==void 0)return f.refs[u]=d.call(this,$)}Ie.resolveRef=l;function d(f){return(0,r.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:i.call(this,f)}function c(f){for(const m of this._compilations)if(h(m,f))return m}Ie.getCompilingSchema=c;function h(f,m){return f.schema===m.schema&&f.root===m.root&&f.baseId===m.baseId}function g(f,m){let u;for(;typeof(u=this.refs[m])=="string";)m=u;return u||this.schemas[m]||y.call(this,f,m)}function y(f,m){const u=this.opts.uriResolver.parse(m),p=(0,r._getFullPath)(this.opts.uriResolver,u);let b=(0,r.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&p===b)return v.call(this,u,f);const $=(0,r.normalizeId)(p),w=this.refs[$]||this.schemas[$];if(typeof w=="string"){const C=y.call(this,f,w);return typeof C?.schema!="object"?void 0:v.call(this,u,C)}if(typeof w?.schema=="object"){if(w.validate||i.call(this,w),$===(0,r.normalizeId)(m)){const{schema:C}=w,{schemaId:P}=this.opts,T=C[P];return T&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,T)),new a({schema:C,schemaId:P,root:f,baseId:b})}return v.call(this,u,w)}}Ie.resolveSchema=y;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(f,{baseId:m,schema:u,root:p}){var b;if(((b=f.fragment)===null||b===void 0?void 0:b[0])!=="/")return;for(const C of f.fragment.slice(1).split("/")){if(typeof u=="boolean")return;const P=u[(0,o.unescapeFragment)(C)];if(P===void 0)return;u=P;const T=typeof u=="object"&&u[this.opts.schemaId];!_.has(C)&&T&&(m=(0,r.resolveUrl)(this.opts.uriResolver,m,T))}let $;if(typeof u!="boolean"&&u.$ref&&!(0,o.schemaHasRulesButRef)(u,this.RULES)){const C=(0,r.resolveUrl)(this.opts.uriResolver,m,u.$ref);$=y.call(this,p,C)}const{schemaId:w}=this.opts;if($=$||new a({schema:u,schemaId:w,root:p,baseId:m}),$.schema!==$.root.schema)return $}return Ie}const Ii="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Li="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ai="object",ji=["$data"],Ti={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},xi=!1,qi={$id:Ii,description:Li,type:Ai,required:ji,properties:Ti,additionalProperties:xi};var Ht={},St={exports:{}},dr,Ps;function Di(){return Ps||(Ps=1,dr={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),dr}var fr,ks;function Mi(){if(ks)return fr;ks=1;const{HEX:e}=Di(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(v){if(i(v,".")<3)return{host:v,isIPV4:!1};const f=v.match(t)||[],[m]=f;return m?{host:a(m,"."),isIPV4:!0}:{host:v,isIPV4:!1}}function r(v,f=!1){let m="",u=!0;for(const p of v){if(e[p]===void 0)return;p!=="0"&&u===!0&&(u=!1),u||(m+=p)}return f&&m.length===0&&(m="0"),m}function o(v){let f=0;const m={error:!1,address:"",zone:""},u=[],p=[];let b=!1,$=!1,w=!1;function C(){if(p.length){if(b===!1){const P=r(p);if(P!==void 0)u.push(P);else return m.error=!0,!1}p.length=0}return!0}for(let P=0;P<v.length;P++){const T=v[P];if(!(T==="["||T==="]"))if(T===":"){if($===!0&&(w=!0),!C())break;if(f++,u.push(":"),f>7){m.error=!0;break}P-1>=0&&v[P-1]===":"&&($=!0);continue}else if(T==="%"){if(!C())break;b=!0}else{p.push(T);continue}}return p.length&&(b?m.zone=p.join(""):w?u.push(p.join("")):u.push(r(p))),m.address=u.join(""),m}function s(v){if(i(v,":")<2)return{host:v,isIPV6:!1};const f=o(v);if(f.error)return{host:v,isIPV6:!1};{let m=f.address,u=f.address;return f.zone&&(m+="%"+f.zone,u+="%25"+f.zone),{host:m,escapedHost:u,isIPV6:!0}}}function a(v,f){let m="",u=!0;const p=v.length;for(let b=0;b<p;b++){const $=v[b];$==="0"&&u?(b+1<=p&&v[b+1]===f||b+1===p)&&(m+=$,u=!1):($===f?u=!0:u=!1,m+=$)}return m}function i(v,f){let m=0;for(let u=0;u<v.length;u++)v[u]===f&&m++;return m}const l=/^\.\.?\//u,d=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,h=/^\/?(?:.|\n)*?(?=\/|$)/u;function g(v){const f=[];for(;v.length;)if(v.match(l))v=v.replace(l,"");else if(v.match(d))v=v.replace(d,"/");else if(v.match(c))v=v.replace(c,"/"),f.pop();else if(v==="."||v==="..")v="";else{const m=v.match(h);if(m){const u=m[0];v=v.slice(u.length),f.push(u)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function y(v,f){const m=f!==!0?escape:unescape;return v.scheme!==void 0&&(v.scheme=m(v.scheme)),v.userinfo!==void 0&&(v.userinfo=m(v.userinfo)),v.host!==void 0&&(v.host=m(v.host)),v.path!==void 0&&(v.path=m(v.path)),v.query!==void 0&&(v.query=m(v.query)),v.fragment!==void 0&&(v.fragment=m(v.fragment)),v}function _(v){const f=[];if(v.userinfo!==void 0&&(f.push(v.userinfo),f.push("@")),v.host!==void 0){let m=unescape(v.host);const u=n(m);if(u.isIPV4)m=u.host;else{const p=s(u.host);p.isIPV6===!0?m=`[${p.escapedHost}]`:m=v.host}f.push(m)}return(typeof v.port=="number"||typeof v.port=="string")&&(f.push(":"),f.push(String(v.port))),f.length?f.join(""):void 0}return fr={recomposeAuthority:_,normalizeComponentEncoding:y,removeDotSegments:g,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},fr}var hr,Os;function Vi(){if(Os)return hr;Os=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}function r(u){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u}function o(u){const p=String(u.scheme).toLowerCase()==="https";return(u.port===(p?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}function s(u){return u.secure=n(u),u.resourceName=(u.path||"/")+(u.query?"?"+u.query:""),u.path=void 0,u.query=void 0,u}function a(u){if((u.port===(n(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){const[p,b]=u.resourceName.split("?");u.path=p&&p!=="/"?p:void 0,u.query=b,u.resourceName=void 0}return u.fragment=void 0,u}function i(u,p){if(!u.path)return u.error="URN can not be parsed",u;const b=u.path.match(t);if(b){const $=p.scheme||u.scheme||"urn";u.nid=b[1].toLowerCase(),u.nss=b[2];const w=`${$}:${p.nid||u.nid}`,C=m[w];u.path=void 0,C&&(u=C.parse(u,p))}else u.error=u.error||"URN can not be parsed.";return u}function l(u,p){const b=p.scheme||u.scheme||"urn",$=u.nid.toLowerCase(),w=`${b}:${p.nid||$}`,C=m[w];C&&(u=C.serialize(u,p));const P=u,T=u.nss;return P.path=`${$||p.nid}:${T}`,p.skipEscape=!0,P}function d(u,p){const b=u;return b.uuid=b.nss,b.nss=void 0,!p.tolerant&&(!b.uuid||!e.test(b.uuid))&&(b.error=b.error||"UUID is not valid."),b}function c(u){const p=u;return p.nss=(u.uuid||"").toLowerCase(),p}const h={scheme:"http",domainHost:!0,parse:r,serialize:o},g={scheme:"https",domainHost:h.domainHost,parse:r,serialize:o},y={scheme:"ws",domainHost:!0,parse:s,serialize:a},_={scheme:"wss",domainHost:y.domainHost,parse:y.parse,serialize:y.serialize},m={http:h,https:g,ws:y,wss:_,urn:{scheme:"urn",parse:i,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:d,serialize:c,skipNormalize:!0}};return hr=m,hr}var Rs;function Fi(){if(Rs)return St.exports;Rs=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:o}=Mi(),s=Vi();function a(f,m){return typeof f=="string"?f=c(_(f,m),m):typeof f=="object"&&(f=_(c(f,m),m)),f}function i(f,m,u){const p=Object.assign({scheme:"null"},u),b=l(_(f,p),_(m,p),p,!0);return c(b,{...p,skipEscape:!0})}function l(f,m,u,p){const b={};return p||(f=_(c(f,u),u),m=_(c(m,u),u)),u=u||{},!u.tolerant&&m.scheme?(b.scheme=m.scheme,b.userinfo=m.userinfo,b.host=m.host,b.port=m.port,b.path=n(m.path||""),b.query=m.query):(m.userinfo!==void 0||m.host!==void 0||m.port!==void 0?(b.userinfo=m.userinfo,b.host=m.host,b.port=m.port,b.path=n(m.path||""),b.query=m.query):(m.path?(m.path.charAt(0)==="/"?b.path=n(m.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?b.path="/"+m.path:f.path?b.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+m.path:b.path=m.path,b.path=n(b.path)),b.query=m.query):(b.path=f.path,m.query!==void 0?b.query=m.query:b.query=f.query),b.userinfo=f.userinfo,b.host=f.host,b.port=f.port),b.scheme=f.scheme),b.fragment=m.fragment,b}function d(f,m,u){return typeof f=="string"?(f=unescape(f),f=c(o(_(f,u),!0),{...u,skipEscape:!0})):typeof f=="object"&&(f=c(o(f,!0),{...u,skipEscape:!0})),typeof m=="string"?(m=unescape(m),m=c(o(_(m,u),!0),{...u,skipEscape:!0})):typeof m=="object"&&(m=c(o(m,!0),{...u,skipEscape:!0})),f.toLowerCase()===m.toLowerCase()}function c(f,m){const u={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},p=Object.assign({},m),b=[],$=s[(p.scheme||u.scheme||"").toLowerCase()];$&&$.serialize&&$.serialize(u,p),u.path!==void 0&&(p.skipEscape?u.path=unescape(u.path):(u.path=escape(u.path),u.scheme!==void 0&&(u.path=u.path.split("%3A").join(":")))),p.reference!=="suffix"&&u.scheme&&b.push(u.scheme,":");const w=r(u);if(w!==void 0&&(p.reference!=="suffix"&&b.push("//"),b.push(w),u.path&&u.path.charAt(0)!=="/"&&b.push("/")),u.path!==void 0){let C=u.path;!p.absolutePath&&(!$||!$.absolutePath)&&(C=n(C)),w===void 0&&(C=C.replace(/^\/\//u,"/%2F")),b.push(C)}return u.query!==void 0&&b.push("?",u.query),u.fragment!==void 0&&b.push("#",u.fragment),b.join("")}const h=Array.from({length:127},(f,m)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(m)));function g(f){let m=0;for(let u=0,p=f.length;u<p;++u)if(m=f.charCodeAt(u),m>126||h[m])return!0;return!1}const y=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(f,m){const u=Object.assign({},m),p={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},b=f.indexOf("%")!==-1;let $=!1;u.reference==="suffix"&&(f=(u.scheme?u.scheme+":":"")+"//"+f);const w=f.match(y);if(w){if(p.scheme=w[1],p.userinfo=w[3],p.host=w[4],p.port=parseInt(w[5],10),p.path=w[6]||"",p.query=w[7],p.fragment=w[8],isNaN(p.port)&&(p.port=w[5]),p.host){const P=t(p.host);if(P.isIPV4===!1){const T=e(P.host);p.host=T.host.toLowerCase(),$=T.isIPV6}else p.host=P.host,$=!0}p.scheme===void 0&&p.userinfo===void 0&&p.host===void 0&&p.port===void 0&&p.query===void 0&&!p.path?p.reference="same-document":p.scheme===void 0?p.reference="relative":p.fragment===void 0?p.reference="absolute":p.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==p.reference&&(p.error=p.error||"URI is not a "+u.reference+" reference.");const C=s[(u.scheme||p.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!C||!C.unicodeSupport)&&p.host&&(u.domainHost||C&&C.domainHost)&&$===!1&&g(p.host))try{p.host=URL.domainToASCII(p.host.toLowerCase())}catch(P){p.error=p.error||"Host's domain name can not be converted to ASCII: "+P}(!C||C&&!C.skipNormalize)&&(b&&p.scheme!==void 0&&(p.scheme=unescape(p.scheme)),b&&p.host!==void 0&&(p.host=unescape(p.host)),p.path&&(p.path=escape(unescape(p.path))),p.fragment&&(p.fragment=encodeURI(decodeURIComponent(p.fragment)))),C&&C.parse&&C.parse(p,u)}else p.error=p.error||"URI can not be parsed.";return p}const v={SCHEMES:s,normalize:a,resolve:i,resolveComponents:l,equal:d,serialize:c,parse:_};return St.exports=v,St.exports.default=v,St.exports.fastUri=v,St.exports}var Ns;function Ui(){if(Ns)return Ht;Ns=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=Fi();return e.code='require("ajv/dist/runtime/uri").default',Ht.default=e,Ht}var Is;function Ki(){return Is||(Is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Gn();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=re();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Ar(),o=Jn(),s=Go(),a=jr(),i=re(),l=Bn(),d=Fn(),c=ue(),h=qi,g=Ui(),y=(F,O)=>new RegExp(F,O);y.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},u=200;function p(F){var O,q,L,S,E,x,G,Q,de,ie,k,I,V,K,J,te,_e,Te,Oe,Re,we,lt,Le,Xn,Yn;const bt=F.strict,Zn=(O=F.code)===null||O===void 0?void 0:O.optimize,Mr=Zn===!0||Zn===void 0?1:Zn||0,Vr=(L=(q=F.code)===null||q===void 0?void 0:q.regExp)!==null&&L!==void 0?L:y,va=(S=F.uriResolver)!==null&&S!==void 0?S:g.default;return{strictSchema:(x=(E=F.strictSchema)!==null&&E!==void 0?E:bt)!==null&&x!==void 0?x:!0,strictNumbers:(Q=(G=F.strictNumbers)!==null&&G!==void 0?G:bt)!==null&&Q!==void 0?Q:!0,strictTypes:(ie=(de=F.strictTypes)!==null&&de!==void 0?de:bt)!==null&&ie!==void 0?ie:"log",strictTuples:(I=(k=F.strictTuples)!==null&&k!==void 0?k:bt)!==null&&I!==void 0?I:"log",strictRequired:(K=(V=F.strictRequired)!==null&&V!==void 0?V:bt)!==null&&K!==void 0?K:!1,code:F.code?{...F.code,optimize:Mr,regExp:Vr}:{optimize:Mr,regExp:Vr},loopRequired:(J=F.loopRequired)!==null&&J!==void 0?J:u,loopEnum:(te=F.loopEnum)!==null&&te!==void 0?te:u,meta:(_e=F.meta)!==null&&_e!==void 0?_e:!0,messages:(Te=F.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(Oe=F.inlineRefs)!==null&&Oe!==void 0?Oe:!0,schemaId:(Re=F.schemaId)!==null&&Re!==void 0?Re:"$id",addUsedSchema:(we=F.addUsedSchema)!==null&&we!==void 0?we:!0,validateSchema:(lt=F.validateSchema)!==null&&lt!==void 0?lt:!0,validateFormats:(Le=F.validateFormats)!==null&&Le!==void 0?Le:!0,unicodeRegExp:(Xn=F.unicodeRegExp)!==null&&Xn!==void 0?Xn:!0,int32range:(Yn=F.int32range)!==null&&Yn!==void 0?Yn:!0,uriResolver:va}}class b{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...p(O)};const{es5:q,lines:L}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:v,es5:q,lines:L}),this.logger=M(O.logger);const S=O.validateFormats;O.validateFormats=!1,this.RULES=(0,s.getRules)(),$.call(this,f,O,"NOT SUPPORTED"),$.call(this,m,O,"DEPRECATED","warn"),this._metaOpts=R.call(this),O.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&T.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),C.call(this),O.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:q,schemaId:L}=this.opts;let S=h;L==="id"&&(S={...h},S.id=S.$id,delete S.$id),q&&O&&this.addMetaSchema(S,S[L],!1)}defaultMeta(){const{meta:O,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[q]||O:void 0}validate(O,q){let L;if(typeof O=="string"){if(L=this.getSchema(O),!L)throw new Error(`no schema with key or ref "${O}"`)}else L=this.compile(O);const S=L(q);return"$async"in L||(this.errors=L.errors),S}compile(O,q){const L=this._addSchema(O,q);return L.validate||this._compileSchemaEnv(L)}compileAsync(O,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return S.call(this,O,q);async function S(ie,k){await E.call(this,ie.$schema);const I=this._addSchema(ie,k);return I.validate||x.call(this,I)}async function E(ie){ie&&!this.getSchema(ie)&&await S.call(this,{$ref:ie},!0)}async function x(ie){try{return this._compileSchemaEnv(ie)}catch(k){if(!(k instanceof o.default))throw k;return G.call(this,k),await Q.call(this,k.missingSchema),x.call(this,ie)}}function G({missingSchema:ie,missingRef:k}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${k} cannot be resolved`)}async function Q(ie){const k=await de.call(this,ie);this.refs[ie]||await E.call(this,k.$schema),this.refs[ie]||this.addSchema(k,ie,q)}async function de(ie){const k=this._loading[ie];if(k)return k;try{return await(this._loading[ie]=L(ie))}finally{delete this._loading[ie]}}}addSchema(O,q,L,S=this.opts.validateSchema){if(Array.isArray(O)){for(const x of O)this.addSchema(x,void 0,L,S);return this}let E;if(typeof O=="object"){const{schemaId:x}=this.opts;if(E=O[x],E!==void 0&&typeof E!="string")throw new Error(`schema ${x} must be string`)}return q=(0,l.normalizeId)(q||E),this._checkUnique(q),this.schemas[q]=this._addSchema(O,L,q,S,!0),this}addMetaSchema(O,q,L=this.opts.validateSchema){return this.addSchema(O,q,!0,L),this}validateSchema(O,q){if(typeof O=="boolean")return!0;let L;if(L=O.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(L,O);if(!S&&q){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return S}getSchema(O){let q;for(;typeof(q=w.call(this,O))=="string";)O=q;if(q===void 0){const{schemaId:L}=this.opts,S=new a.SchemaEnv({schema:{},schemaId:L});if(q=a.resolveSchema.call(this,S,O),!q)return;this.refs[O]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=w.call(this,O);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const q=O;this._cache.delete(q);let L=O[this.opts.schemaId];return L&&(L=(0,l.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const q of O)this.addKeyword(q);return this}addKeyword(O,q){let L;if(typeof O=="string")L=O,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=L);else if(typeof O=="object"&&q===void 0){if(q=O,L=q.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,L,q),!q)return(0,c.eachItem)(L,E=>W.call(this,E)),this;ge.call(this,q);const S={...q,type:(0,d.getJSONTypes)(q.type),schemaType:(0,d.getJSONTypes)(q.schemaType)};return(0,c.eachItem)(L,S.type.length===0?E=>W.call(this,E,S):E=>S.type.forEach(x=>W.call(this,E,S,x))),this}getKeyword(O){const q=this.RULES.all[O];return typeof q=="object"?q.definition:!!q}removeKeyword(O){const{RULES:q}=this;delete q.keywords[O],delete q.all[O];for(const L of q.rules){const S=L.rules.findIndex(E=>E.keyword===O);S>=0&&L.rules.splice(S,1)}return this}addFormat(O,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[O]=q,this}errorsText(O=this.errors,{separator:q=", ",dataVar:L="data"}={}){return!O||O.length===0?"No errors":O.map(S=>`${L}${S.instancePath} ${S.message}`).reduce((S,E)=>S+q+E)}$dataMetaSchema(O,q){const L=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const S of q){const E=S.split("/").slice(1);let x=O;for(const G of E)x=x[G];for(const G in L){const Q=L[G];if(typeof Q!="object")continue;const{$data:de}=Q.definition,ie=x[G];de&&ie&&(x[G]=ce(ie))}}return O}_removeAllSchemas(O,q){for(const L in O){const S=O[L];(!q||q.test(L))&&(typeof S=="string"?delete O[L]:S&&!S.meta&&(this._cache.delete(S.schema),delete O[L]))}}_addSchema(O,q,L,S=this.opts.validateSchema,E=this.opts.addUsedSchema){let x;const{schemaId:G}=this.opts;if(typeof O=="object")x=O[G];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let Q=this._cache.get(O);if(Q!==void 0)return Q;L=(0,l.normalizeId)(x||L);const de=l.getSchemaRefs.call(this,O,L);return Q=new a.SchemaEnv({schema:O,schemaId:G,meta:q,baseId:L,localRefs:de}),this._cache.set(Q.schema,Q),E&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=Q),S&&this.validateSchema(O,!0),Q}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):a.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const q=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,O)}finally{this.opts=q}}}b.ValidationError=r.default,b.MissingRefError=o.default,e.default=b;function $(F,O,q,L="error"){for(const S in F){const E=S;E in O&&this.logger[L](`${q}: option ${S}. ${F[E]}`)}}function w(F){return F=(0,l.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const O in F)this.addSchema(F[O],O)}function P(){for(const F in this.opts.formats){const O=this.opts.formats[F];O&&this.addFormat(F,O)}}function T(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in F){const q=F[O];q.keyword||(q.keyword=O),this.addKeyword(q)}}function R(){const F={...this.opts};for(const O of _)delete F[O];return F}const N={log(){},warn(){},error(){}};function M(F){if(F===!1)return N;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function U(F,O){const{RULES:q}=this;if((0,c.eachItem)(F,L=>{if(q.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!z.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function W(F,O,q){var L;const S=O?.post;if(q&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let x=S?E.post:E.rules.find(({type:Q})=>Q===q);if(x||(x={type:q,rules:[]},E.rules.push(x)),E.keywords[F]=!0,!O)return;const G={keyword:F,definition:{...O,type:(0,d.getJSONTypes)(O.type),schemaType:(0,d.getJSONTypes)(O.schemaType)}};O.before?ne.call(this,x,G,O.before):x.rules.push(G),E.all[F]=G,(L=O.implements)===null||L===void 0||L.forEach(Q=>this.addKeyword(Q))}function ne(F,O,q){const L=F.rules.findIndex(S=>S.keyword===q);L>=0?F.rules.splice(L,0,O):(F.rules.push(O),this.logger.warn(`rule ${q} is not defined`))}function ge(F){let{metaSchema:O}=F;O!==void 0&&(F.$data&&this.opts.$data&&(O=ce(O)),F.validateSchema=this.compile(O,!0))}const se={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ce(F){return{anyOf:[F,se]}}}(sr)),sr}var Wt={},Bt={},Gt={},Ls;function zi(){if(Ls)return Gt;Ls=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Gt.default=e,Gt}var Qe={},As;function Hi(){if(As)return Qe;As=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.callRef=Qe.getValidate=void 0;const e=Jn(),t=qe(),n=re(),r=Ye(),o=jr(),s=ue(),a={keyword:"$ref",schemaType:"string",code(d){const{gen:c,schema:h,it:g}=d,{baseId:y,schemaEnv:_,validateName:v,opts:f,self:m}=g,{root:u}=_;if((h==="#"||h==="#/")&&y===u.baseId)return b();const p=o.resolveRef.call(m,u,y,h);if(p===void 0)throw new e.default(g.opts.uriResolver,y,h);if(p instanceof o.SchemaEnv)return $(p);return w(p);function b(){if(_===u)return l(d,v,_,_.$async);const C=c.scopeValue("root",{ref:u});return l(d,(0,n._)`${C}.validate`,u,u.$async)}function $(C){const P=i(d,C);l(d,P,C,C.$async)}function w(C){const P=c.scopeValue("schema",f.code.source===!0?{ref:C,code:(0,n.stringify)(C)}:{ref:C}),T=c.name("valid"),R=d.subschema({schema:C,dataTypes:[],schemaPath:n.nil,topSchemaRef:P,errSchemaPath:h},T);d.mergeEvaluated(R),d.ok(T)}}};function i(d,c){const{gen:h}=d;return c.validate?h.scopeValue("validate",{ref:c.validate}):(0,n._)`${h.scopeValue("wrapper",{ref:c})}.validate`}Qe.getValidate=i;function l(d,c,h,g){const{gen:y,it:_}=d,{allErrors:v,schemaEnv:f,opts:m}=_,u=m.passContext?r.default.this:n.nil;g?p():b();function p(){if(!f.$async)throw new Error("async schema referenced by sync schema");const C=y.let("valid");y.try(()=>{y.code((0,n._)`await ${(0,t.callValidateCode)(d,c,u)}`),w(c),v||y.assign(C,!0)},P=>{y.if((0,n._)`!(${P} instanceof ${_.ValidationError})`,()=>y.throw(P)),$(P),v||y.assign(C,!1)}),d.ok(C)}function b(){d.result((0,t.callValidateCode)(d,c,u),()=>w(c),()=>$(c))}function $(C){const P=(0,n._)`${C}.errors`;y.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${P} : ${r.default.vErrors}.concat(${P})`),y.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function w(C){var P;if(!_.opts.unevaluated)return;const T=(P=h?.validate)===null||P===void 0?void 0:P.evaluated;if(_.props!==!0)if(T&&!T.dynamicProps)T.props!==void 0&&(_.props=s.mergeEvaluated.props(y,T.props,_.props));else{const R=y.var("props",(0,n._)`${C}.evaluated.props`);_.props=s.mergeEvaluated.props(y,R,_.props,n.Name)}if(_.items!==!0)if(T&&!T.dynamicItems)T.items!==void 0&&(_.items=s.mergeEvaluated.items(y,T.items,_.items));else{const R=y.var("items",(0,n._)`${C}.evaluated.items`);_.items=s.mergeEvaluated.items(y,R,_.items,n.Name)}}}return Qe.callRef=l,Qe.default=a,Qe}var js;function Wi(){if(js)return Bt;js=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=zi(),t=Hi(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Bt.default=n,Bt}var Jt={},Qt={},Ts;function Bi(){if(Ts)return Qt;Ts=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=re(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:a})=>(0,e.str)`must be ${n[s].okStr} ${a}`,params:({keyword:s,schemaCode:a})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${a}}`},o={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:a,data:i,schemaCode:l}=s;s.fail$data((0,e._)`${i} ${n[a].fail} ${l} || isNaN(${i})`)}};return Qt.default=o,Qt}var Xt={},xs;function Gi(){if(xs)return Xt;xs=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=re(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:o,data:s,schemaCode:a,it:i}=r,l=i.opts.multipleOfPrecision,d=o.let("res"),c=l?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${l}`:(0,e._)`${d} !== parseInt(${d})`;r.fail$data((0,e._)`(${a} === 0 || (${d} = ${s}/${a}, ${c}))`)}};return Xt.default=n,Xt}var Yt={},Zt={},qs;function Ji(){if(qs)return Zt;qs=1,Object.defineProperty(Zt,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,o=0,s;for(;o<n;)r++,s=t.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=t.charCodeAt(o),(s&64512)===56320&&o++);return r}return Zt.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Zt}var Ds;function Qi(){if(Ds)return Yt;Ds=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=re(),t=ue(),n=Ji(),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:a}){const i=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${a} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:a,data:i,schemaCode:l,it:d}=s,c=a==="maxLength"?e.operators.GT:e.operators.LT,h=d.opts.unicode===!1?(0,e._)`${i}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${i})`;s.fail$data((0,e._)`${h} ${c} ${l}`)}};return Yt.default=o,Yt}var en={},Ms;function Xi(){if(Ms)return en;Ms=1,Object.defineProperty(en,"__esModule",{value:!0});const e=qe(),t=re(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,t.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,t._)`{pattern: ${o}}`},code(o){const{data:s,$data:a,schema:i,schemaCode:l,it:d}=o,c=d.opts.unicodeRegExp?"u":"",h=a?(0,t._)`(new RegExp(${l}, ${c}))`:(0,e.usePattern)(o,i);o.fail$data((0,t._)`!${h}.test(${s})`)}};return en.default=r,en}var tn={},Vs;function Yi(){if(Vs)return tn;Vs=1,Object.defineProperty(tn,"__esModule",{value:!0});const e=re(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:a}=r,i=o==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${i} ${a}`)}};return tn.default=n,tn}var nn={},Fs;function Zi(){if(Fs)return nn;Fs=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=qe(),t=re(),n=ue(),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:a,schema:i,schemaCode:l,data:d,$data:c,it:h}=s,{opts:g}=h;if(!c&&i.length===0)return;const y=i.length>=g.loopRequired;if(h.allErrors?_():v(),g.strictRequired){const u=s.parentSchema.properties,{definedProperties:p}=s.it;for(const b of i)if(u?.[b]===void 0&&!p.has(b)){const $=h.schemaEnv.baseId+h.errSchemaPath,w=`required property "${b}" is not defined at "${$}" (strictRequired)`;(0,n.checkStrictMode)(h,w,h.opts.strictRequired)}}function _(){if(y||c)s.block$data(t.nil,f);else for(const u of i)(0,e.checkReportMissingProp)(s,u)}function v(){const u=a.let("missing");if(y||c){const p=a.let("valid",!0);s.block$data(p,()=>m(u,p)),s.ok(p)}else a.if((0,e.checkMissingProp)(s,i,u)),(0,e.reportMissingProp)(s,u),a.else()}function f(){a.forOf("prop",l,u=>{s.setParams({missingProperty:u}),a.if((0,e.noPropertyInData)(a,d,u,g.ownProperties),()=>s.error())})}function m(u,p){s.setParams({missingProperty:u}),a.forOf(u,l,()=>{a.assign(p,(0,e.propertyInData)(a,d,u,g.ownProperties)),a.if((0,t.not)(p),()=>{s.error(),a.break()})},t.nil)}}};return nn.default=o,nn}var rn={},Us;function el(){if(Us)return rn;Us=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=re(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${o} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:o,data:s,schemaCode:a}=r,i=o==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${i} ${a}`)}};return rn.default=n,rn}var sn={},on={},Ks;function Tr(){if(Ks)return on;Ks=1,Object.defineProperty(on,"__esModule",{value:!0});const e=Qo();return e.code='require("ajv/dist/runtime/equal").default',on.default=e,on}var zs;function tl(){if(zs)return sn;zs=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=Fn(),t=re(),n=ue(),r=Tr(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:i}})=>(0,t.str)`must NOT have duplicate items (items ## ${i} and ${a} are identical)`,params:({params:{i:a,j:i}})=>(0,t._)`{i: ${a}, j: ${i}}`},code(a){const{gen:i,data:l,$data:d,schema:c,parentSchema:h,schemaCode:g,it:y}=a;if(!d&&!c)return;const _=i.let("valid"),v=h.items?(0,e.getSchemaTypes)(h.items):[];a.block$data(_,f,(0,t._)`${g} === false`),a.ok(_);function f(){const b=i.let("i",(0,t._)`${l}.length`),$=i.let("j");a.setParams({i:b,j:$}),i.assign(_,!0),i.if((0,t._)`${b} > 1`,()=>(m()?u:p)(b,$))}function m(){return v.length>0&&!v.some(b=>b==="object"||b==="array")}function u(b,$){const w=i.name("item"),C=(0,e.checkDataTypes)(v,w,y.opts.strictNumbers,e.DataType.Wrong),P=i.const("indices",(0,t._)`{}`);i.for((0,t._)`;${b}--;`,()=>{i.let(w,(0,t._)`${l}[${b}]`),i.if(C,(0,t._)`continue`),v.length>1&&i.if((0,t._)`typeof ${w} == "string"`,(0,t._)`${w} += "_"`),i.if((0,t._)`typeof ${P}[${w}] == "number"`,()=>{i.assign($,(0,t._)`${P}[${w}]`),a.error(),i.assign(_,!1).break()}).code((0,t._)`${P}[${w}] = ${b}`)})}function p(b,$){const w=(0,n.useFunc)(i,r.default),C=i.name("outer");i.label(C).for((0,t._)`;${b}--;`,()=>i.for((0,t._)`${$} = ${b}; ${$}--;`,()=>i.if((0,t._)`${w}(${l}[${b}], ${l}[${$}])`,()=>{a.error(),i.assign(_,!1).break(C)})))}}};return sn.default=s,sn}var an={},Hs;function nl(){if(Hs)return an;Hs=1,Object.defineProperty(an,"__esModule",{value:!0});const e=re(),t=ue(),n=Tr(),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:a,data:i,$data:l,schemaCode:d,schema:c}=s;l||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(a,n.default)}(${i}, ${d})`):s.fail((0,e._)`${c} !== ${i}`)}};return an.default=o,an}var ln={},Ws;function rl(){if(Ws)return ln;Ws=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=re(),t=ue(),n=Tr(),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:a,data:i,$data:l,schema:d,schemaCode:c,it:h}=s;if(!l&&d.length===0)throw new Error("enum must have non-empty array");const g=d.length>=h.opts.loopEnum;let y;const _=()=>y??(y=(0,t.useFunc)(a,n.default));let v;if(g||l)v=a.let("valid"),s.block$data(v,f);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const u=a.const("vSchema",c);v=(0,e.or)(...d.map((p,b)=>m(u,b)))}s.pass(v);function f(){a.assign(v,!1),a.forOf("v",c,u=>a.if((0,e._)`${_()}(${i}, ${u})`,()=>a.assign(v,!0).break()))}function m(u,p){const b=d[p];return typeof b=="object"&&b!==null?(0,e._)`${_()}(${i}, ${u}[${p}])`:(0,e._)`${i} === ${b}`}}};return ln.default=o,ln}var Bs;function sl(){if(Bs)return Jt;Bs=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e=Bi(),t=Gi(),n=Qi(),r=Xi(),o=Yi(),s=Zi(),a=el(),i=tl(),l=nl(),d=rl(),c=[e.default,t.default,n.default,r.default,o.default,s.default,a.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,d.default];return Jt.default=c,Jt}var cn={},ft={},Gs;function Xo(){if(Gs)return ft;Gs=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.validateAdditionalItems=void 0;const e=re(),t=ue(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:a,it:i}=s,{items:l}=a;if(!Array.isArray(l)){(0,t.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(s,l)}};function o(s,a){const{gen:i,schema:l,data:d,keyword:c,it:h}=s;h.items=!0;const g=i.const("len",(0,e._)`${d}.length`);if(l===!1)s.setParams({len:a.length}),s.pass((0,e._)`${g} <= ${a.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(h,l)){const _=i.var("valid",(0,e._)`${g} <= ${a.length}`);i.if((0,e.not)(_),()=>y(_)),s.ok(_)}function y(_){i.forRange("i",a.length,g,v=>{s.subschema({keyword:c,dataProp:v,dataPropType:t.Type.Num},_),h.allErrors||i.if((0,e.not)(_),()=>i.break())})}}return ft.validateAdditionalItems=o,ft.default=r,ft}var un={},ht={},Js;function Yo(){if(Js)return ht;Js=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.validateTuple=void 0;const e=re(),t=ue(),n=qe(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:a,it:i}=s;if(Array.isArray(a))return o(s,"additionalItems",a);i.items=!0,!(0,t.alwaysValidSchema)(i,a)&&s.ok((0,n.validateArray)(s))}};function o(s,a,i=s.schema){const{gen:l,parentSchema:d,data:c,keyword:h,it:g}=s;v(d),g.opts.unevaluated&&i.length&&g.items!==!0&&(g.items=t.mergeEvaluated.items(l,i.length,g.items));const y=l.name("valid"),_=l.const("len",(0,e._)`${c}.length`);i.forEach((f,m)=>{(0,t.alwaysValidSchema)(g,f)||(l.if((0,e._)`${_} > ${m}`,()=>s.subschema({keyword:h,schemaProp:m,dataProp:m},y)),s.ok(y))});function v(f){const{opts:m,errSchemaPath:u}=g,p=i.length,b=p===f.minItems&&(p===f.maxItems||f[a]===!1);if(m.strictTuples&&!b){const $=`"${h}" is ${p}-tuple, but minItems or maxItems/${a} are not specified or different at path "${u}"`;(0,t.checkStrictMode)(g,$,m.strictTuples)}}}return ht.validateTuple=o,ht.default=r,ht}var Qs;function ol(){if(Qs)return un;Qs=1,Object.defineProperty(un,"__esModule",{value:!0});const e=Yo(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return un.default=t,un}var dn={},Xs;function al(){if(Xs)return dn;Xs=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=re(),t=ue(),n=qe(),r=Xo(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{schema:i,parentSchema:l,it:d}=a,{prefixItems:c}=l;d.items=!0,!(0,t.alwaysValidSchema)(d,i)&&(c?(0,r.validateAdditionalItems)(a,c):a.ok((0,n.validateArray)(a)))}};return dn.default=s,dn}var fn={},Ys;function il(){if(Ys)return fn;Ys=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:s}})=>s===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${s} valid item(s)`,params:({params:{min:o,max:s}})=>s===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${s}}`},code(o){const{gen:s,schema:a,parentSchema:i,data:l,it:d}=o;let c,h;const{minContains:g,maxContains:y}=i;d.opts.next?(c=g===void 0?1:g,h=y):c=1;const _=s.const("len",(0,e._)`${l}.length`);if(o.setParams({min:c,max:h}),h===void 0&&c===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(h!==void 0&&c>h){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,t.alwaysValidSchema)(d,a)){let p=(0,e._)`${_} >= ${c}`;h!==void 0&&(p=(0,e._)`${p} && ${_} <= ${h}`),o.pass(p);return}d.items=!0;const v=s.name("valid");h===void 0&&c===1?m(v,()=>s.if(v,()=>s.break())):c===0?(s.let(v,!0),h!==void 0&&s.if((0,e._)`${l}.length > 0`,f)):(s.let(v,!1),f()),o.result(v,()=>o.reset());function f(){const p=s.name("_valid"),b=s.let("count",0);m(p,()=>s.if(p,()=>u(b)))}function m(p,b){s.forRange("i",0,_,$=>{o.subschema({keyword:"contains",dataProp:$,dataPropType:t.Type.Num,compositeRule:!0},p),b()})}function u(p){s.code((0,e._)`${p}++`),h===void 0?s.if((0,e._)`${p} >= ${c}`,()=>s.assign(v,!0).break()):(s.if((0,e._)`${p} > ${h}`,()=>s.assign(v,!1).break()),c===1?s.assign(v,!0):s.if((0,e._)`${p} >= ${c}`,()=>s.assign(v,!0)))}}};return fn.default=r,fn}var mr={},Zs;function ll(){return Zs||(Zs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=re(),n=ue(),r=qe();e.error={message:({params:{property:l,depsCount:d,deps:c}})=>{const h=d===1?"property":"properties";return(0,t.str)`must have ${h} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:d,deps:c,missingProperty:h}})=>(0,t._)`{property: ${l},
    missingProperty: ${h},
    depsCount: ${d},
    deps: ${c}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[d,c]=s(l);a(l,d),i(l,c)}};function s({schema:l}){const d={},c={};for(const h in l){if(h==="__proto__")continue;const g=Array.isArray(l[h])?d:c;g[h]=l[h]}return[d,c]}function a(l,d=l.schema){const{gen:c,data:h,it:g}=l;if(Object.keys(d).length===0)return;const y=c.let("missing");for(const _ in d){const v=d[_];if(v.length===0)continue;const f=(0,r.propertyInData)(c,h,_,g.opts.ownProperties);l.setParams({property:_,depsCount:v.length,deps:v.join(", ")}),g.allErrors?c.if(f,()=>{for(const m of v)(0,r.checkReportMissingProp)(l,m)}):(c.if((0,t._)`${f} && (${(0,r.checkMissingProp)(l,v,y)})`),(0,r.reportMissingProp)(l,y),c.else())}}e.validatePropertyDeps=a;function i(l,d=l.schema){const{gen:c,data:h,keyword:g,it:y}=l,_=c.name("valid");for(const v in d)(0,n.alwaysValidSchema)(y,d[v])||(c.if((0,r.propertyInData)(c,h,v,y.opts.ownProperties),()=>{const f=l.subschema({keyword:g,schemaProp:v},_);l.mergeValidEvaluated(f,_)},()=>c.var(_,!0)),l.ok(_))}e.validateSchemaDeps=i,e.default=o}(mr)),mr}var hn={},eo;function cl(){if(eo)return hn;eo=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:s,schema:a,data:i,it:l}=o;if((0,t.alwaysValidSchema)(l,a))return;const d=s.name("valid");s.forIn("key",i,c=>{o.setParams({propertyName:c}),o.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},d),s.if((0,e.not)(d),()=>{o.error(!0),l.allErrors||s.break()})}),o.ok(d)}};return hn.default=r,hn}var mn={},to;function Zo(){if(to)return mn;to=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=qe(),t=re(),n=Ye(),r=ue(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,t._)`{additionalProperty: ${a.additionalProperty}}`},code(a){const{gen:i,schema:l,parentSchema:d,data:c,errsCount:h,it:g}=a;if(!h)throw new Error("ajv implementation error");const{allErrors:y,opts:_}=g;if(g.props=!0,_.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(g,l))return;const v=(0,e.allSchemaProperties)(d.properties),f=(0,e.allSchemaProperties)(d.patternProperties);m(),a.ok((0,t._)`${h} === ${n.default.errors}`);function m(){i.forIn("key",c,w=>{!v.length&&!f.length?b(w):i.if(u(w),()=>b(w))})}function u(w){let C;if(v.length>8){const P=(0,r.schemaRefOrVal)(g,d.properties,"properties");C=(0,e.isOwnProperty)(i,P,w)}else v.length?C=(0,t.or)(...v.map(P=>(0,t._)`${w} === ${P}`)):C=t.nil;return f.length&&(C=(0,t.or)(C,...f.map(P=>(0,t._)`${(0,e.usePattern)(a,P)}.test(${w})`))),(0,t.not)(C)}function p(w){i.code((0,t._)`delete ${c}[${w}]`)}function b(w){if(_.removeAdditional==="all"||_.removeAdditional&&l===!1){p(w);return}if(l===!1){a.setParams({additionalProperty:w}),a.error(),y||i.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(g,l)){const C=i.name("valid");_.removeAdditional==="failing"?($(w,C,!1),i.if((0,t.not)(C),()=>{a.reset(),p(w)})):($(w,C),y||i.if((0,t.not)(C),()=>i.break()))}}function $(w,C,P){const T={keyword:"additionalProperties",dataProp:w,dataPropType:r.Type.Str};P===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(T,C)}}};return mn.default=s,mn}var gn={},no;function ul(){if(no)return gn;no=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=Gn(),t=qe(),n=ue(),r=Zo(),o={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:a,schema:i,parentSchema:l,data:d,it:c}=s;c.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const h=(0,t.allSchemaProperties)(i);for(const f of h)c.definedProperties.add(f);c.opts.unevaluated&&h.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(a,(0,n.toHash)(h),c.props));const g=h.filter(f=>!(0,n.alwaysValidSchema)(c,i[f]));if(g.length===0)return;const y=a.name("valid");for(const f of g)_(f)?v(f):(a.if((0,t.propertyInData)(a,d,f,c.opts.ownProperties)),v(f),c.allErrors||a.else().var(y,!0),a.endIf()),s.it.definedProperties.add(f),s.ok(y);function _(f){return c.opts.useDefaults&&!c.compositeRule&&i[f].default!==void 0}function v(f){s.subschema({keyword:"properties",schemaProp:f,dataProp:f},y)}}};return gn.default=o,gn}var pn={},ro;function dl(){if(ro)return pn;ro=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=qe(),t=re(),n=ue(),r=ue(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:a,schema:i,data:l,parentSchema:d,it:c}=s,{opts:h}=c,g=(0,e.allSchemaProperties)(i),y=g.filter(b=>(0,n.alwaysValidSchema)(c,i[b]));if(g.length===0||y.length===g.length&&(!c.opts.unevaluated||c.props===!0))return;const _=h.strictSchema&&!h.allowMatchingProperties&&d.properties,v=a.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(a,c.props));const{props:f}=c;m();function m(){for(const b of g)_&&u(b),c.allErrors?p(b):(a.var(v,!0),p(b),a.if(v))}function u(b){for(const $ in _)new RegExp(b).test($)&&(0,n.checkStrictMode)(c,`property ${$} matches pattern ${b} (use allowMatchingProperties)`)}function p(b){a.forIn("key",l,$=>{a.if((0,t._)`${(0,e.usePattern)(s,b)}.test(${$})`,()=>{const w=y.includes(b);w||s.subschema({keyword:"patternProperties",schemaProp:b,dataProp:$,dataPropType:r.Type.Str},v),c.opts.unevaluated&&f!==!0?a.assign((0,t._)`${f}[${$}]`,!0):!w&&!c.allErrors&&a.if((0,t.not)(v),()=>a.break())})})}}};return pn.default=o,pn}var yn={},so;function fl(){if(so)return yn;so=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=ue(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:o,it:s}=n;if((0,e.alwaysValidSchema)(s,o)){n.fail();return}const a=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),n.failResult(a,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return yn.default=t,yn}var vn={},oo;function hl(){if(oo)return vn;oo=1,Object.defineProperty(vn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qe().validateUnion,error:{message:"must match a schema in anyOf"}};return vn.default=t,vn}var $n={},ao;function ml(){if(ao)return $n;ao=1,Object.defineProperty($n,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:s,schema:a,parentSchema:i,it:l}=o;if(!Array.isArray(a))throw new Error("ajv implementation error");if(l.opts.discriminator&&i.discriminator)return;const d=a,c=s.let("valid",!1),h=s.let("passing",null),g=s.name("_valid");o.setParams({passing:h}),s.block(y),o.result(c,()=>o.reset(),()=>o.error(!0));function y(){d.forEach((_,v)=>{let f;(0,t.alwaysValidSchema)(l,_)?s.var(g,!0):f=o.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},g),v>0&&s.if((0,e._)`${g} && ${c}`).assign(c,!1).assign(h,(0,e._)`[${h}, ${v}]`).else(),s.if(g,()=>{s.assign(c,!0),s.assign(h,v),f&&o.mergeEvaluated(f,e.Name)})})}}};return $n.default=r,$n}var bn={},io;function gl(){if(io)return bn;io=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=ue(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:o,it:s}=n;if(!Array.isArray(o))throw new Error("ajv implementation error");const a=r.name("valid");o.forEach((i,l)=>{if((0,e.alwaysValidSchema)(s,i))return;const d=n.subschema({keyword:"allOf",schemaProp:l},a);n.ok(a),n.mergeEvaluated(d)})}};return bn.default=t,bn}var _n={},lo;function pl(){if(lo)return _n;lo=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=re(),t=ue(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:a,parentSchema:i,it:l}=s;i.then===void 0&&i.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const d=o(l,"then"),c=o(l,"else");if(!d&&!c)return;const h=a.let("valid",!0),g=a.name("_valid");if(y(),s.reset(),d&&c){const v=a.let("ifClause");s.setParams({ifClause:v}),a.if(g,_("then",v),_("else",v))}else d?a.if(g,_("then")):a.if((0,e.not)(g),_("else"));s.pass(h,()=>s.error(!0));function y(){const v=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},g);s.mergeEvaluated(v)}function _(v,f){return()=>{const m=s.subschema({keyword:v},g);a.assign(h,g),s.mergeValidEvaluated(m,h),f?a.assign(f,(0,e._)`${v}`):s.setParams({ifClause:v})}}}};function o(s,a){const i=s.schema[a];return i!==void 0&&!(0,t.alwaysValidSchema)(s,i)}return _n.default=r,_n}var wn={},co;function yl(){if(co)return wn;co=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=ue(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:o}){r.if===void 0&&(0,e.checkStrictMode)(o,`"${n}" without "if" is ignored`)}};return wn.default=t,wn}var uo;function vl(){if(uo)return cn;uo=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=Xo(),t=ol(),n=Yo(),r=al(),o=il(),s=ll(),a=cl(),i=Zo(),l=ul(),d=dl(),c=fl(),h=hl(),g=ml(),y=gl(),_=pl(),v=yl();function f(m=!1){const u=[c.default,h.default,g.default,y.default,_.default,v.default,a.default,i.default,s.default,l.default,d.default];return m?u.push(t.default,r.default):u.push(e.default,n.default),u.push(o.default),u}return cn.default=f,cn}var Sn={},Cn={},fo;function $l(){if(fo)return Cn;fo=1,Object.defineProperty(Cn,"__esModule",{value:!0});const e=re(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,o){const{gen:s,data:a,$data:i,schema:l,schemaCode:d,it:c}=r,{opts:h,errSchemaPath:g,schemaEnv:y,self:_}=c;if(!h.validateFormats)return;i?v():f();function v(){const m=s.scopeValue("formats",{ref:_.formats,code:h.code.formats}),u=s.const("fDef",(0,e._)`${m}[${d}]`),p=s.let("fType"),b=s.let("format");s.if((0,e._)`typeof ${u} == "object" && !(${u} instanceof RegExp)`,()=>s.assign(p,(0,e._)`${u}.type || "string"`).assign(b,(0,e._)`${u}.validate`),()=>s.assign(p,(0,e._)`"string"`).assign(b,u)),r.fail$data((0,e.or)($(),w()));function $(){return h.strictSchema===!1?e.nil:(0,e._)`${d} && !${b}`}function w(){const C=y.$async?(0,e._)`(${u}.async ? await ${b}(${a}) : ${b}(${a}))`:(0,e._)`${b}(${a})`,P=(0,e._)`(typeof ${b} == "function" ? ${C} : ${b}.test(${a}))`;return(0,e._)`${b} && ${b} !== true && ${p} === ${o} && !${P}`}}function f(){const m=_.formats[l];if(!m){$();return}if(m===!0)return;const[u,p,b]=w(m);u===o&&r.pass(C());function $(){if(h.strictSchema===!1){_.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${l}" ignored in schema at path "${g}"`}}function w(P){const T=P instanceof RegExp?(0,e.regexpCode)(P):h.code.formats?(0,e._)`${h.code.formats}${(0,e.getProperty)(l)}`:void 0,R=s.scopeValue("formats",{key:l,ref:P,code:T});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,e._)`${R}.validate`]:["string",P,R]}function C(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!y.$async)throw new Error("async format in sync schema");return(0,e._)`await ${b}(${a})`}return typeof p=="function"?(0,e._)`${b}(${a})`:(0,e._)`${b}.test(${a})`}}}};return Cn.default=n,Cn}var ho;function bl(){if(ho)return Sn;ho=1,Object.defineProperty(Sn,"__esModule",{value:!0});const t=[$l().default];return Sn.default=t,Sn}var nt={},mo;function _l(){return mo||(mo=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.contentVocabulary=nt.metadataVocabulary=void 0,nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),nt}var go;function wl(){if(go)return Wt;go=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=Wi(),t=sl(),n=vl(),r=bl(),o=_l(),s=[e.default,t.default,(0,n.default)(),r.default,o.metadataVocabulary,o.contentVocabulary];return Wt.default=s,Wt}var En={},Ct={},po;function Sl(){if(po)return Ct;po=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(Ct.DiscrError=e={})),Ct}var yo;function Cl(){if(yo)return En;yo=1,Object.defineProperty(En,"__esModule",{value:!0});const e=re(),t=Sl(),n=jr(),r=Jn(),o=ue(),a={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:i,tagName:l}})=>i===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:i,tag:l,tagName:d}})=>(0,e._)`{error: ${i}, tag: ${d}, tagValue: ${l}}`},code(i){const{gen:l,data:d,schema:c,parentSchema:h,it:g}=i,{oneOf:y}=h;if(!g.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=c.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!y)throw new Error("discriminator: requires oneOf keyword");const v=l.let("valid",!1),f=l.const("tag",(0,e._)`${d}${(0,e.getProperty)(_)}`);l.if((0,e._)`typeof ${f} == "string"`,()=>m(),()=>i.error(!1,{discrError:t.DiscrError.Tag,tag:f,tagName:_})),i.ok(v);function m(){const b=p();l.if(!1);for(const $ in b)l.elseIf((0,e._)`${f} === ${$}`),l.assign(v,u(b[$]));l.else(),i.error(!1,{discrError:t.DiscrError.Mapping,tag:f,tagName:_}),l.endIf()}function u(b){const $=l.name("valid"),w=i.subschema({keyword:"oneOf",schemaProp:b},$);return i.mergeEvaluated(w,e.Name),$}function p(){var b;const $={},w=P(h);let C=!0;for(let N=0;N<y.length;N++){let M=y[N];if(M?.$ref&&!(0,o.schemaHasRulesButRef)(M,g.self.RULES)){const U=M.$ref;if(M=n.resolveRef.call(g.self,g.schemaEnv.root,g.baseId,U),M instanceof n.SchemaEnv&&(M=M.schema),M===void 0)throw new r.default(g.opts.uriResolver,g.baseId,U)}const z=(b=M?.properties)===null||b===void 0?void 0:b[_];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);C=C&&(w||P(M)),T(z,N)}if(!C)throw new Error(`discriminator: "${_}" must be required`);return $;function P({required:N}){return Array.isArray(N)&&N.includes(_)}function T(N,M){if(N.const)R(N.const,M);else if(N.enum)for(const z of N.enum)R(z,M);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function R(N,M){if(typeof N!="string"||N in $)throw new Error(`discriminator: "${_}" values must be unique strings`);$[N]=M}}}};return En.default=a,En}const El="http://json-schema.org/draft-07/schema#",Pl="http://json-schema.org/draft-07/schema#",kl="Core schema meta-schema",Ol={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Rl=["object","boolean"],Nl={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Il={$schema:El,$id:Pl,title:kl,definitions:Ol,type:Rl,properties:Nl,default:!0};var vo;function Ll(){return vo||(vo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Ki(),r=wl(),o=Cl(),s=Il,a=["/properties"],i="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(_,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var d=Gn();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var c=re();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var h=Ar();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var g=Jn();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})}(Ft,Ft.exports)),Ft.exports}var Al=Ll();const jl=Ei(Al),Tl="http://json-schema.org/draft-07/schema#",xl="object",ql={title:{type:"string",description:"The title of the course."},description:{type:"string",description:"A short description of the course."},language:{type:"string",description:"The primary language of the course."},targetLanguage:{type:"string",description:"The language being taught in the course."},author:{type:"string",description:"The name of the course creator."},version:{type:"string",description:"Versioning for tracking updates to the course."},createdAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp when the course was created."},updatedAt:{type:"string",pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$",description:"Timestamp of the last course update."},tags:{type:"array",items:{type:"string"},description:"Keywords related to the course for searching and categorization."},lessons:{type:"array",items:{type:"object",properties:{title:{type:"string"},description:{type:"string"},cards:{type:"array",items:{oneOf:[{type:"object",properties:{class:{type:"string",enum:["vocab"]},qlang:{type:"string",enum:["default","target"]},vocab:{type:"object",additionalProperties:{type:"string"}}},required:["class","qlang","vocab"]},{type:"object",properties:{class:{type:"string",enum:["dynamic-vocab"]},qlang:{type:"string",enum:["default","target"]}},required:["class","qlang"]},{type:"object",properties:{class:{type:"string",enum:["multiple-choice"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answers:{type:"array",items:{type:"string"}},answer:{type:"string"}},required:["class","qlang","question","answers","answer"]},{type:"object",properties:{class:{type:"string",enum:["writing"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["writing-blocks"]},qlang:{type:"string",enum:["default","target"]},question:{type:"string"},answer:{type:"string"},options:{type:"array",items:{type:"string"}}},required:["class","qlang","question"]},{type:"object",properties:{class:{type:"string",enum:["blanks"]},qlang:{type:"string",enum:["default","target"]},alang:{type:"string",enum:["default","target"]},question:{type:"string"},words:{type:"array",items:{type:"object",minProperties:1,maxProperties:1,additionalProperties:{type:"boolean"}}}},required:["class","qlang","question","words"]}]}}},required:["title","cards"]}}},Dl={$schema:Tl,type:xl,properties:ql};var Ml=D('<div class=modal-bg><dialog class=confirm-dialog><h3></h3><footer><button class="cancel-button utf8-icon-close"></button><button class="next-button utf8-icon-tick">');const ea=Lt(),Vl=e=>{const[t,n]=B(!1),[r,o]=B(()=>{}),[s,a]=B(""),i=(c,h)=>{a(c),o(()=>h),n(!0)},l=()=>{r()(),n(!1)},d=()=>{n(!1)};return A(ea.Provider,{value:{showConfirm:i},get children(){return[H(()=>e.children),A(ae,{get when(){return t()},get children(){var c=Ml(),h=c.firstChild,g=h.firstChild,y=g.nextSibling,_=y.firstChild,v=_.nextSibling;return j(g,s),_.$$click=d,v.$$click=l,Z(f=>{var m=t()?"flex":"none",u=t();return m!==f.e&&((f.e=m)!=null?c.style.setProperty("display",m):c.style.removeProperty("display")),u!==f.t&&(h.open=f.t=u),f},{e:void 0,t:void 0}),c}})]}})},Qn=()=>{const e=At(ea);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e};le(["click"]);function Fl(){const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}function ta(){document.exitFullscreen&&document.exitFullscreen()}const Un=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},Tt=async e=>{const t=await $e(),n=t.getSourceLang(),r=t.getTargetLang();return e.alang&&e.alang===e.qlang?{q:n,a:r}:{q:e.qlang==="default"?n:r,a:e.alang??(e.qlang==="default"?r:n)}};var Ul=D("<button id=action-button aria-label=action-button>");const xt=e=>{const{t}=ve(),[n,r]=B(!1);me(()=>{e.isCorrect===null&&r(!1)});const o=()=>{console.log("Action button click, props.isCorrect =",e.isCorrect),n()?e.isCorrect===!1&&e.onReset?(console.log("AB click: reset"),r(!1),e.onReset()):(console.log("AB other click: has checked, calling complete"),e.onComplete()):(console.log("AB first click: not yet checked, checking now"),e.onCheckAnswer(),r(!0))},s=a=>{e.isInputPresent&&e.isCorrect!==null&&(a.key==="Enter"||a.key===" "||a.key==="Spacebar")&&o()};return Oa(()=>document.addEventListener("keydown",s)),Ge(()=>document.removeEventListener("keydown",s)),(()=>{var a=Ul();return a.$$click=o,j(a,(()=>{var i=H(()=>e.isCorrect===null);return()=>i()?t("check"):H(()=>e.isCorrect===!0)()?t("correct_next"):t("incorrect_next")})()),Z(i=>{var l=e.isCorrect===null?"next-button":e.isCorrect===!0?"correct-next-button":"incorrect-next-button",d=!e.isInputPresent;return l!==i.e&&ke(a,i.e=l),d!==i.t&&(a.disabled=i.t=d),i},{e:void 0,t:void 0}),a})()};le(["click"]);let kn;window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices(),kn=speechSynthesis.getVoices().find(e=>e.lang.startsWith("en")&&e.localService)});const Kl={heb:{langTag:"en-GB",letters:{:"aleph",:"bet",:"gimmel",:"dalet",:"he",:"vav",:"zayin",:"chet",:"tet",:"yod",:"kaf",:"kaf",:"lamed",:"mem",:"mem",:"nun",:"nun",:"samekh",:"ayin",:"pe",:"pe",:"tsadi",:"tsadi",:"qof",:"resh",:"shin",:"tav"}},ang:{langTag:"en-GB",letters:{:"ash",:"thorn",:"eth",:"wynn",:"wynn",:"yogh"}}};function na(e,t){if(!kn)return;if(!e||!t){console.warn("Missing letter or language code");return}const n=Kl[t];if(!n){console.warn("Unsupported language code:",t);return}const r=e.toLowerCase(),o=n.letters[r];if(!o){console.warn(`Letter name not found for '${e}' in language '${t}'`);return}const s=new SpeechSynthesisUtterance(o);s.lang=n.langTag,s.rate=.75,kn&&(s.voice=kn),speechSynthesis.cancel(),speechSynthesis.speak(s),console.log(s)}var zl=D('<section class="card multiple-choice"><h3 class=question></h3><div class=options>'),Hl=D("<p>Loading..."),Wl=D("<h4>"),Bl=D("<button>");const Gl={class:"multiple-choice",question:"A Question",qlang:"default",answers:["An answer","Another answer"],answer:"An answer"},Jl=e=>{const{t}=ve(),[n]=pe(()=>Tt(e.card)),[r,o]=B(null),[s,a]=B(!1),[i,l]=B(null),[d,c]=B(Un(e.card.answers)),[h,g]=B(!1);me(()=>{c(Un(e.card.answers)),a(!1),o(null),l(null),g(!1)});const y=f=>{h()||(o(f),f.length===1&&na(f,n().a))},_=()=>{o(null),l(null),a(!1),g(!1)},v=()=>{s()?(o(null),l(null),a(!1),g(!1)):(g(!0),r()===e.card.answer?(l(!0),e.onCorrect()):(l(!1),e.onIncorrect()),a(!0))};return A(ae,{get when(){return n()},get fallback(){return Hl()},get children(){return[(()=>{var f=zl(),m=f.firstChild,u=m.nextSibling;return j(f,(()=>{var p=H(()=>n().q!==n().q);return()=>p()&&(()=>{var b=Wl();return j(b,()=>t("in_lang_how_do_you_say",{lang:t(n().a)})),Z(()=>Y(b,"lang",n().q)),b})()})(),m),j(m,()=>e.card.question),j(u,A(at,{get each(){return d()},children:p=>(()=>{var b=Bl();return b.$$click=()=>y(p),j(b,p),Z($=>{var w=n().a,C=`multiple-choice-button ${r()===p?"selected":""} ${s()&&r()===p?i()?"correct":"incorrect":""}`,P=h()?!0:void 0,T=s()?i()?`${p} (${t("correct")})`:`${p} (${t("incorrect")})`:`${t("select")} ${p}`;return w!==$.e&&Y(b,"lang",$.e=w),C!==$.t&&ke(b,$.t=C),P!==$.a&&(b.disabled=$.a=P),T!==$.o&&Y(b,"aria-label",$.o=T),$},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()})),Z(()=>Y(m,"lang",n().q)),f})(),A(xt,{get isCorrect(){return i()},get isInputPresent(){return r()!==null},onCheckAnswer:v,get onComplete(){return e.onComplete},onReset:_})]}})};le(["click"]);const ra=Lt(void 0),Ql=e=>A(ra.Provider,{get value(){return{config:e.config,isLoading:!1}},get children(){return e.children}}),qt=()=>{const e=At(ra);if(!e)throw new Error("useConfigContext must be used within ConfigProvider");return e};var Xl=D('<section class="vocab-match card"><h3></h3><table><tbody>'),Yl=D("<footer class=vocab-match-footer>"),Zl=D("<p>Loading..."),ec=D("<tr><td><button></button></td><td><button>");const tc={class:"vocab",qlang:"default",vocab:{word:"ord"}},sa=e=>{const{t}=ve(),[n]=pe(()=>Tt(e.card)),[r,o]=B([]),[s,a]=B([]),[i,l]=B(!1),[d,c]=B(null),[h,g]=B(null),{config:y}=qt();me(()=>{const m=Object.values(e.card.vocab);o(Un(m)),a(Object.keys(e.card.vocab).map((u,p)=>{const b=e.card.vocab[u];return{leftWord:u,rightWord:b,shuffledRightWord:r()[p],isLeftMatched:!1,isRightMatched:!1,isLeftDisabled:!1,isRightDisabled:!1,shakeIt:!1,shakeRight:!1}}))});const _=m=>{c(u=>u===m?null:m)},v=m=>{g(u=>u===m?null:m)},f=()=>{e.onCorrect(),e.onComplete()};return me(()=>{if(!d()||!h())return;const m=d(),u=h();e.card.vocab[m]===u?(a(b=>b.map($=>{const w=$.leftWord===m&&$.rightWord===u,C=$.shuffledRightWord===u;return w||C?{...$,isLeftMatched:w?!0:$.isLeftMatched,isRightMatched:C?!0:$.isRightMatched,isLeftDisabled:w?!0:$.isLeftDisabled,isRightDisabled:C?!0:$.isRightDisabled}:$})),c(null),g(null)):(a(b=>b.map($=>$.leftWord===m||$.shuffledRightWord===u?{...$,shakeIt:$.leftWord===m,shakeRight:$.shuffledRightWord===u}:$)),setTimeout(()=>{a(b=>b.map($=>$.shakeIt||$.shakeRight?{...$,shakeIt:!1,shakeRight:!1}:$))},y.animationShakeMs),c(null),g(null))}),me(()=>{s().every(m=>m.isLeftMatched&&m.isRightMatched)&&!i()&&l(!0)}),A(ae,{get when(){return n()},get fallback(){return Zl()},get children(){return[(()=>{var m=Xl(),u=m.firstChild,p=u.nextSibling,b=p.firstChild;return j(u,()=>e.card.question||t("match_the_words")),j(b,A(at,{get each(){return s()},children:$=>(()=>{var w=ec(),C=w.firstChild,P=C.firstChild,T=C.nextSibling,R=T.firstChild;return P.$$click=()=>_($.leftWord),j(P,()=>$.leftWord),R.$$click=()=>v($.shuffledRightWord),j(R,()=>$.shuffledRightWord),Z(N=>{var M=n().q,z=`vocab-match left-word ${$.isLeftMatched?"correct":""} ${d()===$.leftWord?"selected":""} ${$.shakeIt?"shake":""}`,U=$.isLeftDisabled,W=$.isLeftMatched?`${$.leftWord} (${t("matched")})`:`${t("select")} ${$.leftWord}`,ne=n().a,ge=`vocab-match right-word ${$.isRightMatched?"correct":""} ${h()===$.shuffledRightWord?"selected":""} ${$.shakeRight?"shake":""}`,se=$.isRightDisabled,ce=$.isRightMatched?`${$.shuffledRightWord}  (${t("matched")})`:`${t("select")} ${$.shuffledRightWord}`;return M!==N.e&&Y(P,"lang",N.e=M),z!==N.t&&ke(P,N.t=z),U!==N.a&&(P.disabled=N.a=U),W!==N.o&&Y(P,"aria-label",N.o=W),ne!==N.i&&Y(R,"lang",N.i=ne),ge!==N.n&&ke(R,N.n=ge),se!==N.s&&(R.disabled=N.s=se),ce!==N.h&&Y(R,"aria-label",N.h=ce),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),w})()})),Z(()=>Y(u,"lang",n().q)),m})(),A(ae,{get when(){return i()},get children(){var m=Yl();return j(m,A(xt,{get isCorrect(){return i()===!1?null:!0},get isInputPresent(){return i()},onCheckAnswer:f,onComplete:f})),m}})]}})};le(["click"]);var $o=D("<span>"),nc=D("<span class=provided-word>"),rc=D('<section class="card blanks-card"><h4></h4><h3 class=question></h3><div class=word-options>'),sc=D("<p>Loading..."),oc=D("<button>");const ac={class:"blanks",question:"Question",qlang:"default",words:[{answer:!0,other:!1}]},ic=e=>{const{t}=ve(),[n]=pe(()=>Tt(e.card)),[r,o]=B([]),[s,a]=B([]),[i,l]=B(null),[d,c]=B(!1),[h,g]=B(null);me(()=>{o(Un(e.card.words.map(u=>Object.keys(u)[0])))});const y=u=>{s().includes(u)||(a([...s(),u]),c(!1))},_=()=>{const u=e.card.words.filter(b=>Object.values(b)[0]).map(b=>Object.keys(b)[0]);s().length===u.length&&s().every((b,$)=>b===u[$])?(c(!0),l(!0),e.onCorrect(s().length)):(c(!1),l(!1),e.onIncorrect(),g("incomplete"),setTimeout(()=>g(null),1e3))},v=()=>{i()&&e.onComplete()},f=()=>{a([]),l(null)},m=()=>{let u=0;const p=e.card.words.filter(b=>Object.values(b)[0]).map(b=>Object.keys(b)[0]);return e.card.question.split(/([\s\b])/).map(b=>{if(/^_{2,}/.test(b)){const $=s()[u],w=p[u];if(u++,d()){const C=$===w;return(()=>{var P=$o();return ke(P,C?"blank-correct":"blank-incorrect"),j(P,$),P})()}else return(()=>{var C=$o();return ke(C,$?"blank-filled":"blank"),j(C,$??"__"),C})()}else return(()=>{var $=nc();return j($,b),$})()})};return A(ae,{get when(){return n()},get fallback(){return sc()},get children(){return[(()=>{var u=rc(),p=u.firstChild,b=p.nextSibling,$=b.nextSibling;return j(p,()=>t("fill_in_the_blanks")),j(b,m),j($,()=>r().map(w=>{const C=s().includes(w),P=h()===w?"shake":"",T=C||i()===!0,R="word-option "+(C?"selected":"")+" "+P,N=C?`${w} (${t("selected")})`:`${t("select")} ${w}`;return(()=>{var M=oc();return M.$$click=()=>y(w),M.disabled=T,ke(M,R),Y(M,"aria-label",N),j(M,w),Z(()=>Y(M,"lang",n().a)),M})()})),Z(w=>{var C=n().q,P=n().q==="heb"?"rtl":"ltr";return C!==w.e&&Y(b,"lang",w.e=C),P!==w.t&&Y(b,"dir",w.t=P),w},{e:void 0,t:void 0}),u})(),A(xt,{get isCorrect(){return i()},get isInputPresent(){return s().length>0},onCheckAnswer:_,onComplete:v,onReset:f})]}})};le(["click"]);var lc=D("<aside class=letter-buttons>"),cc=D("<button>");const uc=3,gr={ang:[{symbol:"",name:"Ash"},{symbol:"",name:"o-slash"},{symbol:"",name:"Thorn"},{symbol:"",name:"Eth"},{symbol:"",name:"Yogh"},{symbol:"",name:"o-e"},{symbol:"",name:"long-s"},{symbol:"",name:"wynn"},{symbol:"",name:"long-a"},{symbol:"",name:"long-e"},{symbol:"",name:"long-i"},{symbol:"",name:"long-o"},{symbol:"",name:"long-u"},{symbol:"",name:"long-y"}],heb:[{symbol:"",name:"Alef"},{symbol:"",name:"Bet"},{symbol:"",name:"Gimel"},{symbol:"",name:"Dalet"},{symbol:"",name:"He"},{symbol:"",name:"Vav"},{symbol:"",name:"Zayin"},{symbol:"",name:"Chet"},{symbol:"",name:"Tet"},{symbol:"",name:"Yod"},{symbol:"",name:"Kaf"},{symbol:"",name:"Final Kaf"},{symbol:"",name:"Lamed"},{symbol:"",name:"Mem"},{symbol:"",name:"Final Mem"},{symbol:"",name:"Nun"},{symbol:"",name:"Final Nun"},{symbol:"",name:"Samekh"},{symbol:"",name:"Ayin"},{symbol:"",name:"Pe"},{symbol:"",name:"Final Pe"},{symbol:"",name:"Tsadi"},{symbol:"",name:"Final Tsadi"},{symbol:"",name:"Qof"},{symbol:"",name:"Resh"},{symbol:"",name:"Shin"},{symbol:"",name:"Tav"}],hun:[{symbol:"",name:"a-acute"},{symbol:"",name:"e-acute"},{symbol:"",name:"i-acute"},{symbol:"",name:"o-acute"},{symbol:"",name:"o-umlaut"},{symbol:"",name:"o-double-acute"},{symbol:"",name:"u-acute"},{symbol:"",name:"u-umlaut"},{symbol:"",name:"u-double-acute"}]},dc=e=>{if(!gr[e.lang])return console.warn(`No buttons exist for the supplied language, "${e.lang}".`),"";if(e.text.length===0)return"";let t=gr[e.lang].filter(n=>e.text.includes(n.symbol));if(t.length<3){const n=gr[e.lang].filter(r=>!t.some(o=>o.symbol===r.symbol));t=[...t,...n.slice(0,uc-t.length)]}return(()=>{var n=lc();return j(n,A(at,{each:t,children:r=>(()=>{var o=cc();return o.$$click=()=>e.onSelect(r.symbol),j(o,()=>r.symbol),Z(s=>{var a=r.name,i=r.name;return a!==s.e&&Y(o,"aria-label",s.e=a),i!==s.t&&Y(o,"title",s.t=i),s},{e:void 0,t:void 0}),o})()})),n})()};le(["click"]);var fc=D('<section class="card writing-card"><h3 class=question></h3><div class=input><textarea id=writing-input class=answer autofocus>'),hc=D("<p>Loading..."),mc=D("<h4>");const gc={class:"writing",qlang:"default",question:"Question",answer:"Answer"},bo=e=>e.trim().toLowerCase().replace(/\W+/g,"").replace(/\s+/g," "),pc=e=>{const[t]=pe(()=>Tt(e.card)),{t:n}=ve(),[r,o]=B(""),[s,a]=B(null);let i=null;const l=H(()=>bo(e.card.answer)),d=y=>{a(null),o(y)},c=y=>{if(!i)return;na(y,t().a);const _=i,v=_.selectionStart??r().length,f=_.selectionEnd??r().length,m=r().slice(0,v)+y+r().slice(f);d(m),queueMicrotask(()=>{_.selectionStart=_.selectionEnd=v+y.length,_.focus()})},h=()=>{bo(r())===l()?(a(!0),e.onCorrect()):(a(!1),e.onIncorrect())},g=()=>{a(null),d(""),e.onComplete()};return A(ae,{get when(){return t()?.a},get fallback(){return hc()},get children(){return[(()=>{var y=fc(),_=y.firstChild,v=_.nextSibling,f=v.firstChild;return j(y,(()=>{var m=H(()=>t().q!==t().a);return()=>m()&&(()=>{var u=mc();return j(u,()=>n("translate_to_lang",{lang:n(t().a)})),u})()})(),_),j(_,()=>e.card.question),f.$$input=m=>d(m.target.value),ot(m=>i=m,f),j(v,A(dc,{get lang(){return t().a},onSelect:c,get text(){return e.card.answer}}),null),Z(m=>{var u=t().q,p=n("type_in")+" "+n(t().a)+"...",b=t().a,$=n("enter_answer");return u!==m.e&&Y(_,"lang",m.e=u),p!==m.t&&Y(f,"placeholder",m.t=p),b!==m.a&&Y(f,"lang",m.a=b),$!==m.o&&Y(f,"aria-label",m.o=$),m},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(()=>f.value=r()),y})(),A(xt,{get isCorrect(){return s()},get isInputPresent(){return r().length>0},onCheckAnswer:h,onComplete:g})]}})};le(["input"]);var yc=D('<section class="writing-blocks-card card"><h3 class=question></h3><div class=selected-words></div><hr><div class=options>'),vc=D("<p>Loading..."),$c=D("<button class=selected-word>"),bc=D("<button class=option-button>");const _c={class:"writing-blocks",qlang:"default",question:"Question",answer:"Answer",options:["Answer","Another"]},pr=e=>e.trim().toLowerCase().replace(/[^\s\w]+/g,"").replace(/\s+/g," "),wc=e=>{let t="";const{t:n}=ve(),[r]=pe(()=>Tt(e.card)),[o,s]=B(null),[a,i]=B([]),l=H(()=>pr(e.card.answer)),d=g=>{s(null),i(y=>[...y,g])},c=g=>{s(null),i(y=>y.filter((_,v)=>v!==g))},h=()=>{console.log("WritingBlocks handleCheckAnswer");const g=pr(a().join(" "));console.log(`WritingBlocks normalizedUserInput = ${g} vs ${l()}`),g===l()?(console.log("WritingBlocks CORRECT"),s(!0),e.onCorrect()):(console.log("WritingBlocks INCORRECT"),s(!1),e.onIncorrect())};return me(()=>{i([]),s(null)}),me(()=>{const g=pr(a().join(" "));o()!==null&&g!==t&&(s(null),i([]))}),A(ae,{get when(){return r()},get fallback(){return vc()},get children(){return[(()=>{var g=yc(),y=g.firstChild,_=y.nextSibling,v=_.nextSibling,f=v.nextSibling;return j(y,()=>e.card.question),j(_,A(at,{get each(){return a()},children:(m,u)=>(()=>{var p=$c();return p.$$click=()=>c(u()),Y(p,"aria-label",`Remove word: ${m}`),j(p,m),p})()})),j(f,A(at,{get each(){return e.card.options},children:m=>(()=>{var u=bc();return u.$$click=()=>d(m),j(u,m),Z(p=>{var b=a().includes(m),$=a().includes(m)?`${m} (${n("selected")})`:`${n("select")} ${m}`;return b!==p.e&&(u.disabled=p.e=b),$!==p.t&&Y(u,"aria-label",p.t=$),p},{e:void 0,t:void 0}),u})()})),Z(()=>Y(y,"lang",r().q)),g})(),A(xt,{get isCorrect(){return o()},get isInputPresent(){return a().length>0},onCheckAnswer:h,get onComplete(){return e.onComplete}})]}})};le(["click"]);const Sc={class:"dynamic-vocab",question:"Question",qlang:"default"},Cc=e=>{const t=H(()=>{const r={};for(const o of e.lesson.cards.filter(s=>["vocab","blanks"].includes(s.class)))if(o.class==="blanks"&&o.qlang===e.card.qlang)o.words.forEach(s=>{const a=Object.keys(s)[0],i=s[a];r[a]=i?a:""});else if(o.class==="vocab")if(o.qlang===e.card.qlang)Object.assign(r,o.vocab);else{const s=Object.fromEntries(Object.entries(o.vocab).map(([a,i])=>[i,a]));Object.assign(r,s)}return r}),n={class:"vocab",qlang:e.card.qlang,vocab:t()};return A(sa,{card:n,get onCorrect(){return e.onCorrect},get onIncorrect(){return e.onIncorrect},get onComplete(){return e.onComplete}})},Ec={blanks:ac,"dynamic-vocab":Sc,"multiple-choice":Gl,vocab:tc,"writing-blocks":_c,writing:gc},Pc=e=>structuredClone(Ec[e]),kc=["blanks","dynamic-vocab","multiple-choice","vocab","writing-blocks","writing"];function Oc(e){return typeof e=="object"&&e!==null&&"answer"in e}var Rc=D("<p>"),Nc=D("<div>"),Ic=D("<p>Unknown lesson card...");function oa(e){const{t}=ve();return(()=>{var n=Nc();return Rt(n,"dblclick",e.ondblclick),j(n,A(Ka,{get fallback(){return Ic()},get children(){return[A(Ze,{get when(){return!e.card},get children(){var r=Rc();return j(r,()=>t("lesson_complete")),r}}),A(Ze,{get when(){return e.card?.class==="dynamic-vocab"},get children(){return A(Cc,{get card(){return e.card},get lesson(){return e.lesson},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="writing"},get children(){return A(pc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="writing-blocks"},get children(){return A(wc,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="multiple-choice"},get children(){return A(Jl,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="vocab"},get children(){return A(sa,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}}),A(Ze,{get when(){return e.card?.class==="blanks"},get children(){return A(ic,{get card(){return e.card},get onComplete(){return e.onComplete?e.onComplete:()=>{}},get onCorrect(){return e.onCorrect?e.onCorrect:()=>{}},get onIncorrect(){return e.onIncorrect?e.onIncorrect:()=>{}}})}})]}})),n})()}le(["dblclick"]);var Lc=D("<progress class=leeson-progress>");function Ac(e){const{t}=ve();return(()=>{var n=Lc();return Z(r=>{var o=e.max,s=t("lesson_progress"),a=e.title;return o!==r.e&&Y(n,"max",r.e=o),s!==r.t&&Y(n,"aria-label",r.t=s),a!==r.a&&Y(n,"title",r.a=a),r},{e:void 0,t:void 0,a:void 0}),Z(()=>n.value=e.value),n})()}var jc=D("<article class=lesson><h2><em></em><button class=close-button>");const _o={title:"A Lesson",description:"A lesson description",cards:[]},Tc=e=>{const{t}=ve(),{showConfirm:n}=Qn(),[r,o]=B([]),s=H(()=>(r()&&r()[0])??null);let a=null;me(()=>{e.lesson&&e.lesson.cards&&o(e.lesson.cards)});const i=()=>{n(t("confirm_leave_lesson"),()=>{ta(),e.onCancel()})},l=y=>{y.key==="Escape"&&i()},d=y=>{const _=t("confirm_leave_app");return y.preventDefault(),_};window.addEventListener("keyup",l),window.addEventListener("beforeunload",d),Ge(()=>{window.removeEventListener("keyup",l),window.removeEventListener("beforeunload",d)});const c=()=>{if(a){if(o(y=>y.slice(1)),r().length===0){e.onLessonComplete();return}}else o(y=>[...y.slice(1),y[0]])},h=()=>{a=!1;const y=e.lesson.cards.indexOf(r()[0]);e.onAnswer(y,"bad_answer_goes_here")},g=()=>{a=!0;const y=e.lesson.cards.indexOf(r()[0]);e.onAnswer(y)};return!e.lesson||!e.lesson.cards?"Loading lesson cards...":(()=>{var y=jc(),_=y.firstChild,v=_.firstChild,f=v.nextSibling;return j(v,()=>e.lesson.title),f.$$click=i,j(y,A(Ac,{get value(){return H(()=>r().length===0)()?1:e.lesson.cards.length-r().length+1},get max(){return e.lesson.cards.length},get title(){return`${e.lesson.cards.length-r().length+1} / ${e.lesson.cards.length}`}}),null),j(y,A(oa,{get card(){return s()},get lesson(){return e.lesson},onComplete:c,onCorrect:g,onIncorrect:h}),null),Z(()=>Y(f,"aria-label",t("cancel_lesson"))),y})()};le(["click"]);const Pn="oe_",mt={CURRENT_LESSON_INDEX:e=>`${Pn}current_lesson_index_${e}`,ANSWERS:e=>`${Pn}answers_${e}`,LESSONS:e=>`${Pn}course_${e}`,CURRENT_COURSE_INDEX:`${Pn}course`,STORE_NAME:"oe-courses",EDITING_MODE:"oe-editing"},xc=()=>Object.assign({"../../lessons/alefbet.json":()=>rt(()=>import("./alefbet-CifqZBcD.js"),[]),"../../lessons/lessons.json":()=>rt(()=>import("./lessons-BgGmDxE0.js"),[]),"../../lessons/lessons.old.json":()=>rt(()=>import("./lessons.old-Bh74MdUW.js"),[]),"../../lessons/test.json":()=>rt(()=>import("./test-B9qeRIeH.js"),[]),"../../lessons/uk-constitution.json":()=>rt(()=>import("./uk-constitution-2T_E9-3M.js"),[])}),qc={title:"New Course",description:"A description",language:"en",targetLanguage:"en",level:"level",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[]},Dc=[];let yr;const On=e=>[...e.courses.map(t=>t.title)],$e=async()=>(yr||(yr=await Mc()),yr),Mc=async()=>{const[e,t]=Bo(Wo({courseMetadata:null,lessons:[],loading:!1}),{name:mt.STORE_NAME,storage:localStorage});let n=null;const r=()=>(n||(n=Do()),n),o=async R=>{const N=await r();if(isNaN(R)||R<0||R>=N.courses.length)throw new Error(`Invalid course index for deletion: ${R}`);$(R),await d(0)},s=({lessons:R,courseMetadata:N})=>{t({lessons:R,courseMetadata:N})},a=R=>{const M=new jl().compile(Dl);if(!M(R))throw console.error(JSON.stringify(M.errors,null,4)),console.debug("courseData",R),new TypeError("Invalid course data",R)},i=async R=>{const N=`../../lessons/${R}.json`;console.info(`Loading course "${R}" from "${N}"`);const M=await xc();if(!M[N])throw new Error("Lesson not found: "+N);const U=(await M[N]()).default;return console.info(`Loaded course ${R} from ${N}`),U},l=R=>{console.log("saveCourseToStorage"),t("loading",!0);try{const N=JSON.parse(R);a(N);const{lessons:M,...z}=N;t("lessons",M),t("courseMetadata",z)}catch(N){console.error("Invalid course file:",N)}finally{t("loading",!1)}},d=async R=>{if(console.info("loadCourseFromFile enter with",R),isNaN(R)){console.error("Course index is not a number",R);return}const N=await r();if(R===N.courses.length){console.log("loadCourseFromFile Shall use the pre-loaded course from storage");return}if(R<0)throw console.warn("loadCourseFromFile Invalid course index:",R),new Error("loadCourseFromFile: Negative course index? "+R);t("loading",!0);try{let M;const{fileBasename:z}=N.courses[R];M=await i(z),a(M);const{lessons:U,...W}=M;s({lessons:U,courseMetadata:W}),t({loading:!1}),console.info("loadCourseFromFile OK")}catch(M){console.error("loadCourseFromFile Error loading lessons:",M),t("loading",!1)}console.info("loadCourseFromFile leave")},c=H(()=>e.lessons||[]),h=async R=>{if(!e.lessons||e.lessons.length===0){if(!Number.isFinite(R))throw new Error("No lessons loaded and no courseIdx supplied?");await d(R),console.debug("getCourseData loaded course",R)}return{...e.courseMetadata,lessons:e.lessons}},g=()=>e.courseMetadata?.language||"",y=()=>e.courseMetadata?.targetLanguage||"",_=R=>t("lessons",R),v=H(()=>e.lessons&&e.lessons.length),f=R=>{t("lessons",N=>{const M={..._o};if(N){if(R===void 0||R>N.length)return[...N,M];if(R<=0)return[M,...N]}else return[M];return[...N.slice(0,R),{..._o},...N.slice(R)]})},m=R=>{console.trace("initNewCourse enter");const N=On(R).length;return t({loading:!0}),s({lessons:[...Dc],courseMetadata:{...qc}}),t({loading:!1}),console.log("initNewCourse leave with",N),N},u=()=>e.lessons.map((R,N)=>({title:R.title,index:N})),p=(R,N,M)=>{console.debug("Enter saveCard");const z=e.lessons.map((U,W)=>W===N?{...U,cards:U.cards.map((ne,ge)=>ge===M?R:ne)}:U);_(z),console.log("saved card in",mt.STORE_NAME)},b=(R,N)=>{const M=e.lessons.map((z,U)=>U===R?{...z,cards:z.cards.filter((W,ne)=>ne!==N)}:z);_(M)},$=R=>{console.log("reset course",R);const N=R;localStorage.removeItem(mt.CURRENT_LESSON_INDEX(N)),localStorage.removeItem(mt.CURRENT_COURSE_INDEX),localStorage.removeItem(mt.ANSWERS(N)),localStorage.removeItem(mt.STORE_NAME),t({courseMetadata:null,lessons:[],loading:!1})};return{store:e,setTitle:R=>t("courseMetadata","title",R),getTitle:()=>e.courseMetadata?.title??"",setDescription:R=>{t("courseMetadata","description",R),console.log("set courseMetadata description",R)},getDescription:()=>(console.log("get courseMetadata description",e.courseMetadata?.description),e.courseMetadata?.description??""),initNewCourse:m,saveCourseToStorage:l,loadCourseFromFile:d,setCourse:s,deleteCourse:o,saveCard:p,deleteCard:b,setLessons:_,getLessons:c,getCourseData:h,getTargetLang:y,getSourceLang:g,getTotalLessonsCount:v,addLesson:f,lessonTitles2Indicies:u,reset:$,assertValidCourseData:a}};function aa(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const a={to:o,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:l=>{l&&(n=!0),i.navigate(o,{...s,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Rr;function xr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Rr=window.history.state._depth}xr();function Vc(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Fc(e,t){let n=!1;return()=>{const r=Rr;xr();const o=r==null?null:Rr-r;if(n){n=!1;return}o&&t(o)?(n=!0,window.history.go(-o)):e()}}const Uc=/^(?:[a-z0-9]+:)?\/\//i,Kc=/^\/+|(\/)\/+$/g,ia="http://sr";function kt(e,t=!1){const n=e.replace(Kc,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Rn(e,t,n){if(Uc.test(t))return;const r=kt(e),o=n&&kt(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+kt(t,!s)}function zc(e,t){if(e==null)throw new Error(t);return e}function Hc(e,t){return kt(e).replace(/\/*(\*.*)?$/g,"")+kt(t)}function la(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Wc(e,t,n){const[r,o]=e.split("/*",2),s=r.split("/").filter(Boolean),a=s.length;return i=>{const l=i.split("/").filter(Boolean),d=l.length-a;if(d<0||d>0&&o===void 0&&!t)return null;const c={path:a?"":"/",params:{}},h=g=>n===void 0?void 0:n[g];for(let g=0;g<a;g++){const y=s[g],_=y[0]===":",v=_?l[g]:l[g].toLowerCase(),f=_?y.slice(1):y.toLowerCase();if(_&&vr(v,h(f)))c.params[f]=v;else if(_||!vr(v,f))return null;c.path+=`/${v}`}if(o){const g=d?l.slice(-d).join("/"):"";if(vr(g,h(o)))c.params[o]=g;else return null}return c}}function vr(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Bc(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function ca(e){const t=new Map,n=No();return new Proxy({},{get(r,o){return t.has(o)||Io(n,()=>t.set(o,H(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Gc(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([o,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(o):s instanceof Array?(n.delete(o),s.forEach(a=>{n.append(o,String(a))})):n.set(o,String(s))});const r=n.toString();return r?`?${r}`:""}function ua(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return ua(r).reduce((s,a)=>[...s,...o.map(i=>i+a)],[])}const Jc=100,da=Lt(),fa=Lt(),qr=()=>zc(At(da),"<A> and 'use' router primitives can be only used inside a Route."),Ce=()=>qr().navigatorFactory(),Dr=()=>qr().location,je=()=>qr().params,Qc=()=>{const e=Dr(),t=Ce(),n=(r,o)=>{const s=be(()=>Gc(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...o})};return[e.query,n]};function Xc(e,t=""){const{component:n,preload:r,load:o,children:s,info:a}=e,i=!s||Array.isArray(s)&&!s.length,l={key:e,component:n,preload:r||o,info:a};return ha(e.path).reduce((d,c)=>{for(const h of ua(c)){const g=Hc(t,h);let y=i?g:g.split("/*",1)[0];y=y.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),d.push({...l,originalPath:c,pattern:y,matcher:Wc(y,!i,e.matchFilters)})}return d},[])}function Yc(e,t=0){return{routes:e,score:Bc(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}function ha(e){return Array.isArray(e)?e:[e]}function ma(e,t="",n=[],r=[]){const o=ha(e);for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const l=Xc(i,t);for(const d of l){n.push(d);const c=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!c)ma(i.children,d.pattern,n,r);else{const h=Yc([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((s,a)=>a.score-s.score)}function $r(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function Zc(e,t,n){const r=new URL(ia),o=H(c=>{const h=e();try{return new URL(h,r)}catch{return console.error(`Invalid path ${h}`),c}},r,{equals:(c,h)=>c.href===h.href}),s=H(()=>o().pathname),a=H(()=>o().search,!0),i=H(()=>o().hash),l=()=>"",d=Nr(a,()=>la(o()));return{get pathname(){return s()},get search(){return a()},get hash(){return i()},get state(){return t()},get key(){return l()},query:n?n(d):ca(d)}}let st;function eu(){return st}function tu(e,t,n,r={}){const{signal:[o,s],utils:a={}}=e,i=a.parsePath||(U=>U),l=a.renderPath||(U=>U),d=a.beforeLeave||aa(),c=Rn("",r.base||"");if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!o().value&&s({value:c,replace:!0,scroll:!1});const[h,g]=B(!1);let y;const _=(U,W)=>{W.value===v()&&W.state===m()||(y===void 0&&g(!0),st=U,y=W,Ra(()=>{y===W&&(f(y.value),u(y.state),$[1](ne=>ne.filter(ge=>ge.pending)))}).finally(()=>{y===W&&Ro(()=>{st=void 0,U==="navigate"&&M(y),g(!1),y=void 0})}))},[v,f]=B(o().value),[m,u]=B(o().state),p=Zc(v,m,a.queryWrapper),b=[],$=B([]),w=H(()=>typeof r.transformUrl=="function"?$r(t(),r.transformUrl(p.pathname)):$r(t(),p.pathname)),C=()=>{const U=w(),W={};for(let ne=0;ne<U.length;ne++)Object.assign(W,U[ne].params);return W},P=a.paramsWrapper?a.paramsWrapper(C,t):ca(C),T={pattern:c,path:()=>c,outlet:()=>null,resolvePath(U){return Rn(c,U)}};return Z(Nr(o,U=>_("native",U),{defer:!0})),{base:T,location:p,params:P,isRouting:h,renderPath:l,parsePath:i,navigatorFactory:N,matches:w,beforeLeave:d,preloadRoute:z,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:$};function R(U,W,ne){be(()=>{if(typeof W=="number"){W&&(a.go?a.go(W):console.warn("Router integration does not support relative routing"));return}const ge=!W||W[0]==="?",{replace:se,resolve:ce,scroll:F,state:O}={replace:!1,resolve:!ge,scroll:!0,...ne},q=ce?U.resolvePath(W):Rn(ge&&p.pathname||"",W);if(q===void 0)throw new Error(`Path '${W}' is not a routable path`);if(b.length>=Jc)throw new Error("Too many redirects");const L=v();(q!==L||O!==m())&&(Ga||d.confirm(q,ne)&&(b.push({value:L,replace:se,scroll:F,state:m()}),_("navigate",{value:q,state:O})))})}function N(U){return U=U||At(fa)||T,(W,ne)=>R(U,W,ne)}function M(U){const W=b[0];W&&(s({...U,replace:W.replace,scroll:W.scroll}),b.length=0)}function z(U,W){const ne=$r(t(),U.pathname),ge=st;st="preload";for(let se in ne){const{route:ce,params:F}=ne[se];ce.component&&ce.component.preload&&ce.component.preload();const{preload:O}=ce;W&&O&&Io(n(),()=>O({params:F,location:{pathname:U.pathname,search:U.search,hash:U.hash,query:la(U),state:null,key:""},intent:"preload"}))}st=ge}}function nu(e,t,n,r){const{base:o,location:s,params:a}=e,{pattern:i,component:l,preload:d}=r().route,c=H(()=>r().path);l&&l.preload&&l.preload();const h=d?d({params:a,location:s,intent:st||"initial"}):void 0;return{parent:t,pattern:i,path:c,outlet:()=>l?A(l,{params:a,location:s,data:h,get children(){return n()}}):n(),resolvePath(y){return Rn(o.path(),y,c())}}}const ru=e=>t=>{const{base:n}=t,r=$t(()=>t.children),o=H(()=>ma(r(),t.base||""));let s;const a=tu(e,o,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),A(da.Provider,{value:a,get children(){return A(su,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[H(()=>(s=No())&&null),A(ou,{routerState:a,get branches(){return o()}})]}})}})};function su(e){const t=e.routerState.location,n=e.routerState.params,r=H(()=>e.preload&&be(()=>{e.preload({params:n,location:t,intent:eu()||"initial"})}));return A(ae,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>A(o,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function ou(e){const t=[];let n;const r=H(Nr(e.routerState.matches,(o,s,a)=>{let i=s&&o.length===s.length;const l=[];for(let d=0,c=o.length;d<c;d++){const h=s&&s[d],g=o[d];a&&h&&g.route.key===h.route.key?l[d]=a[d]:(i=!1,t[d]&&t[d](),pt(y=>{t[d]=y,l[d]=nu(e.routerState,l[d-1]||e.routerState.base,wo(()=>r()[d+1]),()=>e.routerState.matches()[d])}))}return t.splice(o.length).forEach(d=>d()),a&&i?a:(n=l[0],l)}));return wo(()=>r()&&n)()}const wo=e=>()=>A(ae,{get when(){return e()},keyed:!0,children:t=>A(fa.Provider,{value:t,get children(){return t.outlet()}})}),Ne=e=>{const t=$t(()=>e.children);return Va(e,{get children(){return t()}})};function au([e,t],n,r){return[e,r?o=>t(r(o)):t]}function iu(e){let t=!1;const n=o=>typeof o=="string"?{value:o}:o,r=au(B(n(e.get()),{equals:(o,s)=>o.value===s.value&&o.state===s.state}),void 0,o=>(!t&&e.set(o),o));return e.init&&Ge(e.init((o=e.get())=>{t=!0,r[1](n(o)),t=!1})),ru({signal:r,create:e.create,utils:e.utils})}function lu(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function cu(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const uu=new Map;function du(e=!0,t=!1,n="/_server",r){return o=>{const s=o.base.path(),a=o.navigatorFactory(o.base);let i,l;function d(v){return v.namespaceURI==="http://www.w3.org/2000/svg"}function c(v){if(v.defaultPrevented||v.button!==0||v.metaKey||v.altKey||v.ctrlKey||v.shiftKey)return;const f=v.composedPath().find(w=>w instanceof Node&&w.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const m=d(f),u=m?f.href.baseVal:f.href;if((m?f.target.baseVal:f.target)||!u&&!f.hasAttribute("state"))return;const b=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||b&&b.includes("external"))return;const $=m?new URL(u,document.baseURI):new URL(u);if(!($.origin!==window.location.origin||s&&$.pathname&&!$.pathname.toLowerCase().startsWith(s.toLowerCase())))return[f,$]}function h(v){const f=c(v);if(!f)return;const[m,u]=f,p=o.parsePath(u.pathname+u.search+u.hash),b=m.getAttribute("state");v.preventDefault(),a(p,{resolve:!1,replace:m.hasAttribute("replace"),scroll:!m.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function g(v){const f=c(v);if(!f)return;const[m,u]=f;o.preloadRoute(u,m.getAttribute("preload")!=="false")}function y(v){clearTimeout(i);const f=c(v);if(!f)return l=null;const[m,u]=f;l!==m&&(i=setTimeout(()=>{o.preloadRoute(u,m.getAttribute("preload")!=="false"),l=m},20))}function _(v){if(v.defaultPrevented)return;let f=v.submitter&&v.submitter.hasAttribute("formaction")?v.submitter.getAttribute("formaction"):v.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const u=new URL(f,ia);if(f=o.parsePath(u.pathname+u.search),!f.startsWith(n))return}if(v.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const m=uu.get(f);if(m){v.preventDefault();const u=new FormData(v.target,v.submitter);m.call({r:o,f:v.target},v.target.enctype==="multipart/form-data"?u:new URLSearchParams(u))}}le(["click","submit"]),document.addEventListener("click",h),e&&(document.addEventListener("mousemove",y,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",_),Ge(()=>{document.removeEventListener("click",h),e&&(document.removeEventListener("mousemove",y),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",_)})}}function fu(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function hu(e){const t=()=>window.location.hash.slice(1),n=aa();return iu({get:t,set({value:r,replace:o,scroll:s,state:a}){o?window.history.replaceState(Vc(a),"","#"+r):window.history.pushState(a,"","#"+r);const i=r.indexOf("#"),l=i>=0?r.slice(i+1):"";cu(l,s),xr()},init:r=>lu(window,"hashchange",Fc(r,o=>!n.confirm(o&&o<0?o:t()))),create:du(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:fu,beforeLeave:n}})(e)}function br(e){const t=Ce(),n=Dr(),{href:r,state:o}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:o}),null}var mu=D("<article id=main>");const gu=e=>{const t=$t(()=>e.children);return(()=>{var n=mu();return j(n,t),n})()},Je=e=>{const t=`answers-store-${e}`,[n,r]=Bo(Wo({currentLessonIdx:-1,answers:{}}),{name:t,storage:localStorage}),o=$=>(n.answers[$]||r("answers",$,[]),n.answers[$]),s=($,w)=>{const C=o($);if(!C[w])for(let P=C.length;P<=w;P++)r("answers",$,P,{wrongAnswers:[],correct:!1});return n.answers[$][w]},a=$=>r("currentLessonIdx",$),i=()=>n.currentLessonIdx===-1?0:n.currentLessonIdx,l=()=>r("currentLessonIdx",i()+1),d=($,w,C="")=>{console.log("calling lessonsStore.saveAnswer for",$),o($),s($,w),r("answers",$,w,P=>C===""?{...P,correct:!0}:{...P,wrongAnswers:[...P.wrongAnswers,C]})},c=$=>n.answers[$]??[],h=$=>{r("answers",$,[])},g=()=>{r("answers",{}),r("currentLessonIdx",-1)},y=()=>Object.keys(n.answers).length,_=()=>Object.values(n.answers).reduce(($,w)=>$+w.length,0),v=()=>Object.values(n.answers).reduce(($,w)=>$+w.filter(C=>C.correct).length,0),f=()=>Object.values(n.answers).reduce(($,w)=>$+w.reduce((C,P)=>C+P.wrongAnswers.length,0),0),m=$=>c($).length,u=$=>c($).filter(w=>w.correct).length;return{getCurrentLessonIdx:i,setCurrentLessonIdx:a,incrementCurrentLessonIdx:l,saveAnswer:d,getLessonAnswers:c,resetLesson:h,resetAllLessons:g,getTotalTakenLessons:y,getTotalQuestionsAnswered:_,getTotalCorrectAnswers:v,getTotalIncorrectAnswers:f,getLessonQuestionsAnsweredCorrectly:u,getLessonQuestionCount:m,getTotalWrongAttemptsInLesson:$=>c($).reduce((w,C)=>w+C.wrongAnswers.length,0),isLessonDone:$=>{const w=m($);return w>0&&u($)===w}}};var pu=D("<button class=large-icon-button><i class=utf8-icon-reset>");const ga=e=>{const{t}=ve(),n=Ce(),{showConfirm:r}=Qn(),[o]=pe($e),s=Je(e.courseIdx),a=H(()=>s.getTotalQuestionsAnswered()),i=()=>{o.loading||(o().reset(e.courseIdx),s.resetAllLessons(),n("/course/"+e.courseIdx))};return a()===0?"":(()=>{var l=pu(),d=l.firstChild;return l.$$click=()=>r(t("lose_progress",{totalAnswered:a()}),i),Z(()=>Y(d,"title",t("reset_course"))),l})()};le(["click"]);var yu=D("<ol>"),vu=D('<section class="card lesson-list">'),$u=D("<div>Loading lesson list..."),bu=D("<p class=card>No lessons are available for this course."),_u=D("<li><button>");const pa=e=>{const[t]=pe($e),n=H(()=>Je(e.courseIndex));return me(()=>console.log("lessonlist courseIndex",e.courseIndex)),A(ae,{get when(){return!t.loading},get fallback(){return $u()},get children(){var r=vu();return j(r,()=>e.children,null),j(r,A(ae,{get when(){return(t()?.getLessons()?.length??0)>0},get fallback(){return bu()},get children(){var o=yu();return j(o,A(at,{get each(){return t()?.getLessons()??[]},children:(s,a)=>{const i=a(),l=n().getCurrentLessonIdx(),d=n().isLessonDone(i),c=i===l+1&&!d,h=i>l&&!n().isLessonDone(i)&&!c;return(()=>{var g=_u(),y=g.firstChild;return y.$$click=()=>{e.onLessonSelected(i)},y.classList.toggle("current",!!c),y.classList.toggle("todo",!!h),j(y,()=>s.title),Z(_=>{var v=!!n().isLessonDone(i),f=s.description||"";return v!==_.e&&y.classList.toggle("completed",_.e=v),f!==_.t&&Y(y,"title",_.t=f),_},{e:void 0,t:void 0}),g})()}})),o}}),null),r}})};le(["click"]);var wu=D('<section class="completed-all-lessons card"><h2></h2><div class=stats>');const Su=e=>{const{t}=ve(),n=Ce(),r=je(),o=s=>{n(`/course/${r.courseIdx}/${s}/intro`)};return(()=>{var s=wu(),a=s.firstChild,i=a.nextSibling;return j(a,()=>t("all_lessons_done")),j(s,A(pa,{onLessonSelected:o,get courseIndex(){return Number(r.courseIdx)}}),i),j(s,()=>e.children&&e.children,null),j(s,A(ga,{get courseIdx(){return Number(r.courseIdx||-1)}}),null),s})()};var Cu=D("<aside class=course-score-progress-component><progress id=course-score-progress class=course-score-progress-bar>/");const Eu=e=>{const{t}=ve(),n=e.correct+e.incorrect;return(()=>{var r=Cu(),o=r.firstChild,s=o.firstChild;return Y(o,"max",n),j(o,()=>e.correct,s),j(o,n,null),Z(()=>Y(o,"aria-label",t("course_score_so_far"))),Z(()=>o.value=e.correct),r})()};var Pu=D('<section class="stats-component card"><h2></h2><table class=horizontal-stats><thead><tr><th class=correct-answers></th><th class=incorrect-answers></th><th class=questions-answered></th></tr></thead><tbody><tr><td></td><td></td><td>');const ku=e=>{const{t}=ve(),n=Je(e.courseIdx);return!n||!n.getTotalQuestionsAnswered()?null:(()=>{var r=Pu(),o=r.firstChild,s=o.nextSibling,a=s.firstChild,i=a.firstChild,l=i.firstChild,d=l.nextSibling,c=d.nextSibling,h=a.nextSibling,g=h.firstChild,y=g.firstChild,_=y.nextSibling,v=_.nextSibling;return j(o,()=>t("progress")),j(r,A(Eu,{get correct(){return n.getTotalCorrectAnswers()},get incorrect(){return n.getTotalIncorrectAnswers()}}),s),j(l,()=>t("correct_answer_count_alt")),j(d,()=>t("incorrect_answer_count_alt")),j(c,()=>t("questions_answered_count_alt")),j(y,()=>n.getTotalCorrectAnswers()),j(_,()=>n.getTotalIncorrectAnswers()),j(v,()=>n.getTotalQuestionsAnswered()),Z(f=>{var m=t("corect_answers_alt"),u=t("incorrect_answer_count_alt"),p=t("questions_answered_count_alt");return m!==f.e&&Y(l,"title",f.e=m),u!==f.t&&Y(d,"title",f.t=u),p!==f.a&&Y(c,"title",f.a=p),f},{e:void 0,t:void 0,a:void 0}),r})()};var Ou=D("<p>"),Ru=D('<section class="card no-border no-set-height"><h2>'),Nu=D("<article id=home>"),Iu=D("<div>Loading lessons ...");const Lu=()=>{const e=je(),t=Ce(),[n,r]=B(null),[o,s]=B(null),[a]=pe($e),[i,l]=B(null);me(()=>{const c=Number(e.courseIdx);Number.isFinite(c)?(console.log("Course home screen set courseIdx",c),s(c)):(console.log("Course home screen has no courseIdx"),s(null))}),me(()=>{if(a()&&!a.loading&&o()!==null){const h=a()?.store.courseMetadata;l(h)}}),me(()=>{const c=o();c!==null&&(console.log("Creating lessonStore for courseIdx",c),r(Je(c)))});const d=c=>{t(`/course/${o()}/${c}/intro`)};return A(ae,{get when(){return H(()=>!!(!a.loading&&a()))()&&n()},get fallback(){return Iu()},get children(){var c=Nu();return j(c,A(ku,{get courseIdx(){return o()}}),null),j(c,A(pa,{get courseIndex(){return o()},onLessonSelected:d,get children(){return A(ae,{get when(){return i()},get children(){var h=Ru(),g=h.firstChild;return j(g,()=>i().title),j(h,A(ae,{get when(){return i().description},get children(){var y=Ou();return j(y,()=>i().description),y}}),null),h}})}}),null),c}})};var Au=D("<div class=form-field><label>"),ju=D("<textarea class=text-input>"),Tu=D("<input class=text-input>");const Me=e=>(()=>{var t=Au(),n=t.firstChild;return j(n,()=>e.label),j(t,(()=>{var r=H(()=>!!e.multiline);return()=>r()?(()=>{var o=ju();return Rt(o,"input",e.onInput),Z(()=>Y(o,"placeholder",e.placeholder)),Z(()=>o.value=e.value),o})():(()=>{var o=Tu();return Rt(o,"input",e.onInput),Z(s=>{var a=e.placeholder,i=e.type||"text";return a!==s.e&&Y(o,"placeholder",s.e=a),i!==s.t&&Y(o,"type",s.t=i),s},{e:void 0,t:void 0}),Z(()=>o.value=e.value),o})()})(),null),t})();le(["input"]);var xu=D('<section class="boolean-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),qu=D('<div class=answer-row><button title="Click to mark as correct answer"><span></span></button><button type=button title="Remove this answer"><span class=utf8-icon-close>');function Du(e){const[t,n]=B(""),[r,o]=B(!1),s=(d,c)=>{const h=[...e.list],g=Object.keys(h[d])[0];h[d]={[c]:h[d][g]},e.onUpdate(h)},a=d=>{const c=[...e.list],h=Object.keys(c[d])[0];c[d]={[h]:!c[d][h]},e.onUpdate(c)},i=d=>{const c=[...e.list];c.splice(d,1),e.onUpdate(c)},l=()=>{if(!t())return;const d=[...e.list,{[t()]:r()}];e.onUpdate(d),n(""),o(!1)};return(()=>{var d=xu(),c=d.firstChild,h=c.firstChild;return j(d,()=>e.list.map((g,y)=>{const _=Object.keys(g)[0],v=g[_];return(()=>{var f=qu(),m=f.firstChild,u=m.firstChild,p=m.nextSibling;return j(f,A(Me,{label:`Option ${y+1}`,value:_,onInput:b=>s(y,b.target.value),placeholder:"Enter answer"}),m),m.$$click=()=>a(y),ke(m,`checkmark ${v?"selected":""}`),ke(u,`utf8-icon-${v?"tick":"not-tick"}`),p.$$click=()=>i(y),f})()}),c),j(c,A(Me,{label:"New Option",get value(){return t()},onInput:g=>n(g.target.value),placeholder:"Enter new option"}),h),h.$$click=l,d})()}le(["click"]);var Mu=D('<section class="answer-text answer-list"><div class="answer-row add-new"><button type=button class=large-icon-button title="Add this entry"><span class=utf8-icon-add>'),Vu=D('<div class=answer-row><button title="Select as the correct answer"><span></span></button><button class=large-icon-button type=button title="Remove this answer"><span class=utf8-icon-close>');function So(e){const[t,n]=B(""),[r,o]=B([]);me(()=>{o([...e.list])});const s=(d,c)=>{const h=[...r()];h[d]=c,o(h),e.onUpdate(h,e.answer)},a=d=>{const c=[...r()];c.splice(d,1),o(c),e.onUpdate(c,e.answer)},i=()=>{const d=t().trim();if(!d)return;const c=[...r(),d];o(c),n(""),e.onUpdate(c,e.answer)},l=d=>{const c=e.answer===d?"":d;e.onUpdate(r(),c)};return(()=>{var d=Mu(),c=d.firstChild,h=c.firstChild;return j(d,()=>r().map((g,y)=>(()=>{var _=Vu(),v=_.firstChild,f=v.firstChild,m=v.nextSibling;return j(_,A(Me,{label:`Option ${y+1}`,value:g,onInput:u=>s(y,u.target.value),placeholder:"Enter answer"}),v),v.$$click=()=>l(g),m.$$click=()=>a(y),Z(u=>{var p=`large-icon-button checkmark ${e.answer===g?"selected":""}`,b=`utf8-icon-${e.answer===g?"tick":"not-tick"}`;return p!==u.e&&ke(v,u.e=p),b!==u.t&&ke(f,u.t=b),u},{e:void 0,t:void 0}),_})()),c),j(c,A(Me,{label:"New Option",get value(){return t()},onInput:g=>n(g.target.value),placeholder:"Enter new option"}),h),h.$$click=i,d})()}le(["click"]);var Fu=D('<section class="vocab-text answer-list"><div class="answer-row add-new"><button type=button title="Add this entry"><span class=utf8-icon-add>'),Uu=D('<div class=answer-row><button type=button title="Remove this entry"><span class=utf8-icon-close>');function Ku(e){const[t,n]=B(""),[r,o]=B(""),s=H(()=>Object.entries(e.list)),a=(c,h)=>{const g={...e.list},y=s()[c][0],_=g[y];delete g[y],g[h]=_,e.onUpdate(g)},i=(c,h)=>{const g={...e.list},y=s()[c][0];g[y]=h,e.onUpdate(g)},l=c=>{const h={...e.list},g=s()[c][0];delete h[g],e.onUpdate(h)},d=()=>{if(!t()||!r())return;const c={...e.list,[t()]:r()};e.onUpdate(c),n(""),o("")};return(()=>{var c=Fu(),h=c.firstChild,g=h.firstChild;return j(c,()=>s().map(([y,_],v)=>(()=>{var f=Uu(),m=f.firstChild;return j(f,A(Me,{label:`Prompt ${v+1}`,value:y,onInput:u=>a(v,u.target.value),placeholder:"Enter prompt"}),m),j(f,A(Me,{label:`Answer ${v+1}`,value:_,onInput:u=>i(v,u.target.value),placeholder:"Enter answer"}),m),m.$$click=()=>l(v),f})()),h),j(h,A(Me,{label:"New Prompt",get value(){return t()},onInput:y=>n(y.target.value),placeholder:"Enter new prompt"}),g),j(h,A(Me,{label:"New Answer",get value(){return r()},onInput:y=>o(y.target.value),placeholder:"Enter new answer"}),g),g.$$click=d,c})()}le(["click"]);var zu=D("<p>Loading card..."),Hu=D('<aside class="card-editor card"><section><h2>Editing <!> Card<button class="close-editor large-icon-button"><span class=utf8-icon-close></span></button></h2></section><footer class=modal-actions><button>Cancel</button><button>Save'),Wu=D("<section class=question>");const Bu=e=>{const{t}=ve(),[n,r]=B([]),[o,s]=B(""),[a,i]=B(""),[l,d]=B({}),[c,h]=B([]),[g,y]=B([]);me(()=>{if(!e.card){console.warn("No card!");return}"answer"in e.card&&s(e.card.answer||""),"answers"in e.card&&r(e.card.answers||[]),"options"in e.card&&h(e.card.options),"question"in e.card&&i(e.card.question),"words"in e.card&&y(e.card.words),"vocab"in e.card&&d(e.card.vocab)});const _=()=>{if(!e.card)return;const f={...e.card};"answers"in f&&(f.answers=n()),"answer"in f&&(f.answer=o()),"options"in f&&(f.options=c()),"question"in e.card&&(f.question=a()),"words"in f&&(f.words=g()),"vocab"in f&&(f.vocab=l()),e.onSave(f)};function v(f,m,u){f(m),u&&Oc(e.card)&&s(u)}return A(ae,{get when(){return e.card},get fallback(){return zu()},children:f=>(()=>{var m=Hu(),u=m.firstChild,p=u.firstChild,b=p.firstChild,$=b.nextSibling,w=$.nextSibling,C=w.nextSibling,P=u.nextSibling,T=P.firstChild,R=T.nextSibling;return m.$$click=N=>N.stopPropagation(),j(p,()=>t("card-class."+e.card?.class),$),Rt(C,"click",e.onCancel),j(u,(()=>{var N=H(()=>!!a());return()=>N()&&(()=>{var M=Wu();return j(M,A(Me,{multiline:!0,label:"Question",get value(){return a()??"Question"},onInput:z=>i(z.target.value),placeholder:"Option: enter a question"})),M})()})(),null),j(u,(()=>{var N=H(()=>!!(f().answer&&f().class!=="writing-blocks"&&f().class!=="multiple-choice"));return()=>N()&&A(Me,{label:"Answer",get value(){return f().answer},onInput:M=>s(M.target.value),placeholder:"Enter answer"})})(),null),j(u,(()=>{var N=H(()=>"words"in f());return()=>N()&&A(Du,{get list(){return g()},onUpdate:(...M)=>v(y,...M)})})(),null),j(u,(()=>{var N=H(()=>"answers"in f());return()=>N()&&A(So,{get answer(){return o()},get list(){return n()},onUpdate:(...M)=>v(r,...M)})})(),null),j(u,(()=>{var N=H(()=>"options"in f());return()=>N()&&A(So,{get answer(){return o()},get list(){return c()},onUpdate:(...M)=>v(h,...M)})})(),null),j(u,(()=>{var N=H(()=>"vocab"in f());return()=>N()&&A(Ku,{get list(){return l()},onUpdate:(...M)=>v(d,...M)})})(),null),Rt(T,"click",e.onCancel),R.$$click=_,Z(()=>Y(C,"title",t("cacnel"))),m})()})};le(["click"]);var Gu=D("<article>"),Ju=D("<p>Loading editor...");const Qu=()=>{const e=je(),t=Ce(),[n]=pe($e),r=()=>Number(e.courseIdx??-1),o=()=>Number(e.lessonIdx??-1),s=()=>Number(e.cardIdx??-1),a=H(()=>n()?.getLessons()??[]),i=H(()=>{const c=o();if(typeof o>"u"||!a().length)return;const h=a()[c];if(!h||!Array.isArray(h.cards))return console.warn("Invalid lesson:",c,h),null;const g=s();if(s()>=h.cards.length){console.warn("cardId is >= lesson.cards length"),t("/course/"+r());return}return h.cards[g]??null}),l=H(()=>a().length>0&&o()>=0&&s()>=0&&i()!==null);me(()=>{n()});const d=c=>{const h=n();h&&(h.saveCard(c,o(),s()),t(-1))};return A(ae,{get when(){return H(()=>!!l())()&&i()},get fallback(){return Ju()},get children(){var c=Gu();return j(c,A(Bu,{get card(){return i()},onSave:d,onCancel:()=>t(`/editor/${r()}`)})),c}})},Xu=(e,t)=>{const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=t%60;let s="";return n>0&&(s+=`${n} ${e("hours")}`),(r>0||n>0)&&(s&&(s+=" "),s+=`${r} ${e("minutes")}`),s&&(s+=", "),s+=`${o} ${e("seconds")}`,s};var Yu=D('<section class="lesson-completed card"><h2></h2><p>'),Zu=D("<footer class=lesson-completed-footer><button class=next-button>");const ed=e=>{const{t}=ve(),n=je(),r=Je(Number(n.courseIdx||-1)),o=r.getCurrentLessonIdx(),s=r.getTotalWrongAttemptsInLesson(o),a=r.getLessonQuestionCount(o),i=()=>{ta(),e.onNext()};return[(()=>{var l=Yu(),d=l.firstChild,c=d.nextSibling;return j(d,()=>t("lesson_completed")),j(c,()=>t("lesson_completed_counts",{questionCount:a,incorrectAnswerCount:s,duration:Xu(t,e.lessonDurationInSeconds)})),l})(),(()=>{var l=Zu(),d=l.firstChild;return d.$$click=i,j(d,()=>t("continue")),l})()]};le(["click"]);const td=()=>{const[e]=pe($e),t=je(),[n]=Qc(),r=Ce(),o=H(()=>Number(t.courseIdx)),s=H(()=>Number(t.lessonIdx)),a=H(()=>Number(n["lesson-duration"])||-999),i=H(()=>s()+1),l=()=>{const d=e();d&&(i()<d.getLessons().length?r(`/course/${o()}`):r(`/course/${o()}/finished`))};return A(ae,{get when(){return e()},get children(){return A(ed,{onNext:l,get lessonDurationInSeconds(){return a()}})}})};var nd=D("<div>Loading Lesson Data...");const rd=()=>{const[e]=pe($e),t=je(),n=H(()=>Number(t.courseIdx||-1)),r=H(()=>Number(t.lessonIdx||-1)),o=Ce(),s=Je(n()),[a,i]=B(null),[l,d]=B(Date.now());me(()=>{if(e.loading)return;const y=e();if(!y)return;const _=r(),v=y?.getLessons();v[_]&&(i(v[_]),d(Date.now()))});const c=()=>{o(`/course/${n()}`)},h=(y,_)=>{console.log("calling lessonsStore.saveAnswer for",y),s.saveAnswer(r(),y,_||"")},g=()=>{const y=Math.floor((Date.now()-l())/1e3);o(`/course/${n()}/${r()}/completed?lesson-duration=${y}`)};return A(ae,{get when(){return a()},get fallback(){return nd()},children:y=>A(Tc,{get lesson(){return y()},onCancel:c,onAnswer:h,onLessonComplete:g})})};var sd=D("<div>Loading Lesson Data..."),od=D('<article class="lesson-intro card"><header><h2> </h2><h3>'),ad=D("<footer class=lesson-intro-footer><button class=next-button>"),id=D("<p class=description>");const Co=()=>{const[e]=pe($e),t=je(),n=Ce(),{t:r}=ve(),o=H(()=>Number(t.courseIdx)),s=H(()=>Number(t.lessonIdx)),a=H(()=>Je(o())),i=H(()=>{const d=e();if(!(!d||!d.store))return d.getLessons()?.[s()]}),l=()=>{Fl(),a()?.resetLesson(s()),n(`/course/${o()}/${s()}/in-progress`)};return A(ae,{get when(){return i()},get fallback(){return sd()},children:d=>[(()=>{var c=od(),h=c.firstChild,g=h.firstChild,y=g.firstChild,_=g.nextSibling;return j(g,()=>r("lesson"),y),j(g,()=>s()+1,null),j(_,()=>d().title),j(c,(()=>{var v=H(()=>!!d().description);return()=>v()&&(()=>{var f=id();return j(f,()=>d().description),f})()})(),null),c})(),(()=>{var c=ad(),h=c.firstChild;return h.$$click=l,j(h,()=>r("begin")),c})()]})};le(["click"]);const ld="0.2.3",cd="https://leegee.github.io/learning-oe-solidjs",ya={version:ld,homepage:cd};var ud=D("<h1 class=animated-text>");const dd=e=>{const[t,n]=B(!1);let r;return me(()=>{if(r){let o;requestAnimationFrame(()=>{o=new IntersectionObserver(a=>{a[0].isIntersecting&&(n(!0),o.unobserve(r))},{threshold:.1}),o.observe(r)}),Ge(()=>{o?.disconnect()})}}),(()=>{var o=ud(),s=r;return typeof s=="function"?ot(s,o):r=o,j(o,()=>e.title),Z(()=>o.classList.toggle("visible",!!t())),o})()};var fd=D("<button class=large-icon-button><i class=icon-cog>");const Eo=e=>{const t=Ce();return(()=>{var n=fd();return n.$$click=()=>t("/editor/"+e.courseIdx),n})()};le(["click"]);var hd=D('<button title="Download this course"class="icon-download large-icon-button">'),md=D('<dialog class=dialog-error><header><h3>Error saving lessons</h3></header><footer><button class="large-icon-button utf8-icon-close">');const Po=e=>{const[t]=pe($e);let n=null;const r=async()=>{if(t.loading)return;const o="lessons.lson.json",s=await t().getCourseData(e.courseIdx);if(!s)throw new Error("Lessons not loaded?");try{const a=new Blob([JSON.stringify(s,null,2)],{type:"text/plain"}),i=URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.download=o,l.click(),URL.revokeObjectURL(i)}catch(a){a.name!=="AbortError"&&(console.error("Error saving file:",a),n?.showModal())}};return[(()=>{var o=hd();return o.$$click=()=>r(),o})(),(()=>{var o=md(),s=o.firstChild,a=s.nextSibling,i=a.firstChild;return ot(l=>n=l,o),i.$$click=()=>n?.close(),o})()]};le(["click"]);var gd=D('<button title="Create a blank course"class="large-icon-button utf8-icon-new">');const pd=()=>{const e=Ce(),{config:t}=qt(),[n]=pe($e),r=async()=>{if(n.loading)return;const o=n().initNewCourse(t);o?(Je(o),e(`/editor/${o}`)):alert("Error creating new course")};return A(ae,{get when(){return!n.loading},get children(){var o=gd();return o.$$click=r,o}})};le(["click"]);var yd=D('<button title="Load a course from a file"class=large-icon-button><i class=icon-upload>'),vd=D("<input type=file accept=.json>"),$d=D("<dialog class=dialog-error><header><h3>Error loading course</h3></header><footer><button class=large-icon-button><span class=utf8-icon-close>"),bd=D('<dialog class=dialog-ok><header><h3>Course Loaded</h3></header><footer><button class="large-icon-button utf8-icon-tick">');const _d=()=>{const[e]=pe($e);let t=null,n=null,r=null;const o=()=>{n?.close(),t?.close()},s=()=>r?.click(),a=async i=>{if(console.log("loadCourseFromFile enter"),e.loading)return;const d=i.target.files?.[0];if(d)try{console.log("Selected file:",d.name);const c=await d.text();console.log(c),await e()?.saveCourseToStorage(c),n?.showModal()}catch(c){c.name!=="AbortError"&&(console.error("Error loading file:",c),t?.showModal())}finally{r&&(r.value="")}};return[(()=>{var i=yd();return i.$$click=s,i})(),(()=>{var i=vd();return i.addEventListener("change",a),ot(l=>r=l,i),i.style.setProperty("display","none"),i})(),(()=>{var i=$d(),l=i.firstChild,d=l.nextSibling,c=d.firstChild;return ot(h=>t=h,i),c.$$click=o,i})(),(()=>{var i=bd(),l=i.firstChild,d=l.nextSibling,c=d.firstChild;return ot(h=>n=h,i),c.$$click=o,i})()]};le(["click"]);var ko=D("<span class=course-action-buttons>"),wd=D('<aside aria-roledescription="Toggle menu"class=hamburger-menu><section class=card><menu><li><a>Custom Course</a></li></menu><footer><small><button>Edit Courses </button></small></footer></section><footer><small>Version '),Sd=D("<p>Loading..."),Cd=D("<li><a>");const Ed=()=>{const[e]=pe($e),[t,n]=B(!1),r=Ce(),{config:o}=qt(),[s,a]=B(0),i=l=>{a(l),r("/course/"+l)};return me(()=>{if(!e.loading&&isNaN(s())){console.debug("local course index is NaN?");return}}),A(ae,{get when(){return!e.loading},get fallback(){return Sd()},get children(){var l=wd(),d=l.firstChild,c=d.firstChild,h=c.firstChild,g=h.firstChild,y=c.nextSibling,_=y.firstChild,v=_.firstChild,f=d.nextSibling,m=f.firstChild;return m.firstChild,j(d,A(dd,{get title(){return o.menuTitle||o.appTitle}}),c),j(c,()=>On(o).map((u,p)=>(()=>{var b=Cd(),$=b.firstChild;return $.$$click=()=>i(p),j($,u),j(b,A(ae,{get when(){return t()},get children(){var w=ko();return j(w,A(ga,{courseIdx:p}),null),j(w,A(Po,{courseIdx:p}),null),j(w,A(Eo,{courseIdx:p}),null),w}}),null),Z(()=>ke(b,s()===p?"selected":"")),b})()),h),g.$$click=()=>{r("/course/"+o.courses.length)},j(h,A(ae,{get when(){return t()},get children(){var u=ko();return j(u,A(pd,{}),null),j(u,A(_d,{}),null),j(u,A(Po,{get courseIdx(){return On(o).length}}),null),j(u,A(Eo,{get courseIdx(){return On(o).length}}),null),u}}),null),v.$$click=()=>n(!t()),j(m,()=>ya.version,null),Z(()=>ke(c,"course-menu "+(t()?"editing":""))),l}})};le(["click"]);var Pd=D("<span contenteditable>");function Kn(e){let t,n=e.value;const r=o=>o.replace(/[\r\n]+/g,"").trim();return me(()=>{t&&document.activeElement!==t&&(t.innerText=e.value)}),(()=>{var o=Pd();return o.addEventListener("blur",s=>{const a=r(s.currentTarget.innerText);a!==e.value&&e.onChange(a)}),o.$$keydown=s=>{const a=s.currentTarget;s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),a.blur()):s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),a.innerText=n,a.blur())},o.addEventListener("focus",()=>{n=e.value}),ot(s=>t=s,o),Z(s=>{var a=e.placeholder,i=`${e.class??""} ${e.value.trim()===""?"placeholder":""}`;return a!==s.e&&Y(o,"aria-placeholder",s.e=a),i!==s.t&&ke(o,s.t=i),s},{e:void 0,t:void 0}),o})()}le(["keydown"]);var kd=D('<button class=add-card title="Add a new card to this lesson"><span class=utf8-icon-add>'),Od=D("<div class=card-class-picker><button class=delete-button><span class=utf8-icon-close>"),Rd=D("<div class=add-card>"),Nd=D("<p>Loading..."),Id=D("<button>");function Ld(e){const[t]=pe($e),n=je(),r=Ce(),[o,s]=B(!1),a=i=>{const l=t();if(!l)return;const d=Number(n.courseIdx),c=l.getLessons();if(!Array.isArray(c)||e.lessonIdx<0||e.lessonIdx>=c.length){console.error("Invalid lesson index or malformed lessons:",c,e.lessonIdx);return}const h=Pc(i),g=c.map((_,v)=>v===e.lessonIdx?{..._,cards:[..._.cards,h]}:_);l.setLessons(g);const y=g[e.lessonIdx]?.cards?.length-1;if(y==null||y<0){console.error("Failed to calculate newCardIdx");return}r(`/editor/${d}/${e.lessonIdx}/${y}`)};return A(ae,{get when(){return!t.loading},get fallback(){return Nd()},get children(){var i=Rd();return j(i,A(ae,{get when(){return!o()},get children(){var l=kd();return l.$$click=()=>s(!0),l}}),null),j(i,A(ae,{get when(){return o()},get children(){var l=Od(),d=l.firstChild;return d.$$click=()=>s(!1),j(l,A(at,{each:kc,children:c=>(()=>{var h=Id();return h.$$click=()=>{a(c),s(!1)},j(h,c),h})()}),null),l}}),null),i}})}le(["click"]);var Ad=D('<button class="large-icon-button icon-up-fat"title="Add a new lesson above this">'),jd=D('<button class="large-icon-button icon-down-fat"title="Add a new lesson beneath this">'),Td=D("<aside class=add-lesson-overlay>"),xd=D('<div class=add-lesson-button-component><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course">'),qd=D("<p>Loading...");function Dd(e){const[t]=pe($e),[n,r]=B(!1),o=s=>{s.target.closest(".add-lesson-button-component")||r(!1)};return document.addEventListener("click",o),Ge(()=>document.removeEventListener("click",o)),A(ae,{get when(){return!t.loading},get fallback(){return qd()},get children(){var s=xd(),a=s.firstChild;return a.$$click=()=>r(i=>!i),j(s,A(ae,{get when(){return n()},get children(){var i=Td();return j(i,A(ae,{get when(){return e.above||!e.above&&!e.below},get children(){var l=Ad();return l.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)-1),r(!1)},l}}),null),j(i,A(ae,{get when(){return e.below||!e.above&&!e.below},get children(){var l=jd();return l.$$click=()=>{t()?.addLesson(Number(e.lessonIdx)+1),r(!1)},l}}),null),i}}),null),s}})}le(["click"]);var Md=D('<div class=card-holder><div class="vertical-controls top-controls"><button title="Move up to the previous lesson"class="move-card-button icon-up-fat"></button></div><div class=horizontal-controls><button title="Swap with the card on the left"class="move-card-button icon-left-fat"></button><div class=card-overlay-wrapper><div class=card-overlay><button title=Delete class="control small-control"><span class=icon-trash></span></button><button title=Edit class=control><span class=icon-pencil></span></button></div></div><button title="Swap with the card to the right"class="move-card-button icon-right-fat"></button></div><div class="vertical-controls bottom-controls"><button title="Move to the next lesson"class="move-card-button icon-down-fat">'),Vd=D("<p>Loading...?!");function Fd(e){const[t]=pe($e),{showConfirm:n}=Qn(),{t:r}=ve(),o=Ce(),s=je(),a=c=>({...c,cards:[...c.cards]}),i=()=>{t.loading||n(r("confirm_delete_card"),()=>t().deleteCard(Number(e.lessonIdx),Number(e.cardIdx)))},l=(c,h,g)=>{const _=[...t().getLessons()],v=a(_[c]),f=[...v.cards],m=h+g;if(m<0||m>=f.length)return;const[u]=f.splice(h,1);f.splice(m,0,u),v.cards=f,_[c]=v,t().setLessons(_)},d=(c,h,g)=>{if(t.loading)return"Loading...";const y=t().getLessons(),_=c+g;if(_<0||_>=y.length||h<0||h>=y[c].cards.length)return;const v=[...y],f=a(v[c]),m=a(v[_]),u=[...f.cards],p=[...m.cards],[b]=u.splice(h,1);p.push(b),f.cards=u,m.cards=p,v[c]=f,v[_]=m,t().setLessons(v)};return A(ae,{get when(){return!t.loading},get fallback(){return Vd()},get children(){var c=Md(),h=c.firstChild,g=h.firstChild,y=h.nextSibling,_=y.firstChild,v=_.nextSibling,f=v.firstChild,m=f.firstChild,u=m.nextSibling,p=v.nextSibling,b=y.nextSibling,$=b.firstChild;return g.$$click=()=>d(e.lessonIdx,e.cardIdx,-1),_.$$click=()=>l(e.lessonIdx,e.cardIdx,-1),j(v,A(oa,{tabindex:-1,get card(){return e.card},get lesson(){return e.lesson},ondblclick:()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`)}),f),m.$$click=()=>i(),u.$$click=()=>o(`/editor/${s.courseIdx}/${e.lessonIdx}/${e.cardIdx}`),p.$$click=()=>l(e.lessonIdx,e.cardIdx,1),$.$$click=()=>d(e.lessonIdx,e.cardIdx,1),Z(w=>{var C=e.lessonIdx===0,P=e.cardIdx===0,T=e.cardIdx===e.lesson.cards.length-1,R=e.lessonIdx===t().getLessons().length-1;return C!==w.e&&(g.disabled=w.e=C),P!==w.t&&(_.disabled=w.t=P),T!==w.a&&(p.disabled=w.a=T),R!==w.o&&($.disabled=w.o=R),w},{e:void 0,t:void 0,a:void 0,o:void 0}),c}})}le(["click"]);var Ud=D('<article class="card no-set-height no-lessons"><button class="large-icon-button icon-plus-thin"title="Add a new lesson to this course"></button><p>Click above to create your first lesson</p><p>Click titles and descriptions to edit them'),Kd=D("<p>..."),zd=D("<section class=lesson><header><h3><span>: &nbsp;</span></h3><h4></h4></header><div class=cards>"),Hd=D("<div class=card-holder>");function Wd(){const[e]=pe($e),{t}=ve();me(()=>{document.body.classList.add("editing-card"),Ge(()=>{document.body.classList.remove("editing-card")})});const n=(r,o)=>{const s=[...e().getLessons()];s[r]=o(s[r]),e().setLessons(s)};return A(ae,{get when(){return e()},get fallback(){return(()=>{var r=Kd(),o=r.firstChild;return j(r,()=>t("loading"),o),r})()},get children(){return[H(()=>e().getLessons().map((r,o)=>(()=>{var s=zd(),a=s.firstChild,i=a.firstChild,l=i.firstChild,d=l.firstChild,c=i.nextSibling,h=a.nextSibling;return Y(s,"id",`lesson-${o}`),j(l,o+1,d),j(l,A(Kn,{get value(){return r.title},onChange:g=>n(o,y=>({...y,title:g}))}),null),j(i,A(Dd,{lessonIdx:o}),null),j(c,A(Kn,{get value(){return r.description??""},onChange:g=>n(o,y=>({...y,description:g}))})),j(h,()=>r.cards.map((g,y)=>(()=>{var _=Hd();return j(_,A(Fd,{lesson:r,lessonIdx:o,card:g,cardIdx:y})),_})()),null),j(h,A(Ld,{lessonIdx:o}),null),s})())),A(ae,{get when(){return e().getLessons().length===0},get children(){var r=Ud(),o=r.firstChild;return o.$$click=()=>e()?.addLesson(0),r}})]}})}le(["click"]);var Bd=D('<button class="large-icon-button icon-trash">');function Gd(e){const[t]=pe($e),{t:n}=ve(),r=Ce(),{showConfirm:o}=Qn(),s=async()=>{try{await t().deleteCourse(e.courseIdx),r("/")}catch(i){console.error("Failed to delete course:",i)}},a=async()=>{if(e.courseIdx==null){console.warn("No course selected.");return}t.loading||o(n("confirm_delete_course"),s)};return(()=>{var i=Bd();return i.$$click=a,Z(()=>Y(i,"title",n("delete_course"))),i})()}le(["click"]);var Jd=D("<p>..."),Qd=D("<nav class=coourse-action-buttons>"),Xd=D("<article class=course-editor role=dialog aria-modal=true><header><h2>:&nbsp;<q></q></h2><h3><q>"),Yd=D("<nav class=lesson-pager>"),Zd=D("<button class=pager-link>: ");function ef(){const[e]=pe($e),{t}=ve(),n=Ce(),r=je(),{config:o}=qt();return me(()=>{console.log("editor course idx:",r.courseIdx)}),me(()=>{document.body.classList.add("editing-card"),Ge(()=>{document.body.classList.remove("editing-card")})}),A(ae,{get when(){return e()},get fallback(){return(()=>{var s=Jd(),a=s.firstChild;return j(s,()=>t("loading"),a),s})()},children:s=>{const a=s().getLessons();return(()=>{var i=Xd(),l=i.firstChild,d=l.firstChild,c=d.firstChild,h=c.nextSibling,g=d.nextSibling,y=g.firstChild;return j(d,()=>t("course"),c),j(h,A(Kn,{get value(){return s().getTitle()??""},onChange:_=>s().setTitle(_)})),j(d,A(ae,{get when(){return Number(r.courseIdx)<o.courses.length},get children(){var _=Qd();return j(_,A(Gd,{get courseIdx(){return Number(r.courseIdx)}})),_}}),null),j(y,A(Kn,{get value(){return s().getDescription()??"Description"},onChange:_=>s().setDescription(_)})),j(l,(()=>{var _=H(()=>!!(a&&a.length>1));return()=>_()&&(()=>{var v=Yd();return j(v,()=>a.map((f,m)=>(()=>{var u=Zd(),p=u.firstChild;return u.$$click=()=>n(`#lesson-${m}`),j(u,m+1,p),j(u,()=>f.title,null),Z(()=>Y(u,"aria-label",`Go to lesson ${m+1}: ${f.title}`)),u})())),v})()})(),null),j(i,A(Wd,{}),null),i})()}})}le(["click"]);var tf=D("<h1>The specified resource is unavailable.");const nf=()=>[A(Ne,{path:"/editor/:courseIdx/:lessonIdx/:cardIdx",component:Qu}),A(Ne,{path:"/editor/:courseIdx?",component:ef}),A(Ne,{path:"/course/:courseIdx",component:gu,get children(){return[A(Ne,{path:"/",component:Lu}),A(Ne,{path:":lessonIdx",component:Co}),A(Ne,{path:":lessonIdx/intro",component:Co}),A(Ne,{path:":lessonIdx/in-progress",component:rd}),A(Ne,{path:":lessonIdx/completed",component:td}),A(Ne,{path:"finished",component:Su})]}}),A(Ne,{path:"/editor",component:()=>A(br,{href:"/menu"})}),A(Ne,{path:"/course",component:()=>A(br,{href:"/menu"})}),A(Ne,{path:"/menu",component:Ed}),A(Ne,{path:"/",component:()=>A(br,{href:"/menu"})}),A(Ne,{path:"*",component:()=>tf()})],rf=ya.homepage,sf=()=>new URL(rf).pathname.replace(/\/?$/,"");var of=D('<button class="hamburger-button large-icon-button"aria-label="Toggle menu"><span>');const af=()=>{const e=Dr(),t=Ce(),[n,r]=B("/"),o=sf(),s=()=>e.pathname.replace(o,"")||"/",a=()=>/\/menu(\/|$)/.test(e.pathname),i=()=>{if(a()){const l=s(),d=n();d===l||d==="/menu"||!d?t("/"):window.history.back()}else r(s()),t("/menu")};return me(()=>{a()?document.body.classList.add("menu-shown"):document.body.classList.remove("menu-shown")}),(()=>{var l=of(),d=l.firstChild;return l.$$click=i,Z(()=>ke(d,`utf8-icon-${a()?"close":"menu"}`)),l})()};le(["click"]);var lf=D("<p>Loading..."),cf=D("<header class=header-component><aside class=header-progress><progress class=course-progress></progress></aside><div class=header-text><h1>");const uf=()=>{const{t:e}=ve(),{config:t}=qt(),n=je(),r=Je(Number(n.courseIdx||-1)),[o]=pe($e);return A(ae,{get when(){return o()},get fallback(){return lf()},children:s=>{const a=r.getTotalQuestionsAnswered(),i=s().getTotalLessonsCount();return(()=>{var l=cf(),d=l.firstChild,c=d.firstChild,h=d.nextSibling,g=h.firstChild;return c.value=a,Y(c,"max",i),j(g,()=>t.appTitle),j(h,A(af,{}),null),Z(y=>{var _=e("course_progress"),v=`${e("all_lessons")} ${a+1} / ${i}`,f=t.targetLanguage;return _!==y.e&&Y(c,"aria-label",y.e=_),v!==y.t&&Y(c,"title",y.t=v),f!==y.a&&Y(g,"lang",y.a=f),y},{e:void 0,t:void 0,a:void 0}),l})()}})};function df(){const[e]=pe($e),t=je();return me(async()=>{if(e.loading)return;const n=t.courseIdx,r=Number(n);isNaN(r)?console.error("Load course by route failure - course index was non-numeric",n):(console.log("Load course by route"),await e()?.loadCourseFromFile(r))}),null}var ff=D("<main id=main>");const hf=e=>A(hu,{root:n=>A(Ql,{get config(){return e.config},get children(){return[A(df,{}),A($i,{get children(){return A(Vl,{get children(){var r=ff();return j(r,A(uf,{}),null),j(r,()=>n.children,null),r}})}})]}}),get children(){return A(nf,{})}}),mf=async()=>{try{return await Do()}catch(e){return console.error("Error loading configuration:",e),null}},gf=async()=>{const e=await mf();if(!e)throw new Error("Failed to load config. App will not start.");await Promise.allSettled([$e(),vi(e)]);const t=A(hf,{config:e}),n=document.getElementById("root");n?(n.innerHTML="",Wa(()=>t,n)):pt(()=>t)};await gf();
